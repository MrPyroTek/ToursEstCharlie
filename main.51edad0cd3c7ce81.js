"use strict";(self.webpackChunkToursEstCharlie=self.webpackChunkToursEstCharlie||[]).push([[792],{553:(Us,jr,ft)=>{function x(n,e){return Object.is(n,e)}let Ve=null,Pe=!1,ie=1;const $t=Symbol("SIGNAL");function Ue(n){const e=Ve;return Ve=n,e}const pe={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ye(n){if(Pe)throw new Error("");if(null===Ve)return;Ve.consumerOnSignalRead(n);const e=Ve.nextProducerIndex++;Ii(Ve),e<Ve.producerNode.length&&Ve.producerNode[e]!==n&&jt(Ve)&&Bt(Ve.producerNode[e],Ve.producerIndexOfThis[e]),Ve.producerNode[e]!==n&&(Ve.producerNode[e]=n,Ve.producerIndexOfThis[e]=jt(Ve)?mn(n,Ve,e):0),Ve.producerLastReadVersion[e]=n.version}function bt(n){if((!jt(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==ie)){if(!n.producerMustRecompute(n)&&!yr(n))return n.dirty=!1,void(n.lastCleanEpoch=ie);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ie}}function Lt(n){if(void 0===n.liveConsumerNode)return;const e=Pe;Pe=!0;try{for(const t of n.liveConsumerNode)t.dirty||Kt(t)}finally{Pe=e}}function Pr(){return!1!==Ve?.consumerAllowSignalWrites}function Kt(n){n.dirty=!0,Lt(n),n.consumerMarkedDirty?.(n)}function pt(n){return n&&(n.nextProducerIndex=0),Ue(n)}function Et(n,e){if(Ue(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(jt(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Bt(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function yr(n){Ii(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(bt(t),r!==t.version))return!0}return!1}function $r(n){if(Ii(n),jt(n))for(let e=0;e<n.producerNode.length;e++)Bt(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function mn(n,e,t){if(et(n),0===n.liveConsumerNode.length&&qn(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=mn(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Bt(n,e){if(et(n),1===n.liveConsumerNode.length&&qn(n))for(let r=0;r<n.producerNode.length;r++)Bt(n.producerNode[r],n.producerIndexOfThis[r]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ii(i),i.producerIndexOfThis[r]=e}}function jt(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ii(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function et(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function qn(n){return void 0!==n.producerNode}function gn(n){const e=Object.create(wi);e.computation=n;const t=()=>{if(bt(e),ye(e),e.value===er)throw e.error;return e.value};return t[$t]=e,t}const me=Symbol("UNSET"),En=Symbol("COMPUTING"),er=Symbol("ERRORED"),wi={...pe,value:me,dirty:!0,error:null,equal:x,producerMustRecompute:n=>n.value===me||n.value===En,producerRecomputeValue(n){if(n.value===En)throw new Error("Detected cycle in computations.");const e=n.value;n.value=En;const t=pt(n);let r;try{r=n.computation()}catch(i){r=er,n.error=i}finally{Et(n,t)}e!==me&&e!==er&&r!==er&&n.equal(e,r)?n.value=e:(n.value=r,n.version++)}};let li=function ds(){throw new Error};function ic(){li()}let K=null;function we(n,e){Pr()||ic(),n.equal(n.value,e)||(n.value=e,function Gn(n){n.version++,function Be(){ie++}(),Lt(n),K?.()}(n))}const Pt={...pe,equal:x,value:void 0};function Ye(n){return"function"==typeof n}function tr(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Nn=tr(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function vr(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class zt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const o of t)o.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ye(r))try{r()}catch(o){e=o instanceof Nn?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{Bs(o)}catch(s){e=e??[],s instanceof Nn?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Nn(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Bs(e);else{if(e instanceof zt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vr(t,e)}remove(e){const{_finalizers:t}=this;t&&vr(t,e),e instanceof zt&&e._removeParent(this)}}zt.EMPTY=(()=>{const n=new zt;return n.closed=!0,n})();const oc=zt.EMPTY;function sl(n){return n instanceof zt||n&&"closed"in n&&Ye(n.remove)&&Ye(n.add)&&Ye(n.unsubscribe)}function Bs(n){Ye(n)?n():n.unsubscribe()}const Gi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},js={setTimeout(n,e,...t){const{delegate:r}=js;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=js;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function al(n){js.setTimeout(()=>{const{onUnhandledError:e}=Gi;if(!e)throw n;e(n)})}function Ti(){}const Hu=Ai("C",void 0,void 0);function Ai(n,e,t){return{kind:n,value:e,error:t}}let Zr=null;function sc(n){if(Gi.useDeprecatedSynchronousErrorHandling){const e=!Zr;if(e&&(Zr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Zr;if(Zr=null,t)throw r}}else n()}class ps extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,sl(e)&&e.add(this)):this.destination=cc}static create(e,t,r){return new Nr(e,t,r)}next(e){this.isStopped?ac(function Uo(n){return Ai("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ac(function Ci(n){return Ai("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ac(Hu,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ms=Function.prototype.bind;function gs(n,e){return ms.call(n,e)}class cl{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_s(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_s(r)}else _s(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_s(t)}}}class Nr extends ps{constructor(e,t,r){let i;if(super(),Ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Gi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gs(e.next,o),error:e.error&&gs(e.error,o),complete:e.complete&&gs(e.complete,o)}):i=e}this.destination=new cl(i)}}function _s(n){Gi.useDeprecatedSynchronousErrorHandling?function fs(n){Gi.useDeprecatedSynchronousErrorHandling&&Zr&&(Zr.errorThrown=!0,Zr.error=n)}(n):al(n)}function ac(n,e){const{onStoppedNotification:t}=Gi;t&&js.setTimeout(()=>t(n,e))}const cc={closed:!0,next:Ti,error:function Xr(n){throw n},complete:Ti},Bo="function"==typeof Symbol&&Symbol.observable||"@@observable";function Jr(n){return n}function lc(n){return 0===n.length?Jr:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let tn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const o=function F(n){return n&&n instanceof ps||function uc(n){return n&&Ye(n.next)&&Ye(n.error)&&Ye(n.complete)}(n)&&sl(n)}(t)?t:new Nr(t,r,i);return sc(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=pa(r))((i,o)=>{const s=new Nr({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Bo](){return this}pipe(...t){return lc(t)(this)}toPromise(t){return new(t=pa(t))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function pa(n){var e;return null!==(e=n??Gi.Promise)&&void 0!==e?e:Promise}const N=tr(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let V=(()=>{class n extends tn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new le(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new N}next(t){sc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){sc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){sc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:o}=this;return r||i?oc:(this.currentObservers=null,o.push(t),new zt(()=>{this.currentObservers=null,vr(o,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){const t=new tn;return t.source=this,t}}return n.create=(e,t)=>new le(e,t),n})();class le extends V{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:oc}}class z extends V{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function xe(n){return Ye(n?.lift)}function Fe(n){return e=>{if(xe(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function He(n,e,t,r,i){return new Di(n,e,t,r,i)}class Di extends ps{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ee(n,e){return Fe((t,r)=>{let i=0;t.subscribe(He(r,o=>{r.next(n.call(e,o,i++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const Tg="https://g.co/ng/security#xss";class Q extends Error{constructor(e,t){super(function zs(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function qs(n){return{toString:n}.toString()}const fl="__parameters__";function ba(n,e,t){return qs(()=>{const r=function Ku(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,l,h){const m=c.hasOwnProperty(fl)?c[fl]:Object.defineProperty(c,fl,{value:[]})[fl];for(;m.length<=h;)m.push(null);return(m[h]=m[h]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}const ln=globalThis;function qt(n){for(let e in n)if(n[e]===qt)return e;throw Error("Could not find renamed property on target object.")}function LA(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function nr(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(nr).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Dg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const lE=qt({__forward_ref__:qt});function nn(n){return n.__forward_ref__=nn,n.toString=function(){return nr(this())},n}function nt(n){return ml(n)?n():n}function ml(n){return"function"==typeof n&&n.hasOwnProperty(lE)&&n.__forward_ref__===nn}function Ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function gl(n){return _c(n,cf)||_c(n,gE)}function _c(n,e){return n.hasOwnProperty(e)?n[e]:null}function af(n){return n&&(n.hasOwnProperty(Rg)||n.hasOwnProperty(BA))?n[Rg]:null}const cf=qt({\u0275prov:qt}),Rg=qt({\u0275inj:qt}),gE=qt({ngInjectableDef:qt}),BA=qt({ngInjectorDef:qt});class ae{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function bE(n){return n&&!!n.\u0275providers}const yc=qt({\u0275cmp:qt}),Gs=qt({\u0275dir:qt}),Qu=qt({\u0275pipe:qt}),EE=qt({\u0275mod:qt}),Ws=qt({\u0275fac:qt}),Yu=qt({__NG_ELEMENT_ID__:qt}),HA=qt({__NG_ENV_ID__:qt});function ut(n){return"string"==typeof n?n:null==n?"":String(n)}function kg(n,e){throw new Q(-201,!1)}var Ct=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ct||{});let Og;function zA(){return Og}function zr(n){const e=Og;return Og=n,e}function qA(n,e,t){const r=gl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ct.Optional?null:void 0!==e?e:void kg()}const Zu={},bc="__NG_DI_FLAG__",uf="ngTempTokenPath",GA=/\n/gm,TE="__source";let Ea;function Ia(n){const e=Ea;return Ea=n,e}function CE(n,e=Ct.Default){if(void 0===Ea)throw new Q(-203,!1);return null===Ea?qA(n,void 0,e):Ea.get(n,e&Ct.Optional?null:void 0,e)}function Y(n,e=Ct.Default){return(zA()||CE)(nt(n),e)}function ce(n,e=Ct.Default){return Y(n,wa(e))}function wa(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _l(n){const e=[];for(let t=0;t<n.length;t++){const r=nt(n[t]);if(Array.isArray(r)){if(0===r.length)throw new Q(900,!1);let i,o=Ct.Default;for(let s=0;s<r.length;s++){const a=r[s],c=Lg(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}e.push(Y(i,o))}else e.push(Y(r))}return e}function Ju(n,e){return n[bc]=e,n.prototype[bc]=e,n}function Lg(n){return n[bc]}const Es=Ju(ba("Optional"),8),ed=Ju(ba("SkipSelf"),4);function yl(n,e){return n.hasOwnProperty(Ws)?n[Ws]:null}function bl(n,e){n.forEach(t=>Array.isArray(t)?bl(t,e):e(t))}function SE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function df(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function di(n,e,t){let r=Il(n,e);return r>=0?n[1|r]=t:(r=~r,function xE(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function Ug(n,e){const t=Il(n,e);if(t>=0)return n[1|t]}function Il(n,e){return function RE(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}(n,e,1)}const $o={},Vt=[],zo=new ae(""),ME=new ae("",-1),td=new ae("");class ff{get(e,t=Zu){if(t===Zu){const r=new Error(`NullInjectorError: No provider for ${nr(e)}!`);throw r.name="NullInjectorError",r}return t}}var wl=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wl||{}),qo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qo||{}),Is=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Is||{});function YA(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function nd(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{const o=i,s=t[++r];pf(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function rd(n){return 3===n||4===n||6===n}function pf(n){return 64===n.charCodeAt(0)}function id(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||mf(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function mf(n,e,t,r,i){let o=0,s=n.length;if(-1===e)s=-1;else for(;o<n.length;){const a=n[o++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=o-1;break}}}for(;o<n.length;){const a=n[o];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[o+1]=i));if(r===n[o+1])return void(n[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),null!==r&&n.splice(o++,0,r),null!==i&&n.splice(o++,0,i)}const Tl="ng-template";function Ec(n,e,t,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==YA(e[i+1].toLowerCase(),t,0))return!0}else if(od(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&"string"==typeof(o=e[i]);)if(o.toLowerCase()===t)return!0}return!1}function od(n){return 4===n.type&&n.value!==Tl}function ZA(n,e,t){return e===(4!==n.type||t?n.value:Tl)}function XA(n,e,t){let r=4;const i=n.attrs,o=null!==i?function eD(n){for(let e=0;e<n.length;e++)if(rd(n[e]))return e;return n.length}(i):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!ZA(n,c,t)||""===c&&1===e.length){if(Go(r))return!1;s=!0}}else if(8&r){if(null===i||!Ec(n,i,c,t)){if(Go(r))return!1;s=!0}}else{const l=e[++a],h=Bg(c,i,od(n),t);if(-1===h){if(Go(r))return!1;s=!0;continue}if(""!==l){let m;if(m=h>o?"":i[h+1].toLowerCase(),2&r&&l!==m){if(Go(r))return!1;s=!0}}}}else{if(!s&&!Go(r)&&!Go(c))return!1;if(s&&Go(c))continue;s=!1,r=c|1&r}}return Go(r)||s}function Go(n){return!(1&n)}function Bg(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){const s=e[i];if(s===n)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function Hg(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function jg(n,e,t=!1){for(let r=0;r<e.length;r++)if(XA(n,e[r],t))return!0;return!1}function tD(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function gf(n,e){return n?":not("+e.trim()+")":e}function nD(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if("string"==typeof s)if(2&r){const a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Go(s)&&(e+=gf(o,i),i=""),r=s,o=o||!Go(r);t++}return""!==i&&(e+=gf(o,i)),e}function hi(n){return qs(()=>{const e=PE(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qo.Emulated,styles:n.styles||Vt,_:null,schemas:n.schemas||null,tView:null,id:""};yf(t);const r=n.dependencies;return t.directiveDefs=vf(r,!1),t.pipeDefs=vf(r,!0),t.id=function qg(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(t),t})}function sd(n){return It(n)||rr(n)}function rD(n){return null!==n}function rn(n){return qs(()=>({type:n.type,bootstrap:n.bootstrap||Vt,declarations:n.declarations||Vt,imports:n.imports||Vt,exports:n.exports||Vt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _f(n,e){if(null==n)return $o;const t={};for(const r in n)if(n.hasOwnProperty(r)){const i=n[r];let o,s,a=Is.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Is.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Ne(n){return qs(()=>{const e=PE(n);return yf(e),e})}function ti(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function It(n){return n[yc]||null}function rr(n){return n[Gs]||null}function kr(n){return n[Qu]||null}function ni(n,e){const t=n[EE]||null;if(!t&&!0===e)throw new Error(`Type ${nr(n)} does not have '\u0275mod' property.`);return t}function PE(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||$o,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Vt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_f(n.inputs,e),outputs:_f(n.outputs),debugInfo:null}}function yf(n){n.features?.forEach(e=>e(n))}function vf(n,e){if(!n)return null;const t=e?kr:sd;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(rD)}function oD(...n){return{\u0275providers:ad(0,n),\u0275fromNgModule:!0}}function ad(n,...e){const t=[],r=new Set;let i;const o=s=>{t.push(s)};return bl(e,s=>{const a=s;Cl(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&NE(i,o),t}function NE(n,e){for(let t=0;t<n.length;t++){const{ngModule:r,providers:i}=n[t];cd(i,o=>{e(o,r)})}}function Cl(n,e,t,r){if(!(n=nt(n)))return!1;let i=null,o=af(n);const s=!o&&It(n);if(o||s){if(s&&!s.standalone)return!1;i=n}else{const c=n.ngModule;if(o=af(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Cl(l,e,t,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{bl(o.imports,h=>{Cl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}void 0!==l&&NE(l,e)}if(!a){const l=yl(i)||(()=>new i);e({provide:i,useFactory:l,deps:Vt},i),e({provide:td,useValue:i,multi:!0},i),e({provide:zo,useValue:()=>Y(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const l=n;cd(c,h=>{e(h,l)})}}}return i!==n&&void 0!==n.providers}function cd(n,e){for(let t of n)bE(t)&&(t=t.\u0275providers),Array.isArray(t)?cd(t,e):e(t)}const kE=qt({provide:String,useValue:qt});function ld(n){return null!==n&&"object"==typeof n&&kE in n}function Ta(n){return"function"==typeof n}const Kg=new ae(""),ud={},Qg={};let Yg;function Ef(){return void 0===Yg&&(Yg=new ff),Yg}class xi{}class Ca extends xi{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xg(e,s=>this.processProvider(s)),this.records.set(ME,Qs(void 0,this)),i.has("environment")&&this.records.set(xi,Qs(void 0,this));const o=this.records.get(Kg);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(td,Vt,Ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ue(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=Ia(this),r=zr(void 0);try{return e()}finally{Ia(t),zr(r)}}get(e,t=Zu,r=Ct.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(HA))return e[HA](this);r=wa(r);const o=Ia(this),s=zr(void 0);try{if(!(r&Ct.SkipSelf)){let c=this.records.get(e);if(void 0===c){const l=function lD(n){return"function"==typeof n||"object"==typeof n&&n instanceof ae}(e)&&gl(e);c=l&&this.injectableDefInScope(l)?Qs(Zg(e),ud):null,this.records.set(e,c)}if(null!=c)return this.hydrate(e,c)}return(r&Ct.Self?Ef():this.parent).get(e,t=r&Ct.Optional&&t===Zu?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[uf]=a[uf]||[]).unshift(nr(e)),o)throw a;return function AE(n,e,t,r){const i=n[uf];throw e[TE]&&i.unshift(e[TE]),n.message=function Vg(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=nr(e);if(Array.isArray(e))i=e.map(nr).join(" -> ");else if("object"==typeof e){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):nr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(GA,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[uf]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{zr(s),Ia(o)}}resolveInjectorInitializers(){const e=Ue(null),t=Ia(this),r=zr(void 0);try{const o=this.get(zo,Vt,Ct.Self);for(const s of o)s()}finally{Ia(t),zr(r),Ue(e)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(nr(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){let t=Ta(e=nt(e))?e:nt(e&&e.provide);const r=function LE(n){return ld(n)?Qs(void 0,n.useValue):Qs(VE(n),ud)}(e);if(!Ta(e)&&!0===e.multi){let i=this.records.get(t);i||(i=Qs(void 0,ud,!0),i.factory=()=>_l(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){const r=Ue(null);try{return t.value===ud&&(t.value=Qg,t.value=t.factory()),"object"==typeof t.value&&t.value&&function cD(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const t=nt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Zg(n){const e=gl(n),t=null!==e?e.factory:yl(n);if(null!==t)return t;if(n instanceof ae)throw new Q(204,!1);if(n instanceof Function)return function sD(n){if(n.length>0)throw new Q(204,!1);const t=function mE(n){return n&&(n[cf]||n[gE])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new Q(204,!1)}function VE(n,e,t){let r;if(Ta(n)){const i=nt(n);return yl(i)||Zg(i)}if(ld(n))r=()=>nt(n.useValue);else if(function Wg(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(..._l(n.deps||[]));else if(function OE(n){return!(!n||!n.useExisting)}(n))r=()=>Y(nt(n.useExisting));else{const i=nt(n&&(n.useClass||n.provide));if(!function aD(n){return!!n.deps}(n))return yl(i)||Zg(i);r=()=>new i(..._l(n.deps))}return r}function Qs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Xg(n,e){for(const t of n)Array.isArray(t)?Xg(t,e):t&&bE(t)?Xg(t.\u0275providers,e):e(t)}function ws(n,e){n instanceof Ca&&n.assertNotDestroyed();const r=Ia(n),i=zr(void 0);try{return e()}finally{Ia(r),zr(i)}}function UE(){return void 0!==zA()||null!=function WA(){return Ea}()}function If(n){if(!UE())throw new Q(-203,!1)}const wn=0,be=1,Qe=2,ir=3,fo=4,Ir=5,fi=6,fd=7,on=8,or=9,Ki=10,rt=11,Sl=12,HE=13,xl=14,Tn=15,Ic=16,Rl=17,Ts=18,Ml=19,_D=20,Aa=21,Cs=22,po=23,$e=25,pd=1,mo=7,Pl=9,On=10;var Tf=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Tf||{});function Or(n){return Array.isArray(n)&&"object"==typeof n[pd]}function Fr(n){return Array.isArray(n)&&!0===n[pd]}function e_(n){return!!(4&n.flags)}function wc(n){return n.componentOffset>-1}function Cf(n){return!(1&~n.flags)}function Wo(n){return!!n.template}function gd(n){return!!(512&n[Qe])}class GE{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Df(n,e,t,r){null!==e?e.applyValueToInputSignal(e,r):n[t]=r}function pi(){return s_}function s_(n){return n.type.prototype.ngOnChanges&&(n.setInput=a_),vD}function vD(){const n=Ri(this),e=n?.current;if(e){const t=n.previous;if(t===$o)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function a_(n,e,t,r,i){const o=this.declaredInputs[r],s=Ri(n)||function yd(n,e){return n[WE]=e}(n,{previous:$o,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new GE(l&&l.currentValue,t,c===$o),Df(n,e,i,t)}pi.ngInherit=!0;const WE="__ngSimpleChanges__";function Ri(n){return n[WE]||null}const go=function(n,e,t){};function kt(n){for(;Array.isArray(n);)n=n[wn];return n}function _o(n,e){return kt(e[n])}function ri(n,e){return kt(e[n.index])}function vd(n,e){return n.data[e]}function Tc(n,e){return n[e]}function Mi(n,e){const t=e[n];return Or(t)?t:t[wn]}function bd(n){return!(128&~n[Qe])}function yo(n,e){return null==e?null:n[e]}function As(n){n[Rl]=0}function Nl(n){1024&n[Qe]||(n[Qe]|=1024,bd(n)&&Ol(n))}function kl(n){return!!(9216&n[Qe]||n[po]?.dirty)}function d_(n){n[Ki].changeDetectionScheduler?.notify(7),64&n[Qe]&&(n[Qe]|=1024),kl(n)&&Ol(n)}function Ol(n){n[Ki].changeDetectionScheduler?.notify(0);let e=Ys(n);for(;null!==e&&!(8192&e[Qe])&&(e[Qe]|=8192,bd(e));)e=Ys(e)}function Rf(n,e){if(!(256&~n[Qe]))throw new Q(911,!1);null===n[Aa]&&(n[Aa]=[]),n[Aa].push(e)}function Ys(n){const e=n[ir];return Fr(e)?e[ir]:e}const ot={lFrame:zF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let d=!1;function j(){return ot.bindingsEnabled}function se(){return null!==ot.skipHydrationRootTNode}function oe(){return ot.lFrame.lView}function _t(){return ot.lFrame.tView}function Fl(n){return ot.lFrame.contextLView=n,n[on]}function Ed(n){return ot.lFrame.contextLView=null,n}function Yt(){let n=Mf();for(;null!==n&&64===n.type;)n=n.parent;return n}function Mf(){return ot.lFrame.currentTNode}function vo(n,e){const t=ot.lFrame;t.currentTNode=n,t.isParent=e}function Id(){return ot.lFrame.isParent}function Pf(){ot.lFrame.isParent=!1}function VF(){return d}function UF(n){d=n}function Qi(){const n=ot.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Zs(){return ot.lFrame.bindingIndex++}function Ac(n){const e=ot.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function S7(n,e){const t=ot.lFrame;t.bindingIndex=t.bindingRootIndex=n,ID(e)}function ID(n){ot.lFrame.currentDirectiveIndex=n}function TD(){return ot.lFrame.currentQueryIndex}function ZE(n){ot.lFrame.currentQueryIndex=n}function R7(n){const e=n[be];return 2===e.type?e.declTNode:1===e.type?n[Ir]:null}function HF(n,e,t){if(t&Ct.SkipSelf){let i=e,o=n;for(;!(i=i.parent,null!==i||t&Ct.Host||(i=R7(o),null===i||(o=o[xl],10&i.type))););if(null===i)return!1;e=i,n=o}const r=ot.lFrame=$F();return r.currentTNode=e,r.lView=n,!0}function CD(n){const e=$F(),t=n[be];ot.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $F(){const n=ot.lFrame,e=null===n?null:n.child;return null===e?zF(n):e}function zF(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function qF(){const n=ot.lFrame;return ot.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const GF=qF;function AD(){const n=qF();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function mi(){return ot.lFrame.selectedIndex}function wd(n){ot.lFrame.selectedIndex=n}function Cn(){const n=ot.lFrame;return vd(n.tView,n.selectedIndex)}let KF=!0;function f_(){return KF}function Da(n){KF=n}function XE(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function JE(n,e,t){QF(n,e,3,t)}function eI(n,e,t,r){(3&n[Qe])===t&&QF(n,e,t,r)}function DD(n,e){let t=n[Qe];(3&t)===e&&(t&=16383,t+=1,n[Qe]=t)}function QF(n,e,t,r){const o=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&n[Rl]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(n[Rl]+=65536),(a<o||-1==o)&&(L7(n,t,e,c),n[Rl]=(4294901760&n[Rl])+c+2),c++}function YF(n,e){go(4,n,e);const t=Ue(null);try{e.call(n)}finally{Ue(t),go(5,n,e)}}function L7(n,e,t,r){const i=t[r]<0,o=t[r+1],a=n[i?-t[r]:t[r]];i?n[Qe]>>14<n[Rl]>>16&&(3&n[Qe])===e&&(n[Qe]+=16384,YF(a,o)):YF(a,o)}const Nf=-1;class p_{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}const xD={};class Td{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=wa(r);const i=this.injector.get(e,xD,r);return i!==xD||t===xD?i:this.parentInjector.get(e,t,r)}}function RD(n){return n!==Nf}function m_(n){return 32767&n}function g_(n,e){let t=function j7(n){return n>>16}(n),r=e;for(;t>0;)r=r[xl],t--;return r}let MD=!0;function tI(n){const e=MD;return MD=n,e}const XF=255,JF=5;let $7=0;const Sa={};function nI(n,e){const t=eL(n,e);if(-1!==t)return t;const r=e[be];r.firstCreatePass&&(n.injectorIndex=e.length,PD(r.data,n),PD(e,null),PD(r.blueprint,null));const i=rI(n,e),o=n.injectorIndex;if(RD(i)){const s=m_(i),a=g_(i,e),c=a[be].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function PD(n,e){n.push(0,0,0,0,0,0,0,0,e)}function eL(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function rI(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=aL(i),null===r)return Nf;if(t++,i=i[xl],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return Nf}function ND(n,e,t){!function z7(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Yu)&&(r=t[Yu]),null==r&&(r=t[Yu]=$7++);const i=r&XF;e.data[n+(i>>JF)]|=1<<i}(n,e,t)}function tL(n,e,t){if(t&Ct.Optional||void 0!==n)return n;kg()}function nL(n,e,t,r){if(t&Ct.Optional&&void 0===r&&(r=null),!(t&(Ct.Self|Ct.Host))){const i=n[or],o=zr(void 0);try{return i?i.get(e,r,t&Ct.Optional):qA(e,r,t&Ct.Optional)}finally{zr(o)}}return tL(r,0,t)}function rL(n,e,t,r=Ct.Default,i){if(null!==n){if(2048&e[Qe]&&!(r&Ct.Self)){const s=function Q7(n,e,t,r,i){let o=n,s=e;for(;null!==o&&null!==s&&2048&s[Qe]&&!(512&s[Qe]);){const a=iL(o,s,t,r|Ct.Self,Sa);if(a!==Sa)return a;let c=o.parent;if(!c){const l=s[_D];if(l){const h=l.get(t,Sa,r);if(h!==Sa)return h}c=aL(s),s=s[xl]}o=c}return i}(n,e,t,r,Sa);if(s!==Sa)return s}const o=iL(n,e,t,r,Sa);if(o!==Sa)return o}return nL(e,t,r,i)}function iL(n,e,t,r,i){const o=function W7(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Yu)?n[Yu]:void 0;return"number"==typeof e?e>=0?e&XF:K7:e}(t);if("function"==typeof o){if(!HF(e,n,r))return r&Ct.Host?tL(i,0,r):nL(e,t,r,i);try{let s;if(s=o(r),null!=s||r&Ct.Optional)return s;kg()}finally{GF()}}else if("number"==typeof o){let s=null,a=eL(n,e),c=Nf,l=r&Ct.Host?e[Tn][Ir]:null;for((-1===a||r&Ct.SkipSelf)&&(c=-1===a?rI(n,e):e[a+8],c!==Nf&&sL(r,!1)?(s=e[be],a=m_(c),e=g_(c,e)):a=-1);-1!==a;){const h=e[be];if(oL(o,a,h.data)){const m=G7(a,e,t,s,r,l);if(m!==Sa)return m}c=e[a+8],c!==Nf&&sL(r,e[be].data[a+8]===l)&&oL(o,a,e)?(s=h,a=m_(c),e=g_(c,e)):a=-1}}return i}function G7(n,e,t,r,i,o){const s=e[be],a=s.data[n+8],h=iI(a,s,t,null==r?wc(a)&&MD:r!=s&&!!(3&a.type),i&Ct.Host&&o===a);return null!==h?Cd(e,s,h,a):Sa}function iI(n,e,t,r,i){const o=n.providerIndexes,s=e.data,a=1048575&o,c=n.directiveStart,h=o>>20,_=i?a+h:n.directiveEnd;for(let y=r?a:a+h;y<_;y++){const E=s[y];if(y<c&&t===E||y>=c&&E.type===t)return y}if(i){const y=s[c];if(y&&Wo(y)&&y.type===t)return c}return null}function Cd(n,e,t,r){let i=n[t];const o=e.data;if(function V7(n){return n instanceof p_}(i)){const s=i;s.resolving&&function $A(n,e){throw e&&e.join(" > "),new Q(-200,n)}(function Gt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ut(n)}(o[t]));const a=tI(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?zr(s.injectImpl):null;HF(n,r,Ct.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&function F7(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const s=s_(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}(t,o[t],e)}finally{null!==l&&zr(l),tI(a),s.resolving=!1,GF()}}return i}function oL(n,e,t){return!!(t[e+(n>>JF)]&1<<n)}function sL(n,e){return!(n&Ct.Self||n&Ct.Host&&e)}class qr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return rL(this._tNode,this._lView,e,wa(r),t)}}function K7(){return new qr(Yt(),oe())}function ii(n){return qs(()=>{const e=n.prototype.constructor,t=e[Ws]||kD(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const o=i[Ws]||kD(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function kD(n){return ml(n)?()=>{const e=kD(nt(n));return e&&e()}:yl(n)}function aL(n){const e=n[be],t=e.type;return 2===t?e.declTNode:1===t?n[Ir]:null}function hL(n,e=null,t=null,r){const i=fL(n,e,t,r);return i.resolveInjectorInitializers(),i}function fL(n,e=null,t=null,r,i=new Set){const o=[t||Vt,oD(n)];return r=r||("object"==typeof n?void 0:nr(n)),new Ca(o,e||Ef(),r||null,i)}class dr{static#e=this.THROW_IF_NOT_FOUND=Zu;static#t=this.NULL=new ff;static create(e,t){if(Array.isArray(e))return hL({name:""},t,e,"");{const r=e.name??"";return hL({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ie({token:dr,providedIn:"any",factory:()=>Y(ME)});static#r=this.__NG_ELEMENT_ID__=-1}new ae("").__NG_ELEMENT_ID__=n=>{const e=Yt();if(null===e)throw new Q(204,!1);if(2&e.type)return e.value;if(n&Ct.Optional)return null;throw new Q(204,!1)};function FD(n){return n.ngOriginalError}let y_=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=oY;static#t=this.__NG_ENV_ID__=t=>t}return n})();class iY extends y_{constructor(e){super(),this._lView=e}onDestroy(e){return Rf(this._lView,e),()=>function h_(n,e){if(null===n[Aa])return;const t=n[Aa].indexOf(e);-1!==t&&n[Aa].splice(t,1)}(this._lView,e)}}function oY(){return new iY(oe())}let Ad=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new z(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=Ie({token:n,providedIn:"root",factory:()=>new n})}return n})();const sr=class sY extends V{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,UE()&&(this.destroyRef=ce(y_,{optional:!0})??void 0,this.pendingTasks=ce(Ad,{optional:!0})??void 0)}emit(e){const t=Ue(null);try{super.next(e)}finally{Ue(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:i,error:o,complete:s});return e instanceof zt&&e.add(a),a}wrapInTimeout(e){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(t),void 0!==r&&this.pendingTasks?.remove(r)})}}};function sI(...n){}function mL(n){let e,t;function r(){n=sI;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function gL(n){return queueMicrotask(()=>n()),()=>{n=sI}}class it{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sr(!1),this.onMicrotaskEmpty=new sr(!1),this.onStable=new sr(!1),this.onError=new sr(!1),typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.callbackScheduled=!1,function lY(n){const e=()=>{!function cY(n){n.isCheckStableRunning||n.callbackScheduled||(n.callbackScheduled=!0,Zone.root.run(()=>{mL(()=>{n.callbackScheduled=!1,VD(n),n.isCheckStableRunning=!0,LD(n),n.isCheckStableRunning=!1})}),VD(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,o,s,a)=>{if(function uY(n){return vL(n,"__ignore_ng_zone__")}(a))return t.invokeTask(i,o,s,a);try{return _L(n),t.invokeTask(i,o,s,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||n.shouldCoalesceRunChangeDetection)&&e(),yL(n)}},onInvoke:(t,r,i,o,s,a,c)=>{try{return _L(n),t.invoke(i,o,s,a,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!function dY(n){return vL(n,"__scheduler_tick__")}(a)&&e(),yL(n)}},onHasTask:(t,r,i,o)=>{t.hasTask(i,o),r===i&&("microTask"==o.change?(n._hasPendingMicrotasks=o.microTask,VD(n),LD(n)):"macroTask"==o.change&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,r,i,o)=>(t.handleError(i,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!it.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(it.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,aY,sI,sI);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const aY={};function LD(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function VD(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&!0===n.callbackScheduled)}function _L(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yL(n){n._nesting--,LD(n)}class UD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sr,this.onMicrotaskEmpty=new sr,this.onStable=new sr,this.onError=new sr}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}function vL(n,e){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0]?.data?.[e]}class Qo{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&FD(e);for(;t&&FD(t);)t=FD(t);return t||null}}const fY=new ae("",{providedIn:"root",factory:()=>{const n=ce(it),e=ce(Qo);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function pY(){return Ff(Yt(),oe())}function Ff(n,e){return new hr(ri(n,e))}let hr=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=pY}return n})();function EL(n){return n instanceof hr?n.nativeElement:n}function mY(){return this._results[Symbol.iterator]()}class v_{static#e=Symbol.iterator;get changes(){return this._changes??=new sr}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const t=v_.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=mY)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;const r=function Si(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function vl(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function aI(n){return!(128&~n.flags)}const BD=new Map;let _Y=0;const lI="__ngContext__";function Ni(n,e){Or(e)?(n[lI]=e[Ml],function vY(n){BD.set(n[Ml],n)}(e)):n[lI]=e}function ML(n){return NL(n[Sl])}function PL(n){return NL(n[fo])}function NL(n){for(;null!==n&&!Fr(n);)n=n[fo];return n}let HD;const Vf=new ae("",{providedIn:"root",factory:()=>LY}),LY="ng",jL=new ae(""),Yo=new ae("",{providedIn:"platform",factory:()=>"unknown"}),Uf=new ae(""),$D=new ae("",{providedIn:"root",factory:()=>function Vl(){if(void 0!==HD)return HD;if(typeof document<"u")return document;throw new Q(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let HL=()=>null;function YD(n,e,t=!1){return HL(n,e,t)}const YL=new ae("",{providedIn:"root",factory:()=>!1});let vI;function tV(n){return function nS(){if(void 0===vI&&(vI=null,ln.trustedTypes))try{vI=ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return vI}()?.createScriptURL(n)||n}class Dd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Tg})`}}function Zo(n){return n instanceof Dd?n.changingThisBreaksApplicationSecurity:n}function xa(n,e){const t=function nZ(n){return n instanceof Dd&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Tg})`)}return t===e}const dZ=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var gi=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(gi||{});function S_(n){const e=x_();return e?e.sanitize(gi.URL,n)||"":xa(n,"URL")?Zo(n):function bI(n){return(n=String(n)).match(dZ)?n:"unsafe:"+n}(ut(n))}function dV(n){const e=x_();if(e)return tV(e.sanitize(gi.RESOURCE_URL,n)||"");if(xa(n,"ResourceURL"))return tV(Zo(n));throw new Q(904,!1)}function x_(){const n=oe();return n&&n[Ki].sanitizer}function Xo(n){return n instanceof Function?n():n}function Eo(n){return"browser"===(n??ce(dr)).get(Yo)}var Ul=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ul||{});let cS;function lS(n,e){return cS(n,e)}function zf(n,e,t,r,i){if(null!=r){let o,s=!1;Fr(r)?o=r:Or(r)&&(s=!0,r=r[wn]);const a=kt(r);0===n&&null!==t?null==i?CV(e,t,a):Sd(e,t,a,i||null,!0):1===n&&null!==t?Sd(e,t,a,i||null,!0):2===n?function M_(n,e,t){const r=AI(n,e);r&&function GZ(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,s):3===n&&e.destroyNode(a),null!=o&&function QZ(n,e,t,r,i){const o=t[mo];o!==kt(t)&&zf(e,n,r,o,i);for(let a=On;a<t.length;a++){const c=t[a];SI(c[be],c,n,e,r,o)}}(e,n,o,t,i)}}function TI(n,e,t){return n.createElement(e,t)}function IV(n,e){e[Ki].changeDetectionScheduler?.notify(8),SI(n,e,e[rt],2,null,null)}function wV(n,e){const t=n[Pl],r=e[ir];(Or(r)||e[Tn]!==r[ir][Tn])&&(n[Qe]|=Tf.HasTransplantedViews),null===t?n[Pl]=[e]:t.push(e)}function hS(n,e){const t=n[Pl],r=t.indexOf(e);t.splice(r,1)}function R_(n,e){if(n.length<=On)return;const t=On+e,r=n[t];if(r){const i=r[Ic];null!==i&&i!==n&&hS(i,r),e>0&&(n[t-1][fo]=r[fo]);const o=df(n,On+e);!function BZ(n,e){IV(n,e),e[wn]=null,e[Ir]=null}(r[be],r);const s=o[Ts];null!==s&&s.detachView(o[be]),r[ir]=null,r[fo]=null,r[Qe]&=-129}return r}function CI(n,e){if(!(256&e[Qe])){const t=e[rt];t.destroyNode&&SI(n,e,t,3,null,null),function HZ(n){let e=n[Sl];if(!e)return fS(n[be],n);for(;e;){let t=null;if(Or(e))t=e[Sl];else{const r=e[On];r&&(t=r)}if(!t){for(;e&&!e[fo]&&e!==n;)Or(e)&&fS(e[be],e),e=e[ir];null===e&&(e=n),Or(e)&&fS(e[be],e),t=e&&e[fo]}e=t}}(e)}}function fS(n,e){if(256&e[Qe])return;const t=Ue(null);try{e[Qe]&=-129,e[Qe]|=256,e[po]&&$r(e[po]),function qZ(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof p_)){const o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];go(4,a,c);try{c.call(a)}finally{go(5,a,c)}}else{go(4,i,o);try{o.call(i)}finally{go(5,i,o)}}}}}(n,e),function zZ(n,e){const t=n.cleanup,r=e[fd];if(null!==t)for(let o=0;o<t.length-1;o+=2)if("string"==typeof t[o]){const s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else t[o].call(r[t[o+1]]);null!==r&&(e[fd]=null);const i=e[Aa];if(null!==i){e[Aa]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(n,e),1===e[be].type&&e[rt].destroy();const r=e[Ic];if(null!==r&&Fr(e[ir])){r!==e[ir]&&hS(r,e);const i=e[Ts];null!==i&&i.detachView(n)}!function bY(n){BD.delete(n[Ml])}(e)}finally{Ue(t)}}function pS(n,e,t){return function TV(n,e,t){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return t[wn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=n.data[r.directiveStart+i];if(o===qo.None||o===qo.Emulated)return null}return ri(r,t)}}(n,e.parent,t)}function Sd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function CV(n,e,t){n.appendChild(e,t)}function AV(n,e,t,r,i){null!==r?Sd(n,e,t,r,i):CV(n,e,t)}function AI(n,e){return n.parentNode(e)}function DV(n,e,t){return xV(n,e,t)}let mS,xV=function SV(n,e,t){return 40&n.type?ri(n,t):null};function DI(n,e,t,r){const i=pS(n,r,e),o=e[rt],a=DV(r.parent||e[Ir],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)AV(o,i,t[c],a,!1);else AV(o,i,t,a,!1);void 0!==mS&&mS(o,r,e,t,i)}function xd(n,e){if(null!==e){const t=e.type;if(3&t)return ri(e,n);if(4&t)return gS(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return xd(n,r);{const i=n[e.index];return Fr(i)?gS(-1,i):kt(i)}}if(128&t)return xd(n,e.next);if(32&t)return lS(e,n)()||kt(n[e.index]);{const r=MV(n,e);return null!==r?Array.isArray(r)?r[0]:xd(Ys(n[Tn]),r):xd(n,e.next)}}return null}function MV(n,e){return null!==e?n[Tn][Ir].projection[e.projection]:null}function gS(n,e){const t=On+n+1;if(t<e.length){const r=e[t],i=r[be].firstChild;if(null!==i)return xd(r,i)}return e[mo]}function _S(n,e,t,r,i,o,s){for(;null!=t;){if(128===t.type){t=t.next;continue}const a=r[t.index],c=t.type;if(s&&0===e&&(a&&Ni(kt(a),r),t.flags|=2),32&~t.flags)if(8&c)_S(n,e,t.child,r,i,o,!1),zf(e,n,i,a,o);else if(32&c){const l=lS(t,r);let h;for(;h=l();)zf(e,n,i,h,o);zf(e,n,i,a,o)}else 16&c?NV(n,e,r,t,i,o):zf(e,n,i,a,o);t=s?t.projectionNext:t.next}}function SI(n,e,t,r,i,o){_S(t,r,n.firstChild,e,i,o,!1)}function NV(n,e,t,r,i,o){const s=t[Tn],c=s[Ir].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)zf(e,n,i,c[l],o);else{let l=c;const h=s[ir];aI(r)&&(l.flags|=128),_S(n,e,l,h,i,o,!0)}}function kV(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OV(n,e,t){const{mergedAttrs:r,classes:i,styles:o}=t;null!==r&&nd(n,e,r),null!==i&&kV(n,e,i),null!==o&&function ZZ(n,e,t){n.setAttribute(e,"style",t)}(n,e,o)}const gt={};function Dt(n=1){FV(_t(),oe(),mi()+n,!1)}function FV(n,e,t,r){if(!r)if(3&~e[Qe]){const o=n.preOrderHooks;null!==o&&eI(e,o,0,t)}else{const o=n.preOrderCheckHooks;null!==o&&JE(e,o,t)}wd(t)}function ee(n,e=Ct.Default){const t=oe();return null===t?Y(n,e):rL(Yt(),t,nt(n),e)}function yS(){throw new Error("invalid")}function LV(n,e,t,r,i,o){const s=Ue(null);try{let a=null;i&Is.SignalBased&&(a=e[r][$t]),null!==a&&void 0!==a.transformFn&&(o=a.transformFn(o)),i&Is.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),null!==n.setInput?n.setInput(e,a,o,t,r):Df(e,a,r,o)}finally{Ue(s)}}function xI(n,e,t,r,i,o,s,a,c,l,h){const m=e.blueprint.slice();return m[wn]=i,m[Qe]=204|r,(null!==l||n&&2048&n[Qe])&&(m[Qe]|=2048),As(m),m[ir]=m[xl]=n,m[on]=t,m[Ki]=s||n&&n[Ki],m[rt]=a||n&&n[rt],m[or]=c||n&&n[or]||null,m[Ir]=o,m[Ml]=function yY(){return _Y++}(),m[fi]=h,m[_D]=l,m[Tn]=2==e.type?n[Tn]:m,m}function Rd(n,e,t,r,i){let o=n.data[e];if(null===o)o=function vS(n,e,t,r,i){const o=Mf(),s=Id(),c=n.data[e]=function oX(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return se()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(n,e,t,r,i),function D7(){return ot.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=t,o.value=r,o.attrs=i;const s=function Ll(){const n=ot.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return vo(o,!0),o}function P_(n,e,t,r){if(0===t)return-1;const i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function VV(n,e,t,r,i){const o=mi(),s=2&r;try{wd(-1),s&&e.length>$e&&FV(n,e,$e,!1),go(s?2:0,i),t(r,i)}finally{wd(o),go(s?3:1,i)}}function bS(n,e,t){if(e_(e)){const r=Ue(null);try{const o=e.directiveEnd;for(let s=e.directiveStart;s<o;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}finally{Ue(r)}}}function ES(n,e,t){j()&&(function hX(n,e,t,r){const i=t.directiveStart,o=t.directiveEnd;wc(t)&&function vX(n,e,t){const r=ri(e,n),i=UV(t);let s=16;t.signals?s=4096:t.onPush&&(s=64);const a=RI(n,xI(n,i,null,s,r,e,null,n[Ki].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||nI(t,e),Ni(r,e);const s=t.initialInputs;for(let a=i;a<o;a++){const c=n.data[a],l=Cd(e,n,a,t);Ni(l,e),null!==s&&bX(0,a-i,l,c,0,s),Wo(c)&&(Mi(t.index,e)[on]=Cd(e,n,a,t))}}(n,e,t,ri(t,e)),!(64&~t.flags)&&zV(n,e,t))}function IS(n,e,t=ri){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?t(e,n):n[s];n[i++]=a}}}function UV(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=wS(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function wS(n,e,t,r,i,o,s,a,c,l,h){const m=$e+r,_=m+i,y=function JZ(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:gt);return t}(m,_),E="function"==typeof l?l():l;return y[be]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:E,incompleteFirstPass:!1,ssrId:h}}let BV=()=>null;function jV(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;const s=e[o];if(void 0===s)continue;r??={};let a,c=Is.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(null!==i){if(!i.hasOwnProperty(o))continue;l=i[o]}0===n?HV(r,t,l,a,c):HV(r,t,l,a)}return r}function HV(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],void 0!==i&&o.push(i)}function Io(n,e,t,r,i,o,s,a){const c=ri(e,t);let h,l=e.inputs;!a&&null!=l&&(h=l[r])?(SS(n,t,h,r,i),wc(e)&&function cX(n,e){const t=Mi(e,n);16&t[Qe]||(t[Qe]|=64)}(t,e.index)):3&e.type&&(r=function aX(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=s?s(i,e.value||"",r):i,o.setProperty(c,r,i))}function TS(n,e,t,r){if(j()){const i=null===r?null:{"":-1},o=function pX(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let o=0;o<t.length;o++){const s=t[o];if(jg(e,s.selectors,!1))if(r||(r=[]),Wo(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),CS(n,e,a.length)}else r.unshift(s),CS(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(n,t);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&$V(n,e,t,s,i,a),i&&function mX(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const o=t[e[i+1]];if(null==o)throw new Q(-301,!1);r.push(e[i],o)}}}(t,r,i)}t.mergedAttrs=id(t.mergedAttrs,t.attrs)}function $V(n,e,t,r,i,o){for(let l=0;l<r.length;l++)ND(nI(t,e),n,r[l].type);!function _X(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let l=0;l<r.length;l++){const h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,c=P_(n,e,r.length,null);for(let l=0;l<r.length;l++){const h=r[l];t.mergedAttrs=id(t.mergedAttrs,h.hostAttrs),yX(n,t,e,c,h),gX(c,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const m=h.type.prototype;!s&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}!function sX(n,e,t){const i=e.directiveEnd,o=n.data,s=e.attrs,a=[];let c=null,l=null;for(let h=e.directiveStart;h<i;h++){const m=o[h],_=t?t.get(m):null,E=_?_.outputs:null;c=jV(0,m.inputs,h,c,_?_.inputs:null),l=jV(1,m.outputs,h,l,E);const T=null===c||null===s||od(e)?null:EX(c,h,s);a.push(T)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}(n,t,o)}function zV(n,e,t){const r=t.directiveStart,i=t.directiveEnd,o=t.index,s=function x7(){return ot.lFrame.currentDirectiveIndex}();try{wd(o);for(let a=r;a<i;a++){const c=n.data[a],l=e[a];ID(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&fX(c,l)}}finally{wd(-1),ID(s)}}function fX(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function CS(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function gX(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Wo(e)&&(t[""]=n)}}function yX(n,e,t,r,i){n.data[r]=i;const o=i.factory||(i.factory=yl(i.type)),s=new p_(o,Wo(i),ee);n.blueprint[r]=s,t[r]=s,function uX(n,e,t,r,i){const o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;null===s&&(s=n.hostBindingOpCodes=[]);const a=~e.index;(function dX(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(s)!=a&&s.push(a),s.push(t,r,o)}}(n,e,r,P_(n,t,i.hostVars,gt),i)}function Ra(n,e,t,r,i,o){const s=ri(n,e);!function AS(n,e,t,r,i,o,s){if(null==o)n.removeAttribute(e,i,t);else{const a=null==s?ut(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}(e[rt],s,o,n.value,t,r,i)}function bX(n,e,t,r,i,o){const s=o[e];if(null!==s)for(let a=0;a<s.length;)LV(r,t,s[a++],s[a++],s[a++],s[a++])}function EX(n,e,t){let r=null,i=0;for(;i<t.length;){const o=t[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(n.hasOwnProperty(o)){null===r&&(r=[]);const s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function qV(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function GV(n,e){const t=n.contentQueries;if(null!==t){const r=Ue(null);try{for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const a=n.data[s];ZE(t[i]),a.contentQueries(2,e[s],s)}}}finally{Ue(r)}}}function RI(n,e){return n[Sl]?n[HE][fo]=e:n[Sl]=e,n[HE]=e,e}function DS(n,e,t){ZE(0);const r=Ue(null);try{e(n,t)}finally{Ue(r)}}function WV(n){return n[fd]??=[]}function KV(n){return n.cleanup??=[]}function MI(n,e){const t=n[or],r=t?t.get(Qo,null):null;r&&r.handleError(e)}function SS(n,e,t,r,i){for(let o=0;o<t.length;){const s=t[o++],a=t[o++],c=t[o++];LV(n.data[s],e[s],r,a,c,i)}}function IX(n,e){const t=Mi(e,n),r=t[be];!function wX(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[wn];null!==i&&null===t[fi]&&(t[fi]=YD(i,t[or])),xS(r,t,t[on])}function xS(n,e,t){CD(e);try{const r=n.viewQuery;null!==r&&DS(1,r,t);const i=n.template;null!==i&&VV(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Ts]?.finishViewCreation(n),n.staticContentQueries&&GV(n,e),n.staticViewQueries&&DS(2,n.viewQuery,t);const o=n.components;null!==o&&function TX(n,e){for(let t=0;t<e.length;t++)IX(n,e[t])}(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Qe]&=-5,AD()}}function qf(n,e,t,r){const i=Ue(null);try{const o=e.tView,c=xI(n,o,t,4096&n[Qe]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[Ic]=n[e.index];const h=n[Ts];return null!==h&&(c[Ts]=h.createEmbeddedView(o)),xS(o,c,t),c}finally{Ue(i)}}function Md(n,e){return!e||null===e.firstChild||aI(n)}function Gf(n,e,t,r=!0){const i=e[be];if(function $Z(n,e,t,r){const i=On+r,o=t.length;r>0&&(t[i-1][fo]=e),r<o-On?(e[fo]=t[i],SE(t,On+r,e)):(t.push(e),e[fo]=null),e[ir]=t;const s=e[Ic];null!==s&&t!==s&&wV(s,e);const a=e[Ts];null!==a&&a.insertView(n),d_(e),e[Qe]|=128}(i,e,n,t),r){const s=gS(t,n),a=e[rt],c=AI(a,n[mo]);null!==c&&function jZ(n,e,t,r,i,o){r[wn]=i,r[Ir]=e,SI(n,r,t,1,i,o)}(i,n[Ir],a,e,c,s)}const o=e[fi];null!==o&&null!==o.firstChild&&(o.firstChild=null)}function N_(n,e,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const o=e[t.index];null!==o&&r.push(kt(o)),Fr(o)&&ZV(o,r);const s=t.type;if(8&s)N_(n,e,t.child,r);else if(32&s){const a=lS(t,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=MV(e,t);if(Array.isArray(a))r.push(...a);else{const c=Ys(e[Tn]);N_(c[be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function ZV(n,e){for(let t=On;t<n.length;t++){const r=n[t],i=r[be].firstChild;null!==i&&N_(r[be],r,i,e)}n[mo]!==n[wn]&&e.push(n[mo])}let XV=[];const SX={...pe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ol(n.lView)},consumerOnSignalRead(){this.lView[po]=this}},RX={...pe,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ys(n.lView);for(;e&&!JV(e[be]);)e=Ys(e);e&&Nl(e)},consumerOnSignalRead(){this.lView[po]=this}};function JV(n){return 2!==n.type}const MX=100;function PI(n,e=!0,t=0){const r=n[Ki],i=r.rendererFactory;i.begin?.();try{!function PX(n,e){const t=VF();try{UF(!0),MS(n,e);let r=0;for(;kl(n);){if(r===MX)throw new Q(103,!1);r++,MS(n,1)}}finally{UF(t)}}(n,t)}catch(s){throw e&&MI(n,s),s}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function NX(n,e,t,r){const i=e[Qe];if(!(256&~i))return;e[Ki].inlineEffectRunner?.flush(),CD(e);let a=!0,c=null,l=null;JV(n)?(l=function CX(n){return n[po]??function AX(n){const e=XV.pop()??Object.create(SX);return e.lView=n,e}(n)}(e),c=pt(l)):null===function Pn(){return Ve}()?(a=!1,l=function xX(n){const e=n[po]??Object.create(RX);return e.lView=n,e}(e),c=pt(l)):e[po]&&($r(e[po]),e[po]=null);try{As(e),function BF(n){return ot.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&VV(n,e,t,2,r);const h=!(3&~i);if(h){const y=n.preOrderCheckHooks;null!==y&&JE(e,y,null)}else{const y=n.preOrderHooks;null!==y&&eI(e,y,0,null),DD(e,0)}if(function kX(n){for(let e=ML(n);null!==e;e=PL(e)){if(!(e[Qe]&Tf.HasTransplantedViews))continue;const t=e[Pl];for(let r=0;r<t.length;r++)Nl(t[r])}}(e),t2(e,0),null!==n.contentQueries&&GV(n,e),h){const y=n.contentCheckHooks;null!==y&&JE(e,y)}else{const y=n.contentHooks;null!==y&&eI(e,y,1),DD(e,1)}!function XZ(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)wd(~i);else{const o=i,s=t[++r],a=t[++r];S7(s,o),a(2,e[o])}}}finally{wd(-1)}}(n,e);const m=n.components;null!==m&&r2(e,m,0);const _=n.viewQuery;if(null!==_&&DS(2,_,r),h){const y=n.viewCheckHooks;null!==y&&JE(e,y)}else{const y=n.viewHooks;null!==y&&eI(e,y,2),DD(e,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Cs]){for(const y of e[Cs])y();e[Cs]=null}e[Qe]&=-73}catch(h){throw Ol(e),h}finally{null!==l&&(Et(l,c),a&&function DX(n){n.lView[po]!==n&&(n.lView=null,XV.push(n))}(l)),AD()}}function t2(n,e){for(let t=ML(n);null!==t;t=PL(t))for(let r=On;r<t.length;r++)n2(t[r],e)}function OX(n,e,t){n2(Mi(e,n),t)}function n2(n,e){bd(n)&&MS(n,e)}function MS(n,e){const r=n[be],i=n[Qe],o=n[po];let s=!!(0===e&&16&i);if(s||=!!(64&i&&0===e),s||=!!(1024&i),s||=!(!o?.dirty||!yr(o)),s||=!1,o&&(o.dirty=!1),n[Qe]&=-9217,s)NX(r,n,r.template,n[on]);else if(8192&i){t2(n,1);const a=r.components;null!==a&&r2(n,a,1)}}function r2(n,e,t){for(let r=0;r<e.length;r++)OX(n,e[r],t)}function k_(n,e){const t=VF()?64:1088;for(n[Ki].changeDetectionScheduler?.notify(e);n;){n[Qe]|=t;const r=Ys(n);if(gd(n)&&!r)return n;n=r}return null}class O_{get rootNodes(){const e=this._lView,t=e[be];return N_(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[on]}set context(e){this._lView[on]=e}get destroyed(){return!(256&~this._lView[Qe])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[ir];if(Fr(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(R_(e,r),df(t,r))}this._attachedToViewContainer=!1}CI(this._lView[be],this._lView)}onDestroy(e){Rf(this._lView,e)}markForCheck(){k_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Qe]&=-129}reattach(){d_(this._lView),this._lView[Qe]|=128}detectChanges(){this._lView[Qe]|=1024,PI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=gd(this._lView),t=this._lView[Ic];null!==t&&!e&&hS(t,this._lView),IV(this._lView[be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;const t=gd(this._lView),r=this._lView[Ic];null!==r&&!t&&wV(r,this._lView),d_(this._lView)}}let xc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=VX}return n})();const FX=xc,LX=class extends FX{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){const i=qf(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new O_(i)}};function VX(){return NI(Yt(),oe())}function NI(n,e){return 4&n.type?new LX(e,n,Ff(n,e)):null}let C2=()=>null;function Nd(n,e){return C2(n,e)}class Kf{}const $_=new ae("",{providedIn:"root",factory:()=>!1}),A2=new ae("");class RJ{}class D2{}class PJ{resolveComponentFactory(e){throw function MJ(n){const e=Error(`No component factory found for ${nr(n)}.`);return e.ngComponent=n,e}(e)}}class UI{static#e=this.NULL=new PJ}class BI{}let Rc=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function NJ(){const n=oe(),t=Mi(Yt().index,n);return(Or(t)?t:n)[rt]}()}return n})(),kJ=(()=>{class n{static#e=this.\u0275prov=Ie({token:n,providedIn:"root",factory:()=>null})}return n})();const x2=new Set;function Yi(n){x2.has(n)||(x2.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Zi=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Zi||{});const R2={destroy(){}};function P2(n,e,t,r){const i=function OJ(n,e){if(n instanceof Function)switch(e){case Zi.EarlyRead:return{earlyRead:n};case Zi.Write:return{write:n};case Zi.MixedReadWrite:return{mixedReadWrite:n};case Zi.Read:return{read:n}}return n}(n,r),o=e.get(jI),s=o.handler??=new LJ,a=[],c=[],l=()=>{for(const y of c)s.unregister(y);h()},h=e.get(y_).onDestroy(l);let m=0;const _=(y,E)=>{if(!E)return;const T=t?(...P)=>(m--,m<1&&l(),E(...P)):E,C=ws(e,()=>new FJ(y,a,T));s.register(C),c.push(C),m++};return _(Zi.EarlyRead,i.earlyRead),_(Zi.Write,i.write),_(Zi.MixedReadWrite,i.mixedReadWrite),_(Zi.Read,i.read),{destroy:l}}class FJ{constructor(e,t,r){this.phase=e,this.pipelinedArgs=t,this.callbackFn=r,this.zone=ce(it),this.errorHandler=ce(Qo,{optional:!0}),ce(Kf,{optional:!0})?.notify(6)}invoke(){try{const e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}}class LJ{constructor(){this.executingCallbacks=!1,this.buckets={[Zi.EarlyRead]:new Set,[Zi.Write]:new Set,[Zi.MixedReadWrite]:new Set,[Zi.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const t of e)t.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let jI=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of t)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ie({token:n,providedIn:"root",factory:()=>new n})}return n})();function $I(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?o=a:1==o?i=Dg(i,a):2==o&&(r=Dg(r,a+": "+e[++s]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}class O2 extends UI{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=It(e);return new G_(t,this.ngModule)}}function F2(n,e){const t=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const i=n[r];if(void 0===i)continue;const o=Array.isArray(i),s=o?i[0]:i;t.push(e?{propName:s,templateName:r,isSignal:!!((o?i[1]:Is.None)&Is.SignalBased)}:{propName:s,templateName:r})}return t}class G_ extends D2{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=F2(e.inputs,!0);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return F2(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function $g(n){return n.map(nD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){const o=Ue(null);try{let s=(i=i||this.ngModule)instanceof xi?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new Td(e,s):e,c=a.get(BI,null);if(null===c)throw new Q(407,!1);const l=a.get(kJ,null),_={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:a.get(jI,null),changeDetectionScheduler:a.get(Kf,null)},y=c.createRenderer(null,this.componentDef),E=this.componentDef.selectors[0][0]||"div",T=r?function eX(n,e,t,r){const o=r.get(YL,!1)||t===qo.ShadowDom,s=n.selectRootElement(e,o);return function tX(n){BV(n)}(s),s}(y,r,this.componentDef.encapsulation,a):TI(y,E,function BJ(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(E));let C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let P=null;null!==T&&(P=YD(T,a,!0));const R=wS(0,null,null,1,0,null,null,null,null,null,null),U=xI(null,R,null,C,null,null,_,y,a,null,P);let J,ve;CD(U);try{const Te=this.componentDef;let O,S=null;Te.findHostDirectiveDefs?(O=[],S=new Map,Te.findHostDirectiveDefs(Te,O,S),O.push(Te)):O=[Te];const k=function HJ(n,e){const t=n[be],r=$e;return n[r]=e,Rd(t,r,2,"#host",null)}(U,T),B=function $J(n,e,t,r,i,o,s){const a=i[be];!function zJ(n,e,t,r){for(const i of n)e.mergedAttrs=id(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&($I(e,e.mergedAttrs,!0),null!==t&&OV(r,t,e))}(r,n,e,s);let c=null;null!==e&&(c=YD(e,i[or]));const l=o.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const m=xI(i,UV(t),null,h,i[n.index],n,o,l,null,null,c);return a.firstCreatePass&&CS(a,n,r.length-1),RI(i,m),i[n.index]=m}(k,T,Te,O,U,_,y);ve=vd(R,$e),T&&function GJ(n,e,t,r){if(r)nd(n,t,["ng-version","18.1.3"]);else{const{attrs:i,classes:o}=function zg(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let o=n[r];if("string"==typeof o)2===i?""!==o&&e.push(o,n[++r]):8===i&&t.push(o);else{if(!Go(i))break;i=o}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&nd(n,t,i),o&&o.length>0&&kV(n,t,o.join(" "))}}(y,Te,T,r),void 0!==t&&function WJ(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const o=t[i];r.push(null!=o?Array.from(o):null)}}(ve,this.ngContentSelectors,t),J=function qJ(n,e,t,r,i,o){const s=Yt(),a=i[be],c=ri(s,i);$V(a,i,s,t,null,r);for(let h=0;h<t.length;h++)Ni(Cd(i,a,s.directiveStart+h,s),i);zV(a,i,s),c&&Ni(c,i);const l=Cd(i,a,s.directiveStart+s.componentOffset,s);if(n[on]=i[on]=l,null!==o)for(const h of o)h(l,e);return bS(a,s,i),l}(B,Te,O,S,U,[KJ]),xS(R,U,null)}finally{AD()}return new jJ(this.componentType,J,Ff(ve,U),U,ve)}finally{Ue(o)}}}class jJ extends RJ{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new O_(i,void 0,!1),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const o=this._rootLView;SS(o[be],o,i,e,t),this.previousInputValues.set(e,t),k_(Mi(this._tNode.index,o),1)}}get injector(){return new qr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function KJ(){const n=Yt();XE(oe()[be],n)}let Xs=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=QJ}return n})();function QJ(){return U2(Yt(),oe())}const YJ=Xs,L2=class extends YJ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ff(this._hostTNode,this._hostLView)}get injector(){return new qr(this._hostTNode,this._hostLView)}get parentInjector(){const e=rI(this._hostTNode,this._hostLView);if(RD(e)){const t=g_(e,this._hostLView),r=m_(e);return new qr(t[be].data[r+8],t)}return new qr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=V2(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-On}createEmbeddedView(e,t,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const s=Nd(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Md(this._hostTNode,s)),a}createComponent(e,t,r,i,o){const s=e&&!function dd(n){return"function"==typeof n}(e);let a;if(s)a=t;else{const E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,o=E.environmentInjector||E.ngModuleRef}const c=s?e:new G_(It(e)),l=r||this.parentInjector;if(!o&&null==c.ngModule){const T=(s?l:this.parentInjector).get(xi,null);T&&(o=T)}const h=It(c.componentType??{}),m=Nd(this._lContainer,h?.id??null),y=c.create(l,i,m?.firstChild??null,o);return this.insertImpl(y.hostView,a,Md(this._hostTNode,m)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){const i=e._lView;if(function l_(n){return Fr(n[ir])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=i[ir],l=new L2(c,c[Ir],c[ir]);l.detach(l.indexOf(e))}}const o=this._adjustIndex(t),s=this._lContainer;return Gf(s,i,o,r),e.attachToViewContainerRef(),SE(GS(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=V2(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=R_(this._lContainer,t);r&&(df(GS(this._lContainer),t),CI(r[be],r))}detach(e){const t=this._adjustIndex(e,-1),r=R_(this._lContainer,t);return r&&null!=df(GS(this._lContainer),t)?new O_(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function V2(n){return n[8]}function GS(n){return n[8]||(n[8]=[])}function U2(n,e){let t;const r=e[n.index];return Fr(r)?t=r:(t=qV(r,e,null,n),e[n.index]=t,RI(e,t)),B2(t,e,n,r),new L2(t,n,e)}let B2=function H2(n,e,t,r){if(n[mo])return;let i;i=8&t.type?kt(r):function ZJ(n,e){const t=n[rt],r=t.createComment(""),i=ri(e,n);return Sd(t,AI(t,i),r,function WZ(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[mo]=i},WS=()=>!1;class KS{constructor(e){this.queryList=e,this.matches=null}clone(){return new KS(this.queryList)}setDirty(){this.queryList.setDirty()}}class QS{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){const s=t.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new QS(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==ex(e,t).matches&&this.queries[t].setDirty()}}class $2{constructor(e,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof e?function oee(n){return n.split(",").map(e=>e.trim())}(e):e}}class YS{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,null!==t?t.push(o):t=[o])}return null!==t?new YS(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class ZS{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new ZS(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(e,t,tee(t,o)),this.matchTNodeWithReadOption(e,t,iI(t,e,o,!1,!1))}else r===xc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,iI(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===hr||i===Xs||i===xc&&4&t.type)this.addMatch(t.index,-2);else{const o=iI(t,e,i,!1,!1);null!==o&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function tee(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function ree(n,e,t,r){return-1===t?function nee(n,e){return 11&n.type?Ff(n,e):4&n.type?NI(n,e):null}(e,n):-2===t?function iee(n,e,t){return t===hr?Ff(e,n):t===xc?NI(e,n):t===Xs?U2(e,n):void 0}(n,e,r):Cd(n,n[be],t,e)}function z2(n,e,t,r){const i=e[Ts].queries[r];if(null===i.matches){const o=n.data,s=t.matches,a=[];for(let c=0;null!==s&&c<s.length;c+=2){const l=s[c];a.push(l<0?null:ree(e,o[l],s[c+1],t.metadata.read))}i.matches=a}return i.matches}function XS(n,e,t,r){const i=n.queries.getByIndex(t),o=i.matches;if(null!==o){const s=z2(n,e,i,t);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const l=o[a+1],h=e[-c];for(let m=On;m<h.length;m++){const _=h[m];_[Ic]===_[ir]&&XS(_[be],_,l,r)}if(null!==h[Pl]){const m=h[Pl];for(let _=0;_<m.length;_++){const y=m[_];XS(y[be],y,l,r)}}}}}return r}function JS(n,e){return n[Ts].queries[e].queryList}function q2(n,e,t){const r=new v_(!(4&~t));return function iX(n,e,t,r){const i=WV(e);i.push(t),n.firstCreatePass&&KV(n).push(r,i.length-1)}(n,e,r,r.destroy),(e[Ts]??=new QS).queries.push(new KS(r))-1}function W2(n,e,t,r){const i=_t();if(i.firstCreatePass){const o=Yt();K2(i,new $2(e,t,r),o.index),function see(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),!(2&~t)&&(i.staticContentQueries=!0)}return q2(i,oe(),t)}function K2(n,e,t){null===n.queries&&(n.queries=new YS),n.queries.track(new ZS(e,t))}function ex(n,e){return n.queries.getByIndex(e)}function Q2(n,e){const t=n[be],r=ex(t,e);return r.crossesNgTemplate?XS(t,n,e,[]):z2(t,n,r,e)}function Qf(n,e){Yi("NgSignals");const t=function te(n){const e=Object.create(Pt);e.value=n;const t=()=>(ye(e),e.value);return t[$t]=e,t}(n),r=t[$t];return e?.equal&&(r.equal=e.equal),t.set=i=>we(r,i),t.update=i=>function fe(n,e){Pr()||ic(),we(n,e(n.value))}(r,i),t.asReadonly=Y2.bind(t),t}function Y2(){const n=this[$t];if(void 0===n.readonlyFn){const e=()=>this();e[$t]=n,n.readonlyFn=e}return n.readonlyFn}function Z2(n){return function zI(n){return"function"==typeof n&&void 0!==n[$t]}(n)&&"function"==typeof n.set}function tx(n,e){let t;const r=gn(()=>{t._dirtyCounter();const i=function aee(n,e){const t=n._lView,r=n._queryIndex;if(void 0===t||void 0===r||4&t[Qe])return e?void 0:Vt;const i=JS(t,r),o=Q2(t,r);return i.reset(o,EL),e?i.first:i._changesDetected||void 0===n._flatValue?n._flatValue=i.toArray():n._flatValue}(t,n);if(e&&void 0===i)throw new Q(-951,!1);return i});return t=r[$t],t._dirtyCounter=Qf(0),t._flatValue=void 0,r}function nU(n,e){return function X2(){return tx(!0,!1)}()}const lee=(nU.required=function cee(n,e){return function J2(){return tx(!0,!0)}()},nU);function sn(n){let e=function lU(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Wo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const s=n;s.inputs=GI(n.inputs),s.inputTransforms=GI(n.inputTransforms),s.declaredInputs=GI(n.declaredInputs),s.outputs=GI(n.outputs);const a=i.hostBindings;a&&Iee(n,a);const c=i.viewQuery,l=i.contentQueries;if(c&&bee(n,c),l&&Eee(n,l),yee(n,i),LA(n.outputs,i.outputs),Wo(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(n),a===sn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function vee(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=id(i.hostAttrs,t=id(t,i.hostAttrs))}}(r)}function yee(n,e){for(const t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;const r=e.inputs[t];if(void 0!==r&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function GI(n){return n===$o?{}:n===Vt?[]:n}function bee(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function Eee(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,o)=>{e(r,i,o),t(r,i,o)}:e}function Iee(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function nx(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}class kd{}class fU{}class rx extends kd{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new O2(this);const i=ni(e);this._bootstrapComponents=Xo(i.bootstrap),this._r3Injector=fL(e,t,[{provide:kd,useValue:this},{provide:UI,useValue:this.componentFactoryResolver},...r],nr(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ix extends fU{constructor(e){super(),this.moduleType=e}create(e){return new rx(this.moduleType,e,[])}}class pU extends kd{constructor(e){super(),this.componentFactoryResolver=new O2(this),this.instance=null;const t=new Ca([...e.providers,{provide:kd,useValue:this},{provide:UI,useValue:this.componentFactoryResolver}],e.parent||Ef(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function WI(n,e,t=null){return new pU({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function KI(n){return!!function ox(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Ma(n,e,t){return n[e]=t}function wr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function Q_(n,e,t,r,i,o,s,a,c,l){const h=t+$e,m=e.firstCreatePass?function kee(n,e,t,r,i,o,s,a,c){const l=e.consts,h=Rd(e,n,4,s||null,a||null);TS(e,t,h,yo(l,c)),XE(e,h);const m=h.tView=wS(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return null!==e.queries&&(e.queries.template(e,h),m.queries=e.queries.embeddedTView(h)),h}(h,e,n,r,i,o,s,a,c):e.data[h];vo(m,!1);const _=mU(e,n,m,t);f_()&&DI(e,n,_,m),Ni(_,n);const y=qV(_,n,_,m);return n[h]=y,RI(n,y),function j2(n,e,t){return WS(n,e,t)}(y,m,n),Cf(m)&&ES(e,n,m),null!=c&&IS(n,m,l),m}function Tr(n,e,t,r,i,o,s,a){const c=oe(),l=_t();return Q_(c,l,n,e,t,r,i,yo(l.consts,o),s,a),Tr}let mU=function gU(n,e,t,r){return Da(!0),e[rt].createComment("")};function wo(n,e,t,r){const i=oe();return wr(i,Zs(),e)&&(_t(),Ra(Cn(),i,n,e,t,r)),wo}function op(n,e,t,r){return wr(n,Zs(),t)?e+ut(t)+r:gt}function tw(n,e){return n<<17|e<<2}function $l(n){return n>>17&32767}function gx(n){return 2|n}function Ld(n){return(131068&n)>>2}function _x(n,e){return-131069&n|e<<2}function yx(n){return 1|n}function WU(n,e,t,r){const i=n[t+1],o=null===e;let s=r?$l(i):Ld(i),a=!1;for(;0!==s&&(!1===a||o);){const l=n[s+1];vte(n[s],e)&&(a=!0,n[s+1]=r?yx(l):gx(l)),s=r?$l(l):Ld(l)}a&&(n[t+1]=r?gx(i):yx(i))}function vte(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Il(n,e)>=0}const Gr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KU(n){return n.substring(Gr.key,Gr.keyEnd)}function QU(n,e){const t=Gr.textEnd;return t===e?-1:(e=Gr.keyEnd=function wte(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Gr.key=e,t),fp(n,e,t))}function fp(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Ln(n,e,t){const r=oe();return wr(r,Zs(),e)&&Io(_t(),Cn(),r,n,e,r[rt],t,!1),Ln}function vx(n,e,t,r,i){const s=i?"class":"style";SS(n,t,e.inputs[s],s,r)}function ki(n,e){return function Js(n,e,t,r){const i=oe(),o=_t(),s=Ac(2);o.firstUpdatePass&&rB(o,n,s,r),e!==gt&&wr(i,s,e)&&oB(o,o.data[mi()],i,i[rt],n,i[s+1]=function kte(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=nr(Zo(n)))),n}(e,t),r,s)}(n,e,null,!0),ki}function tB(n){!function ea(n,e,t,r){const i=_t(),o=Ac(2);i.firstUpdatePass&&rB(i,null,o,r);const s=oe();if(t!==gt&&wr(s,o,t)){const a=i.data[mi()];if(aB(a,r)&&!nB(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(t=Dg(c,t||"")),vx(i,a,s,t,r)}else!function Nte(n,e,t,r,i,o,s,a){i===gt&&(i=Vt);let c=0,l=0,h=0<i.length?i[0]:null,m=0<o.length?o[0]:null;for(;null!==h||null!==m;){const _=c<i.length?i[c+1]:void 0,y=l<o.length?o[l+1]:void 0;let T,E=null;h===m?(c+=2,l+=2,_!==y&&(E=m,T=y)):null===m||null!==h&&h<m?(c+=2,E=h):(l+=2,E=m,T=y),null!==E&&oB(n,e,t,r,E,T,s,a),h=c<i.length?i[c]:null,m=l<o.length?o[l]:null}}(i,a,s,s[rt],s[o+1],s[o+1]=function Mte(n,e,t){if(null==t||""===t)return Vt;const r=[],i=Zo(t);if(Array.isArray(i))for(let o=0;o<i.length;o++)n(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&n(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(n,e,t),r,o)}}(Pte,Na,n,!0)}function Na(n,e){for(let t=function Ete(n){return function ZU(n){Gr.key=0,Gr.keyEnd=0,Gr.value=0,Gr.valueEnd=0,Gr.textEnd=n.length}(n),QU(n,fp(n,0,Gr.textEnd))}(e);t>=0;t=QU(e,t))di(n,KU(e),!0)}function nB(n,e){return e>=n.expandoStartIndex}function rB(n,e,t,r){const i=n.data;if(null===i[t+1]){const o=i[mi()],s=nB(n,t);aB(o,r)&&null===e&&!s&&(e=!1),e=function Dte(n,e,t,r){const i=function wD(n){const e=ot.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=J_(t=bx(null,n,e,t,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||n[s]!==i)if(t=bx(i,n,e,t,r),null===o){let c=function Ste(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Ld(r))return n[$l(r)]}(n,e,r);void 0!==c&&Array.isArray(c)&&(c=bx(null,n,e,c[1],r),c=J_(c,e.attrs,r),function xte(n,e,t,r){n[$l(t?e.classBindings:e.styleBindings)]=r}(n,e,r,c))}else o=function Rte(n,e,t){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=J_(r,n[o].hostAttrs,t);return J_(r,e.attrs,t)}(n,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),t}(i,o,e,r),function _te(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$l(s),c=Ld(s);n[r]=t;let h,l=!1;if(Array.isArray(t)?(h=t[1],(null===h||Il(t,h)>0)&&(l=!0)):h=t,i)if(0!==c){const _=$l(n[a+1]);n[r+1]=tw(_,a),0!==_&&(n[_+1]=_x(n[_+1],r)),n[a+1]=function mte(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=tw(a,0),0!==a&&(n[a+1]=_x(n[a+1],r)),a=r;else n[r+1]=tw(c,0),0===a?a=r:n[c+1]=_x(n[c+1],r),c=r;l&&(n[r+1]=gx(n[r+1])),WU(n,h,r,!0),WU(n,h,r,!1),function yte(n,e,t,r,i){const o=i?n.residualClasses:n.residualStyles;null!=o&&"string"==typeof e&&Il(o,e)>=0&&(t[r+1]=yx(t[r+1]))}(e,h,n,r,o),s=tw(a,c),o?e.classBindings=s:e.styleBindings=s}(i,o,e,t,s,r)}}function bx(n,e,t,r,i){let o=null;const s=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<s&&(o=e[a],r=J_(r,o.hostAttrs,i),o!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function J_(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),di(n,s,!!t||e[++o]))}return void 0===n?null:n}function Pte(n,e,t){const r=String(e);""!==r&&!r.includes(" ")&&di(n,r,t)}function oB(n,e,t,r,i,o,s,a){if(!(3&e.type))return;const c=n.data,l=c[a+1],h=function gte(n){return!(1&~n)}(l)?sB(c,e,t,i,Ld(l),s):void 0;nw(h)||(nw(o)||function pte(n){return!(2&~n)}(l)&&(o=sB(c,null,t,i,a,s)),function YZ(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=-1===r.indexOf("-")?void 0:Ul.DashCase;null==i?n.removeStyle(t,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ul.Important),n.setStyle(t,r,i,o))}}(r,s,_o(mi(),t),i,o))}function sB(n,e,t,r,i,o){const s=null===e;let a;for(;i>0;){const c=n[i],l=Array.isArray(c),h=l?c[1]:c,m=null===h;let _=t[i+1];_===gt&&(_=m?Vt:void 0);let y=m?Ug(_,r):h===r?_:void 0;if(l&&!nw(y)&&(y=Ug(c,r)),nw(y)&&(a=y,s))return a;const E=n[i+1];i=s?$l(E):Ld(E)}if(null!==e){let c=o?e.residualClasses:e.residualStyles;null!=c&&(a=Ug(c,r))}return a}function nw(n){return void 0!==n}function aB(n,e){return!!(n.flags&(e?8:16))}function To(n,e){Yi("NgControlFlow");const t=oe(),r=Zs(),i=t[r]!==gt?t[r]:-1,o=-1!==i?rw(t,$e+i):void 0;if(wr(t,r,n)){const a=Ue(null);try{if(void 0!==o&&function RS(n,e){const t=R_(n,e);return void 0!==t&&CI(t[be],t),t}(o,0),-1!==n){const c=$e+n,l=rw(t,c),h=function wx(n,e){return vd(n,e)}(t[be],c),m=Nd(l,h.tView.ssrId);Gf(l,qf(t,h,e,{dehydratedView:m}),0,Md(h,m))}}finally{Ue(a)}}else if(void 0!==o){const a=function YV(n,e){const t=On+e;if(t<n.length)return n[t]}(o,0);void 0!==a&&(a[on]=e)}}function rw(n,e){return n[e]}function tt(n,e,t,r){const i=oe(),o=_t(),s=$e+n,a=i[rt],c=o.firstCreatePass?function nne(n,e,t,r,i,o){const s=e.consts,c=Rd(e,n,2,r,yo(s,i));return TS(e,t,c,yo(s,o)),null!==c.attrs&&$I(c,c.attrs,!1),null!==c.mergedAttrs&&$I(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,o,i,e,t,r):o.data[s],l=dB(o,i,c,a,e,n);i[s]=l;const h=Cf(c);return vo(c,!0),OV(a,l,c),!function Zf(n){return!(32&~n.flags)}(c)&&f_()&&DI(o,i,l,c),0===function b(){return ot.lFrame.elementDepthCount}()&&Ni(l,i),function w(){ot.lFrame.elementDepthCount++}(),h&&(ES(o,i,c),bS(o,c,i)),null!==r&&IS(i,c),tt}function st(){let n=Yt();Id()?Pf():(n=n.parent,vo(n,!1));const e=n;(function Ce(n){return ot.skipHydrationRootTNode===n})(e)&&function Ko(){ot.skipHydrationRootTNode=null}(),function M(){ot.lFrame.elementDepthCount--}();const t=_t();return t.firstCreatePass&&(XE(t,n),e_(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function U7(n){return!!(8&n.flags)}(e)&&vx(t,e,oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function B7(n){return!!(16&n.flags)}(e)&&vx(t,e,oe(),e.stylesWithoutHost,!1),st}function Lr(n,e,t,r){return tt(n,e,t,r),st(),Lr}let dB=(n,e,t,r,i,o)=>(Da(!0),TI(r,i,function WF(){return ot.lFrame.currentNamespace}()));function iw(){return oe()}function ow(n,e,t){const r=oe();return wr(r,Zs(),e)&&Io(_t(),Cn(),r,n,e,r[rt],t,!0),ow}const mp="en-US";let _B=mp;let FB=(n,e,t)=>{};function Wr(n,e,t,r){const i=oe(),o=_t(),s=Yt();return Sx(o,i,i[rt],s,n,e,r),Wr}function Sx(n,e,t,r,i,o,s){const a=Cf(r),l=n.firstCreatePass&&KV(n),h=e[on],m=WV(e);let _=!0;if(3&r.type||s){const T=ri(r,e),C=s?s(T):T,P=m.length,R=s?J=>s(kt(J[r.index])):r.index;let U=null;if(!s&&a&&(U=function Zne(n,e,t,r){const i=n.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===t&&i[o+1]===r){const a=e[fd],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(n,e,i,r.index)),null!==U)(U.__ngLastListenerFn__||U).__ngNextListenerFn__=o,U.__ngLastListenerFn__=o,_=!1;else{o=BB(r,e,h,o),FB(T,i,o);const J=t.listen(C,i,o);m.push(o,J),l&&l.push(i,R,P,P+1)}}else o=BB(r,e,h,o);const y=r.outputs;let E;if(_&&null!==y&&(E=y[i])){const T=E.length;if(T)for(let C=0;C<T;C+=2){const ve=e[E[C]][E[C+1]].subscribe(o),Te=m.length;m.push(o,ve),l&&l.push(i,r.index,Te,-(Te+1))}}}function UB(n,e,t,r){const i=Ue(null);try{return go(6,e,t),!1!==t(r)}catch(o){return MI(n,o),!1}finally{go(7,e,t),Ue(i)}}function BB(n,e,t,r){return function i(o){if(o===Function)return r;k_(n.componentOffset>-1?Mi(n.index,e):e,5);let a=UB(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=UB(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function Ao(n=1){return function M7(n){return(ot.lFrame.contextLView=function u_(n,e){for(;n>0;)e=e[xl],n--;return e}(n,ot.lFrame.contextLView))[on]}(n)}function Xne(n,e){let t=null;const r=function JA(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?jg(n,o,!0):tD(r,o))return i}else t=i}return t}function Ud(n){const e=oe()[Tn][Ir];if(!e.projection){const r=e.projection=function hf(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(n?n.length:1,null),i=r.slice();let o=e.child;for(;null!==o;){if(128!==o.type){const s=n?Xne(o,n):0;null!==s&&(i[s]?i[s].projectionNext=o:r[s]=o,i[s]=o)}o=o.next}}}function Dr(n,e=0,t,r,i,o){const s=oe(),a=_t(),c=r?n+1:null;null!==c&&Q_(s,a,c,r,i,o,null,t);const l=Rd(a,$e+n,16,null,t||null);null===l.projection&&(l.projection=e),Pf();const m=!s[fi]||se();null===s[Tn][Ir].projection[l.projection]&&null!==c?function Jne(n,e,t){const r=$e+t,i=e.data[r],o=n[r],s=Nd(o,i.tView.ssrId);Gf(o,qf(n,i,void 0,{dehydratedView:s}),0,Md(i,s))}(s,a,c):m&&32&~l.flags&&function KZ(n,e,t){NV(e[rt],0,e,t,pS(n,t,e),DV(t.parent||e[Ir],t,e))}(a,s,l)}function lw(n,e,t){return xx(n,"",e,"",t),lw}function xx(n,e,t,r,i){const o=oe(),s=op(o,e,t,r);return s!==gt&&Io(_t(),Cn(),o,n,s,o[rt],i,!1),xx}function Bd(n,e,t,r){W2(n,e,t,r)}function zl(n,e,t){!function G2(n,e,t){const r=_t();return r.firstCreatePass&&(K2(r,new $2(n,e,t),-1),!(2&~e)&&(r.staticViewQueries=!0)),q2(r,oe(),e)}(n,e,t)}function Do(n){const e=oe(),t=_t(),r=TD();ZE(r+1);const i=ex(t,r);if(n.dirty&&function Pi(n){return!(4&~n[Qe])}(e)===!(2&~i.metadata.flags)){if(null===i.matches)n.reset([]);else{const o=Q2(e,r);n.reset(o,EL),n.notifyOnChanges()}return!0}return!1}function So(){return JS(oe(),TD())}function QB(n,e,t,r,i){!function tU(n,e){const t=n[$t];t._lView=oe(),t._queryIndex=e,t._queryList=JS(t._lView,e),t._queryList.onDirty(()=>t._dirtyCounter.update(r=>r+1))}(e,W2(n,t,r,i))}function Mx(n){return Tc(function QE(){return ot.lFrame.contextLView}(),$e+n)}function Wn(n,e=""){const t=oe(),r=_t(),i=n+$e,o=r.firstCreatePass?Rd(r,i,1,e,null):r.data[i],s=sj(r,t,o,e,n);t[i]=s,f_()&&DI(r,t,s,o),vo(o,!1)}let sj=(n,e,t,r,i)=>(Da(!0),function uS(n,e){return n.createText(e)}(e[rt],r));function gp(n){return jd("",n,""),gp}function jd(n,e,t){const r=oe(),i=op(r,n,e,t);return i!==gt&&function Sc(n,e,t){const r=_o(e,n);!function EV(n,e,t){n.setValue(e,t)}(n[rt],r,t)}(r,mi(),i),jd}function Px(n,e,t){Z2(e)&&(e=e());const r=oe();return wr(r,Zs(),e)&&Io(_t(),Cn(),r,n,e,r[rt],t,!1),Px}function Nx(n,e){const t=oe(),r=_t(),i=Yt();return Sx(r,t,t[rt],i,n,e),Nx}function kx(n,e,t,r,i){if(n=nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)kx(n[o],e,t,r,i);else{const o=_t(),s=oe(),a=Yt();let c=Ta(n)?n:nt(n.provide);const l=VE(n),h=1048575&a.providerIndexes,m=a.directiveStart,_=a.providerIndexes>>20;if(Ta(n)||!n.multi){const y=new p_(l,i,ee),E=Fx(c,e,i?h:h+_,m);-1===E?(ND(nI(a,s),o,c),Ox(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[E]=y,s[E]=y)}else{const y=Fx(c,e,h+_,m),E=Fx(c,e,h,h+_),C=E>=0&&t[E];if(i&&!C||!i&&!(y>=0&&t[y])){ND(nI(a,s),o,c);const P=function _re(n,e,t,r,i){const o=new p_(n,t,ee);return o.multi=[],o.index=e,o.componentProviders=0,yj(o,i,r&&!t),o}(i?gre:mre,t.length,i,r,l);!i&&C&&(t[E].providerFactory=P),Ox(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),s.push(P)}else Ox(o,n,y>-1?y:E,yj(t[i?E:y],l,!i&&r));!i&&r&&C&&t[E].componentProviders++}}}function Ox(n,e,t,r){const i=Ta(e),o=function FE(n){return!!n.useClass}(e);if(i||o){const c=(o?nt(e.useClass):e).prototype.ngOnDestroy;if(c){const l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=l.indexOf(t);-1===h?l.push(t,[r,c]):l[h+1].push(r,c)}else l.push(t,c)}}}function yj(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Fx(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function mre(n,e,t,r){return Lx(this.multi,[])}function gre(n,e,t,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Cd(t,t[be],this.providerFactory.index,r);o=a.slice(0,s),Lx(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Lx(i,o);return o}function Lx(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Dn(n,e=[]){return t=>{t.providersResolver=(r,i)=>function pre(n,e,t){const r=_t();if(r.firstCreatePass){const i=Wo(n);kx(t,r.data,r.blueprint,i,!0),kx(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}let yre=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=ad(0,t.type),i=r.length>0?WI([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ie({token:n,providedIn:"environment",factory:()=>new n(Y(xi))})}return n})();function ql(n){Yi("NgStandalone"),n.getStandaloneInjector=e=>e.get(yre).getOrCreateStandaloneInjector(n)}function oy(n,e,t){const r=Qi()+n,i=oe();return i[r]===gt?Ma(i,r,t?e.call(t):e()):function K_(n,e){return n[e]}(i,r)}function Ej(n,e,t,r,i,o){const s=e+t;return wr(n,s,i)?Ma(n,s+1,o?r.call(o,i):r(i)):function sy(n,e){const t=n[e];return t===gt?void 0:t}(n,s+1)}function Vx(n,e){const t=_t();let r;const i=n+$e;t.firstCreatePass?(r=function Mre(n,e){if(e)for(let t=e.length-1;t>=0;t--){const r=e[t];if(n===r.name)return r}}(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];const o=r.factory||(r.factory=yl(r.type)),a=zr(ee);try{const c=tI(!1),l=o();return tI(c),function Rx(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}(t,oe(),i,l),l}finally{zr(a)}}function Ux(n,e,t){const r=n+$e,i=oe(),o=Tc(i,r);return function ay(n,e){return n[be].data[e].pure}(i,r)?Ej(i,Qi(),e,o.transform,t,o):o.transform(t)}function Aj(n,e){return NI(n,e)}class Gl{constructor(e){this.full=e;const t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}}const rie=new Gl("18.1.3");let Hj=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Wj=new ae(""),pw=new ae("");let Wx,qx=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Wx||(function xie(n){Wx=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||n)(Y(it),Y(Gx),Y(pw))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})(),Gx=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Wx?.findTestabilityInTree(this,t,r)??null}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function uy(n){return!!n&&"function"==typeof n.then}function Kj(n){return!!n&&"function"==typeof n.subscribe}const Kx=new ae("");let Qx=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=ce(Kx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const o=i();if(uy(o))t.push(o);else if(Kj(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const mw=new ae("");function Zj(n,e){return Array.isArray(e)?e.reduce(Zj,n):{...n,...e}}let ta=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ce(fY),this.afterRenderEffectManager=ce(jI),this.zonelessEnabled=ce($_),this.externalTestViews=new Set,this.beforeRender=new V,this.afterTick=new V,this.componentTypes=[],this.components=[],this.isStable=ce(Ad).hasPendingTasks.pipe(Ee(t=>!t)),this._injector=ce(xi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof D2;if(!this._injector.get(Qx).done)throw!i&&function Ks(n){const e=It(n)||rr(n)||kr(n);return null!==e&&e.standalone}(t),new Q(405,!1);let s;s=i?t:this._injector.get(UI).resolveComponentFactory(t),this.componentTypes.push(s.componentType);const a=function Rie(n){return n.isBoundToModule}(s)?void 0:this._injector.get(kd),l=s.create(dr.NULL,[],r||s.selector,a),h=l.location.nativeElement,m=l.injector.get(Wj,null);return m?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),gw(this.components,l),m?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new Q(101,!1);const r=Ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ue(r),this.afterTick.next()}}detectChangesInAttachedViews(t){let r=null;this._injector.destroyed||(r=this._injector.get(BI,null,{optional:!0}));let i=0;const o=this.afterRenderEffectManager;for(;i<10;){const s=0===i;if(t||!s){this.beforeRender.next(s);for(let{_lView:a,notifyErrorHandler:c}of this._views)Pie(a,c,s,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(i++,o.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>kl(a))&&(o.execute(),!this.allViews.some(({_lView:a})=>kl(a))))break}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;gw(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(mw,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>gw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Pie(n,e,t,r){(t||kl(n))&&PI(n,e,t&&!r?0:1)}class Nie{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Jj=(()=>{class n{compileModuleSync(t){return new ix(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),o=Xo(ni(t).declarations).reduce((s,a)=>{const c=It(a);return c&&s.push(new G_(c)),s},[]);return new Nie(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fie=(()=>{class n{constructor(){this.zone=ce(it),this.changeDetectionScheduler=ce(Kf),this.applicationRef=ce(ta)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yx({ngZoneFactory:n,ignoreChangesOutsideZone:e}){return n??=()=>new it(Zx()),[{provide:it,useFactory:n},{provide:zo,multi:!0,useFactory:()=>{const t=ce(Fie,{optional:!0});return()=>t.initialize()}},{provide:zo,multi:!0,useFactory:()=>{const t=ce(Vie);return()=>{t.initialize()}}},!0===e?{provide:A2,useValue:!0}:[]]}function Zx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}let Vie=(()=>{class n{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=ce(it),this.pendingTasks=ce(Ad)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{it.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{it.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dy=(()=>{class n{constructor(){this.appRef=ce(ta),this.taskService=ce(Ad),this.ngZone=ce(it),this.zonelessEnabled=ce($_),this.disableScheduling=ce(A2,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zt,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof UD||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;switch(t){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?gL:mL;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&it.isInAngularZone())}tick(t){if(this.runningTick||this.appRef.destroyed)return;const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(t)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gL(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const ka=new ae("",{providedIn:"root",factory:()=>ce(ka,Ct.Optional|Ct.SkipSelf)||function Uie(){return typeof $localize<"u"&&$localize.locale||mp}()}),Jx=new ae("");let rH=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function hY(n="zone.js",e){return"noop"===n?new UD:"zone.js"===n?new it(e):n}(r?.ngZone,Zx({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=r?.ignoreChangesOutsideZone,s=function xee(n,e,t){return new rx(n,e,t)}(t.moduleType,this.injector,[...Yx({ngZoneFactory:()=>i,ignoreChangesOutsideZone:o}),{provide:Kf,useExisting:dy}]),a=s.injector.get(Qo,null);return i.runOutsideAngular(()=>{const c=i.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{gw(this._modules,s),c.unsubscribe()})}),function Yj(n,e,t){try{const r=t();return uy(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(a,i,()=>{const c=s.injector.get(Qx);return c.runInitializers(),c.donePromise.then(()=>(function yB(n){"string"==typeof n&&(_B=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(ka,mp)||mp),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=Zj({},r);return function Oie(n,e,t){const r=new ix(t);return Promise.resolve(r)}(0,0,t).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(t){const r=t.injector.get(ta);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new Q(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Q(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(Jx,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||n)(Y(dr))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Wl=null;const iH=new ae("");function oH(n,e,t=[]){const r=`Platform: ${e}`,i=new ae(r);return(o=[])=>{let s=eR();if(!s||s.injector.get(iH,!1)){const a=[...t,...o,{provide:i,useValue:!0}];n?n(a):function Hie(n){if(Wl&&!Wl.get(iH,!1))throw new Q(400,!1);(function Qj(){!function ol(n){li=n}(()=>{throw new Q(600,!1)})})(),Wl=n;const e=n.get(rH);(function aH(n){n.get(jL,null)?.forEach(t=>t())})(n)}(function sH(n=[],e){return dr.create({name:e,providers:[{provide:Kg,useValue:"platform"},{provide:Jx,useValue:new Set([()=>Wl=null])},...n]})}(a,r))}return function $ie(n){const e=eR();if(!e)throw new Q(401,!1);return e}()}}function eR(){return Wl?.get(rH)??null}let vp=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qie}return n})();function qie(n){return function Gie(n,e,t){if(wc(n)&&!t){const r=Mi(n.index,e);return new O_(r,r)}return 175&n.type?new O_(e[Tn],e):null}(Yt(),oe(),!(16&~n))}class fH{constructor(){}supports(e){return KI(e)}create(e){return new Zie(e)}}const Yie=(n,e)=>e;class Zie{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Yie}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){const s=!r||t&&t.currentIndex<mH(r,i,o)?t:r,a=mH(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,h=c-i;if(l!=h){for(let _=0;_<l;_++){const y=_<o.length?o[_]:o[_]=0,E=y+_;h<=E&&E<l&&(o[_]=y+1)}o[s.previousIndex]=h-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!KI(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,o,s,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)):(t=this._mismatch(t,o,s,a),r=!0),t=t._next}else i=0,function Pee(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,s)?(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,s,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return null===e?o=this._itTail:(o=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Xie(t,r),o,i),e}_verifyReinsertion(e,t,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,o=e._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new pH),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pH),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class Xie{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Jie{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class pH{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new Jie,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mH(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function _H(){return new oR([new fH])}let oR=(()=>{class n{static#e=this.\u0275prov=Ie({token:n,providedIn:"root",factory:_H});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||_H()),deps:[[n,new ed,new Es]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Q(901,!1)}}return n})();const ioe=oH(null,"core",[]);let ooe=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(r){return new(r||n)(Y(ta))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const OH=new ae("");function Oa(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function $d(n,e){Yi("NgSignals");const t=gn(n);return e?.equal&&(t[$t].equal=e.equal),t}function Fa(n){const e=Ue(null);try{return n()}finally{Ue(e)}}let GH=null;function Kl(){return GH}class Woe{}const Vn=new ae("");let lR=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>ce(Qoe),providedIn:"platform"})}return n})();const Koe=new ae("");let Qoe=(()=>{class n extends lR{constructor(){super(),this._doc=ce(Vn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kl().getBaseHref(this._doc)}onPopState(t){const r=Kl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Kl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function uR(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function WH(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Mc(n){return n&&"?"!==n[0]?"?"+n:n}let Ql=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>ce(QH),providedIn:"root"})}return n})();const KH=new ae("");let QH=(()=>{class n extends Ql{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ce(Vn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uR(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Mc(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const s=this.prepareExternalUrl(i+Mc(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){const s=this.prepareExternalUrl(i+Mc(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(lR),Y(KH,8))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YH=(()=>{class n extends Ql{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=uR(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Mc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Mc(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(lR),Y(KH,8))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})(),my=(()=>{class n{constructor(t){this._subject=new sr,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Xoe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(WH(ZH(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Mc(r))}normalize(t){return n.stripTrailingSlash(function Zoe(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,ZH(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Mc(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static#e=this.normalizeQueryParams=Mc;static#t=this.joinWithSlash=uR;static#n=this.stripTrailingSlash=WH;static#r=this.\u0275fac=function(r){return new(r||n)(Y(Ql))};static#i=this.\u0275prov=Ie({token:n,factory:()=>function Yoe(){return new my(Y(Ql))}(),providedIn:"root"})}return n})();function ZH(n){return n.replace(/\/index.html$/,"")}class Use{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ER=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Use(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),c$(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{c$(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Xs),ee(xc),ee(oR))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function c$(n,e){n.context.$implicit=e.item}let l$=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Bse,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){u$("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){u$("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Xs),ee(xc))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class Bse{constructor(){this.$implicit=null,this.ngIf=null}}function u$(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${nr(e)}'.`)}let h$=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Xs))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[pi]})}return n})();class qse{createSubscription(e,t){return Fa(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Fa(()=>e.unsubscribe())}}class Gse{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const Wse=new Gse,Kse=new qse;let f$=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(uy(t))return Wse;if(Kj(t))return Kse;throw function ra(n,e){return new Q(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(ee(vp,16))};static#t=this.\u0275pipe=ti({name:"async",type:n,pure:!1,standalone:!0})}return n})(),Vw=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const m$="browser";function g$(n){return n===m$}function Uw(n){return"server"===n}let fae=(()=>{class n{static#e=this.\u0275prov=Ie({token:n,providedIn:"root",factory:()=>g$(ce(Yo))?new pae(ce(Vn),window):new gae})}return n})();class pae{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function mae(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}}class gae{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class qae extends Woe{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xR extends qae{static makeCurrent(){!function Goe(n){GH??=n}(new xR)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gae(){return vy=vy||document.querySelector("base"),vy?vy.getAttribute("href"):null}();return null==t?null:function Wae(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){vy=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Fse(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let vy=null,Qae=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();const $w=new ae("");let A$=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(Y($w),Y(it))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();class RR{constructor(e){this._doc=e}}const MR="ng-app-id";let D$=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Uw(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${MR}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(MR),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(MR,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){const i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Vn),Y(Vf),Y($D,8),Y(Yo))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();const PR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},NR=/%COMP%/g,Jae=new ae("",{providedIn:"root",factory:()=>!0});function x$(n,e){return e.map(t=>t.replace(NR,n))}let kR=(()=>{class n{constructor(t,r,i,o,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Uw(a),this.defaultRenderer=new OR(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qo.ShadowDom&&(r={...r,encapsulation:qo.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof M$?i.applyToHost(t):i instanceof FR&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case qo.Emulated:o=new M$(c,l,r,this.appId,h,s,a,m);break;case qo.ShadowDom:return new rce(c,l,t,r,s,a,this.nonce,m);default:o=new FR(c,l,r,h,s,a,m)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(Y(A$),Y(D$),Y(Vf),Y(Jae),Y(Vn),Y(Yo),Y(it),Y($D))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();class OR{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(PR[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(R$(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(R$(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=PR[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=PR[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ul.DashCase|Ul.Important)?e.style.setProperty(t,r,i&Ul.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ul.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=Kl().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function R$(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class rce extends OR{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=x$(i.id,i.styles);for(const h of l){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=h,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FR extends OR{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?x$(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class M$ extends FR{constructor(e,t,r,i,o,s,a,c){const l=i+"-"+r.id;super(e,t,r,o,s,a,c,l),this.contentAttr=function ece(n){return"_ngcontent-%COMP%".replace(NR,n)}(l),this.hostAttr=function tce(n){return"_nghost-%COMP%".replace(NR,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let ice=(()=>{class n extends RR{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Vn))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})(),oce=(()=>{class n extends RR{constructor(t){super(t),this.delegate=ce(OH,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,r,i){return this.delegate.addEventListener(t,r,i)}removeEventListener(t,r,i){return this.delegate.removeEventListener(t,r,i)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Vn))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();const P$=["alt","control","meta","shift"],sce={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ace={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let cce=(()=>{class n extends RR{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kl().onAndCancel(t,o.domEventName,s))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),P$.forEach(l=>{const h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=sce[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),P$.forEach(s=>{s!==i&&(0,ace[s])(t)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Vn))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();const hce=oH(ioe,"browser",[{provide:Yo,useValue:m$},{provide:jL,useValue:function lce(){xR.makeCurrent()},multi:!0},{provide:Vn,useFactory:function dce(){return function FY(n){HD=n}(document),document},deps:[]}]),fce=new ae(""),O$=[{provide:pw,useClass:class Kae{addToWindow(e){ln.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Q(5103,!1);return o},ln.getAllAngularTestabilities=()=>e.getAllTestabilities(),ln.getAllAngularRootElements=()=>e.getAllRootElements(),ln.frameworkStabilizers||(ln.frameworkStabilizers=[]),ln.frameworkStabilizers.push(r=>{const i=ln.getAllAngularTestabilities();let o=i.length;const s=function(){o--,0==o&&r()};i.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Kl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Wj,useClass:qx,deps:[it,Gx,pw]},{provide:qx,useClass:qx,deps:[it,Gx,pw]}],F$=[{provide:Kg,useValue:"root"},{provide:Qo,useFactory:function uce(){return new Qo},deps:[]},{provide:$w,useClass:ice,multi:!0,deps:[Vn,it,Yo]},{provide:$w,useClass:cce,multi:!0,deps:[Vn]},{provide:$w,useClass:oce,multi:!0},kR,D$,A$,{provide:BI,useExisting:kR},{provide:class _ae{},useClass:Qae,deps:[]},[]];let L$=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Vf,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Y(fce,12))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({providers:[...F$,...O$],imports:[Vw,ooe]})}return n})(),pce=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Vn))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ip=ft(635);const B$=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function j$(n){return Ye(n?.then)}function H$(n){return Ye(n[Bo])}function $$(n){return Symbol.asyncIterator&&Ye(n?.[Symbol.asyncIterator])}function z$(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const q$=function vce(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function G$(n){return Ye(n?.[q$])}function W$(n){return(0,Ip.AQ)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ip.N3)(t.read());if(i)return yield(0,Ip.N3)(void 0);yield yield(0,Ip.N3)(r)}}finally{t.releaseLock()}})}function K$(n){return Ye(n?.getReader)}function xo(n){if(n instanceof tn)return n;if(null!=n){if(H$(n))return function bce(n){return new tn(e=>{const t=n[Bo]();if(Ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(B$(n))return function Ece(n){return new tn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(j$(n))return function Ice(n){return new tn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,al)})}(n);if($$(n))return Q$(n);if(G$(n))return function wce(n){return new tn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(K$(n))return function Tce(n){return Q$(W$(n))}(n)}throw z$(n)}function Q$(n){return new tn(e=>{(function Cce(n,e){var t,r,i,o;return(0,Ip.sH)(this,void 0,void 0,function*(){try{for(t=(0,Ip.xN)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function kc(n,e,t,r=0,i=!1){const o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Yl(n,e=0){return Fe((t,r)=>{t.subscribe(He(r,i=>kc(r,n,()=>r.next(i),e),()=>kc(r,n,()=>r.complete(),e),i=>kc(r,n,()=>r.error(i),e)))})}function wp(n,e=0){return Fe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Y$(n,e){if(!n)throw new Error("Iterable cannot be null");return new tn(t=>{kc(t,e,()=>{const r=n[Symbol.asyncIterator]();kc(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function un(n,e){return e?function Mce(n,e){if(null!=n){if(H$(n))return function Ace(n,e){return xo(n).pipe(wp(e),Yl(e))}(n,e);if(B$(n))return function Sce(n,e){return new tn(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(j$(n))return function Dce(n,e){return xo(n).pipe(wp(e),Yl(e))}(n,e);if($$(n))return Y$(n,e);if(G$(n))return function xce(n,e){return new tn(t=>{let r;return kc(t,e,()=>{r=n[q$](),kc(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void t.error(s)}o?t.complete():t.next(i)},0,!0)}),()=>Ye(r?.return)&&r.return()})}(n,e);if(K$(n))return function Rce(n,e){return Y$(W$(n),e)}(n,e)}throw z$(n)}(n,e):xo(n)}const{isArray:Pce}=Array,{getPrototypeOf:Nce,prototype:kce,keys:Oce}=Object;function Z$(n){if(1===n.length){const e=n[0];if(Pce(e))return{args:e,keys:null};if(function Fce(n){return n&&"object"==typeof n&&Nce(n)===kce}(e)){const t=Oce(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function VR(n){return n[n.length-1]}function UR(n){return Ye(VR(n))?n.pop():void 0}function by(n){return function Lce(n){return n&&Ye(n.schedule)}(VR(n))?n.pop():void 0}const{isArray:Uce}=Array;function X$(n){return Ee(e=>function Bce(n,e){return Uce(e)?n(...e):n(e)}(n,e))}function J$(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let tz=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Rc),ee(hr))};static#t=this.\u0275dir=Ne({type:n})}return n})(),qd=(()=>{class n extends tz{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ii(n)))(i||n)}})();static#t=this.\u0275dir=Ne({type:n,features:[sn]})}return n})();const La=new ae(""),Hce={provide:La,useExisting:nn(()=>Ey),multi:!0},zce=new ae("");let Ey=(()=>{class n extends tz{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $ce(){const n=Kl()?Kl().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Rc),ee(hr),ee(zce,8))};static#t=this.\u0275dir=Ne({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Wr("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Dn([Hce]),sn]})}return n})();function Zl(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function rz(n){return null!=n&&"number"==typeof n.length}const Oi=new ae(""),Xl=new ae(""),qce=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class iz{static min(e){return function oz(n){return e=>{if(Zl(e.value)||Zl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function sz(n){return e=>{if(Zl(e.value)||Zl(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return az(e)}static requiredTrue(e){return function cz(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function lz(n){return Zl(n.value)||qce.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function uz(n){return e=>Zl(e.value)||!rz(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function dz(n){return e=>rz(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function hz(n){if(!n)return qw;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Zl(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return yz(e)}static composeAsync(e){return vz(e)}}function az(n){return Zl(n.value)?{required:!0}:null}function qw(n){return null}function fz(n){return null!=n}function pz(n){return uy(n)?un(n):n}function mz(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function gz(n,e){return e.map(t=>t(n))}function _z(n){return n.map(e=>function Gce(n){return!n.validate}(e)?e:t=>e.validate(t))}function yz(n){if(!n)return null;const e=n.filter(fz);return 0==e.length?null:function(t){return mz(gz(t,e))}}function BR(n){return null!=n?yz(_z(n)):null}function vz(n){if(!n)return null;const e=n.filter(fz);return 0==e.length?null:function(t){return function ez(...n){const e=UR(n),{args:t,keys:r}=Z$(n),i=new tn(o=>{const{length:s}=t;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let h=0;h<s;h++){let m=!1;xo(t[h]).subscribe(He(o,_=>{m||(m=!0,l--),a[h]=_},()=>c--,void 0,()=>{(!c||!m)&&(l||o.next(r?J$(r,a):a),o.complete())}))}});return e?i.pipe(X$(e)):i}(gz(t,e).map(pz)).pipe(Ee(mz))}}function jR(n){return null!=n?vz(_z(n)):null}function bz(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ez(n){return n._rawValidators}function Iz(n){return n._rawAsyncValidators}function HR(n){return n?Array.isArray(n)?n:[n]:[]}function Gw(n,e){return Array.isArray(n)?n.includes(e):n===e}function wz(n,e){const t=HR(e);return HR(n).forEach(i=>{Gw(t,i)||t.push(i)}),t}function Tz(n,e){return HR(e).filter(t=>!Gw(n,t))}class Cz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class to extends Cz{get formDirective(){return null}get path(){return null}}class Oc extends Cz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Az{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let $R=(()=>{class n extends Az{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Oc,2))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&ki("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[sn]})}return n})(),Dz=(()=>{class n extends Az{constructor(t){super(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(to,10))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&ki("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[sn]})}return n})();const Iy="VALID",Kw="INVALID",Tp="PENDING",wy="DISABLED";class Cp{}class xz extends Cp{constructor(e,t){super(),this.value=e,this.source=t}}class GR extends Cp{constructor(e,t){super(),this.pristine=e,this.source=t}}class WR extends Cp{constructor(e,t){super(),this.touched=e,this.source=t}}class Qw extends Cp{constructor(e,t){super(),this.status=e,this.source=t}}class Zce extends Cp{constructor(e){super(),this.source=e}}class Xce extends Cp{constructor(e){super(),this.source=e}}function KR(n){return(Yw(n)?n.validators:n)||null}function QR(n,e){return(Yw(e)?e.asyncValidators:n)||null}function Yw(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Rz(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[t])throw new Q(1001,"")}function Mz(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new Q(1002,"")})}class Zw{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=$d(()=>this.statusReactive()),this.statusReactive=Qf(void 0),this._pristine=$d(()=>this.pristineReactive()),this.pristineReactive=Qf(!0),this._touched=$d(()=>this.touchedReactive()),this.touchedReactive=Qf(!1),this._events=new V,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Fa(this.statusReactive)}set status(e){Fa(()=>this.statusReactive.set(e))}get valid(){return this.status===Iy}get invalid(){return this.status===Kw}get pending(){return this.status==Tp}get disabled(){return this.status===wy}get enabled(){return this.status!==wy}get pristine(){return Fa(this.pristineReactive)}set pristine(e){Fa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Fa(this.touchedReactive)}set touched(e){Fa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tz(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tz(e,this._rawAsyncValidators))}hasValidator(e){return Gw(this._rawValidators,e)}hasAsyncValidator(e){return Gw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const t=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new WR(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){const t=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&!1!==e.emitEvent&&this._events.next(new WR(!1,r))}markAsDirty(e={}){const t=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),t&&!1!==e.emitEvent&&this._events.next(new GR(!1,r))}markAsPristine(e={}){const t=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&!1!==e.emitEvent&&this._events.next(new GR(!0,r))}markAsPending(e={}){this.status=Tp;const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Qw(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:t})}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=wy,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new xz(this.value,r)),this._events.next(new Qw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Iy,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Iy||this.status===Tp)&&this._runAsyncValidator(r,e.emitEvent)}const t=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new xz(this.value,t)),this._events.next(new Qw(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:t})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wy:Iy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Tp,this._hasOwnPendingAsyncValidator={emitEvent:!1!==t};const r=pz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent,this,t.shouldHaveEmitted)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Qw(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new sr,this.statusChanges=new sr}_calculateStatus(){return this._allControlsDisabled()?wy:this.errors?Kw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tp)?Tp:this._anyControlsHaveStatus(Kw)?Kw:Iy}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new GR(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new WR(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Jce(n){return Array.isArray(n)?BR(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function ele(n){return Array.isArray(n)?jR(n):n||null}(this._rawAsyncValidators)}}class Ty extends Zw{constructor(e,t,r){super(KR(t),QR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Mz(this,0,e),Object.keys(e).forEach(r=>{Rz(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Pz extends Ty{}const Gd=new ae("CallSetDisabledState",{providedIn:"root",factory:()=>Cy}),Cy="always";function Xw(n,e){return[...e.path,n]}function Ay(n,e,t=Cy){YR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function nle(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Nz(n,e)})}(n,e),function ile(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function rle(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Nz(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function tle(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Jw(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function eT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function YR(n,e){const t=Ez(n);null!==e.validator?n.setValidators(bz(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Iz(n);null!==e.asyncValidator?n.setAsyncValidators(bz(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();eT(e._rawValidators,i),eT(e._rawAsyncValidators,i)}function tT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Ez(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=Iz(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return eT(e._rawValidators,r),eT(e._rawAsyncValidators,r),t}function Nz(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kz(n,e){YR(n,e)}function XR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Oz(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function JR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Ey?t=o:function ale(n){return Object.getPrototypeOf(n.constructor)===qd}(o)?r=o:i=o}),i||r||t||null}const lle={provide:to,useExisting:nn(()=>nT)},Dy=Promise.resolve();let nT=(()=>{class n extends to{get submitted(){return Fa(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=$d(()=>this.submittedReactive()),this.submittedReactive=Qf(!1),this._directives=new Set,this.ngSubmit=new sr,this.form=new Ty({},BR(t),jR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dy.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ay(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dy.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dy.then(()=>{const r=this._findContainer(t.path),i=new Ty({});kz(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dy.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Dy.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Oz(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Oi,10),ee(Xl,10),ee(Gd,8))};static#t=this.\u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&Wr("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Dn([lle]),sn]})}return n})();function Fz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Lz(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Sy=class extends Zw{constructor(e=null,t,r){super(KR(t),QR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yw(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Lz(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Fz(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Fz(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Lz(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},hle={provide:Oc,useExisting:nn(()=>eM)},Bz=Promise.resolve();let eM=(()=>{class n extends Oc{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Sy,this._registered=!1,this.name="",this.update=new sr,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JR(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),XR(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ay(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Bz.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&Oa(r);Bz.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Xw(t,this._parent):[t]}static#e=this.\u0275fac=function(r){return new(r||n)(ee(to,9),ee(Oi,10),ee(Xl,10),ee(La,10),ee(vp,8),ee(Gd,8))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Dn([hle]),sn,pi]})}return n})(),jz=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return n})();const tM=new ae(""),yle={provide:to,useExisting:nn(()=>xy)};let xy=(()=>{class n extends to{get submitted(){return Fa(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=$d(()=>this._submittedReactive()),this._submittedReactive=Qf(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new sr,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Ay(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Jw(t.control||null,t,!1),function cle(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Oz(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Zce(this.control)),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new Xce(this.form))}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Jw(r||null,t),(n=>n instanceof Sy)(i)&&(Ay(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);kz(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function ole(n,e){return tT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){YR(this.form,this),this._oldForm&&tT(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(r){return new(r||n)(ee(Oi,10),ee(Xl,10),ee(Gd,8))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Wr("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Dn([yle]),sn,pi]})}return n})();const Ele={provide:Oc,useExisting:nn(()=>iM)};let iM=(()=>{class n extends Oc{set isDisabled(t){}static#e=this._ngModelWarningSentOnce=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new sr,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=JR(0,o)}ngOnChanges(t){this._added||this._setUpControl(),XR(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Xw(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(r){return new(r||n)(ee(to,13),ee(Oi,10),ee(Xl,10),ee(La,10),ee(tM,8))};static#n=this.\u0275dir=Ne({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Dn([Ele]),sn,pi]})}return n})(),Wd=(()=>{class n{constructor(){this._validator=qw}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):qw,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,features:[pi]})}return n})();const Rle={provide:Oi,useExisting:nn(()=>rT),multi:!0};let rT=(()=>{class n extends Wd{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Oa,this.createValidator=t=>az}enabled(t){return t}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ii(n)))(i||n)}})();static#t=this.\u0275dir=Ne({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){2&r&&wo("required",i._enabled?"":null)},inputs:{required:"required"},features:[Dn([Rle]),sn]})}return n})(),iq=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({})}return n})();class oq extends Zw{constructor(e,t,r){super(KR(t),QR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Mz(this,0,e),e.forEach((r,i)=>{Rz(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function sq(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let aq=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let o={};return sq(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Ty(i,o)}record(t,r=null){const i=this._reduceControls(t);return new Pz(i,r)}control(t,r,i){let o={};return this.useNonNullable?(sq(r)?o=r:(o.validators=r,o.asyncValidators=i),new Sy(t,{...o,nonNullable:!0})):new Sy(t,r,i)}array(t,r,i){const o=t.map(s=>this._createControl(s));return new oq(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Sy||t instanceof Zw?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Fle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Gd,useValue:t.callSetDisabledState??Cy}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[iq]})}return n})(),Lle=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:tM,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Gd,useValue:t.callSetDisabledState??Cy}]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[iq]})}return n})();var Ro=ft(852);(0,Ro.registerVersion)("firebase","10.12.5","app");class Ble extends zt{constructor(e,t){super()}schedule(e,t=0){return this}}const iT={setInterval(n,e,...t){const{delegate:r}=iT;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=iT;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class cq extends Ble{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return iT.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&iT.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vr(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const aM={now:()=>(aM.delegate||Date).now(),delegate:void 0};class Ry{constructor(e,t=Ry.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Ry.now=aM.now;class lq extends Ry{constructor(e,t=Ry.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const $le=new class Hle extends lq{}(class jle extends cq{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),oT=new lq(cq);function ar(n,e,t){const r=Ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?Fe((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(He(o,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),o.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Jr}const Ap=new Gl("ANGULARFIRE2_VERSION");class sT{constructor(){return((n,e)=>{const t=(0,Ro.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r})(qle)}}const qle="app-check";function Dp(){}class uq{zone;delegate;constructor(e,t=$le){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{e.apply(this,[s])})},t,r)}}class Gle{zone;task=null;constructor(e){this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Dp,{},Dp,Dp)),t.pipe(ar({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let aT=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new uq(Zone.current)),this.insideAngular=t.run(()=>new uq(Zone.current,oT)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Y(it))};static \u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Sp(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function dq(n){return n.pipe(Yl(Sp().outsideAngular))}function Sr(n){return function Kle(n){return function(t){return(t=t.lift(new Gle(n.ngZone))).pipe(wp(n.outsideAngular),Yl(n.insideAngular))}}(Sp())(n)}var Mo=ft(345);Mo.A.registerVersion("firebase","10.12.5","app-compat");const Xle=["ngOnDestroy"];class hq{constructor(e){return e}}const xp=new ae("angularfire2.app.options"),Rp=new ae("angularfire2.app.name");function My(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const s=Mo.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Mo.A.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){const a=!!module.hot;tue("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new hq(s)}const tue=(n,...e)=>{},nue={provide:hq,useFactory:My,deps:[xp,it,[new Es,Rp]]};let rue=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:xp,useValue:t},{provide:Rp,useValue:r}]}}constructor(t){Mo.A.registerVersion("angularfire",Ap.full,"core"),Mo.A.registerVersion("angularfire",Ap.full,"app-compat"),Mo.A.registerVersion("angular",rie.full,t.toString())}static \u0275fac=function(r){return new(r||n)(Y(Yo))};static \u0275mod=rn({type:n});static \u0275inj=Qt({providers:[nue]})}return n})();function cT(n,e,t,r,i){const[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return function iue(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,s)||(fq("error",`${e} was already initialized on the ${t} Firebase App with different settings.${oue?" You may need to reload as Firebase is not HMR aware.":""}`),fq("warn",{is:i,was:s})),o;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const oue=typeof module<"u"&&!!module.hot,fq=(n,...e)=>{};function ze(...n){return un(n,by(n))}function Fi(n,e,t=1/0){return Ye(e)?Fi((r,i)=>Ee((o,s)=>e(r,o,i,s))(xo(n(r,i))),t):("number"==typeof e&&(t=e),Fe((r,i)=>function sue(n,e,t,r,i,o,s,a){const c=[];let l=0,h=0,m=!1;const _=()=>{m&&!c.length&&!l&&e.complete()},y=T=>l<r?E(T):c.push(T),E=T=>{o&&e.next(T),l++;let C=!1;xo(t(T,h++)).subscribe(He(e,P=>{i?.(P),o?y(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){const P=c.shift();s?kc(e,s,()=>E(P)):E(P)}_()}catch(P){e.error(P)}}))};return n.subscribe(He(e,y,()=>{m=!0,_()})),()=>{a?.()}}(r,i,n,t)))}function Mp(n=1/0){return Fi(Jr,n)}globalThis.\u0275AngularfireInstanceCache||=[],ft(254);const Rs=new tn(n=>n.complete());function lT(...n){const e=by(n),t=function Vce(n,e){return"number"==typeof VR(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?xo(r[0]):Mp(t)(un(r,e)):Rs}function Kn(n,e){return Fe((t,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();t.subscribe(He(r,c=>{i?.unsubscribe();let l=0;const h=o++;xo(n(c,h)).subscribe(i=He(r,m=>r.next(e?e(c,m,h,l++):m),()=>{i=null,a()}))},()=>{s=!0,a()}))})}class cue extends V{constructor(e=1/0,t=1/0,r=aM){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const s=t.now();let a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}}function cM(n={}){const{connector:e=(()=>new V),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,c,l=0,h=!1,m=!1;const _=()=>{a?.unsubscribe(),a=void 0},y=()=>{_(),s=c=void 0,h=m=!1},E=()=>{const T=s;y(),T?.unsubscribe()};return Fe((T,C)=>{l++,!m&&!h&&_();const P=c=c??e();C.add(()=>{l--,0===l&&!m&&!h&&(a=lM(E,i))}),P.subscribe(C),!s&&l>0&&(s=new Nr({next:R=>P.next(R),error:R=>{m=!0,_(),a=lM(y,t,R),P.error(R)},complete:()=>{h=!0,_(),a=lM(y,r),P.complete()}}),xo(T).subscribe(s))})(o)}}function lM(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Nr({next:()=>{r.unsubscribe(),n()}});return xo(e(...t)).subscribe(r)}function uM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,cM({connector:()=>new cue(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Py=tr(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function no(n,e){return Fe((t,r)=>{let i=0;t.subscribe(He(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Qd(n){return n<=0?()=>Rs:Fe((e,t)=>{let r=0;e.subscribe(He(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function uT(n){return Fe((e,t)=>{let r=!1;e.subscribe(He(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pq(n=lue){return Fe((e,t)=>{let r=!1;e.subscribe(He(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function lue(){return new Py}function Jl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((i,o)=>n(i,o,r)):Jr,Qd(1),t?uT(e):pq(()=>new Py))}function mq(n,e){return Ye(e)?Kn(()=>n,e):Kn(()=>n)}const dM=new ae("angularfire2.auth.use-emulator"),hM=new ae("angularfire2.auth.settings"),fM=new ae("angularfire2.auth.tenant-id"),pM=new ae("angularfire2.auth.langugage-code"),mM=new ae("angularfire2.auth.use-device-language"),gM=new ae("angularfire.auth.persistence"),_M=(n,e,t,r,i,o,s,a)=>cT(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(const[l,h]of Object.entries(s))c.settings[l]=h;return a&&c.setPersistence(a),c},[t,r,i,o,s,a]);let eu=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,c,l,h,m,_,y){const E=new V,T=ze(void 0).pipe(Yl(s.outsideAngular),Kn(()=>o.runOutsideAngular(()=>Promise.resolve().then(ft.bind(ft,254)))),Ee(()=>My(t,o,r)),Ee(C=>_M(C,o,a,l,h,m,c,_)),uM({bufferSize:1,refCount:!1}));if(Uw(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{T.pipe(Jl()).subscribe();const C=T.pipe(Kn(U=>U.getRedirectResult().then(J=>J,()=>null)),Sr,uM({bufferSize:1,refCount:!1})),P=T.pipe(Kn(U=>new tn(J=>({unsubscribe:o.runOutsideAngular(()=>U.onAuthStateChanged(ve=>J.next(ve),ve=>J.error(ve),()=>J.complete()))})))),R=T.pipe(Kn(U=>new tn(J=>({unsubscribe:o.runOutsideAngular(()=>U.onIdTokenChanged(ve=>J.next(ve),ve=>J.error(ve),()=>J.complete()))}))));this.authState=C.pipe(mq(P),wp(s.outsideAngular),Yl(s.insideAngular)),this.user=C.pipe(mq(R),wp(s.outsideAngular),Yl(s.insideAngular)),this.idToken=this.user.pipe(Kn(U=>U?un(U.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(Kn(U=>U?un(U.getIdTokenResult()):ze(null))),this.credential=lT(C,E,this.authState.pipe(no(U=>!U))).pipe(Ee(U=>U?.user?U:null),wp(s.outsideAngular),Yl(s.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Xle.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(a=>{const c=a?.[o];return"function"==typeof c?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(h=>{const m=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,m),m})})})}))(this,T,o,{spy:{apply:(C,P,R)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&R.then(U=>E.next(U))}}})}static \u0275fac=function(r){return new(r||n)(Y(xp),Y(Rp,8),Y(Yo),Y(it),Y(aT),Y(dM,8),Y(hM,8),Y(fM,8),Y(pM,8),Y(mM,8),Y(gM,8),Y(sT,8))};static \u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),due=(()=>{class n{constructor(){Mo.A.registerVersion("angularfire",Ap.full,"auth-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rn({type:n});static \u0275inj=Qt({providers:[eu]})}return n})();function yM(n,e=oT){return Fe((t,r)=>{let i=null,o=null,s=null;const a=()=>{if(i){i.unsubscribe(),i=null;const l=o;o=null,r.next(l)}};function c(){const l=s+n,h=e.now();if(h<l)return i=this.schedule(void 0,l-h),void r.add(i);a()}t.subscribe(He(r,l=>{o=l,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}var ne=ft(467),D=ft(76),ia=ft(362);const gq="firebasestorage.googleapis.com",_q="storageBucket";class cr extends D.g{constructor(e,t,r=0){super(vM(e),`Firebase Storage: ${t} (${vM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,cr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Qn=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Qn||{});function vM(n){return"storage/"+n}function bM(){return new cr(Qn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yq(){return new cr(Qn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function vq(){return new cr(Qn.CANCELED,"User canceled the upload/download.")}function bq(){return new cr(Qn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Pp(n){return new cr(Qn.INVALID_ARGUMENT,n)}function Eq(){return new cr(Qn.APP_DELETED,"The Firebase app was deleted.")}function Iq(n){return new cr(Qn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ny(n,e){return new cr(Qn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ky(n){throw new cr(Qn.INTERNAL_ERROR,"Internal error: "+n)}class Li{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Li.makeFromUrl(e,t)}catch{return new Li(e,"")}if(""===r.path)return r;throw function Eue(n){return new cr(Qn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function l(J){J.path_=decodeURIComponent(J.path)}const m=t.replace(/[.]/g,"\\."),U=[{regex:a,indices:{bucket:1,path:3},postModify:function o(J){"/"===J.path.charAt(J.path.length-1)&&(J.path_=J.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp(`^https?://${t===gq?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:l}];for(let J=0;J<U.length;J++){const ve=U[J],Te=ve.regex.exec(e);if(Te){let S=Te[ve.indices.path];S||(S=""),r=new Li(Te[ve.indices.bucket],S),ve.postModify(r);break}}if(null==r)throw function bue(n){return new cr(Qn.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class Aue{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dT(n){return"string"==typeof n||n instanceof String}function wq(n){return EM()&&n instanceof Blob}function EM(){return typeof Blob<"u"}function IM(n,e,t,r){if(r<e)throw Pp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Pp(`Invalid value for '${n}'. Expected ${t} or less.`)}function Fc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Tq(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Np=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Np||{});function Cq(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),o=-1!==e.indexOf(n);return t||i||o}class Pue{constructor(e,t,r,i,o,s,a,c,l,h,m,_=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=m,this.retry=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());!function xue(n){return void 0!==n}(c)?o():o(c)}catch(c){s(c)}else if(null!==a){const c=bM();c.serverResponse=a.getErrorText(),s(this.errorCallback_?this.errorCallback_(a,c):c)}else s(i.canceled?this.appDelete_?Eq():vq():yq())};this.canceled_?t(0,new hT(!1,null,!0)):this.backoffId_=function Due(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return 2===a}let l=!1;function h(...C){l||(l=!0,e.apply(null,C))}function m(C){i=setTimeout(()=>{i=null,n(y,c())},C)}function _(){o&&clearTimeout(o)}function y(C,...P){if(l)return void _();if(C)return _(),void h.call(null,C,...P);if(c()||s)return _(),void h.call(null,C,...P);let U;r<64&&(r*=2),1===a?(a=2,U=0):U=1e3*(r+Math.random()),m(U)}let E=!1;function T(C){E||(E=!0,_(),!l&&(null!==i?(C||(a=2),clearTimeout(i),m(0)):C||(a=1)))}return m(0),o=setTimeout(()=>{s=!0,T(!0)},t),T}((r,i)=>{if(i)return void r(!1,new hT(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Np.NO_ERROR,c=o.getStatus();if(!a||Cq(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===Np.ABORT;return void r(!1,new hT(!1,null,h))}const l=-1!==this.successCodes_.indexOf(c);r(!0,new hT(l,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Sue(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Uue(...n){const e=function Vue(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(EM())return new Blob(n);throw new cr(Qn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ts={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wM{constructor(e,t){this.data=e,this.contentType=t||null}}function TM(n,e){switch(n){case ts.RAW:return new wM(Aq(e));case ts.BASE64:case ts.BASE64URL:return new wM(Dq(n,e));case ts.DATA_URL:return new wM(function $ue(n){const e=new Sq(n);return e.base64?Dq(ts.BASE64,e.rest):function Hue(n){let e;try{e=decodeURIComponent(n)}catch{throw Ny(ts.DATA_URL,"Malformed data URL.")}return Aq(e)}(e.rest)}(e),function zue(n){return new Sq(n).contentType}(e))}throw bM()}function Aq(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Dq(n,e){switch(n){case ts.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw Ny(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ts.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ny(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function jue(n){if(typeof atob>"u")throw function Cue(n){return new cr(Qn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Ny(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Sq{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ny(ts.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function que(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Va{constructor(e,t){let r=0,i="";wq(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(wq(this.data_)){const i=function Bue(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Va(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Va(r,!0)}}static getBlob(...e){if(EM()){const t=e.map(r=>r instanceof Va?r.data_:r);return new Va(Uue.apply(null,t))}{const t=e.map(s=>dT(s)?TM(ts.RAW,s).data:s.data_);let r=0;t.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Va(i,!0)}}uploadData(){return this.data_}}function CM(n){let e;try{e=JSON.parse(n)}catch{return null}return function Mue(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function xq(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Kue(n,e){return e}class ro{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Kue}}let fT=null;function Oy(){if(fT)return fT;const n=[];n.push(new ro("bucket")),n.push(new ro("generation")),n.push(new ro("metageneration")),n.push(new ro("name","fullPath",!0));const t=new ro("name");t.xform=function e(o,s){return function Que(n){return!dT(n)||n.length<2?n:xq(n)}(s)},n.push(t);const i=new ro("size");return i.xform=function r(o,s){return void 0!==s?Number(s):s},n.push(i),n.push(new ro("timeCreated")),n.push(new ro("updated")),n.push(new ro("md5Hash",null,!0)),n.push(new ro("cacheControl",null,!0)),n.push(new ro("contentDisposition",null,!0)),n.push(new ro("contentEncoding",null,!0)),n.push(new ro("contentLanguage",null,!0)),n.push(new ro("contentType",null,!0)),n.push(new ro("metadata","customMetadata",!0)),fT=n,fT}function Rq(n,e,t){const r=CM(e);return null===r?null:function Zue(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const s=t[o];r[s.local]=s.xform(r,e[s.server])}return function Yue(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new Li(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function AM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const Mq="prefixes",Pq="items";class Ua{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ba(n){if(!n)throw bM()}function pT(n,e){return function t(r,i){const o=Rq(n,i,e);return Ba(null!==o),o}}function kp(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function yue(){return new cr(Qn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function _ue(){return new cr(Qn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function gue(n){return new cr(Qn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function vue(n){return new cr(Qn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Fy(n){const e=kp(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function mue(n){return new cr(Qn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function Nq(n,e,t){const i=Fc(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Ua(i,"GET",pT(n,t),s);return a.errorHandler=Fy(e),a}function rde(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=Fc(e.bucketOnlyServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Ua(a,"GET",function tde(n,e){return function t(r,i){const o=function ede(n,e,t){const r=CM(t);return null===r?null:function Jue(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Mq])for(const i of t[Mq]){const o=i.replace(/\/$/,""),s=n._makeStorageReference(new Li(e,o));r.prefixes.push(s)}if(t[Pq])for(const i of t[Pq]){const o=n._makeStorageReference(new Li(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Ba(null!==o),o}}(n,e.bucket),l);return h.urlParams=o,h.errorHandler=kp(e),h}function Oq(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function ade(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class mT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function DM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ba(!1)}return Ba(!!t&&-1!==(e||["active"]).indexOf(t)),t}const dde={STATE_CHANGED:"state_changed"},io={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function SM(n){switch(n){case"running":case"pausing":case"canceling":return io.RUNNING;case"paused":return io.PAUSED;case"success":return io.SUCCESS;case"canceled":return io.CANCELED;default:return io.ERROR}}class hde{constructor(e,t,r){if(function Rue(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Op(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let Vq=null;class fde{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Np.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Np.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Np.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw ky("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ky("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ky("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ky("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ky("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class pde extends fde{initXhr(){this.xhr_.responseType="text"}}function oa(){return Vq?Vq():new pde}class Uq{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Oy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Qn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(Cq(i.status,[])){if(!o)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=yq()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Qn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function cde(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s=Oq(e,r,i),a={name:s.fullPath},c=Fc(o,n.host,n._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},m=AM(s,t),E=new Ua(c,"POST",function y(T){let C;DM(T);try{C=T.getResponseHeader("X-Goog-Upload-URL")}catch{Ba(!1)}return Ba(dT(C)),C},n.maxUploadRetryTime);return E.urlParams=a,E.headers=h,E.body=m,E.errorHandler=kp(e),E}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,oa,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function lde(n,e,t,r){const c=new Ua(t,"POST",function o(l){const h=DM(l,["active","final"]);let m=null;try{m=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ba(!1)}m||Ba(!1);const _=Number(m);return Ba(!isNaN(_)),new mT(_,r.size(),"final"===h)},n.maxUploadRetryTime);return c.headers={"X-Goog-Upload-Command":"query"},c.errorHandler=kp(e),c}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,oa,t,r);this._request=o,o.getPromise().then(s=>{this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new mT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=function ude(n,e,t,r,i,o,s,a){const c=new mT(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw function wue(){return new cr(Qn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const l=c.total-c.current;let h=l;i>0&&(h=Math.min(h,i));const m=c.current;let y="";y=0===h?"finalize":l===h?"upload, finalize":"upload";const E={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${c.current}`},T=r.slice(m,m+h);if(null===T)throw bq();const U=new Ua(t,"POST",function C(J,ve){const Te=DM(J,["active","final"]),O=c.current+h,S=r.size();let k;return k="final"===Te?pT(e,o)(J,ve):null,new mT(O,S,"final"===Te,k)},e.maxUploadRetryTime);return U.headers=E,U.body=T.uploadData(),U.progressCallback=a||null,U.errorHandler=kp(n),U}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(c){return this._error=c,void this._transition("error")}const a=this._ref.storage._makeRequest(s,oa,i,o,!1);this._request=a,a.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Nq(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,oa,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Fq(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},c=function a(){let U="";for(let J=0;J<2;J++)U+=Math.random().toString().slice(2);return U}();s["Content-Type"]="multipart/related; boundary="+c;const l=Oq(e,r,i),h=AM(l,t),y=Va.getBlob("--"+c+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+c+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+c+"--");if(null===y)throw bq();const E={name:l.fullPath},T=Fc(o,n.host,n._protocol),P=n.maxUploadRetryTime,R=new Ua(T,"POST",pT(n,t),P);return R.urlParams=E,R.headers=s,R.body=y.uploadData(),R.errorHandler=kp(e),R}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,oa,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=vq(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=SM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new hde(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(SM(this._state)){case io.SUCCESS:Op(this._resolve.bind(null,this.snapshot))();break;case io.CANCELED:case io.ERROR:Op(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(SM(this._state)){case io.RUNNING:case io.PAUSED:e.next&&Op(e.next.bind(e,this.snapshot))();break;case io.SUCCESS:e.complete&&Op(e.complete.bind(e))();break;default:e.error&&Op(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Yd{constructor(e,t){this._service=e,this._location=t instanceof Li?t:Li.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yd(e,t)}get root(){const e=new Li(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xq(this._location.path)}get storage(){return this._service}get parent(){const e=function Gue(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Li(this._location.bucket,e);return new Yd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Iq(e)}}function jq(n,e,t){return xM.apply(this,arguments)}function xM(){return(xM=(0,ne.A)(function*(n,e,t){const i=yield Hq(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield jq(n,e,i.nextPageToken))})).apply(this,arguments)}function Hq(n,e){null!=e&&"number"==typeof e.maxResults&&IM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=rde(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,oa)}function Ade(n){n._throwIfRoot("getDownloadURL");const e=function ide(n,e,t){const i=Fc(e.fullServerUrl(),n.host,n._protocol),s=n.maxOperationRetryTime,a=new Ua(i,"GET",function nde(n,e){return function t(r,i){const o=Rq(n,i,e);return Ba(null!==o),function Xue(n,e,t,r){const i=CM(e);if(null===i||!dT(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const m=n.fullPath;return Fc("/b/"+s(n.bucket)+"/o/"+s(m),t,r)+Tq({alt:"media",token:l})})[0]}(o,i,n.host,n._protocol)}}(n,t),s);return a.errorHandler=Fy(e),a}(n.storage,n._location,Oy());return n.storage.makeRequestWithTokens(e,oa).then(t=>{if(null===t)throw function Tue(){return new cr(Qn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function $q(n,e){const t=function Wue(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Li(n._location.bucket,t);return new Yd(n.storage,r)}function zq(n,e){if(n instanceof RM){const t=n;if(null==t._bucket)throw function Iue(){return new cr(Qn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_q+"' property when initializing the app?")}();const r=new Yd(t,t._bucket);return null!=e?zq(r,e):r}return void 0!==e?$q(n,e):n}function Rde(n,e){if(e&&function Sde(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof RM)return function xde(n,e){return new Yd(n,e)}(n,e);throw Pp("To use ref(service, url), the first argument must be a Storage instance.")}return zq(n,e)}function qq(n,e){const t=e?.[_q];return null==t?null:Li.makeFromBucketSpec(t,n)}class RM{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=gq,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Li.makeFromBucketSpec(i,this._host):qq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Li.makeFromBucketSpec(this._url,e):qq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){IM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){IM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ne.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ne.A)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yd(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Aue(Eq());{const s=function Lue(n,e,t,r,i,o,s=!0){const a=Tq(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return function Oue(n,e){e&&(n["X-Firebase-GMPID"]=e)}(l,e),function Nue(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(l,t),function kue(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(l,o),function Fue(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(l,r),new Pue(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){var r=this;return(0,ne.A)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const Gq="@firebase/storage";function Qq(n,e){return Rde(n=(0,D.Ku)(n),e)}function Bde(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new RM(t,r,i,e,Ro.SDK_VERSION)}!function jde(){(0,Ro._registerComponent)(new ia.uA("storage",Bde,"PUBLIC").setMultipleInstances(!0)),(0,Ro.registerVersion)(Gq,"0.12.6",""),(0,Ro.registerVersion)(Gq,"0.12.6","esm2017")}();class gT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Zq{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new gT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new gT(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?s=>t(new gT(s,this,this._ref)):{next:t.next?s=>t.next(new gT(s,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class Xq{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Lc(e,this._service))}get items(){return this._delegate.items.map(e=>new Lc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Lc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Ude(n,e){return $q(n,e)}(this._delegate,e);return new Lc(t,this.storage)}get root(){return new Lc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Lc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Zq(function Pde(n,e,t){return function Ede(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Uq(n,new Va(e),t)}(n=(0,D.Ku)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ts.RAW,r){this._throwIfRoot("putString");const i=TM(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new Zq(new Uq(this._delegate,new Va(i.data,!0),o),this)}listAll(){return function Fde(n){return function wde(n){const e={prefixes:[],items:[]};return jq(n,e).then(()=>e)}(n=(0,D.Ku)(n))}(this._delegate).then(e=>new Xq(e,this.storage))}list(e){return function Ode(n,e){return Hq(n=(0,D.Ku)(n),e)}(this._delegate,e||void 0).then(t=>new Xq(t,this.storage))}getMetadata(){return function Nde(n){return function Tde(n){n._throwIfRoot("getMetadata");const e=Nq(n.storage,n._location,Oy());return n.storage.makeRequestWithTokens(e,oa)}(n=(0,D.Ku)(n))}(this._delegate)}updateMetadata(e){return function kde(n,e){return function Cde(n,e){n._throwIfRoot("updateMetadata");const t=function ode(n,e,t,r){const o=Fc(e.fullServerUrl(),n.host,n._protocol),a=AM(t,r),l=n.maxOperationRetryTime,h=new Ua(o,"PATCH",pT(n,r),l);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=Fy(e),h}(n.storage,n._location,e,Oy());return n.storage.makeRequestWithTokens(t,oa)}(n=(0,D.Ku)(n),e)}(this._delegate,e)}getDownloadURL(){return function Lde(n){return Ade(n=(0,D.Ku)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Vde(n){return function Dde(n){n._throwIfRoot("deleteObject");const e=function sde(n,e){const r=Fc(e.fullServerUrl(),n.host,n._protocol),a=new Ua(r,"DELETE",function s(c,l){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Fy(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,oa)}(n=(0,D.Ku)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Iq(e)}}class Jq{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(e4(e))throw Pp("ref() expected a child path but got a URL, use refFromURL instead.");return new Lc(Qq(this._delegate,e),this)}refFromURL(e){if(!e4(e))throw Pp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Li.makeFromUrl(e,this._delegate.host)}catch{throw Pp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Lc(Qq(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function Yq(n,e,t,r={}){!function Mde(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,D.Fy)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function e4(n){return/^[A-Za-z]+:\/\//.test(n)}function qde(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Jq(t,r)}function t4(n){const e=function Wde(n){return new tn(e=>{const t=s=>e.next(s);t(n.snapshot);const o=n.on("state_changed",t);return n.then(s=>{t(s),e.complete()},s=>{t(n.snapshot),(s=>{e.error(s)})(s)}),function(){o()}}).pipe(yM(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Ee(t=>t.bytesTransferred/t.totalBytes*100))}}function _T(n){return{getDownloadURL:()=>ze(void 0).pipe(dq,Kn(()=>n.getDownloadURL()),Sr),getMetadata:()=>ze(void 0).pipe(dq,Kn(()=>n.getMetadata()),Sr),delete:()=>un(n.delete()),child:e=>_T(n.child(e)),updateMetadata:e=>un(n.updateMetadata(e)),put:(e,t)=>t4(n.put(e,t)),putString:(e,t,r)=>t4(n.putString(e,t,r)),list:e=>un(n.list(e)),listAll:()=>un(n.listAll())}}!function Gde(n){const e={TaskState:io,TaskEvent:dde,StringFormat:ts,Storage:Jq,Reference:Lc};n.INTERNAL.registerComponent(new ia.uA("storage-compat",qde,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.9")}(Mo.A);const Kde=new ae("angularfire2.storageBucket"),Qde=new ae("angularfire2.storage.maxUploadRetryTime"),Yde=new ae("angularfire2.storage.maxOperationRetryTime"),Zde=new ae("angularfire2.storage.use-emulator");let Xde=(()=>{class n{storage;constructor(t,r,i,o,s,a,c,l,h,m){const _=My(t,s,r);this.storage=cT(`${_.name}.storage.${i}`,"AngularFireStorage",_.name,()=>{const y=s.runOutsideAngular(()=>_.storage(i||void 0)),E=h;return E&&y.useEmulator(...E),c&&y.setMaxUploadRetryTime(c),l&&y.setMaxOperationRetryTime(l),y},[c,l])}ref(t){return _T(this.storage.ref(t))}refFromURL(t){return _T(this.storage.refFromURL(t))}upload(t,r,i){return _T(this.storage.ref(t)).put(r,i)}static \u0275fac=function(r){return new(r||n)(Y(xp),Y(Rp,8),Y(Kde,8),Y(Yo),Y(it),Y(aT),Y(Qde,8),Y(Yde,8),Y(Zde,8),Y(sT,8))};static \u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Jde=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=rn({type:n});static \u0275inj=Qt({})}return n})(),ehe=(()=>{class n{constructor(){Mo.A.registerVersion("angularfire",Ap.full,"gcs-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rn({type:n});static \u0275inj=Qt({providers:[Xde],imports:[Jde]})}return n})();function yT(...n){return function the(){return Mp(1)}()(un(n,by(n)))}function Ly(...n){const e=by(n);return Fe((t,r)=>{(e?yT(n,t,e):yT(n,t)).subscribe(r)})}function MM(){return Fe((n,e)=>{let t,r=!1;n.subscribe(He(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Fp(n,e){return Fe(function nhe(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(He(s,h=>{const m=l++;c=a?n(c,h,m):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(n,e,arguments.length>=2,!0))}function PM(n,e=Jr){return n=n??rhe,Fe((t,r)=>{let i,o=!0;t.subscribe(He(r,s=>{const a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function rhe(n,e){return n===e}var Zd,o4,ns=ft(41),n4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r4={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(O,S,k){k||(k=0);var B=Array(16);if("string"==typeof S)for(var H=0;16>H;++H)B[H]=S.charCodeAt(k++)|S.charCodeAt(k++)<<8|S.charCodeAt(k++)<<16|S.charCodeAt(k++)<<24;else for(H=0;16>H;++H)B[H]=S[k++]|S[k++]<<8|S[k++]<<16|S[k++]<<24;var W=O.g[3],L=(S=O.g[0])+(W^(k=O.g[1])&((H=O.g[2])^W))+B[0]+3614090360&4294967295;L=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=(k=(H=(W=(S=k+(L<<7&4294967295|L>>>25))+((L=W+(H^S&(k^H))+B[1]+3905402710&4294967295)<<12&4294967295|L>>>20))+((L=H+(k^W&(S^k))+B[2]+606105819&4294967295)<<17&4294967295|L>>>15))+((L=k+(S^H&(W^S))+B[3]+3250441966&4294967295)<<22&4294967295|L>>>10))+((L=S+(W^k&(H^W))+B[4]+4118548399&4294967295)<<7&4294967295|L>>>25))+((L=W+(H^S&(k^H))+B[5]+1200080426&4294967295)<<12&4294967295|L>>>20))+((L=H+(k^W&(S^k))+B[6]+2821735955&4294967295)<<17&4294967295|L>>>15))+((L=k+(S^H&(W^S))+B[7]+4249261313&4294967295)<<22&4294967295|L>>>10))+((L=S+(W^k&(H^W))+B[8]+1770035416&4294967295)<<7&4294967295|L>>>25))+((L=W+(H^S&(k^H))+B[9]+2336552879&4294967295)<<12&4294967295|L>>>20))+((L=H+(k^W&(S^k))+B[10]+4294925233&4294967295)<<17&4294967295|L>>>15))+((L=k+(S^H&(W^S))+B[11]+2304563134&4294967295)<<22&4294967295|L>>>10))+((L=S+(W^k&(H^W))+B[12]+1804603682&4294967295)<<7&4294967295|L>>>25))+((L=W+(H^S&(k^H))+B[13]+4254626195&4294967295)<<12&4294967295|L>>>20))+((L=H+(k^W&(S^k))+B[14]+2792965006&4294967295)<<17&4294967295|L>>>15))+((L=k+(S^H&(W^S))+B[15]+1236535329&4294967295)<<22&4294967295|L>>>10))+((L=S+(H^W&(k^H))+B[1]+4129170786&4294967295)<<5&4294967295|L>>>27))+((L=W+(k^H&(S^k))+B[6]+3225465664&4294967295)<<9&4294967295|L>>>23))+((L=H+(S^k&(W^S))+B[11]+643717713&4294967295)<<14&4294967295|L>>>18))+((L=k+(W^S&(H^W))+B[0]+3921069994&4294967295)<<20&4294967295|L>>>12))+((L=S+(H^W&(k^H))+B[5]+3593408605&4294967295)<<5&4294967295|L>>>27))+((L=W+(k^H&(S^k))+B[10]+38016083&4294967295)<<9&4294967295|L>>>23))+((L=H+(S^k&(W^S))+B[15]+3634488961&4294967295)<<14&4294967295|L>>>18))+((L=k+(W^S&(H^W))+B[4]+3889429448&4294967295)<<20&4294967295|L>>>12))+((L=S+(H^W&(k^H))+B[9]+568446438&4294967295)<<5&4294967295|L>>>27))+((L=W+(k^H&(S^k))+B[14]+3275163606&4294967295)<<9&4294967295|L>>>23))+((L=H+(S^k&(W^S))+B[3]+4107603335&4294967295)<<14&4294967295|L>>>18))+((L=k+(W^S&(H^W))+B[8]+1163531501&4294967295)<<20&4294967295|L>>>12))+((L=S+(H^W&(k^H))+B[13]+2850285829&4294967295)<<5&4294967295|L>>>27))+((L=W+(k^H&(S^k))+B[2]+4243563512&4294967295)<<9&4294967295|L>>>23))+((L=H+(S^k&(W^S))+B[7]+1735328473&4294967295)<<14&4294967295|L>>>18))+((L=k+(W^S&(H^W))+B[12]+2368359562&4294967295)<<20&4294967295|L>>>12))+((L=S+(k^H^W)+B[5]+4294588738&4294967295)<<4&4294967295|L>>>28))+((L=W+(S^k^H)+B[8]+2272392833&4294967295)<<11&4294967295|L>>>21))+((L=H+(W^S^k)+B[11]+1839030562&4294967295)<<16&4294967295|L>>>16))+((L=k+(H^W^S)+B[14]+4259657740&4294967295)<<23&4294967295|L>>>9))+((L=S+(k^H^W)+B[1]+2763975236&4294967295)<<4&4294967295|L>>>28))+((L=W+(S^k^H)+B[4]+1272893353&4294967295)<<11&4294967295|L>>>21))+((L=H+(W^S^k)+B[7]+4139469664&4294967295)<<16&4294967295|L>>>16))+((L=k+(H^W^S)+B[10]+3200236656&4294967295)<<23&4294967295|L>>>9))+((L=S+(k^H^W)+B[13]+681279174&4294967295)<<4&4294967295|L>>>28))+((L=W+(S^k^H)+B[0]+3936430074&4294967295)<<11&4294967295|L>>>21))+((L=H+(W^S^k)+B[3]+3572445317&4294967295)<<16&4294967295|L>>>16))+((L=k+(H^W^S)+B[6]+76029189&4294967295)<<23&4294967295|L>>>9))+((L=S+(k^H^W)+B[9]+3654602809&4294967295)<<4&4294967295|L>>>28))+((L=W+(S^k^H)+B[12]+3873151461&4294967295)<<11&4294967295|L>>>21))+((L=H+(W^S^k)+B[15]+530742520&4294967295)<<16&4294967295|L>>>16))+((L=k+(H^W^S)+B[2]+3299628645&4294967295)<<23&4294967295|L>>>9))+((L=S+(H^(k|~W))+B[0]+4096336452&4294967295)<<6&4294967295|L>>>26))+((L=W+(k^(S|~H))+B[7]+1126891415&4294967295)<<10&4294967295|L>>>22))+((L=H+(S^(W|~k))+B[14]+2878612391&4294967295)<<15&4294967295|L>>>17))+((L=k+(W^(H|~S))+B[5]+4237533241&4294967295)<<21&4294967295|L>>>11))+((L=S+(H^(k|~W))+B[12]+1700485571&4294967295)<<6&4294967295|L>>>26))+((L=W+(k^(S|~H))+B[3]+2399980690&4294967295)<<10&4294967295|L>>>22))+((L=H+(S^(W|~k))+B[10]+4293915773&4294967295)<<15&4294967295|L>>>17))+((L=k+(W^(H|~S))+B[1]+2240044497&4294967295)<<21&4294967295|L>>>11))+((L=S+(H^(k|~W))+B[8]+1873313359&4294967295)<<6&4294967295|L>>>26))+((L=W+(k^(S|~H))+B[15]+4264355552&4294967295)<<10&4294967295|L>>>22))+((L=H+(S^(W|~k))+B[6]+2734768916&4294967295)<<15&4294967295|L>>>17))+((L=k+(W^(H|~S))+B[13]+1309151649&4294967295)<<21&4294967295|L>>>11))+((W=(S=k+((L=S+(H^(k|~W))+B[4]+4149444226&4294967295)<<6&4294967295|L>>>26))+((L=W+(k^(S|~H))+B[11]+3174756917&4294967295)<<10&4294967295|L>>>22))^((H=W+((L=H+(S^(W|~k))+B[2]+718787259&4294967295)<<15&4294967295|L>>>17))|~S))+B[9]+3951481745&4294967295,O.g[0]=O.g[0]+S&4294967295,O.g[1]=O.g[1]+(H+(L<<21&4294967295|L>>>11))&4294967295,O.g[2]=O.g[2]+H&4294967295,O.g[3]=O.g[3]+W&4294967295}function s(O,S){this.h=S;for(var k=[],B=!0,H=O.length-1;0<=H;H--){var W=0|O[H];B&&W==S||(k[H]=W,B=!1)}this.g=k}(function e(O,S){function k(){}k.prototype=S.prototype,O.D=S.prototype,O.prototype=new k,O.prototype.constructor=O,O.C=function(B,H,W){for(var L=Array(arguments.length-2),Ls=2;Ls<arguments.length;Ls++)L[Ls-2]=arguments[Ls];return S.prototype[H].apply(B,L)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(O,S){void 0===S&&(S=O.length);for(var k=S-this.blockSize,B=this.B,H=this.h,W=0;W<S;){if(0==H)for(;W<=k;)i(this,O,W),W+=this.blockSize;if("string"==typeof O){for(;W<S;)if(B[H++]=O.charCodeAt(W++),H==this.blockSize){i(this,B),H=0;break}}else for(;W<S;)if(B[H++]=O[W++],H==this.blockSize){i(this,B),H=0;break}}this.h=H,this.o+=S},r.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var S=1;S<O.length-8;++S)O[S]=0;var k=8*this.o;for(S=O.length-8;S<O.length;++S)O[S]=255&k,k/=256;for(this.u(O),O=Array(16),S=k=0;4>S;++S)for(var B=0;32>B;B+=8)O[k++]=this.g[S]>>>B&255;return O};var a={};function c(O){return-128<=O&&128>O?function o(O,S){var k=a;return Object.prototype.hasOwnProperty.call(k,O)?k[O]:k[O]=S(O)}(O,function(S){return new s([0|S],0>S?-1:0)}):new s([0|O],0>O?-1:0)}function l(O){if(isNaN(O)||!isFinite(O))return m;if(0>O)return C(l(-O));for(var S=[],k=1,B=0;O>=k;B++)S[B]=O/k|0,k*=4294967296;return new s(S,0)}var m=c(0),_=c(1),y=c(16777216);function E(O){if(0!=O.h)return!1;for(var S=0;S<O.g.length;S++)if(0!=O.g[S])return!1;return!0}function T(O){return-1==O.h}function C(O){for(var S=O.g.length,k=[],B=0;B<S;B++)k[B]=~O.g[B];return new s(k,~O.h).add(_)}function P(O,S){return O.add(C(S))}function R(O,S){for(;(65535&O[S])!=O[S];)O[S+1]+=O[S]>>>16,O[S]&=65535,S++}function U(O,S){this.g=O,this.h=S}function J(O,S){if(E(S))throw Error("division by zero");if(E(O))return new U(m,m);if(T(O))return S=J(C(O),S),new U(C(S.g),C(S.h));if(T(S))return S=J(O,C(S)),new U(C(S.g),S.h);if(30<O.g.length){if(T(O)||T(S))throw Error("slowDivide_ only works with positive integers.");for(var k=_,B=S;0>=B.l(O);)k=ve(k),B=ve(B);var H=Te(k,1),W=Te(B,1);for(B=Te(B,2),k=Te(k,2);!E(B);){var L=W.add(B);0>=L.l(O)&&(H=H.add(k),W=L),B=Te(B,1),k=Te(k,1)}return S=P(O,H.j(S)),new U(H,S)}for(H=m;0<=O.l(S);){for(k=Math.max(1,Math.floor(O.m()/S.m())),B=48>=(B=Math.ceil(Math.log(k)/Math.LN2))?1:Math.pow(2,B-48),L=(W=l(k)).j(S);T(L)||0<L.l(O);)L=(W=l(k-=B)).j(S);E(W)&&(W=_),H=H.add(W),O=P(O,L)}return new U(H,O)}function ve(O){for(var S=O.g.length+1,k=[],B=0;B<S;B++)k[B]=O.i(B)<<1|O.i(B-1)>>>31;return new s(k,O.h)}function Te(O,S){var k=S>>5;S%=32;for(var B=O.g.length-k,H=[],W=0;W<B;W++)H[W]=0<S?O.i(W+k)>>>S|O.i(W+k+1)<<32-S:O.i(W+k);return new s(H,O.h)}(n=s.prototype).m=function(){if(T(this))return-C(this).m();for(var O=0,S=1,k=0;k<this.g.length;k++){var B=this.i(k);O+=(0<=B?B:4294967296+B)*S,S*=4294967296}return O},n.toString=function(O){if(2>(O=O||10)||36<O)throw Error("radix out of range: "+O);if(E(this))return"0";if(T(this))return"-"+C(this).toString(O);for(var S=l(Math.pow(O,6)),k=this,B="";;){var H=J(k,S).g,W=((0<(k=P(k,H.j(S))).g.length?k.g[0]:k.h)>>>0).toString(O);if(E(k=H))return W+B;for(;6>W.length;)W="0"+W;B=W+B}},n.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h},n.l=function(O){return T(O=P(this,O))?-1:E(O)?0:1},n.abs=function(){return T(this)?C(this):this},n.add=function(O){for(var S=Math.max(this.g.length,O.g.length),k=[],B=0,H=0;H<=S;H++){var W=B+(65535&this.i(H))+(65535&O.i(H)),L=(W>>>16)+(this.i(H)>>>16)+(O.i(H)>>>16);B=L>>>16,k[H]=(L&=65535)<<16|(W&=65535)}return new s(k,-2147483648&k[k.length-1]?-1:0)},n.j=function(O){if(E(this)||E(O))return m;if(T(this))return T(O)?C(this).j(C(O)):C(C(this).j(O));if(T(O))return C(this.j(C(O)));if(0>this.l(y)&&0>O.l(y))return l(this.m()*O.m());for(var S=this.g.length+O.g.length,k=[],B=0;B<2*S;B++)k[B]=0;for(B=0;B<this.g.length;B++)for(var H=0;H<O.g.length;H++){var W=this.i(B)>>>16,L=65535&this.i(B),Ls=O.i(H)>>>16,Fu=65535&O.i(H);k[2*B+2*H]+=L*Fu,R(k,2*B+2*H),k[2*B+2*H+1]+=W*Fu,R(k,2*B+2*H+1),k[2*B+2*H+1]+=L*Ls,R(k,2*B+2*H+1),k[2*B+2*H+2]+=W*Ls,R(k,2*B+2*H+2)}for(B=0;B<S;B++)k[B]=k[2*B+1]<<16|k[2*B];for(B=S;B<2*S;B++)k[B]=0;return new s(k,0)},n.A=function(O){return J(this,O).h},n.and=function(O){for(var S=Math.max(this.g.length,O.g.length),k=[],B=0;B<S;B++)k[B]=this.i(B)&O.i(B);return new s(k,this.h&O.h)},n.or=function(O){for(var S=Math.max(this.g.length,O.g.length),k=[],B=0;B<S;B++)k[B]=this.i(B)|O.i(B);return new s(k,this.h|O.h)},n.xor=function(O){for(var S=Math.max(this.g.length,O.g.length),k=[],B=0;B<S;B++)k[B]=this.i(B)^O.i(B);return new s(k,this.h^O.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,o4=r4.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function h(O,S){if(0==O.length)throw Error("number format error: empty string");if(2>(S=S||10)||36<S)throw Error("radix out of range: "+S);if("-"==O.charAt(0))return C(h(O.substring(1),S));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=l(Math.pow(S,8)),B=m,H=0;H<O.length;H+=8){var W=Math.min(8,O.length-H),L=parseInt(O.substring(H,H+W),S);8>W?(W=l(Math.pow(S,W)),B=B.j(W).add(l(L))):B=(B=B.j(k)).add(l(L))}return B},Zd=r4.Integer=s}).apply(typeof n4<"u"?n4:typeof self<"u"?self:typeof window<"u"?window:{});var s4,a4,Vy,c4,bT,NM,l4,u4,d4,vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(f,v,I){return f==Array.prototype||f==Object.prototype||(f[v]=I.value),f},r=function t(f){f=["object"==typeof globalThis&&globalThis,f,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof vT&&vT];for(var v=0;v<f.length;++v){var I=f[v];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(f,v){if(v)e:{var I=r;f=f.split(".");for(var A=0;A<f.length-1;A++){var q=f[A];if(!(q in I))break e;I=I[q]}(v=v(A=I[f=f[f.length-1]]))!=A&&null!=v&&e(I,f,{configurable:!0,writable:!0,value:v})}}("Array.prototype.values",function(f){return f||function(){return function o(f,v){f instanceof String&&(f+="");var I=0,A=!1,q={next:function(){if(!A&&I<f.length){var re=I++;return{value:v(re,f[re]),done:!1}}return A=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}(this,function(v,I){return I})}});var s=s||{},a=this||self;function c(f){var v=typeof f;return"array"==(v="object"!=v?v:f?Array.isArray(f)?"array":v:"null")||"object"==v&&"number"==typeof f.length}function l(f){var v=typeof f;return"object"==v&&null!=f||"function"==v}function h(f,v,I){return f.call.apply(f.bind,arguments)}function m(f,v,I){if(!f)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,A),f.apply(v,q)}}return function(){return f.apply(v,arguments)}}function _(f,v,I){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?h:m).apply(null,arguments)}function y(f,v){var I=Array.prototype.slice.call(arguments,1);return function(){var A=I.slice();return A.push.apply(A,arguments),f.apply(this,A)}}function E(f,v){function I(){}I.prototype=v.prototype,f.aa=v.prototype,f.prototype=new I,f.prototype.constructor=f,f.Qb=function(A,q,re){for(var De=Array(arguments.length-2),bn=2;bn<arguments.length;bn++)De[bn-2]=arguments[bn];return v.prototype[q].apply(A,De)}}function T(f){const v=f.length;if(0<v){const I=Array(v);for(let A=0;A<v;A++)I[A]=f[A];return I}return[]}function C(f,v){for(let I=1;I<arguments.length;I++){const A=arguments[I];if(c(A)){const q=f.length||0,re=A.length||0;f.length=q+re;for(let De=0;De<re;De++)f[q+De]=A[De]}else f.push(A)}}function R(f){return/^[\s\xa0]*$/.test(f)}function U(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function J(f){return J[" "](f),f}J[" "]=function(){};var ve=!(-1==U().indexOf("Gecko")||-1!=U().toLowerCase().indexOf("webkit")&&-1==U().indexOf("Edge")||-1!=U().indexOf("Trident")||-1!=U().indexOf("MSIE")||-1!=U().indexOf("Edge"));function Te(f,v,I){for(const A in f)v.call(I,f[A],A,f)}function S(f){const v={};for(const I in f)v[I]=f[I];return v}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,v){let I,A;for(let q=1;q<arguments.length;q++){for(I in A=arguments[q],A)f[I]=A[I];for(let re=0;re<k.length;re++)I=k[re],Object.prototype.hasOwnProperty.call(A,I)&&(f[I]=A[I])}}function H(f){var v=1;f=f.split(":");const I=[];for(;0<v&&f.length;)I.push(f.shift()),v--;return f.length&&I.push(f.join(":")),I}function W(f){a.setTimeout(()=>{throw f},0)}function L(){var f=Nt;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}var Fu=new class P{constructor(v,I){this.i=v,this.j=I,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}(()=>new je,f=>f.reset());class je{constructor(){this.next=this.g=this.h=null}set(v,I){this.h=v,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let Ke,Ze=!1,Nt=new class Ls{constructor(){this.h=this.g=null}add(v,I){const A=Fu.get();A.set(v,I),this.h?this.h.next=A:this.g=A,this.h=A}},Mr=()=>{const f=a.Promise.resolve(void 0);Ke=()=>{f.then(Vs)}};var Vs=()=>{for(var f;f=L();){try{f.h.call(f.g)}catch(I){W(I)}var v=Fu;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}Ze=!1};function mr(){this.s=this.s,this.C=this.C}function Hn(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}mr.prototype.s=!1,mr.prototype.ma=function(){this.s||(this.s=!0,this.N())},mr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Hn.prototype.h=function(){this.defaultPrevented=!0};var $n=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const I=()=>{};a.addEventListener("test",I,v),a.removeEventListener("test",I,v)}catch{}return f}();function Lu(f,v){if(Hn.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var I=this.type=f.type,A=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(ve){e:{try{J(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else"mouseover"==I?v=f.fromElement:"mouseout"==I&&(v=f.toElement);this.relatedTarget=v,A?(this.clientX=void 0!==A.clientX?A.clientX:A.pageX,this.clientY=void 0!==A.clientY?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=void 0!==f.clientX?f.clientX:f.pageX,this.clientY=void 0!==f.clientY?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType="string"==typeof f.pointerType?f.pointerType:x1[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Lu.aa.h.call(this)}}E(Lu,Hn);var x1={2:"touch",3:"pen",4:"mouse"};Lu.prototype.h=function(){Lu.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var gr="closure_listenable_"+(1e6*Math.random()|0),tl=0;function Vo(f,v,I,A,q){this.listener=f,this.proxy=null,this.src=v,this.type=I,this.capture=!!A,this.ha=q,this.key=++tl,this.da=this.fa=!1}function nl(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Vu(f){this.src=f,this.g={},this.h=0}function R1(f,v){var I=v.type;if(I in f.g){var re,A=f.g[I],q=Array.prototype.indexOf.call(A,v,void 0);(re=0<=q)&&Array.prototype.splice.call(A,q,1),re&&(nl(v),0==f.g[I].length&&(delete f.g[I],f.h--))}}function M1(f,v,I,A){for(var q=0;q<f.length;++q){var re=f[q];if(!re.da&&re.listener==v&&re.capture==!!I&&re.ha==A)return q}return-1}Vu.prototype.add=function(f,v,I,A,q){var re=f.toString();(f=this.g[re])||(f=this.g[re]=[],this.h++);var De=M1(f,v,A,q);return-1<De?(v=f[De],I||(v.fa=!1)):((v=new Vo(v,this.src,re,!!A,q)).fa=I,f.push(v)),v};var P1="closure_lm_"+(1e6*Math.random()|0),N1={};function wQ(f,v,I,A,q){if(A&&A.once)return CQ(f,v,I,A,q);if(Array.isArray(v)){for(var re=0;re<v.length;re++)wQ(f,v[re],I,A,q);return null}return I=L1(I),f&&f[gr]?f.K(v,I,l(A)?!!A.capture:!!A,q):TQ(f,v,I,!1,A,q)}function TQ(f,v,I,A,q,re){if(!v)throw Error("Invalid event type");var De=l(q)?!!q.capture:!!q,bn=O1(f);if(bn||(f[P1]=bn=new Vu(f)),(I=bn.add(v,I,A,De,re)).proxy)return I;if(A=function BDe(){const v=jDe;return function f(I){return v.call(f.src,f.listener,I)}}(),I.proxy=A,A.src=f,A.listener=I,f.addEventListener)$n||(q=De),void 0===q&&(q=!1),f.addEventListener(v.toString(),A,q);else if(f.attachEvent)f.attachEvent(DQ(v.toString()),A);else{if(!f.addListener||!f.removeListener)throw Error("addEventListener and attachEvent are unavailable.");f.addListener(A)}return I}function CQ(f,v,I,A,q){if(Array.isArray(v)){for(var re=0;re<v.length;re++)CQ(f,v[re],I,A,q);return null}return I=L1(I),f&&f[gr]?f.L(v,I,l(A)?!!A.capture:!!A,q):TQ(f,v,I,!0,A,q)}function AQ(f,v,I,A,q){if(Array.isArray(v))for(var re=0;re<v.length;re++)AQ(f,v[re],I,A,q);else A=l(A)?!!A.capture:!!A,I=L1(I),f&&f[gr]?(f=f.i,(v=String(v).toString())in f.g&&-1<(I=M1(re=f.g[v],I,A,q))&&(nl(re[I]),Array.prototype.splice.call(re,I,1),0==re.length&&(delete f.g[v],f.h--))):f&&(f=O1(f))&&(v=f.g[v.toString()],f=-1,v&&(f=M1(v,I,A,q)),(I=-1<f?v[f]:null)&&k1(I))}function k1(f){if("number"!=typeof f&&f&&!f.da){var v=f.src;if(v&&v[gr])R1(v.i,f);else{var I=f.type,A=f.proxy;v.removeEventListener?v.removeEventListener(I,A,f.capture):v.detachEvent?v.detachEvent(DQ(I),A):v.addListener&&v.removeListener&&v.removeListener(A),(I=O1(v))?(R1(I,f),0==I.h&&(I.src=null,v[P1]=null)):nl(f)}}}function DQ(f){return f in N1?N1[f]:N1[f]="on"+f}function jDe(f,v){if(f.da)f=!0;else{v=new Lu(v,this);var I=f.listener,A=f.ha||f.src;f.fa&&k1(f),f=I.call(A,v)}return f}function O1(f){return(f=f[P1])instanceof Vu?f:null}var F1="__closure_events_fn_"+(1e9*Math.random()>>>0);function L1(f){return"function"==typeof f?f:(f[F1]||(f[F1]=function(v){return f.handleEvent(v)}),f[F1])}function $i(){mr.call(this),this.i=new Vu(this),this.M=this,this.F=null}function lo(f,v){var I,A=f.F;if(A)for(I=[];A;A=A.F)I.push(A);if(f=f.M,A=v.type||v,"string"==typeof v)v=new Hn(v,f);else if(v instanceof Hn)v.target=v.target||f;else{var q=v;B(v=new Hn(A,f),q)}if(q=!0,I)for(var re=I.length-1;0<=re;re--){var De=v.g=I[re];q=eA(De,A,!0,v)&&q}if(q=eA(De=v.g=f,A,!0,v)&&q,q=eA(De,A,!1,v)&&q,I)for(re=0;re<I.length;re++)q=eA(De=v.g=I[re],A,!1,v)&&q}function eA(f,v,I,A){if(!(v=f.i.g[String(v)]))return!0;v=v.concat();for(var q=!0,re=0;re<v.length;++re){var De=v[re];if(De&&!De.da&&De.capture==I){var bn=De.listener,Ei=De.ha||De.src;De.fa&&R1(f.i,De),q=!1!==bn.call(Ei,A)&&q}}return q&&!A.defaultPrevented}function SQ(f,v,I){if("function"==typeof f)I&&(f=_(f,I));else{if(!f||"function"!=typeof f.handleEvent)throw Error("Invalid listener argument");f=_(f.handleEvent,f)}return 2147483647<Number(v)?-1:a.setTimeout(f,v||0)}function xQ(f){f.g=SQ(()=>{f.g=null,f.i&&(f.i=!1,xQ(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}E($i,mr),$i.prototype[gr]=!0,$i.prototype.removeEventListener=function(f,v,I,A){AQ(this,f,v,I,A)},$i.prototype.N=function(){if($i.aa.N.call(this),this.i){var v,f=this.i;for(v in f.g){for(var I=f.g[v],A=0;A<I.length;A++)nl(I[A]);delete f.g[v],f.h--}}this.F=null},$i.prototype.K=function(f,v,I,A){return this.i.add(String(f),v,!1,I,A)},$i.prototype.L=function(f,v,I,A){return this.i.add(String(f),v,!0,I,A)};class HDe extends mr{constructor(v,I){super(),this.m=v,this.l=I,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:xQ(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Db(f){mr.call(this),this.h=f,this.g={}}E(Db,mr);var RQ=[];function MQ(f){Te(f.g,function(v,I){this.g.hasOwnProperty(I)&&k1(v)},f),f.g={}}Db.prototype.N=function(){Db.aa.N.call(this),MQ(this)},Db.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var V1=a.JSON.stringify,$De=a.JSON.parse,zDe=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function U1(){}function NQ(){}U1.prototype.h=null;var Sb={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function B1(){Hn.call(this,"d")}function j1(){Hn.call(this,"c")}E(B1,Hn),E(j1,Hn);var zh={},kQ=null;function tA(){return kQ=kQ||new $i}function OQ(f){Hn.call(this,zh.La,f)}function xb(f){const v=tA();lo(v,new OQ(v))}function FQ(f,v){Hn.call(this,zh.STAT_EVENT,f),this.stat=v}function uo(f){const v=tA();lo(v,new FQ(v,f))}function LQ(f,v){Hn.call(this,zh.Ma,f),this.size=v}function Rb(f,v){if("function"!=typeof f)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},v)}function Mb(){this.g=!0}function Qm(f,v,I,A){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+function KDe(f,v){if(!f.g)return v;if(!v)return null;try{var I=JSON.parse(v);if(I)for(f=0;f<I.length;f++)if(Array.isArray(I[f])){var A=I[f];if(!(2>A.length)){var q=A[1];if(Array.isArray(q)&&!(1>q.length)){var re=q[0];if("noop"!=re&&"stop"!=re&&"close"!=re)for(var De=1;De<q.length;De++)q[De]=""}}}return V1(I)}catch{return v}}(f,I)+(A?" "+A:"")})}zh.La="serverreachability",E(OQ,Hn),zh.STAT_EVENT="statevent",E(FQ,Hn),zh.Ma="timingevent",E(LQ,Hn),Mb.prototype.xa=function(){this.g=!1},Mb.prototype.info=function(){};var H1,nA={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},VQ={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function rA(){}function Uu(f,v,I,A){this.j=f,this.i=v,this.l=I,this.R=A||1,this.U=new Db(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new UQ}function UQ(){this.i=null,this.g="",this.h=!1}E(rA,U1),rA.prototype.g=function(){return new XMLHttpRequest},rA.prototype.i=function(){return{}},H1=new rA;var BQ={},$1={};function z1(f,v,I){f.L=1,f.v=aA(rl(v)),f.m=I,f.P=!0,jQ(f,null)}function jQ(f,v){f.F=Date.now(),iA(f),f.A=rl(f.v);var I=f.A,A=f.R;Array.isArray(A)||(A=[String(A)]),t7(I.i,"t",A),f.C=0,I=f.j.J,f.h=new UQ,f.g=v7(f.j,I?v:null,!f.m),0<f.O&&(f.M=new HDe(_(f.Y,f,f.g),f.O)),v=f.U,I=f.g,A=f.ca;var q="readystatechange";Array.isArray(q)||(q&&(RQ[0]=q.toString()),q=RQ);for(var re=0;re<q.length;re++){var De=wQ(I,q[re],A||v.handleEvent,!1,v.h||v);if(!De)break;v.g[De.key]=De}v=f.H?S(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),xb(),function qDe(f,v,I,A,q,re){f.info(function(){if(f.g)if(re)for(var De="",bn=re.split("&"),Ei=0;Ei<bn.length;Ei++){var Xt=bn[Ei].split("=");if(1<Xt.length){var zi=Xt[0];Xt=Xt[1];var qi=zi.split("_");De=2<=qi.length&&"type"==qi[1]?De+(zi+"=")+Xt+"&":De+(zi+"=redacted&")}}else De=null;else De=re;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+v+"\n"+I+"\n"+De})}(f.i,f.u,f.A,f.l,f.R,f.m)}function HQ(f){return!!f.g&&"GET"==f.u&&2!=f.L&&f.j.Ca}function QDe(f,v){var I=f.C,A=v.indexOf("\n",I);return-1==A?$1:(I=Number(v.substring(I,A)),isNaN(I)?BQ:(A+=1)+I>v.length?$1:(v=v.slice(A,A+I),f.C=A+I,v))}function iA(f){f.S=Date.now()+f.I,$Q(f,f.I)}function $Q(f,v){if(null!=f.B)throw Error("WatchDog timer not null");f.B=Rb(_(f.ba,f),v)}function q1(f){f.B&&(a.clearTimeout(f.B),f.B=null)}function Pb(f){0==f.j.G||f.J||m7(f.j,f)}function qh(f){q1(f);var v=f.M;v&&"function"==typeof v.ma&&v.ma(),f.M=null,MQ(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function G1(f,v){try{var I=f.j;if(0!=I.G&&(I.g==f||W1(I.h,f)))if(!f.K&&W1(I.h,f)&&3==I.G){try{var A=I.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&3==A.length){var q=A;if(0==q[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<f.F))break e;hA(I),uA(I)}Z1(I),uo(18)}}else I.za=q[1],0<I.za-I.T&&37500>q[2]&&I.F&&0==I.v&&!I.C&&(I.C=Rb(_(I.Za,I),6e3));if(1>=GQ(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Wh(I,11)}else if((f.K||I.g==f)&&hA(I),!R(v))for(q=I.Da.g.parse(v),v=0;v<q.length;v++){let Xt=q[v];if(I.T=Xt[0],Xt=Xt[1],2==I.G)if("c"==Xt[0]){I.K=Xt[1],I.ia=Xt[2];const zi=Xt[3];null!=zi&&(I.la=zi,I.j.info("VER="+I.la));const qi=Xt[4];null!=qi&&(I.Aa=qi,I.j.info("SVER="+I.Aa));const Xm=Xt[5];null!=Xm&&"number"==typeof Xm&&0<Xm&&(I.L=A=1.5*Xm,I.j.info("backChannelRequestTimeoutMs_="+A)),A=I;const fa=f.g;if(fa){const pA=fa.g?fa.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pA){var re=A.h;re.g||-1==pA.indexOf("spdy")&&-1==pA.indexOf("quic")&&-1==pA.indexOf("h2")||(re.j=re.l,re.g=new Set,re.h&&(K1(re,re.h),re.h=null))}if(A.D){const J1=fa.g?fa.g.getResponseHeader("X-HTTP-Session-Id"):null;J1&&(A.ya=J1,zn(A.I,A.D,J1))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-f.F,I.j.info("Handshake RTT: "+I.R+"ms"));var De=f;if((A=I).qa=y7(A,A.J?A.ia:null,A.W),De.K){WQ(A.h,De);var bn=De,Ei=A.L;Ei&&(bn.I=Ei),bn.B&&(q1(bn),iA(bn)),A.g=De}else f7(A);0<I.i.length&&dA(I)}else"stop"!=Xt[0]&&"close"!=Xt[0]||Wh(I,7);else 3==I.G&&("stop"==Xt[0]||"close"==Xt[0]?"stop"==Xt[0]?Wh(I,7):Y1(I):"noop"!=Xt[0]&&I.l&&I.l.ta(Xt),I.v=0)}xb()}catch{}}Uu.prototype.ca=function(f){f=f.target;const v=this.M;v&&3==il(f)?v.j():this.Y(f)},Uu.prototype.Y=function(f){try{if(f==this.g)e:{const qi=il(this.g);var v=this.g.Ba();if(this.g.Z(),!(3>qi)&&(3!=qi||this.g&&(this.h.h||this.g.oa()||c7(this.g)))){this.J||4!=qi||7==v||xb(),q1(this);var I=this.g.Z();this.X=I;t:if(HQ(this)){var A=c7(this.g);f="";var q=A.length,re=4==il(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qh(this),Pb(this);var De="";break t}this.h.i=new a.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,f+=this.h.i.decode(A[v],{stream:!(re&&v==q-1)});A.length=0,this.h.g+=f,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=200==I,function GDe(f,v,I,A,q,re,De){f.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+v+"\n"+I+"\n"+re+" "+De})}(this.i,this.u,this.A,this.l,this.R,qi,I),this.o){if(this.T&&!this.K){t:{if(this.g){var bn,Ei=this.g;if((bn=Ei.g?Ei.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(bn)){var Xt=bn;break t}}Xt=null}if(!(I=Xt)){this.o=!1,this.s=3,uo(12),qh(this),Pb(this);break e}Qm(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,G1(this,I)}if(this.P){let fa;for(I=!0;!this.J&&this.C<De.length;){if(fa=QDe(this,De),fa==$1){4==qi&&(this.s=4,uo(14),I=!1),Qm(this.i,this.l,null,"[Incomplete Response]");break}if(fa==BQ){this.s=4,uo(15),Qm(this.i,this.l,De,"[Invalid Chunk]"),I=!1;break}Qm(this.i,this.l,fa,null),G1(this,fa)}if(HQ(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=qi||0!=De.length||this.h.h||(this.s=1,uo(16),I=!1),this.o=this.o&&I,I){if(0<De.length&&!this.W){this.W=!0;var zi=this.j;zi.g==this&&zi.ba&&!zi.M&&(zi.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),X1(zi),zi.M=!0,uo(11))}}else Qm(this.i,this.l,De,"[Invalid Chunked Response]"),qh(this),Pb(this)}else Qm(this.i,this.l,De,null),G1(this,De);4==qi&&qh(this),this.o&&!this.J&&(4==qi?m7(this.j,this):(this.o=!1,iA(this)))}else(function hSe(f){const v={};f=(f.g&&2<=il(f)&&f.g.getAllResponseHeaders()||"").split("\r\n");for(let A=0;A<f.length;A++){if(R(f[A]))continue;var I=H(f[A]);const q=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const re=v[q]||[];v[q]=re,re.push(I)}!function O(f,v){for(const I in f)v.call(void 0,f[I],I,f)}(v,function(A){return A.join(", ")})})(this.g),400==I&&0<De.indexOf("Unknown SID")?(this.s=3,uo(12)):(this.s=0,uo(13)),qh(this),Pb(this)}}}catch{}},Uu.prototype.cancel=function(){this.J=!0,qh(this)},Uu.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(function WDe(f,v){f.info(function(){return"TIMEOUT: "+v})}(this.i,this.A),2!=this.L&&(xb(),uo(17)),qh(this),this.s=2,Pb(this)):$Q(this,this.S-f)};var YDe=class{constructor(f,v){this.g=f,this.map=v}};function zQ(f){this.l=f||10,f=a.PerformanceNavigationTiming?0<(f=a.performance.getEntriesByType("navigation")).length&&("hq"==f[0].nextHopProtocol||"h2"==f[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qQ(f){return!!f.h||!!f.g&&f.g.size>=f.j}function GQ(f){return f.h?1:f.g?f.g.size:0}function W1(f,v){return f.h?f.h==v:!!f.g&&f.g.has(v)}function K1(f,v){f.g?f.g.add(v):f.h=v}function WQ(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}function KQ(f){if(null!=f.h)return f.i.concat(f.h.D);if(null!=f.g&&0!==f.g.size){let v=f.i;for(const I of f.g.values())v=v.concat(I.D);return v}return T(f.i)}function QQ(f,v){if(f.forEach&&"function"==typeof f.forEach)f.forEach(v,void 0);else if(c(f)||"string"==typeof f)Array.prototype.forEach.call(f,v,void 0);else for(var I=function XDe(f){if(f.na&&"function"==typeof f.na)return f.na();if(!f.V||"function"!=typeof f.V){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||"string"==typeof f){var v=[];f=f.length;for(var I=0;I<f;I++)v.push(I);return v}v=[],I=0;for(const A in f)v[I++]=A;return v}}}(f),A=function ZDe(f){if(f.V&&"function"==typeof f.V)return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if("string"==typeof f)return f.split("");if(c(f)){for(var v=[],I=f.length,A=0;A<I;A++)v.push(f[A]);return v}for(A in v=[],I=0,f)v[I++]=f[A];return v}(f),q=A.length,re=0;re<q;re++)v.call(void 0,A[re],I&&I[re],f)}zQ.prototype.cancel=function(){if(this.i=KQ(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const f of this.g.values())f.cancel();this.g.clear()}};var YQ=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Gh(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Gh){this.h=f.h,oA(this,f.j),this.o=f.o,this.g=f.g,sA(this,f.s),this.l=f.l;var v=f.i,I=new Ob;I.i=v.i,v.g&&(I.g=new Map(v.g),I.h=v.h),ZQ(this,I),this.m=f.m}else f&&(v=String(f).match(YQ))?(this.h=!1,oA(this,v[1]||"",!0),this.o=Nb(v[2]||""),this.g=Nb(v[3]||"",!0),sA(this,v[4]),this.l=Nb(v[5]||"",!0),ZQ(this,v[6]||"",!0),this.m=Nb(v[7]||"")):(this.h=!1,this.i=new Ob(null,this.h))}function rl(f){return new Gh(f)}function oA(f,v,I){f.j=I?Nb(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function sA(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function ZQ(f,v,I){v instanceof Ob?(f.i=v,function oSe(f,v){v&&!f.j&&(Bu(f),f.i=null,f.g.forEach(function(I,A){var q=A.toLowerCase();A!=q&&(JQ(this,A),t7(this,q,I))},f)),f.j=v}(f.i,f.h)):(I||(v=kb(v,rSe)),f.i=new Ob(v,f.h))}function zn(f,v,I){f.i.set(v,I)}function aA(f){return zn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Nb(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function kb(f,v,I){return"string"==typeof f?(f=encodeURI(f).replace(v,eSe),I&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function eSe(f){return"%"+((f=f.charCodeAt(0))>>4&15).toString(16)+(15&f).toString(16)}Gh.prototype.toString=function(){var f=[],v=this.j;v&&f.push(kb(v,XQ,!0),":");var I=this.g;return(I||"file"==v)&&(f.push("//"),(v=this.o)&&f.push(kb(v,XQ,!0),"@"),f.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&f.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&f.push("/"),f.push(kb(I,"/"==I.charAt(0)?nSe:tSe,!0))),(I=this.i.toString())&&f.push("?",I),(I=this.m)&&f.push("#",kb(I,iSe)),f.join("")};var XQ=/[#\/\?@]/g,tSe=/[#\?:]/g,nSe=/[#\?]/g,rSe=/[#\?@]/g,iSe=/#/g;function Ob(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Bu(f){f.g||(f.g=new Map,f.h=0,f.i&&function JDe(f,v){if(f){f=f.split("&");for(var I=0;I<f.length;I++){var A=f[I].indexOf("="),q=null;if(0<=A){var re=f[I].substring(0,A);q=f[I].substring(A+1)}else re=f[I];v(re,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}(f.i,function(v,I){f.add(decodeURIComponent(v.replace(/\+/g," ")),I)}))}function JQ(f,v){Bu(f),v=Ym(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function e7(f,v){return Bu(f),v=Ym(f,v),f.g.has(v)}function t7(f,v,I){JQ(f,v),0<I.length&&(f.i=null,f.g.set(Ym(f,v),T(I)),f.h+=I.length)}function Ym(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function ju(f,v,I,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(I)}catch{}}function cSe(){this.g=new zDe}function lSe(f,v,I){const A=I||"";try{QQ(f,function(q,re){let De=q;l(q)&&(De=V1(q)),v.push(A+re+"="+encodeURIComponent(De))})}catch(q){throw v.push(A+"type="+encodeURIComponent("_badmap")),q}}function Fb(f){this.l=f.Ub||null,this.j=f.eb||!1}function cA(f,v){$i.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function n7(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}function Lb(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Vb(f)}function Vb(f){f.onreadystatechange&&f.onreadystatechange.call(f)}function r7(f){let v="";return Te(f,function(I,A){v+=A,v+=":",v+=I,v+="\r\n"}),v}function Q1(f,v,I){e:{for(A in I){var A=!1;break e}A=!0}A||(I=r7(I),"string"==typeof f?null!=I&&encodeURIComponent(String(I)):zn(f,v,I))}function _r(f){$i.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=Ob.prototype).add=function(f,v){Bu(this),this.i=null,f=Ym(this,f);var I=this.g.get(f);return I||this.g.set(f,I=[]),I.push(v),this.h+=1,this},n.forEach=function(f,v){Bu(this),this.g.forEach(function(I,A){I.forEach(function(q){f.call(v,q,A,this)},this)},this)},n.na=function(){Bu(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),I=[];for(let A=0;A<v.length;A++){const q=f[A];for(let re=0;re<q.length;re++)I.push(v[A])}return I},n.V=function(f){Bu(this);let v=[];if("string"==typeof f)e7(this,f)&&(v=v.concat(this.g.get(Ym(this,f))));else{f=Array.from(this.g.values());for(let I=0;I<f.length;I++)v=v.concat(f[I])}return v},n.set=function(f,v){return Bu(this),this.i=null,e7(this,f=Ym(this,f))&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},n.get=function(f,v){return f&&0<(f=this.V(f)).length?String(f[0]):v},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var I=0;I<v.length;I++){var A=v[I];const re=encodeURIComponent(String(A)),De=this.V(A);for(A=0;A<De.length;A++){var q=re;""!==De[A]&&(q+="="+encodeURIComponent(String(De[A]))),f.push(q)}}return this.i=f.join("&")},E(Fb,U1),Fb.prototype.g=function(){return new cA(this.l,this.j)},Fb.prototype.i=function(f){return function(){return f}}({}),E(cA,$i),(n=cA.prototype).open=function(f,v){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,Vb(this)},n.send=function(f){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lb(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Vb(this)),this.g&&(this.readyState=3,Vb(this),this.g)))if("arraybuffer"===this.responseType)f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;n7(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?Lb(this):Vb(this),3==this.readyState&&n7(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Lb(this))},n.Qa=function(f){this.g&&(this.response=f,Lb(this))},n.ga=function(){this.g&&Lb(this)},n.setRequestHeader=function(f,v){this.u.append(f,v)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var I=v.next();!I.done;)f.push((I=I.value)[0]+": "+I[1]),I=v.next();return f.join("\r\n")},Object.defineProperty(cA.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(f){this.m=f?"include":"same-origin"}}),E(_r,$i);var uSe=/^https?$/i,dSe=["POST","PUT"];function i7(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,o7(f),lA(f)}function o7(f){f.A||(f.A=!0,lo(f,"complete"),lo(f,"error"))}function s7(f){if(f.h&&typeof s<"u"&&(!f.v[1]||4!=il(f)||2!=f.Z()))if(f.u&&4==il(f))SQ(f.Ea,0,f);else if(lo(f,"readystatechange"),4==il(f)){f.h=!1;try{const De=f.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var I;if(!(I=v)){var A;if(A=0===De){var q=String(f.D).match(YQ)[1]||null;!q&&a.self&&a.self.location&&(q=a.self.location.protocol.slice(0,-1)),A=!uSe.test(q?q.toLowerCase():"")}I=A}if(I)lo(f,"complete"),lo(f,"success");else{f.m=6;try{var re=2<il(f)?f.g.statusText:""}catch{re=""}f.l=re+" ["+f.Z()+"]",o7(f)}}finally{lA(f)}}}function lA(f,v){if(f.g){a7(f);const I=f.g,A=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||lo(f,"ready");try{I.onreadystatechange=A}catch{}}}function a7(f){f.I&&(a.clearTimeout(f.I),f.I=null)}function il(f){return f.g?f.g.readyState:0}function c7(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ub(f,v,I){return I&&I.internalChannelParams&&I.internalChannelParams[f]||v}function l7(f){this.Aa=0,this.i=[],this.j=new Mb,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ub("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ub("baseRetryDelayMs",5e3,f),this.cb=Ub("retryDelaySeedMs",1e4,f),this.Wa=Ub("forwardChannelMaxRetries",2,f),this.wa=Ub("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new zQ(f&&f.concurrentRequestLimit),this.Da=new cSe,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Y1(f){if(u7(f),3==f.G){var v=f.U++,I=rl(f.I);if(zn(I,"SID",f.K),zn(I,"RID",v),zn(I,"TYPE","terminate"),Bb(f,I),(v=new Uu(f,f.j,v)).L=2,v.v=aA(rl(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=v.v,I=!0),I||(v.g=v7(v.j,null),v.g.ea(v.v)),v.F=Date.now(),iA(v)}_7(f)}function uA(f){f.g&&(X1(f),f.g.cancel(),f.g=null)}function u7(f){uA(f),f.u&&(a.clearTimeout(f.u),f.u=null),hA(f),f.h.cancel(),f.s&&("number"==typeof f.s&&a.clearTimeout(f.s),f.s=null)}function dA(f){if(!qQ(f.h)&&!f.s){f.s=!0;var v=f.Ga;Ke||Mr(),Ze||(Ke(),Ze=!0),Nt.add(v,f),f.B=0}}function d7(f,v){var I;I=v?v.l:f.U++;const A=rl(f.I);zn(A,"SID",f.K),zn(A,"RID",I),zn(A,"AID",f.T),Bb(f,A),f.m&&f.o&&Q1(A,f.m,f.o),I=new Uu(f,f.j,I,f.B+1),null===f.m&&(I.H=f.o),v&&(f.i=v.D.concat(f.i)),v=h7(f,I,1e3),I.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),K1(f.h,I),z1(I,A,v)}function Bb(f,v){f.H&&Te(f.H,function(I,A){zn(v,A,I)}),f.l&&QQ({},function(I,A){zn(v,A,I)})}function h7(f,v,I){I=Math.min(f.i.length,I);var A=f.l?_(f.l.Na,f.l,f):null;e:{var q=f.i;let re=-1;for(;;){const De=["count="+I];-1==re?0<I?(re=q[0].g,De.push("ofs="+re)):re=0:De.push("ofs="+re);let bn=!0;for(let Ei=0;Ei<I;Ei++){let Xt=q[Ei].g;const zi=q[Ei].map;if(Xt-=re,0>Xt)re=Math.max(0,q[Ei].g-100),bn=!1;else try{lSe(zi,De,"req"+Xt+"_")}catch{A&&A(zi)}}if(bn){A=De.join("&");break e}}}return f=f.i.splice(0,I),v.D=f,A}function f7(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;Ke||Mr(),Ze||(Ke(),Ze=!0),Nt.add(v,f),f.v=0}}function Z1(f){return!(f.g||f.u||3<=f.v||(f.Y++,f.u=Rb(_(f.Fa,f),g7(f,f.v)),f.v++,0))}function X1(f){null!=f.A&&(a.clearTimeout(f.A),f.A=null)}function p7(f){f.g=new Uu(f,f.j,"rpc",f.Y),null===f.m&&(f.g.H=f.o),f.g.O=0;var v=rl(f.qa);zn(v,"RID","rpc"),zn(v,"SID",f.K),zn(v,"AID",f.T),zn(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&zn(v,"TO",f.ja),zn(v,"TYPE","xmlhttp"),Bb(f,v),f.m&&f.o&&Q1(v,f.m,f.o),f.L&&(f.g.I=f.L);var I=f.g;f=f.ia,I.L=1,I.v=aA(rl(v)),I.m=null,I.P=!0,jQ(I,f)}function hA(f){null!=f.C&&(a.clearTimeout(f.C),f.C=null)}function m7(f,v){var I=null;if(f.g==v){hA(f),X1(f),f.g=null;var A=2}else{if(!W1(f.h,v))return;I=v.D,WQ(f.h,v),A=1}if(0!=f.G)if(v.o)if(1==A){I=v.m?v.m.length:0,v=Date.now()-v.F;var q=f.B;lo(A=tA(),new LQ(A,I)),dA(f)}else f7(f);else if(3==(q=v.s)||0==q&&0<v.X||!(1==A&&function fSe(f,v){return!(GQ(f.h)>=f.h.j-(f.s?1:0)||(f.s?(f.i=v.D.concat(f.i),0):1==f.G||2==f.G||f.B>=(f.Va?0:f.Wa)||(f.s=Rb(_(f.Ga,f,v),g7(f,f.B)),f.B++,0)))}(f,v)||2==A&&Z1(f)))switch(I&&0<I.length&&(v=f.h,v.i=v.i.concat(I)),q){case 1:Wh(f,5);break;case 4:Wh(f,10);break;case 3:Wh(f,6);break;default:Wh(f,2)}}function g7(f,v){let I=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(I*=2),I*v}function Wh(f,v){if(f.j.info("Error code "+v),2==v){var I=_(f.fb,f),A=f.Xa;const q=!A;A=new Gh(A||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||oA(A,"https"),aA(A),q?function sSe(f,v){const I=new Mb;if(a.Image){const A=new Image;A.onload=y(ju,I,"TestLoadImage: loaded",!0,v,A),A.onerror=y(ju,I,"TestLoadImage: error",!1,v,A),A.onabort=y(ju,I,"TestLoadImage: abort",!1,v,A),A.ontimeout=y(ju,I,"TestLoadImage: timeout",!1,v,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=f}else v(!1)}(A.toString(),I):function aSe(f,v){new Mb;const A=new AbortController,q=setTimeout(()=>{A.abort(),ju(0,0,!1,v)},1e4);fetch(f,{signal:A.signal}).then(re=>{clearTimeout(q),ju(0,0,!!re.ok,v)}).catch(()=>{clearTimeout(q),ju(0,0,!1,v)})}(A.toString(),I)}else uo(2);f.G=0,f.l&&f.l.sa(v),_7(f),u7(f)}function _7(f){if(f.G=0,f.ka=[],f.l){const v=KQ(f.h);(0!=v.length||0!=f.i.length)&&(C(f.ka,v),C(f.ka,f.i),f.h.i.length=0,T(f.i),f.i.length=0),f.l.ra()}}function y7(f,v,I){var A=I instanceof Gh?rl(I):new Gh(I);if(""!=A.g)v&&(A.g=v+"."+A.g),sA(A,A.s);else{var q=a.location;A=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var re=new Gh(null);A&&oA(re,A),v&&(re.g=v),q&&sA(re,q),I&&(re.l=I),A=re}return v=f.ya,(I=f.D)&&v&&zn(A,I,v),zn(A,"VER",f.la),Bb(f,A),A}function v7(f,v,I){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return(v=new _r(f.Ca&&!f.pa?new Fb({eb:I}):f.pa)).Ha(f.J),v}function b7(){}function fA(){}function us(f,v){$i.call(this),this.g=new l7(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!R(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!R(v)&&(this.g.D=v,null!==(f=this.h)&&v in f&&v in(f=this.h)&&delete f[v]),this.j=new Zm(this)}function E7(f){B1.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const I in v){f=I;break e}f=void 0}(this.i=f)&&(f=this.i,v=null!==v&&f in v?v[f]:void 0),this.data=v}else this.data=f}function I7(){j1.call(this),this.status=1}function Zm(f){this.g=f}(n=_r.prototype).Ha=function(f){this.J=f},n.ea=function(f,v,I,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():H1.g(),this.v=function PQ(f){return f.h||(f.h=f.i())}(this.o?this.o:H1),this.g.onreadystatechange=_(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(re){return void i7(this,re)}if(f=I||"",I=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)I.set(q,A[q]);else{if("function"!=typeof A.keys||"function"!=typeof A.get)throw Error("Unknown input type for opt_headers: "+String(A));for(const re of A.keys())I.set(re,A.get(re))}A=Array.from(I.keys()).find(re=>"content-type"==re.toLowerCase()),q=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(dSe,v,void 0))||A||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[re,De]of I)this.g.setRequestHeader(re,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{a7(this),this.u=!0,this.g.send(f),this.u=!1}catch(re){i7(this,re)}},n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,lo(this,"complete"),lo(this,"abort"),lA(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),lA(this,!0)),_r.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?s7(this):this.bb())},n.bb=function(){s7(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<il(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&0==v.indexOf(f)&&(v=v.substring(f.length)),$De(v)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=l7.prototype).la=8,n.G=1,n.connect=function(f,v,I,A){uo(0),this.W=f,this.H=v||{},I&&void 0!==A&&(this.H.OSID=I,this.H.OAID=A),this.F=this.X,this.I=y7(this,null,this.W),dA(this)},n.Ga=function(f){if(this.s)if(this.s=null,1==this.G){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const q=new Uu(this,this.j,f);let re=this.o;if(this.S&&(re?(re=S(re),B(re,this.S)):re=this.S),null!==this.m||this.O||(q.H=re,re=null),this.P)e:{for(var v=0,I=0;I<this.i.length;I++){var A=this.i[I];if(void 0===(A="__data__"in A.map&&"string"==typeof(A=A.map.__data__)?A.length:void 0))break;if(4096<(v+=A)){v=I;break e}if(4096===v||I===this.i.length-1){v=I+1;break e}}v=1e3}else v=1e3;v=h7(this,q,v),zn(I=rl(this.I),"RID",f),zn(I,"CVER",22),this.D&&zn(I,"X-HTTP-Session-Id",this.D),Bb(this,I),re&&(this.O?v="headers="+encodeURIComponent(String(r7(re)))+"&"+v:this.m&&Q1(I,this.m,re)),K1(this.h,q),this.Ua&&zn(I,"TYPE","init"),this.P?(zn(I,"$req",v),zn(I,"SID","null"),q.T=!0,z1(q,I,null)):z1(q,I,v),this.G=2}}else 3==this.G&&(f?d7(this,f):0==this.i.length||qQ(this.h)||d7(this))},n.Fa=function(){if(this.u=null,p7(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Rb(_(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,uo(10),uA(this),p7(this))},n.Za=function(){null!=this.C&&(this.C=null,uA(this),Z1(this),uo(19))},n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),uo(2)):(this.j.info("Failed to ping google.com"),uo(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=b7.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},fA.prototype.g=function(f,v){return new us(f,v)},E(us,$i),us.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},us.prototype.close=function(){Y1(this.g)},us.prototype.o=function(f){var v=this.g;if("string"==typeof f){var I={};I.__data__=f,f=I}else this.u&&((I={}).__data__=V1(f),f=I);v.i.push(new YDe(v.Ya++,f)),3==v.G&&dA(v)},us.prototype.N=function(){this.g.l=null,delete this.j,Y1(this.g),delete this.g,us.aa.N.call(this)},E(E7,B1),E(I7,j1),E(Zm,b7),Zm.prototype.ua=function(){lo(this.g,"a")},Zm.prototype.ta=function(f){lo(this.g,new E7(f))},Zm.prototype.sa=function(f){lo(this.g,new I7)},Zm.prototype.ra=function(){lo(this.g,"b")},fA.prototype.createWebChannel=fA.prototype.g,us.prototype.send=us.prototype.o,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,d4=Vc.createWebChannelTransport=function(){return new fA},u4=Vc.getStatEventTarget=function(){return tA()},l4=Vc.Event=zh,NM=Vc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},nA.NO_ERROR=0,nA.TIMEOUT=8,nA.HTTP_ERROR=6,bT=Vc.ErrorCode=nA,VQ.COMPLETE="complete",c4=Vc.EventType=VQ,NQ.EventType=Sb,Sb.OPEN="a",Sb.CLOSE="b",Sb.ERROR="c",Sb.MESSAGE="d",$i.prototype.listen=$i.prototype.K,Vy=Vc.WebChannel=NQ,a4=Vc.FetchXmlHttpFactory=Fb,_r.prototype.listenOnce=_r.prototype.L,_r.prototype.getLastError=_r.prototype.Ka,_r.prototype.getLastErrorCode=_r.prototype.Ba,_r.prototype.getStatus=_r.prototype.Z,_r.prototype.getResponseJson=_r.prototype.Oa,_r.prototype.getResponseText=_r.prototype.oa,_r.prototype.send=_r.prototype.ea,_r.prototype.setWithCredentials=_r.prototype.Ha,s4=Vc.XhrIo=_r}).apply(typeof vT<"u"?vT:typeof self<"u"?self:typeof window<"u"?window:{});const h4="@firebase/firestore";class oi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}oi.UNAUTHENTICATED=new oi(null),oi.GOOGLE_CREDENTIALS=new oi("google-credentials-uid"),oi.FIRST_PARTY=new oi("first-party-uid"),oi.MOCK_USER=new oi("mock-user");let Lp="10.12.5";const tu=new ns.Vy("@firebase/firestore");function Vp(){return tu.logLevel}function _e(n,...e){if(tu.logLevel<=ns.$b.DEBUG){const t=e.map(kM);tu.debug(`Firestore (${Lp}): ${n}`,...t)}}function xr(n,...e){if(tu.logLevel<=ns.$b.ERROR){const t=e.map(kM);tu.error(`Firestore (${Lp}): ${n}`,...t)}}function Po(n,...e){if(tu.logLevel<=ns.$b.WARN){const t=e.map(kM);tu.warn(`Firestore (${Lp}): ${n}`,...t)}}function kM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Le(n="Unexpected state"){const e=`FIRESTORE (${Lp}) INTERNAL ASSERTION FAILED: `+n;throw xr(e),new Error(e)}function qe(n,e){n||Le()}function Ae(n,e){return n}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends D.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class f4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class she{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(oi.UNAUTHENTICATED))}shutdown(){}}class ahe{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class che{constructor(e){this.t=e,this.currentUser=oi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qr,e.enqueueRetryable(()=>o(this.currentUser))};const a=()=>{const l=s;e.enqueueRetryable((0,ne.A)(function*(){yield l.promise,yield o(r.currentUser)}))},c=l=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe("string"==typeof r.accessToken),new f4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return qe(null===e||"string"==typeof e),new oi(e)}}class lhe{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=oi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uhe{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new lhe(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(oi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p4{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dhe{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=o=>{null!=o.error&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,_e("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(qe("string"==typeof t.token),this.R=t.token,new p4(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function hhe(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class m4{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=hhe(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[o]%62))}return r}}function ht(n,e){return n<e?-1:n>e?1:0}function Up(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function g4(n){return n+"\0"}class Yn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yn.fromMillis(Date.now())}static fromDate(e){return Yn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ht(this.nanoseconds,e.nanoseconds):ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class We{constructor(e){this.timestamp=e}static fromTimestamp(e){return new We(e)}static min(){return new We(new Yn(0,0))}static max(){return new We(new Yn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Uy{constructor(e,t,r){void 0===t?t=0:t>e.length&&Le(),void 0===r?r=e.length-t:r>e.length-t&&Le(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uy.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uy?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ot extends Uy{construct(e,t,r){return new Ot(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Ot(t)}static emptyPath(){return new Ot([])}}const fhe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Un extends Uy{construct(e,t,r){return new Un(e,t,r)}static isValidIdentifier(e){return fhe.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Un.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Un(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new ge(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new ge(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new ge(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ge(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Un(t)}static emptyPath(){return new Un([])}}class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Ot.fromString(e))}static fromName(e){return new Se(Ot.fromString(e).popFirst(5))}static empty(){return new Se(Ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ot.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Ot(e.slice()))}}class Bp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function OM(n){return n.fields.find(e=>2===e.kind)}function Xd(n){return n.fields.filter(e=>2!==e.kind)}Bp.UNKNOWN_ID=-1;class Jd{constructor(e,t){this.fieldPath=e,this.kind=t}}class jp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new jp(0,rs.min())}}function _4(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=We.fromTimestamp(1e9===r?new Yn(t+1,0):new Yn(t,r));return new rs(i,Se.empty(),e)}function y4(n){return new rs(n.readTime,n.key,-1)}class rs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new rs(We.min(),Se.empty(),-1)}static max(){return new rs(We.max(),Se.empty(),-1)}}function FM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Se.comparator(n.documentKey,e.documentKey),0!==t?t:ht(n.largestBatchId,e.largestBatchId))}const v4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nu(n){return LM.apply(this,arguments)}function LM(){return(LM=(0,ne.A)(function*(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==v4)throw n;_e("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(i=>i?G.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new G((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let c=0;c<o;c++){const l=c;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new G((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class ET{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Qr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new By(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=VM(r.target.error);this.V.reject(new By(e,i))}}static open(e,t,r,i){try{return new ET(t,e.transaction(i,r))}catch(o){throw new By(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(_e("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _he(t)}}class ja{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===ja.S((0,D.ZQ)())&&xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _e("SimpleDb","Removing database:",e),eh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,D.zW)())return!1;if(ja.C())return!0;const e=(0,D.ZQ)(),t=ja.S(e),r=0<t&&t<10,i=E4(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var t=this;return(0,ne.A)(function*(){return t.db||(_e("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=s=>{r(s.target.result)},o.onblocked=()=>{i(new By(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=s=>{const a=s.target.error;i("VersionError"===a.name?new ge(Z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new ge(Z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new By(e,a))},o.onupgradeneeded=s=>{_e("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',s.oldVersion),t.p.O(s.target.result,o.transaction,s.oldVersion,t.version).next(()=>{_e("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.N&&(t.db.onversionchange=r=>t.N(r)),t.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,ne.A)(function*(){const s="readonly"===t;let a=0;for(;;){++a;try{o.db=yield o.M(e);const c=ET.open(o.db,e,s?"readonly":"readwrite",r),l=i(c).next(h=>(c.g(),h)).catch(h=>(c.abort(h),G.reject(h))).toPromise();return l.catch(()=>{}),yield c.m,l}catch(c){const l=c,h="FirebaseError"!==l.name&&a<3;if(_e("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),o.close(),!h)return Promise.reject(l)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function E4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class ghe{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return eh(this.B.delete())}}class By extends ge{constructor(e,t){super(Z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ru(n){return"IndexedDbTransactionError"===n.name}class _he{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(_e("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(_e("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eh(r)}add(e){return _e("SimpleDb","ADD",this.store.name,e,e),eh(this.store.add(e))}get(e){return eh(this.store.get(e)).next(t=>(void 0===t&&(t=null),_e("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _e("SimpleDb","DELETE",this.store.name,e),eh(this.store.delete(e))}count(){return _e("SimpleDb","COUNT",this.store.name),eh(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const o=i.getAll(r.range);return new G((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{const o=this.cursor(r),s=[];return this.W(o,(a,c)=>{s.push(c)}).next(()=>s)}}G(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new G((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){_e("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new G((r,i)=>{t.onerror=o=>{const s=VM(o.target.error);i(s)},t.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){const r=[];return new G((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const c=new ghe(a),l=t(a.primaryKey,a.value,c);if(l instanceof G){const h=l.catch(m=>(c.done(),G.reject(m)));r.push(h)}c.isDone?i():null===c.K?a.continue():a.continue(c.K)}}).next(()=>G.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function eh(n){return new G((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=VM(r.target.error);t(i)}})}let I4=!1;function VM(n){const e=ja.S((0,D.ZQ)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return I4||(I4=!0,setTimeout(()=>{throw r},0)),r}}return n}class yhe{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var t=this;_e("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ne.A)(function*(){t.task=null;try{_e("IndexBackfiller",`Documents written: ${yield t.Z.ee()}`)}catch(r){ru(r)?_e("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield nu(r)}yield t.X(6e4)}))}}class vhe{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){var t=this;return(0,ne.A)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.te(r,e))})()}te(e,t){const r=new Set;let i=t,o=!0;return G.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(null!==s&&!r.has(s))return _e("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(_e("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{const s=y4(o);FM(s,r)>0&&(r=s)}),new rs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let is=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function jy(n){return null==n}function Hy(n){return 0===n&&1/n==-1/0}function w4(n){return"number"==typeof n&&Number.isInteger(n)&&!Hy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Vi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=T4(e)),e=bhe(n.get(t),e);return T4(e)}function bhe(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function T4(n){return n+"\x01\x01"}function Ha(n){const e=n.length;if(qe(e>=2),2===e)return qe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ot.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const s=n.indexOf("\x01",o);switch((s<0||s>t)&&Le(),n.charAt(s+1)){case"\x01":const a=n.substring(o,s);let c;0===i.length?c=a:(i+=a,c=i,i=""),r.push(c);break;case"\x10":i+=n.substring(o,s),i+="\0";break;case"\x11":i+=n.substring(o,s+1);break;default:Le()}o=s+2}return new Ot(r)}const C4=["userId","batchId"];function IT(n,e){return[n,Vi(e)]}function A4(n,e,t){return[n,Vi(e),t]}const Ehe={},Ihe=["prefixPath","collectionGroup","readTime","documentId"],whe=["prefixPath","collectionGroup","documentId"],The=["collectionGroup","readTime","prefixPath","documentId"],Che=["canonicalId","targetId"],Ahe=["targetId","path"],Dhe=["path","targetId"],She=["collectionId","parent"],xhe=["indexId","uid"],Rhe=["uid","sequenceNumber"],Mhe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Phe=["indexId","uid","orderedDocumentKey"],Nhe=["userId","collectionPath","documentId"],khe=["userId","collectionPath","largestBatchId"],Ohe=["userId","collectionGroup","largestBatchId"],D4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fhe=[...D4,"documentOverlays"],S4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],x4=S4,UM=[...x4,"indexConfiguration","indexState","indexEntries"],Lhe=UM,Vhe=[...UM,"globals"];class BM extends b4{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Yr(n,e){const t=Ae(n);return ja.F(t._e,e)}function R4(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function iu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function P4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||_i.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,_i.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wT(this.root,e,this.comparator,!1)}getReverseIterator(){return new wT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wT(this.root,e,this.comparator,!0)}}class wT{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _i{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??_i.RED,this.left=i??_i.EMPTY,this.right=o??_i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new _i(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return _i.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Le();const e=this.left.check();if(e!==this.right.check())throw Le();return e+(this.isRed()?0:1)}}_i.EMPTY=null,_i.RED=!0,_i.BLACK=!1,_i.EMPTY=new class{constructor(){this.size=0}get key(){throw Le()}get value(){throw Le()}get color(){throw Le()}get left(){throw Le()}get right(){throw Le()}copy(e,t,r,i,o){return this}insert(e,t,r){return new _i(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new N4(this.data.getIterator())}getIteratorFrom(e){return new N4(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof hn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class N4{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Hp(n){return n.hasNext()?n.getNext():void 0}class No{constructor(e){this.fields=e,e.sort(Un.comparator)}static empty(){return new No([])}unionWith(e){let t=new hn(Un.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new No(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Up(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class k4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new k4("Invalid base64 string: "+o):o}}(e);return new fr(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fr.EMPTY_BYTE_STRING=new fr("");const Bhe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Uc(n){if(qe(!!n),"string"==typeof n){let e=0;const t=Bhe.exec(n);if(qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pr(n.seconds),nanos:pr(n.nanos)}}function pr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bc(n){return"string"==typeof n?fr.fromBase64String(n):fr.fromUint8Array(n)}function TT(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function CT(n){const e=n.mapValue.fields.__previous_value__;return TT(e)?CT(e):e}function $y(n){const e=Uc(n.mapValue.fields.__local_write_time__.timestampValue);return new Yn(e.seconds,e.nanos)}class jhe{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}}class ou{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ou("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ou&&e.projectId===this.projectId&&e.database===this.database}}const su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},AT={nullValue:"NULL_VALUE"};function au(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?TT(n)?4:V4(n)?9007199254740991:10:Le()}function $a(n,e){if(n===e)return!0;const t=au(n);if(t!==au(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $y(n).isEqual($y(e));case 3:return function(i,o){if("string"==typeof i.timestampValue&&"string"==typeof o.timestampValue&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Uc(i.timestampValue),a=Uc(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Bc(n.bytesValue).isEqual(Bc(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return pr(i.geoPointValue.latitude)===pr(o.geoPointValue.latitude)&&pr(i.geoPointValue.longitude)===pr(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return pr(i.integerValue)===pr(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=pr(i.doubleValue),a=pr(o.doubleValue);return s===a?Hy(s)===Hy(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return Up(n.arrayValue.values||[],e.arrayValue.values||[],$a);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(R4(s)!==R4(a))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(void 0===a[c]||!$a(s[c],a[c])))return!1;return!0}(n,e);default:return Le()}var o}function zy(n,e){return void 0!==(n.values||[]).find(t=>$a(t,e))}function cu(n,e){if(n===e)return 0;const t=au(n),r=au(e);if(t!==r)return ht(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ht(n.booleanValue,e.booleanValue);case 2:return function(o,s){const a=pr(o.integerValue||o.doubleValue),c=pr(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return O4(n.timestampValue,e.timestampValue);case 4:return O4($y(n),$y(e));case 5:return ht(n.stringValue,e.stringValue);case 6:return function(o,s){const a=Bc(o),c=Bc(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){const h=ht(a[l],c[l]);if(0!==h)return h}return ht(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const a=ht(pr(o.latitude),pr(s.latitude));return 0!==a?a:ht(pr(o.longitude),pr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){const h=cu(a[l],c[l]);if(h)return h}return ht(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===su.mapValue&&s===su.mapValue)return 0;if(o===su.mapValue)return 1;if(s===su.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const _=ht(c[m],h[m]);if(0!==_)return _;const y=cu(a[c[m]],l[h[m]]);if(0!==y)return y}return ht(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Le()}}function O4(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return ht(n,e);const t=Uc(n),r=Uc(e),i=ht(t.seconds,r.seconds);return 0!==i?i:ht(t.nanos,r.nanos)}function $p(n){return jM(n)}function jM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Uc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bc(n.bytesValue).toBase64():"referenceValue"in n?Se.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=jM(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${jM(t.fields[s])}`;return i+"}"}(n.mapValue):Le()}function th(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function HM(n){return!!n&&"integerValue"in n}function qy(n){return!!n&&"arrayValue"in n}function F4(n){return!!n&&"nullValue"in n}function L4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ST(n){return!!n&&"mapValue"in n}function Gy(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return iu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Gy(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Gy(n.arrayValue.values[t]);return e}return Object.assign({},n)}function V4(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Hhe(n){return"nullValue"in n?AT:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?th(ou.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Le()}function $he(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?th(ou.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?su:Le()}function U4(n,e){const t=cu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function B4(n,e){const t=cu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ST(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gy(t)}setAll(e){let t=Un.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Gy(s):i.push(a.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());ST(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $a(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ST(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){iu(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new yi(Gy(this.value))}}function j4(n){const e=[];return iu(n.fields,(t,r)=>{const i=new Un([t]);if(ST(r)){const o=j4(r.mapValue).fields;if(0===o.length)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new No(e)}class Bn{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Bn(e,0,We.min(),We.min(),We.min(),yi.empty(),0)}static newFoundDocument(e,t,r,i){return new Bn(e,1,t,We.min(),r,i,0)}static newNoDocument(e,t){return new Bn(e,2,t,We.min(),We.min(),yi.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,We.min(),We.min(),yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(We.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class lu{constructor(e,t){this.position=e,this.inclusive=t}}function H4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(r=o.field.isKeyField()?Se.comparator(Se.fromName(s.referenceValue),t.key):cu(s,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function $4(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$a(n.position[t],e.position[t]))return!1;return!0}class Wy{constructor(e,t="asc"){this.field=e,this.dir=t}}function zhe(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class z4{}class Ft extends z4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new qhe(e,t,r):"array-contains"===t?new Khe(e,r):"in"===t?new Y4(e,r):"not-in"===t?new Qhe(e,r):"array-contains-any"===t?new Yhe(e,r):new Ft(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new Ghe(e,r):new Whe(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cu(t,this.value)):null!==t&&au(this.value)===au(t)&&this.matchesComparison(cu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends z4{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new dn(e,t)}matches(e){return zp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zp(n){return"and"===n.op}function $M(n){return"or"===n.op}function zM(n){return q4(n)&&zp(n)}function q4(n){for(const e of n.filters)if(e instanceof dn)return!1;return!0}function qM(n){if(n instanceof Ft)return n.field.canonicalString()+n.op.toString()+$p(n.value);if(zM(n))return n.filters.map(e=>qM(e)).join(",");{const e=n.filters.map(t=>qM(t)).join(",");return`${n.op}(${e})`}}function G4(n,e){return n instanceof Ft?(r=n,(i=e)instanceof Ft&&r.op===i.op&&r.field.isEqual(i.field)&&$a(r.value,i.value)):n instanceof dn?function(r,i){return i instanceof dn&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((o,s,a)=>o&&G4(s,i.filters[a]),!0)}(n,e):void Le();var r,i}function W4(n,e){const t=n.filters.concat(e);return dn.create(t,n.op)}function K4(n){return n instanceof Ft?`${(t=n).field.canonicalString()} ${t.op} ${$p(t.value)}`:n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(K4).join(" ,")+"}"}(n):"Filter";var t}class qhe extends Ft{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ghe extends Ft{constructor(e,t){super(e,"in",t),this.keys=Q4(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Whe extends Ft{constructor(e,t){super(e,"not-in",t),this.keys=Q4(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Q4(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Se.fromName(r.referenceValue))}class Khe extends Ft{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qy(t)&&zy(t.arrayValue,this.value)}}class Y4 extends Ft{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zy(this.value.arrayValue,t)}}class Qhe extends Ft{constructor(e,t){super(e,"not-in",t)}matches(e){if(zy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zy(this.value.arrayValue,t)}}class Yhe extends Ft{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zy(this.value.arrayValue,r))}}class Zhe{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function GM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Zhe(n,e,t,r,i,o,s)}function nh(n){const e=Ae(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>qM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),jy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$p(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$p(r)).join(",")),e.ue=t}return e.ue}function Ky(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!zhe(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!G4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$4(n.startAt,e.startAt)&&$4(n.endAt,e.endAt)}function xT(n){return Se.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function RT(n,e){return n.filters.filter(t=>t instanceof Ft&&t.field.isEqual(e))}function Z4(n,e,t){let r=AT,i=!0;for(const o of RT(n,e)){let s=AT,a=!0;switch(o.op){case"<":case"<=":s=Hhe(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=AT}U4({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];U4({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}function X4(n,e,t){let r=su,i=!0;for(const o of RT(n,e)){let s=su,a=!0;switch(o.op){case">=":case">":s=$he(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=su}B4({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const s=t.position[o];B4({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}return{value:r,inclusive:i}}class jc{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null}}function J4(n,e,t,r,i,o,s,a){return new jc(n,e,t,r,i,o,s,a)}function qp(n){return new jc(n)}function eG(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function WM(n){return null!==n.collectionGroup}function Gp(n){const e=Ae(n);if(null===e.ce){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new hn(Un.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Wy(o,r))}),t.has(Un.keyField().canonicalString())||e.ce.push(new Wy(Un.keyField(),r))}return e.ce}function Ui(n){const e=Ae(n);return e.le||(e.le=function nG(n,e){if("F"===n.limitType)return GM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new Wy(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new lu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new lu(n.startAt.position,n.startAt.inclusive):null;return GM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Gp(n))),e.le}function KM(n,e){const t=n.filters.concat([e]);return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function MT(n,e,t){return new jc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qy(n,e){return Ky(Ui(n),Ui(e))&&n.limitType===e.limitType}function rG(n){return`${nh(Ui(n))}|lt:${n.limitType}`}function Wp(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>K4(i)).join(", ")}]`),jy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(s=i).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$p(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$p(i)).join(",")),`Target(${r})`}(Ui(n))}; limitType=${n.limitType})`}function Yy(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Se.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of Gp(r))if(!o.field.isKeyField()&&null===i.data.field(o.field))return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(s,a,c){const l=H4(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Gp(r),i)||r.endAt&&!function(s,a,c){const l=H4(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Gp(r),i)));var r,i}function iG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oG(n){return(e,t)=>{let r=!1;for(const i of Gp(n)){const o=Xhe(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function Xhe(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):function(o,s,a){const c=s.data.field(o),l=a.data.field(o);return null!==c&&null!==l?cu(c,l):Le()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Le()}}class Hc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){iu(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return P4(this.inner)}size(){return this.innerSize}}const Jhe=new xn(Se.comparator);function ko(){return Jhe}const sG=new xn(Se.comparator);function Zy(...n){let e=sG;for(const t of n)e=e.insert(t.key,t);return e}function aG(n){let e=sG;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function za(){return Xy()}function cG(){return Xy()}function Xy(){return new Hc(n=>n.toString(),(n,e)=>n.isEqual(e))}const efe=new xn(Se.comparator),tfe=new hn(Se.comparator);function vt(...n){let e=tfe;for(const t of n)e=e.add(t);return e}const nfe=new hn(ht);function QM(){return nfe}function lG(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hy(e)?"-0":e}}function uG(n){return{integerValue:""+n}}function dG(n,e){return w4(e)?uG(e):lG(n,e)}class PT{constructor(){this._=void 0}}function rfe(n,e,t){return n instanceof Kp?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&TT(o)&&(o=CT(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof rh?fG(n,e):n instanceof ih?pG(n,e):function(i,o){const s=hG(i,o),a=mG(s)+mG(i.Pe);return HM(s)&&HM(i.Pe)?uG(a):lG(i.serializer,a)}(n,e)}function ife(n,e,t){return n instanceof rh?fG(n,e):n instanceof ih?pG(n,e):t}function hG(n,e){return n instanceof Qp?HM(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var r,o}class Kp extends PT{}class rh extends PT{constructor(e){super(),this.elements=e}}function fG(n,e){const t=gG(e);for(const r of n.elements)t.some(i=>$a(i,r))||t.push(r);return{arrayValue:{values:t}}}class ih extends PT{constructor(e){super(),this.elements=e}}function pG(n,e){let t=gG(e);for(const r of n.elements)t=t.filter(i=>!$a(i,r));return{arrayValue:{values:t}}}class Qp extends PT{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function mG(n){return pr(n.integerValue||n.doubleValue)}function gG(n){return qy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Jy{constructor(e,t){this.field=e,this.transform=t}}class sfe{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function NT(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class kT{}function _G(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Zp(n.key,Zn.none()):new Yp(n.key,n.data,Zn.none());{const t=n.data,r=yi.empty();let i=new hn(Un.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);null===s&&o.length>1&&(o=o.popLast(),s=t.field(o)),null===s?r.delete(o):r.set(o,s),i=i.add(o)}return new $c(n.key,r,new No(i.toArray()),Zn.none())}}function afe(n,e,t){n instanceof Yp?function(i,o,s){const a=i.value.clone(),c=bG(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof $c?function(i,o,s){if(!NT(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=bG(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(vG(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ev(n,e,t,r){return n instanceof Yp?function(o,s,a,c){if(!NT(o.precondition,s))return a;const l=o.value.clone(),h=EG(o.fieldTransforms,c,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof $c?function(o,s,a,c){if(!NT(o.precondition,s))return a;const l=EG(o.fieldTransforms,c,s),h=s.data;return h.setAll(vG(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===a?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(n,e,t,r):(a=t,NT(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a);var s,a}function cfe(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=hG(r.transform,i||null);null!=o&&(null===t&&(t=yi.empty()),t.set(r.field,o))}return t||null}function yG(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Up(r,i,(o,s)=>function ofe(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof rh&&i instanceof rh||r instanceof ih&&i instanceof ih?Up(r.elements,i.elements,$a):r instanceof Qp&&i instanceof Qp?$a(r.Pe,i.Pe):r instanceof Kp&&i instanceof Kp);var r,i}(o,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class Yp extends kT{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class $c extends kT{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function vG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bG(n,e,t){const r=new Map;qe(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ife(s,a,t[i]))}return r}function EG(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,rfe(o,s,e))}return r}class Zp extends kT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YM extends kT{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ZM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&afe(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ev(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ev(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=cG();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;const c=_G(s,a);null!==c&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vt())}isEqual(e){return this.batchId===e.batchId&&Up(this.mutations,e.mutations,(t,r)=>yG(t,r))&&Up(this.baseMutations,e.baseMutations,(t,r)=>yG(t,r))}}class XM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){qe(e.mutations.length===r.length);let i=function(){return efe}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new XM(e,t,r,i)}}class JM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class lfe{constructor(e,t){this.count=e,this.unchangedNames=t}}var Br,Ht;function wG(n){switch(n){default:return Le();case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0}}function TG(n){if(void 0===n)return xr("GRPC error has no .code"),Z.UNKNOWN;switch(n){case Br.OK:return Z.OK;case Br.CANCELLED:return Z.CANCELLED;case Br.UNKNOWN:return Z.UNKNOWN;case Br.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case Br.INTERNAL:return Z.INTERNAL;case Br.UNAVAILABLE:return Z.UNAVAILABLE;case Br.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case Br.NOT_FOUND:return Z.NOT_FOUND;case Br.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case Br.ABORTED:return Z.ABORTED;case Br.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case Br.DATA_LOSS:return Z.DATA_LOSS;default:return Le()}}(Ht=Br||(Br={}))[Ht.OK=0]="OK",Ht[Ht.CANCELLED=1]="CANCELLED",Ht[Ht.UNKNOWN=2]="UNKNOWN",Ht[Ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ht[Ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ht[Ht.NOT_FOUND=5]="NOT_FOUND",Ht[Ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ht[Ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ht[Ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ht[Ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ht[Ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ht[Ht.ABORTED=10]="ABORTED",Ht[Ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ht[Ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ht[Ht.INTERNAL=13]="INTERNAL",Ht[Ht.UNAVAILABLE=14]="UNAVAILABLE",Ht[Ht.DATA_LOSS=15]="DATA_LOSS";function CG(){return new TextEncoder}const ufe=new Zd([4294967295,4294967295],0);function AG(n){const e=CG().encode(n),t=new o4;return t.update(e),new Uint8Array(t.digest())}function DG(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zd([t,r],0),new Zd([i,o],0)]}class eP{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new tv(`Invalid padding: ${t}`);if(r<0)throw new tv(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new tv(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new tv(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Zd.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Zd.fromNumber(r)));return 1===i.compare(ufe)&&(i=new Zd([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=AG(e),[r,i]=DG(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new eP(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(0===this.Ie)return;const t=AG(e),[r,i]=DG(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class tv extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nv{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,rv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new nv(We.min(),i,new xn(ht),ko(),vt())}}class rv{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new rv(r,t,vt(),vt(),vt())}}class FT{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class SG{constructor(e,t){this.targetId=e,this.me=t}}class xG{constructor(e,t,r=fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class RG{constructor(){this.fe=0,this.ge=PG(),this.pe=fr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=vt(),t=vt(),r=vt();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Le()}}),new rv(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=PG()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dfe{constructor(e){this.Le=e,this.Be=new Map,this.ke=ko(),this.qe=MG(),this.Qe=new xn(ht)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Le()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const o=i.target;if(xT(o))if(0===r){const s=new Se(o.path);this.Ue(t,s,Bn.newNoDocument(s,We.min()))}else qe(1===r);else{const s=this.Ye(t);if(s!==r){const a=this.Ze(e),c=a?this.Xe(a,e,s):1;0!==c&&(this.je(t),this.Qe=this.Qe.insert(t,2===c?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,a;try{s=Bc(r).toUint8Array()}catch(c){if(c instanceof k4)return Po("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new eP(s,i,o)}catch(c){return Po(c instanceof tv?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return 0===a.Ie?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&xT(a.target)){const c=new Se(a.target.path);null!==this.ke.get(c)||this.it(s,c)||this.Ue(s,c,Bn.newNoDocument(c,e))}o.be&&(t.set(s,o.Ce()),o.ve())}});let r=vt();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{const l=this.Je(c);return!l||"TargetPurposeLimboResolution"===l.purpose||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new nv(e,t,this.Qe,this.ke,r);return this.ke=ko(),this.qe=MG(),this.Qe=new xn(ht),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new RG,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new hn(ht),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new RG),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function MG(){return new xn(Se.comparator)}function PG(){return new xn(Se.comparator)}const hfe={asc:"ASCENDING",desc:"DESCENDING"},ffe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pfe={and:"AND",or:"OR"};class mfe{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tP(n,e){return n.useProto3Json||jy(e)?e:{value:e}}function Xp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NG(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gfe(n,e){return Xp(n,e.toTimestamp())}function Rr(n){return qe(!!n),We.fromTimestamp(function(t){const r=Uc(t);return new Yn(r.seconds,r.nanos)}(n))}function nP(n,e){return rP(n,e).canonicalString()}function rP(n,e){const t=(i=n,new Ot(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function kG(n){const e=Ot.fromString(n);return qe(qG(e)),e}function iv(n,e){return nP(n.databaseId,e.path)}function qa(n,e){const t=kG(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(LG(t))}function OG(n,e){return nP(n.databaseId,e)}function FG(n){const e=kG(n);return 4===e.length?Ot.emptyPath():LG(e)}function iP(n){return new Ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function LG(n){return qe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function VG(n,e,t){return{name:iv(n,e),fields:t.value.mapValue.fields}}function UG(n,e,t){const r=qa(n,e.name),i=Rr(e.updateTime),o=e.createTime?Rr(e.createTime):We.min(),s=new yi({mapValue:{fields:e.fields}}),a=Bn.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function ov(n,e){let t;if(e instanceof Yp)t={update:VG(n,e.key,e.value)};else if(e instanceof Zp)t={delete:iv(n,e.key)};else if(e instanceof $c)t={update:VG(n,e.key,e.data),updateMask:Tfe(e.fieldMask)};else{if(!(e instanceof YM))return Le();t={verify:iv(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Kp)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rh)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ih)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qp)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw Le()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:gfe(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Le()),t;var o}function oP(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Zn.updateTime(Rr(o.updateTime)):void 0!==o.exists?Zn.exists(o.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;"setToServerValue"in a?(qe("REQUEST_TIME"===a.setToServerValue),c=new Kp):"appendMissingElements"in a?c=new rh(a.appendMissingElements.values||[]):"removeAllFromArray"in a?c=new ih(a.removeAllFromArray.values||[]):"increment"in a?c=new Qp(s,a.increment):Le();const l=Un.fromServerFormat(a.fieldPath);return new Jy(l,c)}(n,i)):[];var o;if(e.update){const i=qa(n,e.update.name),o=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=new No((e.updateMask.fieldPaths||[]).map(h=>Un.fromServerFormat(h)));return new $c(i,o,s,t,r)}return new Yp(i,o,t,r)}if(e.delete){const i=qa(n,e.delete);return new Zp(i,t)}if(e.verify){const i=qa(n,e.verify);return new YM(i,t)}return Le()}function BG(n,e){return{documents:[OG(n,e.path)]}}function LT(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=OG(n,i);const o=function(l){if(0!==l.length)return zG(dn.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(l){if(0!==l.length)return l.map(h=>{return{field:uu((_=h).field),direction:Efe(_.dir)};var _})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const a=tP(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i};var l}function HG(n){let e=FG(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){qe(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(m){const _=$G(m);return _ instanceof dn&&zM(_)?_.getFilters():[_]}(t.where));let s=[];t.orderBy&&(s=t.orderBy.map(_=>{return new Wy(Jp((E=_).field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction));var E}));let a=null;t.limit&&(a=function(m){let _;return _="object"==typeof m?m.value:m,jy(_)?null:_}(t.limit));let c=null;var m;t.startAt&&(c=new lu((m=t.startAt).values||[],!!m.before));let l=null;return t.endAt&&(l=function(m){return new lu(m.values||[],!m.before)}(t.endAt)),J4(e,i,s,o,a,"F",c,l)}function $G(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Jp(t.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jp(t.unaryFilter.field);return Ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Jp(t.unaryFilter.field);return Ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Jp(t.unaryFilter.field);return Ft.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Le()}}(n):void 0!==n.fieldFilter?Ft.create(Jp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Le()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return dn.create(t.compositeFilter.filters.map(r=>$G(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Le()}}(t.compositeFilter.op))}(n):Le();var t}function Efe(n){return hfe[n]}function Ife(n){return ffe[n]}function wfe(n){return pfe[n]}function uu(n){return{fieldPath:n.canonicalString()}}function Jp(n){return Un.fromServerFormat(n.fieldPath)}function zG(n){return n instanceof Ft?function(t){if("=="===t.op){if(L4(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NAN"}};if(F4(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(L4(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NAN"}};if(F4(t.value))return{unaryFilter:{field:uu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uu(t.field),op:Ife(t.op),value:t.value}}}(n):n instanceof dn?function(t){const r=t.getFilters().map(i=>zG(i));return 1===r.length?r[0]:{compositeFilter:{op:wfe(t.op),filters:r}}}(n):Le()}function Tfe(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qG(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class zc{constructor(e,t,r,i,o=We.min(),s=We.min(),a=fr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new zc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class GG{constructor(e){this.ct=e}}function WG(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:VT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:iv(o=n.ct,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Xp(o,s.version.toTimestamp()),createTime:Xp(o,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:oh(e.version)};else{if(!e.isUnknownDocument())return Le();r.unknownDocument={path:t.path.toArray(),version:oh(e.version)}}var o,s;return r}function VT(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function oh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sh(n){const e=new Yn(n.seconds,n.nanoseconds);return We.fromTimestamp(e)}function ah(n,e){const t=(e.baseMutations||[]).map(o=>oP(n.ct,o));for(let o=0;o<e.mutations.length-1;++o)o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(e.mutations[o].updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o);const r=e.mutations.map(o=>oP(n.ct,o)),i=Yn.fromMillis(e.localWriteTimeMs);return new ZM(e.batchId,i,t,r)}function sv(n){const e=sh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?sh(n.lastLimboFreeSnapshotVersion):We.min();let r;return r=void 0!==n.query.documents?(qe(1===(o=n.query).documents.length),Ui(qp(FG(o.documents[0])))):function(o){return Ui(HG(o))}(n.query),new zc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,fr.fromBase64String(n.resumeToken));var o}function KG(n,e){const t=oh(e.snapshotVersion),r=oh(e.lastLimboFreeSnapshotVersion);let i;i=xT(e.target)?BG(n.ct,e.target):LT(n.ct,e.target)._t;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nh(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sP(n){const e=HG({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?MT(e,e.limit,"L"):e}function aP(n,e){return new JM(e.largestBatchId,oP(n.ct,e.overlayMutation))}function QG(n,e){const t=e.path.lastSegment();return[n,Vi(e.path.popLast()),t]}function YG(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:oh(r.readTime),documentKey:Vi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Afe{getBundleMetadata(e,t){return ZG(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:sh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return ZG(e).put({bundleId:(i=t).id,createTime:oh(Rr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return XG(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:sP(o.bundledQuery),readTime:sh(o.readTime)};var o})}saveNamedQuery(e,t){return XG(e).put({name:(i=t).name,readTime:oh(Rr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function ZG(n){return Yr(n,"bundles")}function XG(n){return Yr(n,"namedQueries")}class UT{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new UT(e,t.uid||"")}getOverlay(e,t){return av(e).get(QG(this.userId,t)).next(r=>r?aP(this.serializer,r):null)}getOverlays(e,t){const r=za();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,s)=>{const a=new JM(t,s);i.push(this.ht(e,a))}),G.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(s=>i.add(Vi(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(av(e).j("collectionPathOverlayIndex",a))}),G.waitFor(o)}getOverlaysForCollection(e,t,r){const i=za(),o=Vi(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return av(e).U("collectionPathOverlayIndex",s).next(a=>{for(const c of a){const l=aP(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=za();let s;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return av(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,h)=>{const m=aP(this.serializer,l);o.size()<i||m.largestBatchId===s?(o.set(m.getKey(),m),s=m.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return av(e).put(function(i,o,s){const[a,c,l]=QG(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:ov(i.ct,s.mutation)}}(this.serializer,this.userId,t))}}function av(n){return Yr(n,"documentOverlays")}class Dfe{Pt(e){return Yr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t?.value;return r?fr.fromUint8Array(r):fr.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class ch{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(pr(e.integerValue));else if("doubleValue"in e){const r=pr(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Hy(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),"string"==typeof r&&(r=Uc(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Bc(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?V4(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):Le()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}St(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Se.fromName(e).path.forEach(r=>{this.dt(t,60),this.bt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}function Sfe(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function JG(n){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=Sfe(255&r[o]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}ch.Dt=new ch;class xfe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.vt(r.value),r=t.next();this.Ft()}Mt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.xt(r.value),r=t.next();this.Ot()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.vt(r);else if(r<2048)this.vt(960|r>>>6),this.vt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.vt(480|r>>>12),this.vt(128|63&r>>>6),this.vt(128|63&r);else{const i=t.codePointAt(0);this.vt(240|i>>>18),this.vt(128|63&i>>>12),this.vt(128|63&i>>>6),this.vt(128|63&i)}}this.Ft()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=t.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}Bt(e){const t=this.kt(e),r=JG(t);this.qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Qt(e){const t=this.kt(e),r=JG(t);this.qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const t=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}vt(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(t)}xt(e){const t=255&e;0===t?(this.Wt(0),this.Wt(255)):255===t?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Rfe{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class Mfe{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class cv{constructor(){this.zt=new xfe,this.jt=new Rfe(this.zt),this.Ht=new Mfe(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class lh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Yt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new lh(this.indexId,this.documentKey,this.arrayValue,r)}}function du(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=e3(n.arrayValue,e.arrayValue),0!==t?t:(t=e3(n.directionalValue,e.directionalValue),0!==t?t:Se.comparator(n.documentKey,e.documentKey)))}function e3(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class t3{constructor(e){this.Zt=new hn((t,r)=>Un.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const t of e.filters){const r=t;r.isInequality()?this.Zt=this.Zt.add(r):this.en.push(r)}}get tn(){return this.Zt.size>1}nn(e){if(qe(e.collectionGroup===this.collectionId),this.tn)return!1;const t=OM(e);if(void 0!==t&&!this.rn(t))return!1;const r=Xd(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.rn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Zt.size>0){const a=this.Zt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const c=r[o];if(!this.sn(a,c)||!this.on(this.Xt[s++],c))return!1}++o}for(;o<r.length;++o)if(s>=this.Xt.length||!this.on(this.Xt[s++],r[o]))return!1;return!0}_n(){if(this.tn)return null;let e=new hn(Un.comparator);const t=[];for(const r of this.en)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new Jd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Jd(r.field,0))}for(const r of this.Xt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Jd(r.field,"asc"===r.dir?0:1)));return new Bp(Bp.UNKNOWN_ID,this.collectionId,t,jp.empty())}rn(e){for(const t of this.en)if(this.sn(t,e))return!0;return!1}sn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}on(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function n3(n){var e,t;if(qe(n instanceof Ft||n instanceof dn),n instanceof Ft){if(n instanceof Y4){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(o=>Ft.create(n.field,"==",o)))||[];return dn.create(i,"or")}return n}const r=n.filters.map(i=>n3(i));return dn.create(r,n.op)}function Pfe(n){if(0===n.getFilters().length)return[];const e=uP(n3(n));return qe(r3(e)),cP(e)||lP(e)?[e]:e.getFilters()}function cP(n){return n instanceof Ft}function lP(n){return n instanceof dn&&zM(n)}function r3(n){return cP(n)||lP(n)||function(t){if(t instanceof dn&&$M(t)){for(const r of t.getFilters())if(!cP(r)&&!lP(r))return!1;return!0}return!1}(n)}function uP(n){if(qe(n instanceof Ft||n instanceof dn),n instanceof Ft)return n;if(1===n.filters.length)return uP(n.filters[0]);const e=n.filters.map(r=>uP(r));let t=dn.create(e,n.op);return t=BT(t),r3(t)?t:(qe(t instanceof dn),qe(zp(t)),qe(t.filters.length>1),t.filters.reduce((r,i)=>dP(r,i)))}function dP(n,e){let t;return qe(n instanceof Ft||n instanceof dn),qe(e instanceof Ft||e instanceof dn),t=n instanceof Ft?e instanceof Ft?dn.create([n,e],"and"):o3(n,e):e instanceof Ft?o3(e,n):function(i,o){if(qe(i.filters.length>0&&o.filters.length>0),zp(i)&&zp(o))return W4(i,o.getFilters());const s=$M(i)?i:o,a=$M(i)?o:i,c=s.filters.map(l=>dP(l,a));return dn.create(c,"or")}(n,e),BT(t)}function o3(n,e){if(zp(e))return W4(e,n.getFilters());{const t=e.filters.map(r=>dP(n,r));return dn.create(t,"or")}}function BT(n){if(qe(n instanceof Ft||n instanceof dn),n instanceof Ft)return n;const e=n.getFilters();if(1===e.length)return BT(e[0]);if(q4(n))return n;const t=e.map(i=>BT(i)),r=[];return t.forEach(i=>{i instanceof Ft?r.push(i):i instanceof dn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:dn.create(r,n.op)}class Nfe{constructor(){this.an=new hP}addToCollectionParentIndex(e,t){return this.an.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(rs.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class hP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new hn(Ot.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new hn(Ot.comparator)).toArray()}}const jT=new Uint8Array(0);class kfe{constructor(e,t){this.databaseId=t,this.un=new hP,this.cn=new Hc(r=>nh(r),(r,i)=>Ky(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.un.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.un.add(t)});const o={collectionId:r,parent:Vi(i)};return s3(e).put(o)}return G.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[g4(t),""],!1,!0);return s3(e).U(i).next(o=>{for(const s of o){if(s.collectionId!==t)break;r.push(Ha(s.parent))}return r})}addFieldIndex(e,t){const r=lv(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var a;delete i.indexId;const o=r.add(i);if(t.indexState){const s=tm(e);return o.next(a=>{s.put(YG(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=lv(e),i=tm(e),o=em(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=lv(e),r=em(e),i=tm(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return G.forEach(this.ln(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const o=new t3(r)._n();if(null!=o)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){const r=em(e);let i=!0;const o=new Map;return G.forEach(this.ln(t),s=>this.hn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=vt();const a=[];return G.forEach(o,(c,l)=>{var U;_e("IndexedDbIndexManager",`Using index ${U=c,`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(J=>`${J.fieldPath}:${J.kind}`).join(",")}`} to execute ${nh(t)}`);const h=function(U,J){const ve=OM(J);if(void 0===ve)return null;for(const Te of RT(U,ve.fieldPath))switch(Te.op){case"array-contains-any":return Te.value.arrayValue.values||[];case"array-contains":return[Te.value]}return null}(l,c),m=function(U,J){const ve=new Map;for(const Te of Xd(J))for(const O of RT(U,Te.fieldPath))switch(O.op){case"==":case"in":ve.set(Te.fieldPath.canonicalString(),O.value);break;case"not-in":case"!=":return ve.set(Te.fieldPath.canonicalString(),O.value),Array.from(ve.values())}return null}(l,c),_=function(U,J){const ve=[];let Te=!0;for(const O of Xd(J)){const S=0===O.kind?Z4(U,O.fieldPath,U.startAt):X4(U,O.fieldPath,U.startAt);ve.push(S.value),Te&&(Te=S.inclusive)}return new lu(ve,Te)}(l,c),y=function(U,J){const ve=[];let Te=!0;for(const O of Xd(J)){const S=0===O.kind?X4(U,O.fieldPath,U.endAt):Z4(U,O.fieldPath,U.endAt);ve.push(S.value),Te&&(Te=S.inclusive)}return new lu(ve,Te)}(l,c),E=this.Pn(c,l,_),T=this.Pn(c,l,y),C=this.In(c,l,m),P=this.Tn(c.indexId,h,E,_.inclusive,T,y.inclusive,C);return G.forEach(P,R=>r.G(R,t.limit).next(U=>{U.forEach(J=>{const ve=Se.fromSegments(J.documentKey);s.has(ve)||(s=s.add(ve),a.push(ve))})}))}).next(()=>a)}return G.resolve(null)})}ln(e){let t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:Pfe(dn.create(e.filters,"and")).map(r=>GM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,t),t)}Tn(e,t,r,i,o,s,a){const c=(null!=t?t.length:1)*Math.max(r.length,o.length),l=c/(null!=t?t.length:1),h=[];for(let m=0;m<c;++m){const _=t?this.En(t[m/l]):jT,y=this.dn(e,_,r[m%l],i),E=this.An(e,_,o[m%l],s),T=a.map(C=>this.dn(e,_,C,!0));h.push(...this.createRange(y,E,T))}return h}dn(e,t,r,i){const o=new lh(e,Se.empty(),t,r);return i?o:o.Yt()}An(e,t,r,i){const o=new lh(e,Se.empty(),t,r);return i?o.Yt():o}hn(e,t){const r=new t3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.nn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2;const i=this.ln(t);return G.forEach(i,o=>this.hn(e,o).next(s=>{s?0!==r&&s.fields.length<function(c){let l=new hn(Un.comparator),h=!1;for(const m of c.filters)for(const _ of m.getFlattenedFilters())_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:l=l.add(_.field));for(const m of c.orderBy)m.field.isKeyField()||(l=l.add(m.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}Rn(e,t){const r=new cv;for(const i of Xd(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const s=r.Jt(i.kind);ch.Dt.It(o,s)}return r.Gt()}En(e){const t=new cv;return ch.Dt.It(e,t.Jt(0)),t.Gt()}Vn(e,t){const r=new cv;return ch.Dt.It(th(this.databaseId,t),r.Jt(function(o){const s=Xd(o);return 0===s.length?0:s[s.length-1].kind}(e))),r.Gt()}In(e,t,r){if(null===r)return[];let i=[];i.push(new cv);let o=0;for(const s of Xd(e)){const a=r[o++];for(const c of i)if(this.mn(t,s.fieldPath)&&qy(a))i=this.fn(i,s,a);else{const l=c.Jt(s.kind);ch.Dt.It(a,l)}}return this.gn(i)}Pn(e,t,r){return this.In(e,t,r.position)}gn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Gt();return t}fn(e,t,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const c=new cv;c.seed(a.Gt()),ch.Dt.It(s,c.Jt(t.kind)),o.push(c)}return o}mn(e,t){return!!e.filters.find(r=>r instanceof Ft&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=lv(e),i=tm(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{const s=[];return G.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(h,m){const _=m?new jp(m.sequenceNumber,new rs(sh(m.readTime),new Se(Ha(m.documentKey)),m.largestBatchId)):jp.empty(),y=h.fields.map(([E,T])=>new Jd(Un.fromServerFormat(E),T));return new Bp(h.indexId,h.collectionGroup,y,_)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:ht(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=lv(e),o=tm(e);return this.pn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>G.forEach(a,c=>o.put(YG(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,(i,o)=>{const s=r.get(i.collectionGroup);return(s?G.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),G.forEach(a,c=>this.yn(e,i,c).next(l=>{const h=this.wn(o,c);return l.isEqual(h)?G.resolve():this.Sn(e,o,c,l,h)}))))})}bn(e,t,r,i){return em(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Vn(r,t.key),documentKey:t.key.path.toArray()})}Dn(e,t,r,i){return em(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Vn(r,t.key),t.key.path.toArray()])}yn(e,t,r){const i=em(e);let o=new hn(du);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Vn(r,t)])},(s,a)=>{o=o.add(new lh(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}wn(e,t){let r=new hn(du);const i=this.Rn(t,e);if(null==i)return r;const o=OM(t);if(null!=o){const s=e.data.field(o.fieldPath);if(qy(s))for(const a of s.arrayValue.values||[])r=r.add(new lh(t.indexId,e.key,this.En(a),i))}else r=r.add(new lh(t.indexId,e.key,jT,i));return r}Sn(e,t,r,i,o){_e("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(c,l,h,m,_){const y=c.getIterator(),E=l.getIterator();let T=Hp(y),C=Hp(E);for(;T||C;){let P=!1,R=!1;if(T&&C){const U=h(T,C);U<0?R=!0:U>0&&(P=!0)}else null!=T?R=!0:P=!0;P?(m(C),C=Hp(E)):R?(_(T),T=Hp(y)):(T=Hp(y),C=Hp(E))}}(i,o,du,a=>{s.push(this.bn(e,t,r,a))},a=>{s.push(this.Dn(e,t,r,a))}),G.waitFor(s)}pn(e){let t=1;return tm(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>du(s,a)).filter((s,a,c)=>!a||0!==du(s,c[a-1]));const i=[];i.push(e);for(const s of r){const a=du(s,e),c=du(s,t);if(0===a)i[0]=e.Yt();else if(a>0&&c<0)i.push(s),i.push(s.Yt());else if(c>0)break}i.push(t);const o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];o.push(IDBKeyRange.bound([i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,jT,[]],[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,jT,[]]))}return o}Cn(e,t){return du(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(a3)}getMinOffset(e,t){return G.mapArray(this.ln(t),r=>this.hn(e,r).next(i=>i||Le())).next(a3)}}function s3(n){return Yr(n,"collectionParents")}function em(n){return Yr(n,"indexEntries")}function lv(n){return Yr(n,"indexConfiguration")}function tm(n){return Yr(n,"indexState")}function a3(n){qe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;FM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rs(e.readTime,e.documentKey,t)}const c3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bi(e,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function l3(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId);let a=0;const c=r.J({range:s},(h,m,_)=>(a++,_.delete()));o.push(c.next(()=>{qe(1===a)}));const l=[];for(const h of t.mutations){const m=A4(e,h.key.path,t.batchId);o.push(i.delete(m)),l.push(h.key)}return G.waitFor(o).next(()=>l)}function HT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Le();e=n.noDocument}return JSON.stringify(e).length}Bi.DEFAULT_COLLECTION_PERCENTILE=10,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bi.DEFAULT=new Bi(41943040,Bi.DEFAULT_COLLECTION_PERCENTILE,Bi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bi.DISABLED=new Bi(-1,0,0);class $T{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.vn={}}static lt(e,t,r,i){qe(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new $T(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=nm(e),s=hu(e);return s.add({}).next(a=>{qe("number"==typeof a);const c=new ZM(a,t,r,i),l=function(y,E,T){const C=T.baseMutations.map(R=>ov(y.ct,R)),P=T.mutations.map(R=>ov(y.ct,R));return{userId:E,batchId:T.batchId,localWriteTimeMs:T.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,c),h=[];let m=new hn((_,y)=>ht(_.canonicalString(),y.canonicalString()));for(const _ of i){const y=A4(this.userId,_.key.path,a);m=m.add(_.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Ehe))}return m.forEach(_=>{h.push(this.indexManager.addToCollectionParentIndex(e,_))}),e.addOnCommittedListener(()=>{this.vn[a]=c.keys()}),G.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return hu(e).get(t).next(r=>r?(qe(r.userId===this.userId),ah(this.serializer,r)):null)}Fn(e,t){return this.vn[t]?G.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return hu(e).J({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(qe(a.batchId>=r),o=ah(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return hu(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hu(e).U("userMutationsIndex",t).next(r=>r.map(i=>ah(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=IT(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return nm(e).J({range:i},(s,a,c)=>{const[l,h,m]=s,_=Ha(h);if(l===this.userId&&t.path.isEqual(_))return hu(e).get(m).next(y=>{if(!y)throw Le();qe(y.userId===this.userId),o.push(ah(this.serializer,y))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(ht);const i=[];return t.forEach(o=>{const s=IT(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=nm(e).J({range:a},(l,h,m)=>{const[_,y,E]=l,T=Ha(y);_===this.userId&&o.path.isEqual(T)?r=r.add(E):m.done()});i.push(c)}),G.waitFor(i).next(()=>this.Mn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=IT(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new hn(ht);return nm(e).J({range:s},(c,l,h)=>{const[m,_,y]=c,E=Ha(_);m===this.userId&&r.isPrefixOf(E)?E.length===i&&(a=a.add(y)):h.done()}).next(()=>this.Mn(e,a))}Mn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(hu(e).get(o).next(s=>{if(null===s)throw Le();qe(s.userId===this.userId),r.push(ah(this.serializer,s))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return l3(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.xn(t.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return nm(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){const c=Ha(o[1]);i.push(c)}else a.done()}).next(()=>{qe(0===i.length)})})}containsKey(e,t){return u3(e,this.userId,t)}On(e){return d3(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function u3(n,e,t){const r=IT(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return nm(n).J({range:o,H:!0},(a,c,l)=>{const[h,m,_]=a;h===e&&m===i&&(s=!0),l.done()}).next(()=>s)}function hu(n){return Yr(n,"mutations")}function nm(n){return Yr(n,"documentMutations")}function d3(n){return Yr(n,"mutationQueues")}class uh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new uh(0)}static Bn(){return new uh(-1)}}class Ofe{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.kn(e).next(t=>{const r=new uh(t.highestTargetId);return t.highestTargetId=r.next(),this.qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(t=>We.fromTimestamp(new Yn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.kn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.qn(e,i)))}addTargetData(e,t){return this.Qn(e,t).next(()=>this.kn(e).next(r=>(r.targetCount+=1,this.Kn(t,r),this.qn(e,r))))}updateTargetData(e,t){return this.Qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>rm(e).delete(t.targetId)).next(()=>this.kn(e)).next(r=>(qe(r.targetCount>0),r.targetCount-=1,this.qn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return rm(e).J((s,a)=>{const c=sv(a);c.sequenceNumber<=t&&null===r.get(c.targetId)&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>G.waitFor(o)).next(()=>i)}forEachTarget(e,t){return rm(e).J((r,i)=>{const o=sv(i);t(o)})}kn(e){return h3(e).get("targetGlobalKey").next(t=>(qe(null!==t),t))}qn(e,t){return h3(e).put("targetGlobalKey",t)}Qn(e,t){return rm(e).put(KG(this.serializer,t))}Kn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.kn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=nh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return rm(e).J({range:i,index:"queryTargetsIndex"},(s,a,c)=>{const l=sv(a);Ky(t,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=fu(e);return t.forEach(s=>{const a=Vi(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),G.waitFor(i)}removeMatchingKeys(e,t,r){const i=fu(e);return G.forEach(t,o=>{const s=Vi(o.path);return G.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=fu(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=fu(e);let o=vt();return i.J({range:r,H:!0},(s,a,c)=>{const l=Ha(s[1]),h=new Se(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){const r=Vi(t.path),i=IDBKeyRange.bound([r],[g4(r)],!1,!0);let o=0;return fu(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],c,l)=>{0!==s&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return rm(e).get(t).next(r=>r?sv(r):null)}}function rm(n){return Yr(n,"targets")}function h3(n){return Yr(n,"targetGlobal")}function fu(n){return Yr(n,"targetDocuments")}function f3([n,e],[t,r]){const i=ht(n,t);return 0===i?ht(e,r):i}class Ffe{constructor(e){this.$n=e,this.buffer=new hn(f3),this.Un=0}Wn(){return++this.Un}Gn(e){const t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();f3(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p3{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){var t=this;_e("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ne.A)(function*(){t.zn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ru(r)?_e("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield nu(r)}yield t.jn(3e5)}))}}class Lfe{constructor(e,t){this.Hn=e,this.params=t}calculateTargetCount(e,t){return this.Hn.Jn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return G.resolve(is.oe);const r=new Ffe(t);return this.Hn.forEachTarget(e,i=>r.Gn(i.sequenceNumber)).next(()=>this.Hn.Yn(e,i=>r.Gn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Hn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Hn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(c3)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(_e("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),c3):this.Zn(e,t))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,t){let r,i,o,s,a,c,l;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(_e("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,s=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,t))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(l=Date.now(),Vp()<=ns.$b.DEBUG&&_e("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-h}ms\n\tDetermined least recently used ${i} in `+(a-s)+`ms\n\tRemoved ${o} targets in `+(c-a)+`ms\n\tRemoved ${m} documents in `+(l-c)+`ms\nTotal Duration: ${l-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}class Vfe{constructor(e,t){this.db=e,this.garbageCollector=function m3(n,e){return new Lfe(n,e)}(this,t)}Jn(e){const t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Xn(e){let t=0;return this.Yn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Yn(e,t){return this.er(e,(r,i)=>t(i))}addReference(e,t,r){return zT(e,r)}removeReference(e,t,r){return zT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return zT(e,t)}tr(e,t){return function(i,o){let s=!1;return d3(i).Y(a=>u3(i,a,o).next(c=>(c&&(s=!0),G.resolve(!c)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.er(e,(s,a)=>{if(a<=t){const c=this.tr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,We.min()),fu(e).delete([0,Vi(s.path)])))});i.push(c)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return zT(e,t)}er(e,t){const r=fu(e);let i,o=is.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{0===s?(o!==is.oe&&t(new Se(Ha(i)),o),o=l,i=c):o=is.oe}).next(()=>{o!==is.oe&&t(new Se(Ha(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zT(n,e){return fu(n).put((i=n.currentSequenceNumber,{targetId:0,path:Vi(e.path),sequenceNumber:i}));var i}class g3{constructor(){this.changes=new Hc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ufe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return dh(e).put(r)}removeEntry(e,t,r){return dh(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],VT(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.nr(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return dh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uv(t))},(i,o)=>{r=this.rr(t,o)}).next(()=>r)}ir(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return dh(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(uv(t))},(i,o)=>{r={document:this.rr(t,o),size:HT(o)}}).next(()=>r)}getEntries(e,t){let r=ko();return this.sr(e,t,(i,o)=>{const s=this.rr(i,o);r=r.insert(i,s)}).next(()=>r)}_r(e,t){let r=ko(),i=new xn(Se.comparator);return this.sr(e,t,(o,s)=>{const a=this.rr(o,s);r=r.insert(o,a),i=i.insert(o,HT(s))}).next(()=>({documents:r,ar:i}))}sr(e,t,r){if(t.isEmpty())return G.resolve();let i=new hn(b3);t.forEach(c=>i=i.add(c));const o=IDBKeyRange.bound(uv(i.first()),uv(i.last())),s=i.getIterator();let a=s.getNext();return dh(e).J({index:"documentKeyIndex",range:o},(c,l,h)=>{const m=Se.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&b3(a,m)<0;)r(a,null),a=s.getNext();a&&a.isEqual(m)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(uv(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),VT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dh(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=ko();for(const m of l){const _=this.rr(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);_.isFoundDocument()&&(Yy(t,_)||i.has(_.key))&&(h=h.insert(_.key,_))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=ko();const s=v3(t,r),a=v3(t,rs.max());return dh(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,h)=>{const m=this.rr(Se.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(m.key,m),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Bfe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return y3(e).get("remoteDocumentGlobalKey").next(t=>(qe(!!t),t))}nr(e,t){return y3(e).put("remoteDocumentGlobalKey",t)}rr(e,t){if(t){const r=function Cfe(n,e){let t;if(e.document)t=UG(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),i=sh(e.noDocument.readTime);t=Bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Le();{const r=Se.fromSegments(e.unknownDocument.path),i=sh(e.unknownDocument.version);t=Bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const o=new Yn(i[0],i[1]);return We.fromTimestamp(o)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(We.min()))return r}return Bn.newInvalidDocument(e)}}function _3(n){return new Ufe(n)}class Bfe extends g3{constructor(e,t){super(),this.ur=e,this.trackRemovals=t,this.cr=new Hc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new hn((o,s)=>ht(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.cr.get(o);if(t.push(this.ur.removeEntry(e,o,a.readTime)),s.isValidDocument()){const c=WG(this.ur.serializer,s);i=i.add(o.path.popLast());const l=HT(c);r+=l-a.size,t.push(this.ur.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){const c=WG(this.ur.serializer,s.convertToNoDocument(We.min()));t.push(this.ur.addEntry(e,o,c))}}),i.forEach(o=>{t.push(this.ur.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.ur.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.ur.ir(e,t).next(r=>(this.cr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ur._r(e,t).next(({documents:r,ar:i})=>(i.forEach((o,s)=>{this.cr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function y3(n){return Yr(n,"remoteDocumentGlobal")}function dh(n){return Yr(n,"remoteDocumentsV14")}function uv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function v3(n,e){const t=e.documentKey.path.toArray();return[n,VT(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function b3(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ht(t[o],r[o]),i)return i;return i=ht(t.length,r.length),i||(i=ht(t[t.length-2],r[r.length-2]),i||ht(t[t.length-1],r[r.length-1]))}class jfe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class E3{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&ev(r.mutation,i,No.empty(),Yn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,vt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=vt()){const i=za();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Zy();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=za();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,vt()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ko();const s=Xy(),a=Xy();return t.forEach((c,l)=>{const h=r.get(l.key);i.has(l.key)&&(void 0===h||h.mutation instanceof $c)?o=o.insert(l.key,l):void 0!==h?(s.set(l.key,h.mutation.getFieldMask()),ev(h.mutation,l,h.mutation.getFieldMask(),Yn.now())):s.set(l.key,No.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var m;return a.set(l,new jfe(h,null!==(m=s.get(l))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,t){const r=Xy();let i=new xn((s,a)=>s-a),o=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const a of s)a.keys().forEach(c=>{const l=t.get(c);if(null===l)return;let h=r.get(c)||No.empty();h=a.applyToLocalView(l,h),r.set(c,h);const m=(i.get(a.batchId)||vt()).add(c);i=i.insert(a.batchId,m)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),l=c.key,h=c.value,m=cG();h.forEach(_=>{if(!o.has(_)){const y=_G(t.get(_),r.get(_));null!==y&&m.set(_,y),o=o.add(_)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,m))}return G.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return Se.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):WM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var s}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):G.resolve(za());let a=-1,c=o;return s.next(l=>G.forEach(l,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),o.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(_=>{c=c.insert(h,_)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,vt())).next(h=>({batchId:a,changes:aG(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(r=>{let i=Zy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=Zy();return this.indexManager.getCollectionParents(e,o).next(a=>G.forEach(a,c=>{const l=(m=t,_=c.child(o),new jc(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((m,_)=>{s=s.insert(m,_)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{const h=l.getKey();null===s.get(h)&&(s=s.insert(h,Bn.newInvalidDocument(h)))});let a=Zy();return s.forEach((c,l)=>{const h=o.get(c);void 0!==h&&ev(h.mutation,l,No.empty(),Yn.now()),Yy(t,l)&&(a=a.insert(c,l))}),a})}}class Hfe{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return G.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,{id:(i=t).id,version:i.version,createTime:Rr(i.createTime)}),G.resolve();var i}getNamedQuery(e,t){return G.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,{name:(i=t).name,query:sP(i.bundledQuery),readTime:Rr(i.readTime)}),G.resolve();var i}}class $fe{constructor(){this.overlays=new xn(Se.comparator),this.Pr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=za();return G.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Pr.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Pr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const i=za(),o=t.length+1,s=new Se(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xn((l,h)=>l-h);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);null===h&&(h=za(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}const a=za(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return G.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const s=this.Pr.get(i.largestBatchId).delete(r.key);this.Pr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new JM(t,r));let o=this.Pr.get(t);void 0===o&&(o=vt(),this.Pr.set(t,o)),this.Pr.set(t,o.add(r.key))}}class zfe{constructor(){this.sessionToken=fr.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class fP{constructor(){this.Ir=new hn(si.Tr),this.Er=new hn(si.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){const r=new si(e,t);this.Ir=this.Ir.add(r),this.Er=this.Er.add(r)}Ar(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Rr(new si(e,t))}Vr(e,t){e.forEach(r=>this.removeReference(r,t))}mr(e){const t=new Se(new Ot([])),r=new si(t,e),i=new si(t,e+1),o=[];return this.Er.forEachInRange([r,i],s=>{this.Rr(s),o.push(s.key)}),o}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const t=new Se(new Ot([])),r=new si(t,e),i=new si(t,e+1);let o=vt();return this.Er.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new si(e,0),r=this.Ir.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return Se.comparator(e.key,t.key)||ht(e.yr,t.yr)}static dr(e,t){return ht(e.yr,t.yr)||Se.comparator(e.key,t.key)}}class qfe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new hn(si.Tr)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.wr;this.wr++;const s=new ZM(o,t,r,i);this.mutationQueue.push(s);for(const a of i)this.Sr=this.Sr.add(new si(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(e,t){return G.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Dr(t+1),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),o=[];return this.Sr.forEachInRange([r,i],s=>{const a=this.br(s.yr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new hn(ht);return t.forEach(i=>{const o=new si(i,0),s=new si(i,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([o,s],a=>{r=r.add(a.yr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Se.isDocumentKey(o)||(o=o.child(""));const s=new si(new Se(o),0);let a=new hn(ht);return this.Sr.forEachWhile(c=>{const l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.yr)),!0)},s),G.resolve(this.Cr(a))}Cr(e){const t=[];return e.forEach(r=>{const i=this.br(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){qe(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Sr;return G.forEach(t.mutations,i=>{const o=new si(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Sr=r})}xn(e){}containsKey(e,t){const r=new si(t,0),i=this.Sr.firstAfterOrEqual(r);return G.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return G.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Gfe{constructor(e){this.Fr=e,this.docs=new xn(Se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Fr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=ko();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Bn.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ko();const s=t.path,a=new Se(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:l,value:{document:h}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||FM(y4(h),r)<=0||(i.has(h.key)||Yy(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Le()}Mr(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Wfe(this)}getSize(e){return G.resolve(this.size)}}class Wfe extends g3{constructor(e){super(),this.ur=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ur.addEntry(e,i)):this.ur.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}}class Kfe{constructor(e){this.persistence=e,this.Or=new Hc(t=>nh(t),Ky),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new fP,this.targetCount=0,this.Br=uh.Ln()}forEachTarget(e,t){return this.Or.forEach((r,i)=>t(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Nr&&(this.Nr=t),G.resolve()}Qn(e){this.Or.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new uh(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Qn(t),G.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Or.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Or.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.Or.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.Lr.Ar(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.Lr.Vr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Lr.pr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.Lr.containsKey(t))}}class pP{constructor(e,t){this.kr={},this.overlays={},this.qr=new is(0),this.Qr=!1,this.Qr=!0,this.Kr=new zfe,this.referenceDelegate=e(this),this.$r=new Kfe(this),this.indexManager=new Nfe,this.remoteDocumentCache=new Gfe(r=>this.referenceDelegate.Ur(r)),this.serializer=new GG(t),this.Wr=new Hfe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $fe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.kr[e.toKey()];return r||(r=new qfe(t,this.referenceDelegate),this.kr[e.toKey()]=r),r}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,r){_e("MemoryPersistence","Starting transaction:",e);const i=new Qfe(this.qr.next());return this.referenceDelegate.Gr(),r(i).next(o=>this.referenceDelegate.zr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}jr(e,t){return G.or(Object.values(this.kr).map(r=>()=>r.containsKey(e,t)))}}class Qfe extends b4{constructor(e){super(),this.currentSequenceNumber=e}}class qT{constructor(e){this.persistence=e,this.Hr=new fP,this.Jr=null}static Yr(e){return new qT(e)}get Zr(){if(this.Jr)return this.Jr;throw Le()}addReference(e,t,r){return this.Hr.addReference(r,t),this.Zr.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Hr.removeReference(r,t),this.Zr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(i=>this.Zr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Zr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Zr,r=>{const i=Se.fromPath(r);return this.Xr(e,i).next(o=>{o||t.removeEntry(i,We.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(r=>{r?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return G.or([()=>G.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}}class Yfe{constructor(e){this.serializer=e}O(e,t,r,i){const o=new ET("createOrUpgrade",t);var c;r<1&&i>=1&&(e.createObjectStore("owner"),(c=e).createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C4,{unique:!0}),c.createObjectStore("documentMutations"),I3(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=G.resolve();return r<3&&i>=3&&(0!==r&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),I3(e)),s=s.next(()=>function(c){const l=c.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:We.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>function(c,l){return l.store("mutations").U().next(h=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",C4,{unique:!0});const m=l.store("mutations"),_=h.map(y=>m.put(y));return G.waitFor(_)})}(e,o))),s=s.next(()=>{!function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(s=s.next(()=>this.ti(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ni(o)))),r<7&&i>=7&&(s=s.next(()=>this.ri(o))),r<8&&i>=8&&(s=s.next(()=>this.ii(e,o))),r<9&&i>=9&&(s=s.next(()=>{!function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(s=s.next(()=>this.si(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{!function(c){const l=c.createObjectStore("documentOverlays",{keyPath:Nhe});l.createIndex("collectionPathOverlayIndex",khe,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",Ohe,{unique:!1})}(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){const l=c.createObjectStore("remoteDocumentsV14",{keyPath:Ihe});l.createIndex("documentKeyIndex",whe),l.createIndex("collectionGroupIndex",The)}(e)).next(()=>this.oi(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this._i(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:xhe}).createIndex("sequenceNumberIndex",Rhe,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Mhe}).createIndex("documentKeyIndex",Phe,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{!function(c){c.createObjectStore("globals",{keyPath:"name"})}(e)})),s}ni(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=HT(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ti(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>G.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>G.forEach(a,c=>{qe(c.userId===o.userId);const l=ah(this.serializer,c);return l3(e,o.userId,l).next(()=>{})}))}))}ri(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((s,a)=>{const c=new Ot(s),l=[0,Vi(c)];o.push(t.get(l).next(h=>h?G.resolve():t.put({targetId:0,path:Vi(c),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>G.waitFor(o))})}ii(e,t){e.createObjectStore("collectionParents",{keyPath:She});const r=t.store("collectionParents"),i=new hP,o=s=>{if(i.add(s)){const a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:Vi(c)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{const c=new Ot(s);return o(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,c],l)=>{const h=Ha(a);return o(h.popLast())}))}si(e){const t=e.store("targets");return t.J((r,i)=>{const o=sv(i),s=KG(this.serializer,o);return t.put(s)})}oi(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{const a=t.store("remoteDocumentsV14"),c=(m=s,m.document?new Se(Ot.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):Le()).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};var m;i.push(a.put(l))}).next(()=>G.waitFor(i))}_i(e,t){const r=t.store("mutations"),i=_3(this.serializer),o=new pP(qT.Yr,this.serializer.ct);return r.U().next(s=>{const a=new Map;return s.forEach(c=>{var l;let h=null!==(l=a.get(c.userId))&&void 0!==l?l:vt();ah(this.serializer,c).keys().forEach(m=>h=h.add(m)),a.set(c.userId,h)}),G.forEach(a,(c,l)=>{const h=new oi(l),m=UT.lt(this.serializer,h),_=o.getIndexManager(h),y=$T.lt(h,this.serializer,_,o.referenceDelegate);return new E3(i,y,m,_).recalculateAndSaveOverlaysForDocumentKeys(new BM(t,is.oe),c).next()})})}}function I3(n){n.createObjectStore("targetDocuments",{keyPath:Ahe}).createIndex("documentTargetsIndex",Dhe,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Che,{unique:!0}),n.createObjectStore("targetGlobal")}const mP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gP{constructor(e,t,r,i,o,s,a,c,l,h,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ai=o,this.window=s,this.document=a,this.ui=l,this.ci=h,this.li=m,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=_=>Promise.resolve(),!gP.D())throw new ge(Z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vfe(this,i),this.di=t+"main",this.serializer=new GG(c),this.Ai=new ja(this.di,this.li,new Yfe(this.serializer)),this.Kr=new Dfe,this.$r=new Ofe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_3(this.serializer),this.Wr=new Afe,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===h&&xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(Z.FAILED_PRECONDITION,mP);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new is(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){var t=this;return this.Ei=function(){var r=(0,ne.A)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(function(){var t=(0,ne.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((0,ne.A)(function*(){t.started&&(yield t.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(t=>{t||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.Si(e).next(()=>!1):!!t&&this.bi(e).next(()=>!0))).catch(e=>{if(ru(e))return _e("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _e("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return dv(e).get("owner").next(t=>G.resolve(this.Di(t)))}Ci(e){return WT(e).delete(this.clientId)}vi(){var e=this;return(0,ne.A)(function*(){if(e.isPrimary&&!e.Fi(e.Ti,18e5)){e.Ti=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Yr(r,"clientMetadata");return i.U().next(o=>{const s=e.Mi(o,18e5),a=o.filter(c=>-1===s.indexOf(c));return G.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Ri)for(const r of t)e.Ri.removeItem(e.xi(r.clientId))}})()}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?G.resolve(!0):dv(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)){if(this.Di(t)&&this.networkEnabled)return!0;if(!this.Di(t)){if(!t.allowTabSynchronization)throw new ge(Z.FAILED_PRECONDITION,mP);return!1}}return!(!this.networkEnabled||!this.inForeground)||WT(e).U().next(r=>void 0===this.Mi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&_e("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ne.A)(function*(){e.Qr=!1,e.Ni(),e.Ii&&(e.Ii.cancel(),e.Ii=null),e.Li(),e.Bi(),yield e.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new BM(t,is.oe);return e.Si(r).next(()=>e.Ci(r))}),e.Ai.close(),e.ki()})()}Mi(e,t){return e.filter(r=>this.Fi(r.updateTimeMs,t)&&!this.Oi(r.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>WT(e).U().next(t=>this.Mi(t,18e5).map(r=>r.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,t){return $T.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new kfe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return UT.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,t,r){_e("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=17===(c=this.li)?Vhe:16===c?Lhe:15===c?UM:14===c?x4:13===c?S4:12===c?Fhe:11===c?D4:void Le();var c;let s;return this.Ai.runTransaction(e,i,o,a=>(s=new BM(a,this.qr?this.qr.next():is.oe),"readwrite-primary"===t?this.yi(s).next(c=>!!c||this.wi(s)).next(c=>{if(!c)throw xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new ge(Z.FAILED_PRECONDITION,v4);return r(s)}).next(c=>this.bi(s).next(()=>c)):this.Qi(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Qi(e){return dv(e).get("owner").next(t=>{if(null!==t&&this.Fi(t.leaseTimestampMs,5e3)&&!this.Oi(t.ownerId)&&!this.Di(t)&&!(this.ci||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(Z.FAILED_PRECONDITION,mP)})}bi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dv(e).put("owner",t)}static D(){return ja.D()}Si(e){const t=dv(e);return t.get("owner").next(r=>this.Di(r)?(_e("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):G.resolve())}Fi(e,t){const r=Date.now();return!(e<r-t||e>r&&(xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const t=/(?:Version|Mobile)\/1[456]/;(0,D.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var t;try{const r=null!==(null===(t=this.Ri)||void 0===t?void 0:t.getItem(this.xi(e)));return _e("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){xr("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dv(n){return Yr(n,"owner")}function WT(n){return Yr(n,"clientMetadata")}function _P(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class yP{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ki=r,this.$i=i}static Ui(e,t){let r=vt(),i=vt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new yP(e,t.fromCache,r,i)}}class Zfe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class w3{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=(0,D.nr)()?8:E4((0,D.ZQ)())>0?6:4}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Ji(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Yi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Zfe;return this.Zi(e,t,s).next(a=>{if(o.result=a,this.Gi)return this.Xi(e,t,s,a.size)})}).next(()=>o.result)}Xi(e,t,r,i){return r.documentReadCount<this.zi?(Vp()<=ns.$b.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Wp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),G.resolve()):(Vp()<=ns.$b.DEBUG&&_e("QueryEngine","Query:",Wp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ji*i?(Vp()<=ns.$b.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Wp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ui(t))):G.resolve())}Ji(e,t){if(eG(t))return G.resolve(null);let r=Ui(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=MT(t,null,"F"),r=Ui(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=vt(...o);return this.Hi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{const l=this.es(t,a);return this.ts(t,l,s,c.readTime)?this.Ji(e,MT(t,null,"F")):this.ns(e,l,t,c)}))})))}Yi(e,t,r,i){return eG(t)||i.isEqual(We.min())?G.resolve(null):this.Hi.getDocuments(e,r).next(o=>{const s=this.es(t,o);return this.ts(t,s,r,i)?G.resolve(null):(Vp()<=ns.$b.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wp(t)),this.ns(e,s,t,_4(i,-1)).next(a=>a))})}es(e,t){let r=new hn(oG(e));return t.forEach((i,o)=>{Yy(e,o)&&(r=r.add(o))}),r}ts(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Zi(e,t,r){return Vp()<=ns.$b.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Wp(t)),this.Hi.getDocumentsMatchingQuery(e,t,rs.min(),r)}ns(e,t,r,i){return this.Hi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}class Xfe{constructor(e,t,r,i){this.persistence=e,this.rs=t,this.serializer=i,this.ss=new xn(ht),this.os=new Hc(o=>nh(o),Ky),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(r)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new E3(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}}function T3(n,e,t,r){return new Xfe(n,e,t,r)}function C3(n,e){return vP.apply(this,arguments)}function vP(){return(vP=(0,ne.A)(function*(n,e){const t=Ae(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.cs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let c=vt();for(const l of i){s.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}for(const l of o){a.push(l.batchId);for(const h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(l=>({ls:l,removedBatchIds:s,addedBatchIds:a}))})})})).apply(this,arguments)}function A3(n){const e=Ae(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function D3(n,e,t){let r=vt(),i=vt();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ko();return t.forEach((a,c)=>{const l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(We.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||0===c.version.compareTo(l.version)&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):_e("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{hs:s,Ps:i}})}function tpe(n,e){const t=Ae(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function im(n,e){const t=Ae(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.$r.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):t.$r.allocateTargetId(r).next(s=>(i=new zc(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.$r.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ss.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ss=t.ss.insert(r.targetId,r),t.os.set(e,r.targetId)),r})}function om(n,e,t){return bP.apply(this,arguments)}function bP(){return(bP=(0,ne.A)(function*(n,e,t){const r=Ae(n),i=r.ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ru(s))throw s;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ss=r.ss.remove(e),r.os.delete(i.target)})).apply(this,arguments)}function KT(n,e,t){const r=Ae(n);let i=We.min(),o=vt();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,h){const m=Ae(c),_=m.os.get(h);return void 0!==_?G.resolve(m.ss.get(_)):m.$r.getTargetData(l,h)}(r,s,Ui(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.$r.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.rs.getDocumentsMatchingQuery(s,e,t?i:We.min(),t?o:vt())).next(a=>(R3(r,iG(e),a),{documents:a,Is:o})))}function S3(n,e){const t=Ae(n),r=Ae(t.$r),i=t.ss.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function x3(n,e){const t=Ae(n),r=t._s.get(e)||We.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.us.getAllFromCollectionGroup(i,e,_4(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(R3(t,e,i),i))}function R3(n,e,t){let r=n._s.get(e)||We.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n._s.set(e,r)}function EP(){return(EP=(0,ne.A)(function*(n,e,t,r){const i=Ae(n);let o=vt(),s=ko();for(const l of t){const h=e.Ts(l.metadata.name);l.document&&(o=o.add(h));const m=e.Es(l);m.setReadTime(e.ds(l.metadata.readTime)),s=s.insert(h,m)}const a=i.us.newChangeBuffer({trackRemovals:!0}),c=yield im(i,(h=r,Ui(qp(Ot.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>D3(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.$r.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.$r.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.hs,h.Ps)).next(()=>h.hs)))})).apply(this,arguments)}function rpe(n,e){return IP.apply(this,arguments)}function IP(){return(IP=(0,ne.A)(function*(n,e,t=vt()){const r=yield im(n,Ui(sP(e.bundledQuery))),i=Ae(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Rr(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Wr.saveNamedQuery(o,e);const a=r.withResumeToken(fr.EMPTY_BYTE_STRING,s);return i.ss=i.ss.insert(a.targetId,a),i.$r.updateTargetData(o,a).next(()=>i.$r.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.$r.addMatchingKeys(o,t,r.targetId)).next(()=>i.Wr.saveNamedQuery(o,e))})})).apply(this,arguments)}function M3(n,e){return`firestore_clients_${n}_${e}`}function P3(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function wP(n,e){return`firestore_targets_${n}_${e}`}class QT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static As(e,t,r){const i=JSON.parse(r);let o,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(o=new ge(i.error.code,i.error.message))),s?new QT(e,t,i.state,o):(xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static As(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new ge(r.error.code,r.error.message))),o?new hv(e,r.state,i):(xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class YT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static As(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=QM();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=w4(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new YT(e,o):(xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class TP{constructor(e,t){this.clientId=e,this.onlineState=t}static As(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new TP(t.clientId,t.onlineState):(xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class CP{constructor(){this.activeTargetIds=QM()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AP{constructor(e,t,r,i,o){this.window=e,this.ai=t,this.persistenceKey=r,this.gs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new xn(ht),this.started=!1,this.Ss=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.bs=M3(this.persistenceKey,this.gs),this.Ds=`firestore_sequence_number_${this.persistenceKey}`,this.ws=this.ws.insert(this.gs,new CP),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Ms=`firestore_online_state_${this.persistenceKey}`,this.xs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ne.A)(function*(){const t=yield e.syncEngine.qi();for(const i of t){if(i===e.gs)continue;const o=e.getItem(M3(e.persistenceKey,i));if(o){const s=YT.As(i,o);s&&(e.ws=e.ws.insert(s.clientId,s))}}e.Os();const r=e.storage.getItem(e.Ms);if(r){const i=e.Ns(r);i&&e.Ls(i)}for(const i of e.Ss)e.ys(i);e.Ss=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let t=!1;return this.ws.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,t,r){this.ks(e,t,r),this.qs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(wP(this.persistenceKey,e));if(r){const i=hv.As(e,r);i&&(t=i.state)}}return this.Qs.Vs(e),this.Os(),t}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Ks(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _e("SharedClientState","READ",e,t),t}setItem(e,t){_e("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_e("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){var t=this;const r=e;if(r.storageArea===this.storage){if(_e("SharedClientState","EVENT",r.key,r.newValue),r.key===this.bs)return void xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((0,ne.A)(function*(){if(t.started){if(null!==r.key)if(t.Cs.test(r.key)){if(null==r.newValue){const i=t.Ws(r.key);return t.Gs(i,null)}{const i=t.zs(r.key,r.newValue);if(i)return t.Gs(i.clientId,i)}}else if(t.vs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(t.Fs.test(r.key)){if(null!==r.newValue){const i=t.Js(r.key,r.newValue);if(i)return t.Ys(i)}}else if(r.key===t.Ms){if(null!==r.newValue){const i=t.Ns(r.newValue);if(i)return t.Ls(i)}}else if(r.key===t.Ds){const i=function(s){let a=is.oe;if(null!=s)try{const c=JSON.parse(s);qe("number"==typeof c),a=c}catch(c){xr("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(r.newValue);i!==is.oe&&t.sequenceNumberHandler(i)}else if(r.key===t.xs){const i=t.Zs(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Xs(o)))}}else t.Ss.push(r)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,t,r){const i=new QT(this.currentUser,e,t,r),o=P3(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Rs())}qs(e){const t=P3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}$s(e){this.storage.setItem(this.Ms,JSON.stringify({clientId:this.gs,onlineState:e}))}Ks(e,t,r){const i=wP(this.persistenceKey,e),o=new hv(e,t,r);this.setItem(i,o.Rs())}Us(e){const t=JSON.stringify(Array.from(e));this.setItem(this.xs,t)}Ws(e){const t=this.Cs.exec(e);return t?t[1]:null}zs(e,t){const r=this.Ws(e);return YT.As(r,t)}js(e,t){const r=this.vs.exec(e),i=Number(r[1]);return QT.As(new oi(void 0!==r[2]?r[2]:null),i,t)}Js(e,t){const r=this.Fs.exec(e),i=Number(r[1]);return hv.As(i,t)}Ns(e){return TP.As(e)}Zs(e){return JSON.parse(e)}Hs(e){var t=this;return(0,ne.A)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.eo(e.batchId,e.state,e.error);_e("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,t){const r=t?this.ws.insert(e,t):this.ws.remove(e),i=this.Bs(this.ws),o=this.Bs(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.ro(s,a).then(()=>{this.ws=r})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let t=QM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class N3{constructor(){this.io=new CP,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,r){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new CP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ipe{oo(e){}shutdown(){}}class k3{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ZT=null;function DP(){return null===ZT?ZT=268435456+Math.round(2147483648*Math.random()):ZT++,"0x"+ZT.toString(16)}const ope={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class spe{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const ji="WebChannelConnection";class ape extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.bo=r+"://"+t.host,this.Do=`projects/${i}/databases/${o}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get vo(){return!1}Fo(t,r,i,o,s){const a=DP(),c=this.Mo(t,r.toUriEncodedString());_e("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);const l={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(l,o,s),this.Oo(t,c,l,i).then(h=>(_e("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Po("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",i),h})}No(t,r,i,o,s,a){return this.Fo(t,r,i,o,s)}xo(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Lp,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}Mo(t,r){return`${this.bo}/v1/${r}:${ope[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,r,i){const o=DP();return new Promise((s,a)=>{const c=new s4;c.setWithCredentials(!0),c.listenOnce(c4.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case bT.NO_ERROR:const h=c.getResponseJson();_e(ji,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case bT.TIMEOUT:_e(ji,`RPC '${e}' ${o} timed out`),a(new ge(Z.DEADLINE_EXCEEDED,"Request time out"));break;case bT.HTTP_ERROR:const m=c.getStatus();if(_e(ji,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let _=c.getResponseJson();Array.isArray(_)&&(_=_[0]);const y=_?.error;if(y&&y.status&&y.message){const E=function(C){const P=C.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(P)>=0?P:Z.UNKNOWN}(y.status);a(new ge(E,y.message))}else a(new ge(Z.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new ge(Z.UNAVAILABLE,"Connection failed."));break;default:Le()}}finally{_e(ji,`RPC '${e}' ${o} completed.`)}});const l=JSON.stringify(i);_e(ji,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}Lo(e,t,r){const i=DP(),o=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=d4(),a=u4(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new a4({})),this.xo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const h=o.join("");_e(ji,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=s.createWebChannel(h,c);let _=!1,y=!1;const E=new spe({Po:C=>{y?_e(ji,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(_||(_e(ji,`Opening RPC '${e}' stream ${i} transport.`),m.open(),_=!0),_e(ji,`RPC '${e}' stream ${i} sending:`,C),m.send(C))},Io:()=>m.close()}),T=(C,P,R)=>{C.listen(P,U=>{try{R(U)}catch(J){setTimeout(()=>{throw J},0)}})};return T(m,Vy.EventType.OPEN,()=>{y||(_e(ji,`RPC '${e}' stream ${i} transport opened.`),E.po())}),T(m,Vy.EventType.CLOSE,()=>{y||(y=!0,_e(ji,`RPC '${e}' stream ${i} transport closed`),E.wo())}),T(m,Vy.EventType.ERROR,C=>{y||(y=!0,Po(ji,`RPC '${e}' stream ${i} transport errored:`,C),E.wo(new ge(Z.UNAVAILABLE,"The operation could not be completed")))}),T(m,Vy.EventType.MESSAGE,C=>{var P;if(!y){const R=C.data[0];qe(!!R);const J=R.error||(null===(P=R[0])||void 0===P?void 0:P.error);if(J){_e(ji,`RPC '${e}' stream ${i} received error:`,J);const ve=J.status;let Te=function(k){const B=Br[k];if(void 0!==B)return TG(B)}(ve),O=J.message;void 0===Te&&(Te=Z.INTERNAL,O="Unknown error status: "+ve+" with message "+J.message),y=!0,E.wo(new ge(Te,O)),m.close()}else _e(ji,`RPC '${e}' stream ${i} received:`,R),E.So(R)}}),T(a,l4.STAT_EVENT,C=>{C.stat===NM.PROXY?_e(ji,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===NM.NOPROXY&&_e(ji,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.yo()},0),E}}function O3(){return typeof window<"u"?window:null}function XT(){return typeof document<"u"?document:null}function fv(n){return new mfe(n,!0)}class SP{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ai=e,this.timerId=t,this.Bo=r,this.ko=i,this.qo=o,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const t=Math.floor(this.Qo+this.Go()),r=Math.max(0,Date.now()-this.$o),i=Math.max(0,t-r);i>0&&_e("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,i,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class F3{constructor(e,t,r,i,o,s,a,c){this.ai=e,this.jo=r,this.Ho=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new SP(e,t)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}stop(){var e=this;return(0,ne.A)(function*(){e.t_()&&(yield e.close(0))})()}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){var e=this;return(0,ne.A)(function*(){if(e.n_())return e.close(0)})()}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){var r=this;return(0,ne.A)(function*(){r.a_(),r.u_(),r.e_.cancel(),r.Jo++,4!==e?r.e_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(xr(t.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),r.e_.Uo()):t&&t.code===Z.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.c_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Vo(t)})()}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Jo===t&&this.h_(r,i)},r=>{e(()=>{const i=new ge(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.P_(i)})})}h_(e,t){const r=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{r(()=>this.listener.To())}),this.stream.Ao(()=>{r(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(i=>{r(()=>this.P_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.Xo?this.T_(i):this.onNext(i))})}r_(){var e=this;this.state=5,this.e_.Wo((0,ne.A)(function*(){e.state=0,e.start()}))}P_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cpe extends F3{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const t=function yfe(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(l=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Le(),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(qe(void 0===h||"string"==typeof h),fr.fromBase64String(h||"")):(qe(void 0===h||h instanceof Buffer||h instanceof Uint8Array),fr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const h=void 0===l.code?Z.UNKNOWN:TG(l.code);return new ge(h,l.message||"")}(s);t=new xG(r,i,o,a||null)}else if("documentChange"in e){const r=e.documentChange,i=qa(n,r.document.name),o=Rr(r.document.updateTime),s=r.document.createTime?Rr(r.document.createTime):We.min(),a=new yi({mapValue:{fields:r.document.fields}}),c=Bn.newFoundDocument(i,o,s,a);t=new FT(r.targetIds||[],r.removedTargetIds||[],c.key,c)}else if("documentDelete"in e){const r=e.documentDelete,i=qa(n,r.document),o=r.readTime?Rr(r.readTime):We.min(),s=Bn.newNoDocument(i,o);t=new FT([],r.removedTargetIds||[],s.key,s)}else if("documentRemove"in e){const r=e.documentRemove,i=qa(n,r.document);t=new FT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Le();{const r=e.filter,{count:i=0,unchangedNames:o}=r,s=new lfe(i,o);t=new SG(r.targetId,s)}}var l;return t}(this.serializer,e),r=function(o){if(!("targetChange"in o))return We.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?We.min():s.readTime?Rr(s.readTime):We.min()}(e);return this.listener.E_(t,r)}d_(e){const t={};t.database=iP(this.serializer),t.addTarget=function(o,s){let a;const c=s.target;if(a=xT(c)?{documents:BG(o,c)}:{query:LT(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=NG(o,s.resumeToken);const l=tP(o,s.expectedCount);null!==l&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(We.min())>0){a.readTime=Xp(o,s.snapshotVersion.toTimestamp());const l=tP(o,s.expectedCount);null!==l&&(a.expectedCount=l)}return a}(this.serializer,e);const r=function bfe(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.__(t)}A_(e){const t={};t.database=iP(this.serializer),t.removeTarget=e,this.__(t)}}class lpe extends F3{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return qe(!!e.streamToken),this.lastStreamToken=e.streamToken,qe(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const t=function vfe(n,e){return n&&n.length>0?(qe(void 0!==e),n.map(t=>function(i,o){let s=Rr(i.updateTime?i.updateTime:o);return s.isEqual(We.min())&&(s=Rr(o)),new sfe(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.f_(r,t)}g_(){const e={};e.database=iP(this.serializer),this.__(e)}V_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ov(this.serializer,r))};this.__(t)}}class upe extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.p_=!1}y_(){if(this.p_)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,r,i){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Fo(e,rP(t,r),i,o,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(Z.UNKNOWN,o.toString())})}No(e,t,r,i,o){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.No(e,rP(t,r),i,s,a,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ge(Z.UNKNOWN,s.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class dpe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(xr(t),this.b_=!1):_e("OnlineStateTracker",t)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class hpe{constructor(e,t,r,i,o){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=o,this.B_.oo(a=>{r.enqueueAndForget((0,ne.A)(function*(){var c;pu(s)&&(_e("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,ne.A)(function*(h){const m=Ae(h);m.N_.add(4),yield sm(m),m.k_.set("Unknown"),m.N_.delete(4),yield pv(m)}),function l(h){return c.apply(this,arguments)})(s))}))}),this.k_=new dpe(r,i)}}function pv(n){return xP.apply(this,arguments)}function xP(){return(xP=(0,ne.A)(function*(n){if(pu(n))for(const e of n.L_)yield e(!0)})).apply(this,arguments)}function sm(n){return RP.apply(this,arguments)}function RP(){return(RP=(0,ne.A)(function*(n){for(const e of n.L_)yield e(!1)})).apply(this,arguments)}function JT(n,e){const t=Ae(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),NP(t)?PP(t):lm(t).n_()&&MP(t,e))}function am(n,e){const t=Ae(n),r=lm(t);t.O_.delete(e),r.n_()&&L3(t,e),0===t.O_.size&&(r.n_()?r.s_():pu(t)&&t.k_.set("Unknown"))}function MP(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}lm(n).d_(e)}function L3(n,e){n.q_.xe(e),lm(n).A_(e)}function PP(n){n.q_=new dfe({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),lm(n).start(),n.k_.D_()}function NP(n){return pu(n)&&!lm(n).t_()&&n.O_.size>0}function pu(n){return 0===Ae(n).N_.size}function V3(n){n.q_=void 0}function fpe(n){return kP.apply(this,arguments)}function kP(){return(kP=(0,ne.A)(function*(n){n.k_.set("Online")})).apply(this,arguments)}function ppe(n){return OP.apply(this,arguments)}function OP(){return(OP=(0,ne.A)(function*(n){n.O_.forEach((e,t)=>{MP(n,e)})})).apply(this,arguments)}function mpe(n,e){return FP.apply(this,arguments)}function FP(){return(FP=(0,ne.A)(function*(n,e){V3(n),NP(n)?(n.k_.F_(e),PP(n)):n.k_.set("Unknown")})).apply(this,arguments)}function gpe(n,e,t){return LP.apply(this,arguments)}function LP(){return LP=(0,ne.A)(function*(n,e,t){if(n.k_.set("Online"),e instanceof xG&&2===e.state&&e.cause)try{yield(r=(0,ne.A)(function*(o,s){const a=s.cause;for(const c of s.targetIds)o.O_.has(c)&&(yield o.remoteSyncer.rejectListen(c,a),o.O_.delete(c),o.q_.removeTarget(c))}),function i(o,s){return r.apply(this,arguments)})(n,e)}catch(r){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield eC(n,r)}else if(e instanceof FT?n.q_.Ke(e):e instanceof SG?n.q_.He(e):n.q_.We(e),!t.isEqual(We.min()))try{const r=yield A3(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){const a=o.q_.rt(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.O_.get(l);h&&o.O_.set(l,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{const h=o.O_.get(c);if(!h)return;o.O_.set(c,h.withResumeToken(fr.EMPTY_BYTE_STRING,h.snapshotVersion)),L3(o,c);const m=new zc(h.target,c,l,h.sequenceNumber);MP(o,m)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){_e("RemoteStore","Failed to raise snapshot:",r),yield eC(n,r)}var r}),LP.apply(this,arguments)}function eC(n,e,t){return VP.apply(this,arguments)}function VP(){return(VP=(0,ne.A)(function*(n,e,t){if(!ru(e))throw e;n.N_.add(1),yield sm(n),n.k_.set("Offline"),t||(t=()=>A3(n.localStore)),n.asyncQueue.enqueueRetryable((0,ne.A)(function*(){_e("RemoteStore","Retrying IndexedDB access"),yield t(),n.N_.delete(1),yield pv(n)}))})).apply(this,arguments)}function U3(n,e){return e().catch(t=>eC(n,t,e))}function cm(n){return UP.apply(this,arguments)}function UP(){return(UP=(0,ne.A)(function*(n){const e=Ae(n),t=mu(e);let r=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;_pe(e);)try{const i=yield tpe(e.localStore,r);if(null===i){0===e.x_.length&&t.s_();break}r=i.batchId,ype(e,i)}catch(i){yield eC(e,i)}B3(e)&&j3(e)})).apply(this,arguments)}function _pe(n){return pu(n)&&n.x_.length<10}function ype(n,e){n.x_.push(e);const t=mu(n);t.n_()&&t.R_&&t.V_(e.mutations)}function B3(n){return pu(n)&&!mu(n).t_()&&n.x_.length>0}function j3(n){mu(n).start()}function vpe(n){return BP.apply(this,arguments)}function BP(){return(BP=(0,ne.A)(function*(n){mu(n).g_()})).apply(this,arguments)}function bpe(n){return jP.apply(this,arguments)}function jP(){return(jP=(0,ne.A)(function*(n){const e=mu(n);for(const t of n.x_)e.V_(t.mutations)})).apply(this,arguments)}function Epe(n,e,t){return HP.apply(this,arguments)}function HP(){return(HP=(0,ne.A)(function*(n,e,t){const r=n.x_.shift(),i=XM.from(r,e,t);yield U3(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield cm(n)})).apply(this,arguments)}function Ipe(n,e){return $P.apply(this,arguments)}function $P(){return $P=(0,ne.A)(function*(n,e){var t;e&&mu(n).R_&&(yield(t=(0,ne.A)(function*(i,o){if(wG(a=o.code)&&a!==Z.ABORTED){const s=i.x_.shift();mu(i).i_(),yield U3(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,o)),yield cm(i)}var a}),function r(i,o){return t.apply(this,arguments)})(n,e)),B3(n)&&j3(n)}),$P.apply(this,arguments)}function H3(n,e){return zP.apply(this,arguments)}function zP(){return(zP=(0,ne.A)(function*(n,e){const t=Ae(n);t.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const r=pu(t);t.N_.add(3),yield sm(t),r&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield pv(t)})).apply(this,arguments)}function qP(n,e){return GP.apply(this,arguments)}function GP(){return(GP=(0,ne.A)(function*(n,e){const t=Ae(n);e?(t.N_.delete(2),yield pv(t)):e||(t.N_.add(2),yield sm(t),t.k_.set("Unknown"))})).apply(this,arguments)}function lm(n){return n.Q_||(n.Q_=function(t,r,i){const o=Ae(t);return o.y_(),new cpe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{To:fpe.bind(null,n),Ao:ppe.bind(null,n),Vo:mpe.bind(null,n),E_:gpe.bind(null,n)}),n.L_.push(function(){var e=(0,ne.A)(function*(t){t?(n.Q_.i_(),NP(n)?PP(n):n.k_.set("Unknown")):(yield n.Q_.stop(),V3(n))});return function(t){return e.apply(this,arguments)}}())),n.Q_}function mu(n){return n.K_||(n.K_=function(t,r,i){const o=Ae(t);return o.y_(),new lpe(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:vpe.bind(null,n),Vo:Ipe.bind(null,n),m_:bpe.bind(null,n),f_:Epe.bind(null,n)}),n.L_.push(function(){var e=(0,ne.A)(function*(t){t?(n.K_.i_(),yield cm(n)):(yield n.K_.stop(),n.x_.length>0&&(_e("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))});return function(t){return e.apply(this,arguments)}}())),n.K_}class WP{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,a=new WP(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ge(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function um(n,e){if(xr("AsyncQueue",`${e}: ${n}`),ru(n))return new ge(Z.UNAVAILABLE,`${e}: ${n}`);throw n}class dm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Zy(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new dm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new dm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class $3{constructor(){this.U_=new xn(Se.comparator)}track(e){const t=e.doc.key,r=this.U_.get(t);r?0!==e.type&&3===r.type?this.U_=this.U_.insert(t,e):3===e.type&&1!==r.type?this.U_=this.U_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.U_=this.U_.remove(t):1===e.type&&2===r.type?this.U_=this.U_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):Le():this.U_=this.U_.insert(t,e)}W_(){const e=[];return this.U_.inorderTraversal((t,r)=>{e.push(r)}),e}}class hm{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new hm(e,t,dm.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class wpe{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class Tpe{constructor(){this.queries=z3(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(t,r){const i=Ae(t),o=i.queries;i.queries=z3(),o.forEach((s,a)=>{for(const c of a.z_)c.onError(r)})}(this,new ge(Z.ABORTED,"Firestore shutting down"))}}function z3(){return new Hc(n=>rG(n),Qy)}function KP(n,e){return QP.apply(this,arguments)}function QP(){return(QP=(0,ne.A)(function*(n,e){const t=Ae(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.j_()&&e.H_()&&(r=2):(o=new wpe,r=e.H_()?0:1);try{switch(r){case 0:o.G_=yield t.onListen(i,!0);break;case 1:o.G_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){const a=um(s,`Initialization of query '${Wp(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.z_.push(e),e.Y_(t.onlineState),o.G_&&e.Z_(o.G_)&&XP(t)})).apply(this,arguments)}function YP(n,e){return ZP.apply(this,arguments)}function ZP(){return(ZP=(0,ne.A)(function*(n,e){const t=Ae(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.z_.indexOf(e);s>=0&&(o.z_.splice(s,1),0===o.z_.length?i=e.H_()?0:1:!o.j_()&&e.H_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Cpe(n,e){const t=Ae(n);let r=!1;for(const i of e){const s=t.queries.get(i.query);if(s){for(const a of s.z_)a.Z_(i)&&(r=!0);s.G_=i}}r&&XP(t)}function Ape(n,e,t){const r=Ae(n),i=r.queries.get(e);if(i)for(const o of i.z_)o.onError(t);r.queries.delete(e)}function XP(n){n.J_.forEach(e=>{e.next()})}var JP,q3;(q3=JP||(JP={})).X_="default",q3.Cache="cache";class eN{constructor(e,t,r){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=r||{}}Z_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new hm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){return!e.fromCache||!this.H_()||(!this.options.oa||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ra(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.na&&this.na.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}sa(e){e=hm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==JP.Cache}}class Dpe{constructor(e,t){this._a=e,this.byteLength=t}aa(){return"metadata"in this._a}}class G3{constructor(e){this.serializer=e}Ts(e){return qa(this.serializer,e)}Es(e){return e.metadata.exists?UG(this.serializer,e.document,!1):Bn.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return Rr(e)}}class Spe{constructor(e,t,r){this.ua=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=W3(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++t;const r=Ot.fromString(e._a.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}la(e){const t=new Map,r=new G3(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ts(i.metadata.name);for(const s of i.metadata.queries){const a=(t.get(s)||vt()).add(o);t.set(s,a)}}return t}complete(){var e=this;return(0,ne.A)(function*(){const t=yield function npe(n,e,t,r){return EP.apply(this,arguments)}(e.localStore,new G3(e.serializer),e.documents,e.ua.id),r=e.la(e.documents);for(const i of e.queries)yield rpe(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ha:e.collectionGroups,Pa:t}})()}}function W3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class K3{constructor(e){this.key=e}}class Q3{constructor(e){this.key=e}}class Y3{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=vt(),this.mutatedKeys=vt(),this.da=oG(e),this.Aa=new dm(this.da)}get Ra(){return this.Ia}Va(e,t){const r=t?t.ma:new $3,i=t?t.Aa:this.Aa;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1;const c="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const _=i.get(h),y=Yy(this.query,m)?m:null,E=!!_&&this.mutatedKeys.has(_.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;_&&y?_.data.isEqual(y.data)?E!==T&&(r.track({type:3,doc:y}),C=!0):this.fa(_,y)||(r.track({type:2,doc:y}),C=!0,(c&&this.da(y,c)>0||l&&this.da(y,l)<0)&&(a=!0)):!_&&y?(r.track({type:0,doc:y}),C=!0):_&&!y&&(r.track({type:1,doc:_}),C=!0,(c||l)&&(a=!0)),C&&(y?(s=s.add(y),o=T?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const h="F"===this.query.limitType?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Aa:s,ma:r,ts:a,mutatedKeys:o}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const s=e.ma.W_();s.sort((h,m)=>function(y,E){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le()}};return T(y)-T(E)}(h.type,m.type)||this.da(h.doc,m.doc)),this.ga(r),i=null!=i&&i;const a=t&&!i?this.pa():[],c=0===this.Ea.size&&this.current&&!i?1:0,l=c!==this.Ta;return this.Ta=c,0!==s.length||l?{snapshot:new hm(this.query,e.Aa,o,s,e.mutatedKeys,0===c,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new $3,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=vt(),this.Aa.forEach(r=>{this.wa(r.key)&&(this.Ea=this.Ea.add(r.key))});const t=[];return e.forEach(r=>{this.Ea.has(r)||t.push(new Q3(r))}),this.Ea.forEach(r=>{e.has(r)||t.push(new K3(r))}),t}Sa(e){this.Ia=e.Is,this.Ea=vt();const t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return hm.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class xpe{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Rpe{constructor(e){this.key=e,this.Da=!1}}class Mpe{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.va=new Hc(a=>rG(a),Qy),this.Fa=new Map,this.Ma=new Set,this.xa=new xn(Se.comparator),this.Oa=new Map,this.Na=new fP,this.La={},this.Ba=new Map,this.ka=uh.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}function Ppe(n,e){return tN.apply(this,arguments)}function tN(){return(tN=(0,ne.A)(function*(n,e,t=!0){const r=tC(n);let i;const o=r.va.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ba()):i=yield Z3(r,e,t,!0),i})).apply(this,arguments)}function Npe(n,e){return nN.apply(this,arguments)}function nN(){return(nN=(0,ne.A)(function*(n,e){const t=tC(n);yield Z3(t,e,!0,!1)})).apply(this,arguments)}function Z3(n,e,t,r){return rN.apply(this,arguments)}function rN(){return(rN=(0,ne.A)(function*(n,e,t,r){const i=yield im(n.localStore,Ui(e)),o=i.targetId,s=t?n.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=yield iN(n,e,o,"current"===s,i.resumeToken)),n.isPrimaryClient&&t&&JT(n.remoteStore,i),a})).apply(this,arguments)}function iN(n,e,t,r,i){return oN.apply(this,arguments)}function oN(){return oN=(0,ne.A)(function*(n,e,t,r,i){n.Qa=(m,_,y)=>{return(E=(0,ne.A)(function*(C,P,R,U){let J=P.view.Va(R);J.ts&&(J=yield KT(C.localStore,P.query,!1).then(({documents:S})=>P.view.Va(S,J)));const ve=U&&U.targetChanges.get(P.targetId),Te=U&&null!=U.targetMismatches.get(P.targetId),O=P.view.applyChanges(J,C.isPrimaryClient,ve,Te);return gN(C,P.targetId,O.ya),O.snapshot}),function T(C,P,R,U){return E.apply(this,arguments)})(n,m,_,y);var E};const o=yield KT(n.localStore,e,!0),s=new Y3(e,o.Is),a=s.Va(o.documents),c=rv.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),l=s.applyChanges(a,n.isPrimaryClient,c);gN(n,t,l.ya);const h=new xpe(e,t,s);return n.va.set(e,h),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),l.snapshot}),oN.apply(this,arguments)}function kpe(n,e,t){return sN.apply(this,arguments)}function sN(){return(sN=(0,ne.A)(function*(n,e,t){const r=Ae(n),i=r.va.get(e),o=r.Fa.get(i.targetId);if(o.length>1)return r.Fa.set(i.targetId,o.filter(s=>!Qy(s,e))),void r.va.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield om(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&am(r.remoteStore,i.targetId),fm(r,i.targetId)}).catch(nu))):(fm(r,i.targetId),yield om(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Ope(n,e){return aN.apply(this,arguments)}function aN(){return(aN=(0,ne.A)(function*(n,e){const t=Ae(n),r=t.va.get(e),i=t.Fa.get(r.targetId);t.isPrimaryClient&&1===i.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),am(t.remoteStore,r.targetId))})).apply(this,arguments)}function cN(){return(cN=(0,ne.A)(function*(n,e,t){const r=DN(n);try{const i=yield function(s,a){const c=Ae(s),l=Yn.now(),h=a.reduce((y,E)=>y.add(E.key),vt());let m,_;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=ko(),T=vt();return c.us.getEntries(y,h).next(C=>{E=C,E.forEach((P,R)=>{R.isValidDocument()||(T=T.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,E)).next(C=>{m=C;const P=[];for(const R of a){const U=cfe(R,m.get(R.key).overlayedDocument);null!=U&&P.push(new $c(R.key,U,j4(U.value.mapValue),Zn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(C=>{_=C;const P=C.applyToLocalDocumentSet(m,T);return c.documentOverlayCache.saveOverlays(y,C.batchId,P)})}).then(()=>({batchId:_.batchId,changes:aG(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.La[s.currentUser.toKey()];l||(l=new xn(ht)),l=l.insert(a,c),s.La[s.currentUser.toKey()]=l}(r,i.batchId,t),yield qc(r,i.changes),yield cm(r.remoteStore)}catch(i){const o=um(i,"Failed to persist write");t.reject(o)}})).apply(this,arguments)}function X3(n,e){return lN.apply(this,arguments)}function lN(){return(lN=(0,ne.A)(function*(n,e){const t=Ae(n);try{const r=yield function epe(n,e){const t=Ae(n),r=e.snapshotVersion;let i=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.us.newChangeBuffer({trackRemovals:!0});i=t.ss;const a=[];e.targetChanges.forEach((h,m)=>{const _=i.get(m);if(!_)return;a.push(t.$r.removeMatchingKeys(o,h.removedDocuments,m).next(()=>t.$r.addMatchingKeys(o,h.addedDocuments,m)));let y=_.withSequenceNumber(o.currentSequenceNumber);var T,C,P;null!==e.targetMismatches.get(m)?y=y.withResumeToken(fr.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(m,y),C=y,P=h,(0===(T=_).resumeToken.approximateByteSize()||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8||P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0)&&a.push(t.$r.updateTargetData(o,y))});let c=ko(),l=vt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(D3(o,s,e.documentUpdates).next(h=>{c=h.hs,l=h.Ps})),!r.isEqual(We.min())){const h=t.$r.getLastRemoteSnapshotVersion(o).next(m=>t.$r.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.ss=i,o))}(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Oa.get(o);s&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Da=!0:i.modifiedDocuments.size>0?qe(s.Da):i.removedDocuments.size>0&&(qe(s.Da),s.Da=!1))}),yield qc(t,r,e)}catch(r){yield nu(r)}})).apply(this,arguments)}function J3(n,e,t){const r=Ae(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.va.forEach((o,s)=>{const a=s.view.Y_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const c=Ae(s);c.onlineState=a;let l=!1;c.queries.forEach((h,m)=>{for(const _ of m.z_)_.Y_(a)&&(l=!0)}),l&&XP(c)}(r.eventManager,e),i.length&&r.Ca.E_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Lpe(n,e,t){return uN.apply(this,arguments)}function uN(){return(uN=(0,ne.A)(function*(n,e,t){const r=Ae(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oa.get(e),o=i&&i.key;if(o){let s=new xn(Se.comparator);s=s.insert(o,Bn.newNoDocument(o,We.min()));const a=vt().add(o),c=new nv(We.min(),new Map,new xn(ht),s,a);yield X3(r,c),r.xa=r.xa.remove(o),r.Oa.delete(e),_N(r)}else yield om(r.localStore,e,!1).then(()=>fm(r,e,t)).catch(nu)})).apply(this,arguments)}function Vpe(n,e){return dN.apply(this,arguments)}function dN(){return(dN=(0,ne.A)(function*(n,e){const t=Ae(n),r=e.batch.batchId;try{const i=yield function Jfe(n,e){const t=Ae(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.us.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){const m=l.batch,_=m.keys();let y=G.resolve();return _.forEach(E=>{y=y.next(()=>h.getEntry(c,E)).next(T=>{const C=l.docVersions.get(E);qe(null!==C),T.version.compareTo(C)<0&&(m.applyToRemoteDocument(T,l),T.isValidDocument()&&(T.setReadTime(l.commitVersion),h.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=vt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);mN(t,r,null),pN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qc(t,i)}catch(i){yield nu(i)}})).apply(this,arguments)}function Upe(n,e,t){return hN.apply(this,arguments)}function hN(){return(hN=(0,ne.A)(function*(n,e,t){const r=Ae(n);try{const i=yield function(s,a){const c=Ae(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(m=>(qe(null!==m),h=m.keys(),c.mutationQueue.removeMutationBatch(l,m))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(r.localStore,e);mN(r,e,t),pN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qc(r,i)}catch(i){yield nu(i)}})).apply(this,arguments)}function fN(){return(fN=(0,ne.A)(function*(n,e){const t=Ae(n);pu(t.remoteStore)||_e("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const a=Ae(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ba.get(r)||[];i.push(e),t.Ba.set(r,i)}catch(r){const i=um(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function pN(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function mN(n,e,t){const r=Ae(n);let i=r.La[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.La[r.currentUser.toKey()]=i}}function fm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fa.get(e))n.va.delete(r),t&&n.Ca.Ka(r,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(r=>{n.Na.containsKey(r)||eW(n,r)})}function eW(n,e){n.Ma.delete(e.path.canonicalString());const t=n.xa.get(e);null!==t&&(am(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),_N(n))}function gN(n,e,t){for(const r of t)r instanceof K3?(n.Na.addReference(r.key,e),jpe(n,r)):r instanceof Q3?(_e("SyncEngine","Document no longer in limbo: "+r.key),n.Na.removeReference(r.key,e),n.Na.containsKey(r.key)||eW(n,r.key)):Le()}function jpe(n,e){const t=e.key,r=t.path.canonicalString();n.xa.get(t)||n.Ma.has(r)||(_e("SyncEngine","New document in limbo: "+t),n.Ma.add(r),_N(n))}function _N(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){const e=n.Ma.values().next().value;n.Ma.delete(e);const t=new Se(Ot.fromString(e)),r=n.ka.next();n.Oa.set(r,new Rpe(t)),n.xa=n.xa.insert(t,r),JT(n.remoteStore,new zc(Ui(qp(t.path)),r,"TargetPurposeLimboResolution",is.oe))}}function qc(n,e,t){return yN.apply(this,arguments)}function yN(){return yN=(0,ne.A)(function*(n,e,t){const r=Ae(n),i=[],o=[],s=[];var a;r.va.isEmpty()||(r.va.forEach((a,c)=>{s.push(r.Qa(c,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){const m=l?!l.fromCache:null===(h=t?.targetChanges.get(c.targetId))||void 0===h?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(l){i.push(l);const m=yP.Ui(c.targetId,l);o.push(m)}}))}),yield Promise.all(s),r.Ca.E_(i),yield(a=(0,ne.A)(function*(l,h){const m=Ae(l);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>G.forEach(h,y=>G.forEach(y.Ki,E=>m.persistence.referenceDelegate.addReference(_,y.targetId,E)).next(()=>G.forEach(y.$i,E=>m.persistence.referenceDelegate.removeReference(_,y.targetId,E)))))}catch(_){if(!ru(_))throw _;_e("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of h){const y=_.targetId;if(!_.fromCache){const E=m.ss.get(y),C=E.withLastLimboFreeSnapshotVersion(E.snapshotVersion);m.ss=m.ss.insert(y,C)}}}),function c(l,h){return a.apply(this,arguments)})(r.localStore,o))}),yN.apply(this,arguments)}function Hpe(n,e){return vN.apply(this,arguments)}function vN(){return(vN=(0,ne.A)(function*(n,e){const t=Ae(n);if(!t.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());const r=yield C3(t.localStore,e);t.currentUser=e,(o=t).Ba.forEach(a=>{a.forEach(c=>{c.reject(new ge(Z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ba.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qc(t,r.ls)}var o})).apply(this,arguments)}function $pe(n,e){const t=Ae(n),r=t.Oa.get(e);if(r&&r.Da)return vt().add(r.key);{let i=vt();const o=t.Fa.get(e);if(!o)return i;for(const s of o){const a=t.va.get(s);i=i.unionWith(a.view.Ra)}return i}}function zpe(n,e){return bN.apply(this,arguments)}function bN(){return(bN=(0,ne.A)(function*(n,e){const t=Ae(n),r=yield KT(t.localStore,e.query,!0),i=e.view.Sa(r);return t.isPrimaryClient&&gN(t,e.targetId,i.ya),i})).apply(this,arguments)}function qpe(n,e){return EN.apply(this,arguments)}function EN(){return(EN=(0,ne.A)(function*(n,e){const t=Ae(n);return x3(t.localStore,e).then(r=>qc(t,r))})).apply(this,arguments)}function Gpe(n,e,t,r){return IN.apply(this,arguments)}function IN(){return(IN=(0,ne.A)(function*(n,e,t,r){const i=Ae(n),o=yield function(a,c){const l=Ae(a),h=Ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",m=>h.Fn(m,c).next(_=>_?l.localDocuments.getDocuments(m,_):G.resolve(null)))}(i.localStore,e);var c;null!==o?("pending"===t?yield cm(i.remoteStore):"acknowledged"===t||"rejected"===t?(mN(i,e,r||null),pN(i,e),c=e,Ae(Ae(i.localStore).mutationQueue).xn(c)):Le(),yield qc(i,o)):_e("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function wN(){return(wN=(0,ne.A)(function*(n,e){const t=Ae(n);if(tC(t),DN(t),!0===e&&!0!==t.qa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tW(t,r.toArray());t.qa=!0,yield qP(t.remoteStore,!0);for(const o of i)JT(t.remoteStore,o)}else if(!1===e&&!1!==t.qa){const r=[];let i=Promise.resolve();t.Fa.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(fm(t,s),om(t.localStore,s,!0))),am(t.remoteStore,s)}),yield i,yield tW(t,r),function(s){const a=Ae(s);a.Oa.forEach((c,l)=>{am(a.remoteStore,l)}),a.Na.gr(),a.Oa=new Map,a.xa=new xn(Se.comparator)}(t),t.qa=!1,yield qP(t.remoteStore,!1)}})).apply(this,arguments)}function tW(n,e,t){return TN.apply(this,arguments)}function TN(){return(TN=(0,ne.A)(function*(n,e,t){const r=Ae(n),i=[],o=[];for(const s of e){let a;const c=r.Fa.get(s);if(c&&0!==c.length){a=yield im(r.localStore,Ui(c[0]));for(const l of c){const h=r.va.get(l),m=yield zpe(r,h);m.snapshot&&o.push(m.snapshot)}}else{const l=yield S3(r.localStore,s);a=yield im(r.localStore,l),yield iN(r,nW(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.E_(o),i})).apply(this,arguments)}function nW(n){return J4(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Kpe(n){return t=Ae(n).localStore,Ae(Ae(t).persistence).qi();var t}function Qpe(n,e,t,r){return CN.apply(this,arguments)}function CN(){return(CN=(0,ne.A)(function*(n,e,t,r){const i=Ae(n);if(i.qa)return void _e("SyncEngine","Ignoring unexpected query state notification.");const o=i.Fa.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const s=yield x3(i.localStore,iG(o[0])),a=nv.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,fr.EMPTY_BYTE_STRING);yield qc(i,s,a);break}case"rejected":yield om(i.localStore,e,!0),fm(i,e,r);break;default:Le()}})).apply(this,arguments)}function Ype(n,e,t){return AN.apply(this,arguments)}function AN(){return(AN=(0,ne.A)(function*(n,e,t){const r=tC(n);if(r.qa){for(const i of e){if(r.Fa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){_e("SyncEngine","Adding an already active target "+i);continue}const o=yield S3(r.localStore,i),s=yield im(r.localStore,o);yield iN(r,nW(o),s.targetId,!1,s.resumeToken),JT(r.remoteStore,s)}for(const i of t)r.Fa.has(i)&&(yield om(r.localStore,i,!1).then(()=>{am(r.remoteStore,i),fm(r,i)}).catch(nu))}})).apply(this,arguments)}function tC(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=X3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$pe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Lpe.bind(null,e),e.Ca.E_=Cpe.bind(null,e.eventManager),e.Ca.Ka=Ape.bind(null,e.eventManager),e}function DN(n){const e=Ae(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Vpe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Upe.bind(null,e),e}class pm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ne.A)(function*(){t.serializer=fv(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return T3(this.persistence,new w3,e.initialUser,this.serializer)}createPersistence(e){return new pP(qT.Yr,this.serializer)}createSharedClientState(e){return new N3}terminate(){var e=this;return(0,ne.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class SN extends pm{constructor(e,t,r){super(),this.Ua=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ne.A)(function*(){yield t().call(r,e),yield r.Ua.initialize(r,e),yield DN(r.Ua.syncEngine),yield cm(r.Ua.remoteStore),yield r.persistence.pi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return T3(this.persistence,new w3,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new p3(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new vhe(t,this.persistence);return new yhe(e.asyncQueue,r)}createPersistence(e){const t=_P(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bi.withCacheSize(this.cacheSizeBytes):Bi.DEFAULT;return new gP(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,O3(),XT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new N3}}class rW extends SN{constructor(e,t){super(e,t,!1),this.Ua=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ne.A)(function*(){yield t().call(r,e);const i=r.Ua.syncEngine;r.sharedClientState instanceof AP&&(r.sharedClientState.syncEngine={eo:Gpe.bind(null,i),no:Qpe.bind(null,i),ro:Ype.bind(null,i),qi:Kpe.bind(null,i),Xs:qpe.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.pi(function(){var o=(0,ne.A)(function*(s){yield function Wpe(n,e){return wN.apply(this,arguments)}(r.Ua.syncEngine,s),r.gcScheduler&&(s&&!r.gcScheduler.started?r.gcScheduler.start():s||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(s&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():s||r.indexBackfillerScheduler.stop())});return function(s){return o.apply(this,arguments)}}())})()}createSharedClientState(e){const t=O3();if(!AP.D(t))throw new ge(Z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_P(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new AP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mm{initialize(e,t){var r=this;return(0,ne.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>J3(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=Hpe.bind(null,r.syncEngine),yield qP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Tpe}createDatastore(e){const t=fv(e.databaseInfo.databaseId),r=new ape(e.databaseInfo);return new upe(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,o=e.asyncQueue,s=t=>J3(this.syncEngine,t,0),a=k3.D()?new k3:new ipe,new hpe(r,i,o,s,a);var r,i,o,s,a}createSyncEngine(e,t){return function(i,o,s,a,c,l,h){const m=new Mpe(i,o,s,a,c,l);return h&&(m.qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,ne.A)(function*(){var t,r,i;yield(i=(0,ne.A)(function*(s){const a=Ae(s);_e("RemoteStore","RemoteStore shutting down."),a.N_.add(5),yield sm(a),a.B_.shutdown(),a.k_.set("Unknown")}),function o(s){return i.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate(),null===(r=e.eventManager)||void 0===r||r.terminate()})()}}function iW(n,e=10240){let t=0;return{read:()=>(0,ne.A)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ne.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class nC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jpe{constructor(e,t){this.za=e,this.serializer=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then(r=>{r&&r.aa()?this.metadata.resolve(r._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?._a)}`))},r=>this.metadata.reject(r))}close(){return this.za.cancel()}getMetadata(){var e=this;return(0,ne.A)(function*(){return e.metadata.promise})()}$a(){var e=this;return(0,ne.A)(function*(){return yield e.getMetadata(),e.Ha()})()}Ha(){var e=this;return(0,ne.A)(function*(){const t=yield e.Ja();if(null===t)return null;const r=e.ja.decode(t),i=Number(r);isNaN(i)&&e.Ya(`length string (${r}) is not valid number`);const o=yield e.Za(i);return new Dpe(JSON.parse(o),t.length+i)})()}Xa(){return this.buffer.findIndex(e=>123===e)}Ja(){var e=this;return(0,ne.A)(function*(){for(;e.Xa()<0&&!(yield e.eu()););if(0===e.buffer.length)return null;const t=e.Xa();t<0&&e.Ya("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Za(e){var t=this;return(0,ne.A)(function*(){for(;t.buffer.length<e;)(yield t.eu())&&t.Ya("Reached the end of bundle when more is expected.");const r=t.ja.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){var e=this;return(0,ne.A)(function*(){const t=yield e.za.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class eme{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ne.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new ge(Z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,ne.A)(function*(s,a){const c=Ae(s),l={documents:a.map(y=>iv(c.serializer,y))},h=yield c.No("BatchGetDocuments",c.serializer.databaseId,Ot.emptyPath(),l,a.length),m=new Map;h.forEach(y=>{const E=function _fe(n,e){return"found"in e?function(r,i){qe(!!i.found);const o=qa(r,i.found.name),s=Rr(i.found.updateTime),a=i.found.createTime?Rr(i.found.createTime):We.min(),c=new yi({mapValue:{fields:i.found.fields}});return Bn.newFoundDocument(o,s,a,c)}(n,e):"missing"in e?function(r,i){qe(!!i.missing),qe(!!i.readTime);const o=qa(r,i.missing),s=Rr(i.readTime);return Bn.newNoDocument(o,s)}(n,e):Le()}(c.serializer,y);m.set(E.key.toString(),E)});const _=[];return a.forEach(y=>{const E=m.get(y.toString());qe(!!E),_.push(E)}),_}),function o(s,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ne.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=Se.fromPath(i);e.mutations.push(new YM(o,e.precondition(o)))}),yield(r=(0,ne.A)(function*(o,s){const a=Ae(o),c={writes:s.map(l=>ov(a.serializer,l))};yield a.Fo("Commit",a.serializer.databaseId,Ot.emptyPath(),c)}),function i(o,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Le();t=We.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ge(Z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(We.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(We.min()))throw new ge(Z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tme{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.tu=r.maxAttempts,this.e_=new SP(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){var e=this;this.e_.Wo((0,ne.A)(function*(){const t=new eme(e.datastore),r=e.iu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.su(o)}))}).catch(i=>{e.su(i)})}))}iu(e){try{const t=this.updateFunction(e);return!jy(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!wG(t)}return!1}}class nme{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=oi.UNAUTHENTICATED,this.clientId=m4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var s=(0,ne.A)(function*(a){_e("FirestoreClient","Received user=",a.uid),yield o.authCredentialListener(a),o.user=a});return function(a){return s.apply(this,arguments)}}()),this.appCheckCredentials.start(r,s=>(_e("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ge(Z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ne.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=um(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function rC(n,e){return xN.apply(this,arguments)}function xN(){return xN=(0,ne.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ne.A)(function*(o){r.isEqual(o)||(yield C3(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),xN.apply(this,arguments)}function RN(n,e){return MN.apply(this,arguments)}function MN(){return(MN=(0,ne.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PN(n);_e("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>H3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>H3(e.remoteStore,i)),n._onlineComponents=e})).apply(this,arguments)}function oW(n){return"FirebaseError"===n.name?n.code===Z.FAILED_PRECONDITION||n.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function PN(n){return NN.apply(this,arguments)}function NN(){return(NN=(0,ne.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rC(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!oW(t))throw t;Po("Error using user provided cache. Falling back to memory cache: "+t),yield rC(n,new pm)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),yield rC(n,new pm);return n._offlineComponents})).apply(this,arguments)}function iC(n){return kN.apply(this,arguments)}function kN(){return(kN=(0,ne.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),yield RN(n,n._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),yield RN(n,new mm))),n._onlineComponents})).apply(this,arguments)}function sW(n){return PN(n).then(e=>e.persistence)}function gm(n){return PN(n).then(e=>e.localStore)}function aW(n){return iC(n).then(e=>e.remoteStore)}function ON(n){return iC(n).then(e=>e.syncEngine)}function _m(n){return FN.apply(this,arguments)}function FN(){return(FN=(0,ne.A)(function*(n){const e=yield iC(n),t=e.eventManager;return t.onListen=Ppe.bind(null,e.syncEngine),t.onUnlisten=kpe.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Npe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Ope.bind(null,e.syncEngine),t})).apply(this,arguments)}function lW(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return function(o,s,a,c,l){const h=new nC({next:_=>{s.enqueueAndForget(()=>YP(o,m));const y=_.docs.has(a);!y&&_.fromCache?l.reject(new ge(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&_.fromCache&&c&&"server"===c.source?l.reject(new ge(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(_)},error:_=>l.reject(_)}),m=new eN(qp(a.path),h,{includeMetadataChanges:!0,oa:!0});return KP(o,m)}(yield _m(n),n.asyncQueue,e,t,r)})),r.promise}function uW(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return function(o,s,a,c,l){const h=new nC({next:_=>{s.enqueueAndForget(()=>YP(o,m)),_.fromCache&&"server"===c.source?l.reject(new ge(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(_)},error:_=>l.reject(_)}),m=new eN(a,h,{includeMetadataChanges:!0,oa:!0});return KP(o,m)}(yield _m(n),n.asyncQueue,e,t,r)})),r.promise}function dW(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const hW=new Map;function LN(n,e,t){if(!t)throw new ge(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fW(n,e,t,r){if(!0===e&&!0===r)throw new ge(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pW(n){if(!Se.isDocumentKey(n))throw new ge(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function mW(n){if(Se.isDocumentKey(n))throw new ge(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function oC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Le()}function St(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=oC(n);throw new ge(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function gW(n,e){if(e<=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _W{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new ge(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ge(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fW("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=dW(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(o){if(void 0!==o.timeoutSeconds){if(isNaN(o.timeoutSeconds))throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ge(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mv{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _W({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ge(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _W(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new she;switch(r.type){case"firstParty":return new uhe(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hW.get(t);r&&(_e("ComponentProvider","Removing Datastore"),hW.delete(t),r.terminate())}(this),Promise.resolve()}}class vi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vi(this.firestore,e,this._query)}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class Ga extends vi{constructor(e,t,r){super(e,t,qp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new Se(e))}withConverter(e){return new Ga(this.firestore,e,this._path)}}function vW(n,e,...t){if(n=(0,D.Ku)(n),LN("collection","path",e),n instanceof mv){const r=Ot.fromString(e,...t);return mW(r),new Ga(n,null,r)}{if(!(n instanceof jn||n instanceof Ga))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return mW(r),new Ga(n.firestore,null,r)}}function sC(n,e,...t){if(n=(0,D.Ku)(n),1===arguments.length&&(e=m4.newId()),LN("doc","path",e),n instanceof mv){const r=Ot.fromString(e,...t);return pW(r),new jn(n,null,new Se(r))}{if(!(n instanceof jn||n instanceof Ga))throw new ge(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ot.fromString(e,...t));return pW(r),new jn(n.firestore,n instanceof Ga?n.converter:null,new Se(r))}}function bW(n,e){return n=(0,D.Ku)(n),e=(0,D.Ku)(e),(n instanceof jn||n instanceof Ga)&&(e instanceof jn||e instanceof Ga)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function VN(n,e){return n=(0,D.Ku)(n),e=(0,D.Ku)(e),n instanceof vi&&e instanceof vi&&n.firestore===e.firestore&&Qy(n._query,e._query)&&n.converter===e.converter}class mme{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new SP(this,"async_queue_retry"),this.Tu=()=>{const t=XT();t&&_e("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};const e=XT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const t=XT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const t=new Qr;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){var e=this;return(0,ne.A)(function*(){if(0!==e.au.length){try{yield e.au[0](),e.au.shift(),e.e_.reset()}catch(t){if(!ru(t))throw t;_e("AsyncQueue","Operation failed with retryable error: "+t)}e.au.length>0&&e.e_.Wo(()=>e.Au())}})()}du(e){const t=this._u.then(()=>(this.hu=!0,e().catch(r=>{throw this.lu=r,this.hu=!1,xr("INTERNAL UNHANDLED ERROR: ",function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r)),r}).then(r=>(this.hu=!1,r))));return this._u=t,t}enqueueAfterDelay(e,t,r){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);const i=WP.createAndSchedule(this,e,t,r,o=>this.Ru(o));return this.cu.push(i),i}Eu(){this.lu&&Le()}verifyOperationInProgress(){}Vu(){var e=this;return(0,ne.A)(function*(){let t;do{t=e._u,yield t}while(t!==e._u)})()}mu(e){for(const t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.cu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const t=this.cu.indexOf(e);this.cu.splice(t,1)}}function UN(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const o of["next","error","complete"])if(o in i&&"function"==typeof i[o])return!0;return!1}(n)}class gme{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fn extends mv{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new mme,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||EW(this),this._firestoreClient.terminate()}}function Xn(n){return n._firestoreClient||EW(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function EW(n){var e,t,r;const i=n._freezeSettings(),o=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new jhe(n._databaseId,c,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dW(h.experimentalLongPollingOptions),h.useFetchStreams));var c,h;n._firestoreClient=new nme(n._authCredentials,n._appCheckCredentials,n._queue,o),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function IW(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,ne.A)(function*(){try{yield rC(n,t),yield RN(n,e),r.resolve()}catch(i){const o=i;if(!oW(o))throw o;Po("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function wW(n){if(n._initialized||n._terminated)throw new ge(Z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(fr.fromBase64String(e))}catch(t){throw new ge(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wa(fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Gc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ge(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hh{constructor(e){this._methodName=e}}class aC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ht(this._lat,e._lat)||ht(this._long,e._long)}}const Dme=/^__.*__$/;class Sme{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $c(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yp(e,this.data,t,this.fieldTransforms)}}class TW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $c(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CW(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le()}}class cC{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===o&&this.pu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new cC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.Du(e),i}Cu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.wu({path:r,bu:!1});return i.pu(),i}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return dC(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(CW(this.yu)&&Dme.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class xme{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fv(e)}Ou(e,t,r,i=!1){return new cC({yu:e,methodName:t,xu:r,path:Un.emptyPath(),bu:!1,Mu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fh(n){const e=n._freezeSettings(),t=fv(n._databaseId);return new xme(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lC(n,e,t,r,i,o={}){const s=n.Ou(o.merge||o.mergeFields?2:0,e,t,i);GN("Data must be an object, but it was:",s,r);const a=SW(r,s);let c,l;if(o.merge)c=new No(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const m of o.mergeFields){const _=yv(e,m,t);if(!s.contains(_))throw new ge(Z.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);RW(h,_)||h.push(_)}c=new No(h),l=s.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,l=s.fieldTransforms;return new Sme(new yi(a),c,l)}class _v extends hh{_toFieldTransform(e){if(2!==e.yu)throw e.Fu(1===e.yu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _v}}function AW(n,e,t){return new cC({yu:3,xu:e.settings.xu,methodName:n._methodName,bu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class BN extends hh{_toFieldTransform(e){return new Jy(e.path,new Kp)}isEqual(e){return e instanceof BN}}class jN extends hh{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=AW(this,e,!0),r=this.Nu.map(o=>ph(o,t)),i=new rh(r);return new Jy(e.path,i)}isEqual(e){return e instanceof jN&&(0,D.bD)(this.Nu,e.Nu)}}class HN extends hh{constructor(e,t){super(e),this.Nu=t}_toFieldTransform(e){const t=AW(this,e,!0),r=this.Nu.map(o=>ph(o,t)),i=new ih(r);return new Jy(e.path,i)}isEqual(e){return e instanceof HN&&(0,D.bD)(this.Nu,e.Nu)}}class $N extends hh{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Qp(e.serializer,dG(e.serializer,this.Lu));return new Jy(e.path,t)}isEqual(e){return e instanceof $N&&this.Lu===e.Lu}}function zN(n,e,t,r){const i=n.Ou(1,e,t);GN("Data must be an object, but it was:",i,r);const o=[],s=yi.empty();iu(r,(c,l)=>{const h=uC(e,c,t);l=(0,D.Ku)(l);const m=i.Cu(h);if(l instanceof _v)o.push(h);else{const _=ph(l,m);null!=_&&(o.push(h),s.set(h,_))}});const a=new No(o);return new TW(s,a,i.fieldTransforms)}function qN(n,e,t,r,i,o){const s=n.Ou(1,e,t),a=[yv(e,r,t)],c=[i];if(o.length%2!=0)throw new ge(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let _=0;_<o.length;_+=2)a.push(yv(e,o[_])),c.push(o[_+1]);const l=[],h=yi.empty();for(let _=a.length-1;_>=0;--_)if(!RW(l,a[_])){const y=a[_];let E=c[_];E=(0,D.Ku)(E);const T=s.Cu(y);if(E instanceof _v)l.push(y);else{const C=ph(E,T);null!=C&&(l.push(y),h.set(y,C))}}const m=new No(l);return new TW(h,m,s.fieldTransforms)}function DW(n,e,t,r=!1){return ph(t,n.Ou(r?4:3,e))}function ph(n,e){if(xW(n=(0,D.Ku)(n)))return GN("Unsupported field value:",e,n),SW(n,e);if(n instanceof hh)return function(r,i){if(!CW(i.yu))throw i.Fu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Fu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&4!==e.yu)throw e.Fu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let c=ph(a,i.vu(s));null==c&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if(null===(r=(0,D.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return dG(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const o=Yn.fromDate(r);return{timestampValue:Xp(i.serializer,o)}}if(r instanceof Yn){const o=new Yn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xp(i.serializer,o)}}if(r instanceof aC)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Wa)return{bytesValue:NG(i.serializer,r._byteString)};if(r instanceof jn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Fu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:nP(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Fu(`Unsupported field value: ${oC(r)}`)}(n,e)}function SW(n,e){const t={};return P4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):iu(n,(r,i)=>{const o=ph(i,e.Su(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function xW(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yn||n instanceof aC||n instanceof Wa||n instanceof jn||n instanceof hh)}function GN(n,e,t){if(!xW(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=oC(t);throw e.Fu("an object"===r?n+" a custom object":n+" "+r)}var i}function yv(n,e,t){if((e=(0,D.Ku)(e))instanceof Gc)return e._internalPath;if("string"==typeof e)return uC(n,e);throw dC("Field path arguments must be of type string or ",n,!1,void 0,t)}const Rme=new RegExp("[~\\*/\\[\\]]");function uC(n,e,t){if(e.search(Rme)>=0)throw dC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Gc(...e.split("."))._internalPath}catch{throw dC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function dC(n,e,t,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ge(Z.INVALID_ARGUMENT,a+n+c)}function RW(n,e){return n.some(t=>t.isEqual(e))}class vv{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Mme(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Mme extends vv{data(){return super.data()}}function hC(n,e){return"string"==typeof e?uC(n,e):e instanceof Gc?e._internalPath:e._delegate._internalPath}function MW(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ge(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class WN{}class bv extends WN{}function gu(n,e,...t){let r=[];e instanceof WN&&r.push(e),r=r.concat(t),function(o){const s=o.filter(c=>c instanceof ym).length,a=o.filter(c=>c instanceof Ev).length;if(s>1||s>0&&a>0)throw new ge(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Ev extends bv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Ev(e,t,r)}_apply(e){const t=this._parse(e);return OW(e._query,t),new vi(e.firestore,e.converter,KM(e._query,t))}_parse(e){const t=fh(e.firestore);return function(o,s,a,c,l,h,m){let _;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){kW(m,h);const y=[];for(const E of m)y.push(NW(c,o,E));_={arrayValue:{values:y}}}else _=NW(c,o,m)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||kW(m,h),_=DW(a,"where",m,"in"===h||"not-in"===h);return Ft.create(l,h,_)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class ym extends WN{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ym(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:dn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const c of a)OW(s,c),s=KM(s,c)}(e._query,t),new vi(e.firestore,e.converter,KM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class KN extends bv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new KN(e,t)}_apply(e){const t=function(i,o,s){if(null!==i.startAt)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wy(o,s)}(e._query,this._field,this._direction);return new vi(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new jc(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class fC extends bv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new fC(e,t,r)}_apply(e){return new vi(e.firestore,e.converter,MT(e._query,this._limit,this._limitType))}}class pC extends bv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new pC(e,t,r)}_apply(e){const t=PW(e,this.type,this._docOrFields,this._inclusive);return new vi(e.firestore,e.converter,(o=t,new jc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)));var i,o}}class mC extends bv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mC(e,t,r)}_apply(e){const t=PW(e,this.type,this._docOrFields,this._inclusive);return new vi(e.firestore,e.converter,(o=t,new jc((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)));var i,o}}function PW(n,e,t,r){if(t[0]=(0,D.Ku)(t[0]),t[0]instanceof vv)return function(o,s,a,c,l){if(!c)throw new ge(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const m of Gp(o))if(m.field.isKeyField())h.push(th(s,c.key));else{const _=c.data.field(m.field);if(TT(_))throw new ge(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===_){const y=m.field.canonicalString();throw new ge(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(_)}return new lu(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=fh(n.firestore);return function(s,a,c,l,h,m){const _=s.explicitOrderBy;if(h.length>_.length)throw new ge(Z.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let E=0;E<h.length;E++){const T=h[E];if(_[E].field.isKeyField()){if("string"!=typeof T)throw new ge(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof T}`);if(!WM(s)&&-1!==T.indexOf("/"))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${T}' contains a slash.`);const C=s.path.child(Ot.fromString(T));if(!Se.isDocumentKey(C))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const P=new Se(C);y.push(th(a,P))}else{const C=DW(c,l,T);y.push(C)}}return new lu(y,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NW(n,e,t){if("string"==typeof(t=(0,D.Ku)(t))){if(""===t)throw new ge(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WM(e)&&-1!==t.indexOf("/"))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Ot.fromString(t));if(!Se.isDocumentKey(r))throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return th(n,new Se(r))}if(t instanceof jn)return th(n,t._key);throw new ge(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oC(t)}.`)}function kW(n,e){if(!Array.isArray(n)||0===n.length)throw new ge(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OW(n,e){const t=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new ge(Z.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QN{convertValue(e,t="none"){switch(au(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Le()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return iu(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new aC(pr(e.latitude),pr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=CT(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($y(e));default:return null}}convertTimestamp(e){const t=Uc(e);return new Yn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Ot.fromString(e);qe(qG(r));const i=new ou(r.get(1),r.get(3)),o=new Se(r.popFirst(5));return i.isEqual(t)||xr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function gC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Bme extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class mh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends vv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Iv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(hC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Iv extends Wc{data(e={}){return super.data(e)}}class _u{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Iv(this._firestore,this._userDataWriter,r.key,r,new mh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Iv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||3!==a.type).map(a=>{const c=new Iv(i._firestore,i._userDataWriter,a.doc.key,a.doc,new mh(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==a.type&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),1!==a.type&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:Hme(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Hme(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le()}}function LW(n,e){return n instanceof Wc&&e instanceof Wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof _u&&e instanceof _u&&n._firestore===e._firestore&&VN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class yu extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function VW(n,e,t){n=St(n,jn);const r=St(n.firestore,fn),i=gC(n.converter,e,t);return vm(r,[lC(fh(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Zn.none())])}function UW(n,e,t,...r){n=St(n,jn);const i=St(n.firestore,fn),o=fh(i);let s;return s="string"==typeof(e=(0,D.Ku)(e))||e instanceof Gc?qN(o,"updateDoc",n._key,e,t,r):zN(o,"updateDoc",n._key,e),vm(i,[s.toMutation(n._key,Zn.exists(!0))])}function BW(n,...e){var t,r,i;n=(0,D.Ku)(n);let o={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof e[s]||UN(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(UN(e[s])){const m=e[s];e[s]=null===(t=m.next)||void 0===t?void 0:t.bind(m),e[s+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[s+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let c,l,h;if(n instanceof jn)l=St(n.firestore,fn),h=qp(n._key.path),c={next:m=>{e[s]&&e[s](YN(l,n,m))},error:e[s+1],complete:e[s+2]};else{const m=St(n,vi);l=St(m.firestore,fn),h=m._query;const _=new yu(l);c={next:y=>{e[s]&&e[s](new _u(l,_,m,y))},error:e[s+1],complete:e[s+2]},MW(n._query)}return function(_,y,E,T){const C=new nC(T),P=new eN(y,C,E);return _.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return KP(yield _m(_),P)})),()=>{C.Ga(),_.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return YP(yield _m(_),P)}))}}(Xn(l),h,a,c)}function vm(n,e){return function(r,i){const o=new Qr;return r.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return function Fpe(n,e,t){return cN.apply(this,arguments)}(yield ON(r),i,o)})),o.promise}(Xn(n),e)}function YN(n,e,t){const r=t.docs.get(e._key),i=new yu(n);return new Wc(n,i,e._key,r,new mh(t.hasPendingWrites,t.fromCache),e.converter)}const sge={maxAttempts:5};class jW{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=fh(e)}set(e,t,r){this._verifyNotCommitted();const i=vu(e,this._firestore),o=gC(i.converter,t,r),s=lC(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(s.toMutation(i._key,Zn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=vu(e,this._firestore);let s;return s="string"==typeof(t=(0,D.Ku)(t))||t instanceof Gc?qN(this._dataReader,"WriteBatch.update",o._key,t,r,i):zN(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=vu(e,this._firestore);return this._mutations=this._mutations.concat(new Zp(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function vu(n,e){if((n=(0,D.Ku)(n)).firestore!==e)throw new ge(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class age extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=fh(t)}get(t){const r=vu(t,this._firestore),i=new Bme(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||1!==o.length)return Le();const s=o[0];if(s.isFoundDocument())return new vv(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new vv(this._firestore,i,r._key,null,r.converter);throw Le()})}set(t,r,i){const o=vu(t,this._firestore),s=gC(o.converter,r,i),a=lC(this._dataReader,"Transaction.set",o._key,s,null!==o.converter,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){const s=vu(t,this._firestore);let a;return a="string"==typeof(r=(0,D.Ku)(r))||r instanceof Gc?qN(this._dataReader,"Transaction.update",s._key,r,i,o):zN(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){const r=vu(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=vu(e,this._firestore),r=new yu(this._firestore);return super.get(e).then(i=>new Wc(this._firestore,r,t._key,i._document,new mh(!1,!1),t.converter))}}function XN(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ge("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function qW(){if(typeof Uint8Array>"u")throw new ge("unimplemented","Uint8Arrays are not available in this environment.")}function GW(){if(!function Uhe(){return typeof atob<"u"}())throw new ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Lp=Ro.SDK_VERSION,(0,Ro._registerComponent)(new ia.uA("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new fn(new che(r.getProvider("auth-internal")),new dhe(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new ge(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ou(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),(0,Ro.registerVersion)(h4,"4.6.5",e),(0,Ro.registerVersion)(h4,"4.6.5","esm2017")}();class wv{constructor(e){this._delegate=e}static fromBase64String(e){return GW(),new wv(Wa.fromBase64String(e))}static fromUint8Array(e){return qW(),new wv(Wa.fromUint8Array(e))}toBase64(){return GW(),this._delegate.toBase64()}toUint8Array(){return qW(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function JN(n){return function _ge(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class yge{enableIndexedDbPersistence(e,t){return function yme(n,e){wW(n=St(n,fn));const t=Xn(n);if(t._uninitializedComponentsProvider)throw new ge(Z.FAILED_PRECONDITION,"SDK cache is already specified.");Po("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new mm;return IW(t,i,new SN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function vme(n){wW(n=St(n,fn));const e=Xn(n);if(e._uninitializedComponentsProvider)throw new ge(Z.FAILED_PRECONDITION,"SDK cache is already specified.");Po("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new mm;return IW(e,r,new rW(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function bme(n){if(n._initialized&&!n._terminated)throw new ge(Z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ne.A)(function*(){try{yield(t=(0,ne.A)(function*(i){if(!ja.D())return Promise.resolve();const o=i+"main";yield ja.delete(o)}),function r(i){return t.apply(this,arguments)})(_P(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class WW{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ou||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Po("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function yW(n,e,t,r={}){var i;const o=(n=St(n,mv))._getSettings(),s=`${e}:${t}`;if("firestore.googleapis.com"!==o.host&&o.host!==s&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if("string"==typeof r.mockUserToken)a=r.mockUserToken,c=oi.MOCK_USER;else{a=(0,D.Fy)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new ge(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new oi(l)}n._authCredentials=new ahe(new f4(a,c))}}(this._delegate,e,t,r)}enableNetwork(){return function Ime(n){return function rme(n){return n.asyncQueue.enqueue((0,ne.A)(function*(){const e=yield sW(n),t=yield aW(n);return e.setNetworkEnabled(!0),function(i){const o=Ae(i);return o.N_.delete(0),pv(o)}(t)}))}(Xn(n=St(n,fn)))}(this._delegate)}disableNetwork(){return function wme(n){return function ime(n){return n.asyncQueue.enqueue((0,ne.A)(function*(){const e=yield sW(n),t=yield aW(n);return e.setNetworkEnabled(!1),(r=(0,ne.A)(function*(o){const s=Ae(o);s.N_.add(0),yield sm(s),s.k_.set("Offline")}),function i(o){return r.apply(this,arguments)})(t);var r}))}(Xn(n=St(n,fn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fW("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Eme(n){return function(t){const r=new Qr;return t.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return function Bpe(n,e){return fN.apply(this,arguments)}(yield ON(t),r)})),r.promise}(Xn(n=St(n,fn)))}(this._delegate)}onSnapshotsInSync(e){return function Zme(n,e){return function cme(n,e){const t=new nC(e);return n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return i=yield _m(n),o=t,Ae(i).J_.add(o),void o.next();var i,o})),()=>{t.Ga(),n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return i=yield _m(n),o=t,void Ae(i).J_.delete(o);var i,o}))}}(Xn(n=St(n,fn)),UN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new bm(this,vW(this._delegate,e))}catch(t){throw oo(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ms(this,sC(this._delegate,e))}catch(t){throw oo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new so(this,function pme(n,e){if(n=St(n,mv),LN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ge(Z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vi(n,null,(r=e,new jc(Ot.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw oo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function cge(n,e,t){n=St(n,fn);const r=Object.assign(Object.assign({},sge),t);return function(o){if(o.maxAttempts<1)throw new ge(Z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const c=new Qr;return o.asyncQueue.enqueueAndForget((0,ne.A)(function*(){const l=yield function cW(n){return iC(n).then(e=>e.datastore)}(o);new tme(o.asyncQueue,l,a,s,c).nu()})),c.promise}(Xn(n),i=>e(new age(n,i)),r)}(this._delegate,t=>e(new KW(this,t)))}batch(){return Xn(this._delegate),new QW(new jW(this._delegate,e=>vm(this._delegate,e)))}loadBundle(e){return function Tme(n,e){const t=Xn(n=St(n,fn)),r=new gme;return function lme(n,e,t,r){const i=function(s,a){let c;return c="string"==typeof s?CG().encode(s):s,h=function(h,m){if(h instanceof Uint8Array)return iW(h,m);if(h instanceof ArrayBuffer)return iW(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),new Jpe(h,a);var h}(t,fv(e));n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){!function Zpe(n,e,t){const r=Ae(n);var i;(i=(0,ne.A)(function*(s,a,c){try{const l=yield a.getMetadata();if(yield function(E,T){const C=Ae(E),P=Rr(T.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",R=>C.Wr.getBundleMetadata(R,T.id)).then(R=>!!R&&R.createTime.compareTo(P)>=0)}(s.localStore,l))return yield a.close(),c._completeWith({taskState:"Success",documentsLoaded:(E=l).totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}),Promise.resolve(new Set);c._updateProgress(W3(l));const h=new Spe(l,s.localStore,a.serializer);let m=yield a.$a();for(;m;){const y=yield h.ca(m);y&&c._updateProgress(y),m=yield a.$a()}const _=yield h.complete();return yield qc(s,_.Pa,void 0),yield function(E,T){const C=Ae(E);return C.persistence.runTransaction("Save bundle","readwrite",P=>C.Wr.saveBundleMetadata(P,T))}(s.localStore,l),c._completeWith(_.progress),Promise.resolve(_.ha)}catch(l){return Po("SyncEngine",`Loading bundle failed with ${l}`),c._failWith(l),Promise.resolve(new Set)}var E}),function o(s,a,c){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ON(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Cme(n,e){return function ume(n,e){return n.asyncQueue.enqueue((0,ne.A)(function*(){return function(r,i){const o=Ae(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Wr.getNamedQuery(s,i))}(yield gm(n),e)}))}(Xn(n=St(n,fn)),e).then(t=>t?new vi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new so(this,t):null)}}class yC extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new wv(new Wa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ms.forKey(t,this.firestore,null)}}class KW{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yC(e)}get(e){const t=_h(e);return this._delegate.get(t).then(r=>new Tv(this._firestore,new Wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=_h(e);return r?(XN("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=_h(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=_h(e);return this._delegate.delete(t),this}}class QW{constructor(e){this._delegate=e}set(e,t,r){const i=_h(e);return r?(XN("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=_h(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=_h(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class gh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Iv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Cv(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=gh.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new gh(e,new yC(e),t),i.set(t,o)),o}}gh.INSTANCES=new WeakMap;class Ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ms(t,new jn(t._delegate,r,new Se(e)))}static forKey(e,t,r){return new Ms(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new bm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new bm(this.firestore,vW(this._delegate,e))}catch(t){throw oo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,D.Ku)(e))instanceof jn&&bW(this._delegate,e)}set(e,t){t=XN("DocumentReference.set",t);try{return t?VW(this._delegate,e,t):VW(this._delegate,e)}catch(r){throw oo(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?UW(this._delegate,e):UW(this._delegate,e,t,...r)}catch(i){throw oo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Qme(n){return vm(St(n.firestore,fn),[new Zp(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=YW(e),r=ZW(e,i=>new Tv(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return BW(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function zme(n){n=St(n,jn);const e=St(n.firestore,fn),t=Xn(e),r=new yu(e);return function ome(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return(r=(0,ne.A)(function*(o,s,a){try{const c=yield function(h,m){const _=Ae(h);return _.persistence.runTransaction("read document","readonly",y=>_.localDocuments.getDocument(y,m))}(o,s);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new ge(Z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){const l=um(c,`Failed to get document '${s} from cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield gm(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Wc(e,r,n._key,i,new mh(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function qme(n){n=St(n,jn);const e=St(n.firestore,fn);return lW(Xn(e),n._key,{source:"server"}).then(t=>YN(e,n,t))}(this._delegate):function $me(n){n=St(n,jn);const e=St(n.firestore,fn);return lW(Xn(e),n._key).then(t=>YN(e,n,t))}(this._delegate),t.then(r=>new Tv(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ms(this.firestore,this._delegate.withConverter(e?gh.getInstance(this.firestore,e):null))}}function oo(n,e,t){return n.message=n.message.replace(e,t),n}function YW(n){for(const e of n)if("object"==typeof e&&!JN(e))return e;return{}}function ZW(n,e){var t,r;let i;return i=JN(n[0])?n[0]:JN(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Tv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ms(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return LW(this._delegate,e._delegate)}}class Cv extends Tv{data(e){const t=this._delegate.data(e);return this._delegate._converter||function ohe(n,e){n||Le()}(void 0!==t),t}}class so{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yC(e)}where(e,t,r){try{return new so(this.firestore,gu(this._delegate,function Pme(n,e,t){const r=e,i=hC("where",n);return Ev._create(i,r,t)}(e,t,r)))}catch(i){throw oo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new so(this.firestore,gu(this._delegate,function Nme(n,e="asc"){const t=e,r=hC("orderBy",n);return KN._create(r,t)}(e,t)))}catch(r){throw oo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new so(this.firestore,gu(this._delegate,function kme(n){return gW("limit",n),fC._create("limit",n,"F")}(e)))}catch(t){throw oo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new so(this.firestore,gu(this._delegate,function Ome(n){return gW("limitToLast",n),fC._create("limitToLast",n,"L")}(e)))}catch(t){throw oo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new so(this.firestore,gu(this._delegate,function Fme(...n){return pC._create("startAt",n,!0)}(...e)))}catch(t){throw oo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new so(this.firestore,gu(this._delegate,function Lme(...n){return pC._create("startAfter",n,!1)}(...e)))}catch(t){throw oo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new so(this.firestore,gu(this._delegate,function Vme(...n){return mC._create("endBefore",n,!1)}(...e)))}catch(t){throw oo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new so(this.firestore,gu(this._delegate,function Ume(...n){return mC._create("endAt",n,!0)}(...e)))}catch(t){throw oo(t,"endAt()","Query.endAt()")}}isEqual(e){return VN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Wme(n){n=St(n,vi);const e=St(n.firestore,fn),t=Xn(e),r=new yu(e);return function sme(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,ne.A)(function*(){return(r=(0,ne.A)(function*(o,s,a){try{const c=yield KT(o,s,!0),l=new Y3(s,c.Is),h=l.Va(c.documents),m=l.applyChanges(h,!1);a.resolve(m.snapshot)}catch(c){const l=um(c,`Failed to execute query '${s} against cache`);a.reject(l)}}),function i(o,s,a){return r.apply(this,arguments)})(yield gm(n),e,t);var r})),t.promise}(t,n._query).then(i=>new _u(e,r,n,i))}(this._delegate):"server"===e?.source?function Kme(n){n=St(n,vi);const e=St(n.firestore,fn),t=Xn(e),r=new yu(e);return uW(t,n._query,{source:"server"}).then(i=>new _u(e,r,n,i))}(this._delegate):function Gme(n){n=St(n,vi);const e=St(n.firestore,fn),t=Xn(e),r=new yu(e);return MW(n._query),uW(t,n._query).then(i=>new _u(e,r,n,i))}(this._delegate),t.then(r=>new ek(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=YW(e),r=ZW(e,i=>new ek(this.firestore,new _u(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return BW(this._delegate,t,r)}withConverter(e){return new so(this.firestore,this._delegate.withConverter(e?gh.getInstance(this.firestore,e):null))}}class bge{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Cv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ek{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new so(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Cv(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bge(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Cv(this._firestore,r))})}isEqual(e){return LW(this._delegate,e._delegate)}}class bm extends so{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ms(this.firestore,e):null}doc(e){try{return new Ms(this.firestore,void 0===e?sC(this._delegate):sC(this._delegate,e))}catch(t){throw oo(t,"doc()","CollectionReference.doc()")}}add(e){return function Yme(n,e){const t=St(n.firestore,fn),r=sC(n),i=gC(n.converter,e);return vm(t,[lC(fh(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ms(this.firestore,t))}isEqual(e){return bW(this._delegate,e._delegate)}withConverter(e){return new bm(this.firestore,this._delegate.withConverter(e?gh.getInstance(this.firestore,e):null))}}function _h(n){return St(n,jn)}class tk{constructor(...e){this._delegate=new Gc(...e)}static documentId(){return new tk(Un.keyField().canonicalString())}isEqual(e){return(e=(0,D.Ku)(e))instanceof Gc&&this._delegate._internalPath.isEqual(e._internalPath)}}class yh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uge(){return new BN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new yh(e)}static delete(){const e=function lge(){return new _v("deleteField")}();return e._methodName="FieldValue.delete",new yh(e)}static arrayUnion(...e){const t=function dge(...n){return new jN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new yh(t)}static arrayRemove(...e){const t=function hge(...n){return new HN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new yh(t)}static increment(e){const t=function fge(n){return new $N("increment",n)}(e);return t._methodName="FieldValue.increment",new yh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ege={Firestore:WW,GeoPoint:aC,Timestamp:Yn,Blob:wv,Transaction:KW,WriteBatch:QW,DocumentReference:Ms,DocumentSnapshot:Tv,Query:so,QueryDocumentSnapshot:Cv,QuerySnapshot:ek,CollectionReference:bm,FieldPath:tk,FieldValue:yh,setLogLevel:function vge(n){!function ihe(n){tu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function XW(n,e){return function Tge(n,e=oT){return new tn(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function nk(n,e){return XW(n,e).pipe(Ee(t=>({payload:t,type:"query"})))}!function wge(n){(function Ige(n,e){n.INTERNAL.registerComponent(new ia.uA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Ege)))})(n,(e,t)=>new WW(e,t,new yge)),n.registerVersion("@firebase/firestore-compat","0.3.34")}(Mo.A);class JW{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=o8(r,t);return new n8(i,o,this.afs)}snapshotChanges(){return function Cge(n,e){return XW(n,e).pipe(Ly(void 0),MM(),Ee(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sr)}valueChanges(e={}){return this.snapshotChanges().pipe(Ee(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return un(this.ref.get(e)).pipe(Sr)}}function vC(n,e){return nk(n,e).pipe(Ly(void 0),MM(),Ee(t=>{const[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{const l=o.find(m=>m.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function e8(n,e,t){return vC(n,t).pipe(Fp((r,i)=>function Age(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Dge(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return rk(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rk(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rk(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),PM(),Ee(r=>r.map(i=>({type:i.type,payload:i}))))}function rk(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function t8(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class n8{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Ee(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ly(void 0),MM(),no(([r,i])=>i.length>0||!r),Ee(([,r])=>r),Sr)}auditTrail(e){return this.stateChanges(e).pipe(Fp((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=t8(e);return e8(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sr)}valueChanges(e={}){return nk(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Sr)}get(e){return un(this.query.get(e)).pipe(Sr)}add(e){return this.ref.add(e)}doc(e){return new JW(this.ref.doc(e),this.afs)}}class Sge{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vC(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(t=>t.filter(r=>e.indexOf(r.type)>-1)),no(t=>t.length>0),Sr):vC(this.query,this.afs.schedulers.outsideAngular).pipe(Sr)}auditTrail(e){return this.stateChanges(e).pipe(Fp((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=t8(e);return e8(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sr)}valueChanges(e={}){return nk(this.query,this.afs.schedulers.outsideAngular).pipe(Ee(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Sr)}get(e){return un(this.query.get(e)).pipe(Sr)}}const r8=new ae("angularfire2.enableFirestorePersistence"),i8=new ae("angularfire2.firestore.persistenceSettings"),xge=new ae("angularfire2.firestore.settings"),Rge=new ae("angularfire2.firestore.use-emulator");function o8(n,e=(t=>t)){return{query:e(n),ref:n}}let Mge=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,c,l,h,m,_,y,E,T,C,P,R){this.schedulers=c;const U=My(t,a,r),J=h;m&&_M(U,a,_,E,T,C,y,P),[this.firestore,this.persistenceEnabled$]=cT(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{const ve=a.runOutsideAngular(()=>U.firestore());if(o&&ve.settings(o),J&&ve.useEmulator(...J),i&&!Uw(s)){const Te=()=>{try{return un(ve.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(O){return typeof console<"u"&&console.warn(O),ze(!1)}};return[ve,a.runOutsideAngular(Te)]}return[ve,ze(!1)]},[o,J,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:s}=o8(i,r),a=this.schedulers.ngZone.run(()=>o);return new n8(a,s,this)}collectionGroup(t,r){const i=r||(s=>s),o=this.firestore.collectionGroup(t);return new Sge(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new JW(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(Y(xp),Y(Rp,8),Y(r8,8),Y(xge,8),Y(Yo),Y(it),Y(aT),Y(i8,8),Y(Rge,8),Y(eu,8),Y(dM,8),Y(hM,8),Y(fM,8),Y(pM,8),Y(mM,8),Y(gM,8),Y(sT,8))};static \u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Pge=(()=>{class n{constructor(){Mo.A.registerVersion("angularfire",Ap.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:r8,useValue:!0},{provide:i8,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rn({type:n});static \u0275inj=Qt({providers:[Mge]})}return n})();const s8="@firebase/database";let ik="";function ok(n){ik=n}class Oge{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,D.As)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,D.$L)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Fge{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,D.gR)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const c8=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Oge(e)}}catch{}return new Fge},vh=c8("localStorage"),sk=c8("sessionStorage"),Em=new ns.Vy("@firebase/database"),l8=function(){let n=1;return function(){return n++}}(),u8=function(n){const e=(0,D.kj)(n),t=new D.gz;t.update(e);const r=t.digest();return D.K3.encodeByteArray(r)},Av=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Av.apply(null,r):e+="object"==typeof r?(0,D.As)(r):r,e+=" "}return e};let bh=null,d8=!0;const h8=function(n,e){(0,D.vA)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Em.logLevel=ns.$b.VERBOSE,bh=Em.log.bind(Em),e&&sk.set("logging_enabled",!0)):"function"==typeof n?bh=n:(bh=null,sk.remove("logging_enabled"))},ai=function(...n){if(!0===d8&&(d8=!1,null===bh&&!0===sk.get("logging_enabled")&&h8(!0)),bh){const e=Av.apply(null,n);bh(e)}},Dv=function(n){return function(...e){ai(n,...e)}},ak=function(...n){const e="FIREBASE INTERNAL ERROR: "+Av(...n);Em.error(e)},Ka=function(...n){const e=`FIREBASE FATAL ERROR: ${Av(...n)}`;throw Em.error(e),new Error(e)},Hi=function(...n){const e="FIREBASE WARNING: "+Av(...n);Em.warn(e)},bC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},bu="[MIN_NAME]",Kc="[MAX_NAME]",Eh=function(n,e){if(n===e)return 0;if(n===bu||e===Kc)return-1;if(e===bu||n===Kc)return 1;{const t=m8(n),r=m8(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Uge=function(n,e){return n===e?0:n<e?-1:1},Sv=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,D.As)(e))},ck=function(n){if("object"!=typeof n||null===n)return(0,D.As)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,D.As)(e[r]),t+=":",t+=ck(n[e[r]]);return t+="}",t},f8=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const p8=function(n){(0,D.vA)(!bC(n),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===n?(o=0,s=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(n/Math.pow(2,-1074))));const l=[];for(c=52;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();const h=l.join("");let m="";for(c=0;c<64;c+=8){let _=parseInt(h.substr(c,8),2).toString(16);1===_.length&&(_="0"+_),m+=_}return m.toLowerCase()},$ge=new RegExp("^-?(0*)\\d{1,10}$"),m8=function(n){if($ge.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Im=function(n){try{n()}catch(e){setTimeout(()=>{throw Hi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},xv=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Wge{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Hi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Kge{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Hi(e)}}let Rv=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const b8=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,w8="websocket",T8="long_polling";class uk{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=vh.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&vh.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function C8(n,e,t){let r;if((0,D.vA)("string"==typeof e,"typeof type must == string"),(0,D.vA)("object"==typeof t,"typeof params must == object"),e===w8)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==T8)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Qge(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return ci(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class Yge{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,D.gR)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,D.A4)(this.counters_)}}const dk={},hk={};function fk(n){const e=n.toString();return dk[e]||(dk[e]=new Yge),dk[e]}class Xge{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Im(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Eu{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dv(e),this.stats_=fk(t),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),C8(t,T8,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Xge(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,D.$g)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pk((...o)=>{const[s,a,c,l,h]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&b8.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Eu.forceAllow_=!0}static forceDisallow(){Eu.forceDisallow_=!0}static isAvailable(){return!((0,D.$g)()||!Eu.forceAllow_&&(Eu.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,D.As)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,D.KA)(t),i=f8(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,D.$g)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,D.As)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class pk{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,D.$g)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=l8(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=pk.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){ai("frame writing exception"),a.stack&&ai(a.stack),ai(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ai("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,D.$g)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let IC=null;typeof MozWebSocket<"u"?IC=MozWebSocket:typeof WebSocket<"u"&&(IC=WebSocket);let wm=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dv(this.connId),this.stats_=fk(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){const a={v:"5"};return!(0,D.$g)()&&typeof location<"u"&&location.hostname&&b8.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),C8(t,w8,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,vh.set("previous_websocket_failure",!0);try{let i;if((0,D.$g)()){i={headers:{"User-Agent":`Firebase/5/${ik}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const s=process.env,a=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new IC(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==IC&&!n.forceDisallow_}static previouslyFailed(){return vh.isInMemoryStorage||!0===vh.get("previous_websocket_failure")}markConnectionHealthy(){vh.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,D.$L)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,D.vA)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,D.As)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=f8(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),P8=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Eu,wm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=wm&&wm.isAvailable();let i=r&&!wm.previouslyFailed();if(t.webSocketOnly&&(r||Hi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[wm];else{const o=this.transports_=[];for(const s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class U8{constructor(e,t,r,i,o,s,a,c,l,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dv("c:"+this.id+":"),this.transportManager_=new P8(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=xv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Sv("t",e),r=Sv("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Sv("t",e),r=Sv("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Sv("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ak("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ak("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Hi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),xv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(vh.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class B8{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class j8{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,D.vA)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,D.vA)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class wC extends j8{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,D.jZ)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new wC}getInitialEvent(e){return(0,D.vA)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class an{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Zt(){return new an("")}function xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Iu(n){return n.pieces_.length-n.pieceNum_}function vn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new an(n.pieces_,e)}function gk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Mv(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function z8(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new an(e,0)}function Jn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof an)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new an(t,0)}function Rt(n){return n.pieceNum_>=n.pieces_.length}function ao(n,e){const t=xt(n),r=xt(e);if(null===t)return e;if(t===r)return ao(vn(n),vn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function b_e(n,e){const t=Mv(n,0),r=Mv(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Eh(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function _k(n,e){if(Iu(n)!==Iu(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ps(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Iu(n)>Iu(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class E_e{constructor(e,t){this.errorPrefix_=t,this.parts_=Mv(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,D.OE)(this.parts_[r]);q8(this)}}function q8(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ih(n))}function Ih(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class yk extends j8{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new yk}getInitialEvent(e){return(0,D.vA)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Pv=1e3;let CC,wh=(()=>{class n extends B8{constructor(t,r,i,o,s,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Dv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pv,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,D.$g)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&wC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_((0,D.As)(s)),(0,D.vA)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new D.cY,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const c=a.d;"ok"===a.s?r.resolve(c):r.reject(c)}};return this.outstandingGets_.push(o),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),(0,D.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,D.vA)(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,c=>{const l=c.d,h=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),"ok"!==h&&this.removeListen_(i,o),t.onComplete&&t.onComplete(h,l))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,D.gR)(t,"w")){const i=(0,D.yw)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Hi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,D.qc)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,D.Cv)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===t&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,D.vA)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const s={p:t};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,D.As)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ak("Unrecognized action received from server: "+(0,D.As)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,D.vA)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pv,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pv,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Pv),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ne.A)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),s=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let c=!1,l=null;const h=function(){l?l.close():(c=!0,o())};t.realtime_={close:h,sendRequest:function(y){(0,D.vA)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(y)}};const _=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[y,E]=yield Promise.all([t.authTokenProvider_.getToken(_),t.appCheckTokenProvider_.getToken(_)]);c?ai("getToken() completed but was canceled"):(ai("getToken() completed. Creating connection."),t.authToken_=y&&y.accessToken,t.appCheckToken_=E&&E.token,l=new U8(s,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,T=>{Hi(T+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(y){t.log_("Failed to get token: "+y),c||(t.repoInfo_.nodeAdmin&&Hi(y),h())}}})()}interrupt(t){ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,D.Im)(this.interruptReasons_)&&(this.reconnectDelay_=Pv,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(s=>ck(s)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new an(t).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,D.$g)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+ik.replace(/\./g,"-")]=1,(0,D.jZ)()?t["framework.cordova"]=1:(0,D.lV)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=wC.getInstance().currentlyOnline();return(0,D.Im)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Mt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Mt(e,t)}}class TC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Mt(bu,e),i=new Mt(bu,t);return 0!==this.compare(r,i)}minPost(){return Mt.MIN}}class K8 extends TC{static get __EMPTY_NODE(){return CC}static set __EMPTY_NODE(e){CC=e}compare(e,t){return Eh(e.name,t.name)}isDefinedOn(e){throw(0,D.Hk)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Mt.MIN}maxPost(){return new Mt(Kc,CC)}makePost(e,t){return(0,D.vA)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Mt(e,CC)}toString(){return".key"}}const Qa=new K8;class AC{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let bk,sa=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Oo.EMPTY_NODE,this.right=s??Oo.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const s=i(t,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Oo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Oo.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Oo{constructor(e,t=Oo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Oo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,sa.BLACK,null,null))}remove(e){return new Oo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new AC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new AC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new AC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new AC(this.root_,null,this.comparator_,!0,e)}}function x_e(n,e){return Eh(n.name,e.name)}function vk(n,e){return Eh(n,e)}Oo.EMPTY_NODE=new class S_e{copy(e,t,r,i,o){return this}insert(e,t,r){return new sa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Q8=function(n){return"number"==typeof n?"number:"+p8(n):"string:"+n},Y8=function(n){if(n.isLeafNode()){const e=n.val();(0,D.vA)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,D.gR)(e,".sv"),"Priority must be a string or number.")}else(0,D.vA)(n===bk||n.isEmpty(),"priority of unexpected type.");(0,D.vA)(n===bk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Z8,X8,J8,Tm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,D.vA)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Y8(this.priorityNode_)}static set __childrenNodeConstructor(t){Z8=t}static get __childrenNodeConstructor(){return Z8}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Rt(t)?this:".priority"===xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,D.vA)(".priority"!==i||1===Iu(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(vn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Q8(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?p8(this.value_):this.value_,this.lazyHash_=u8(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,D.vA)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return(0,D.vA)(o>=0,"Unknown leaf type: "+r),(0,D.vA)(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rn=new class N_e extends TC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Eh(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Mt.MIN}maxPost(){return new Mt(Kc,new Tm("[PRIORITY-POST]",J8))}makePost(e,t){const r=X8(e);return new Mt(t,new Tm("[PRIORITY-POST]",r))}toString(){return".priority"}},k_e=Math.log(2);class O_e{constructor(e){this.count=parseInt(Math.log(e+1)/k_e,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const DC=function(n,e,t,r){n.sort(e);const i=function(c,l){const h=l-c;let m,_;if(0===h)return null;if(1===h)return m=n[c],_=t?t(m):m,new sa(_,m.node,sa.BLACK,null,null);{const y=parseInt(h/2,10)+c,E=i(c,y),T=i(y+1,l);return m=n[y],_=t?t(m):m,new sa(_,m.node,sa.BLACK,E,T)}},a=function(c){let l=null,h=null,m=n.length;const _=function(E,T){const C=m-E,P=m;m-=E;const R=i(C+1,P),U=n[C],J=t?t(U):U;y(new sa(J,U.node,T,null,R))},y=function(E){l?(l.left=E,l=E):(h=E,l=E)};for(let E=0;E<c.count;++E){const T=c.nextBitIsOne(),C=Math.pow(2,c.count-(E+1));T?_(C,sa.BLACK):(_(C,sa.BLACK),_(C,sa.RED))}return h}(new O_e(n.length));return new Oo(r||e,a)};let Ek;const Cm={};class Qc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,D.vA)(Cm&&Rn,"ChildrenNode.ts has not been loaded"),Ek=Ek||new Qc({".priority":Cm},{".priority":Rn}),Ek}get(e){const t=(0,D.yw)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Oo?t:null}hasIndex(e){return(0,D.gR)(this.indexSet_,e.toString())}addIndex(e,t){(0,D.vA)(e!==Qa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(Mt.Wrap);let a,s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?DC(r,e.getCompare()):Cm;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const h=Object.assign({},this.indexes_);return h[c]=a,new Qc(h,l)}addToIndexes(e,t){const r=(0,D.kH)(this.indexes_,(i,o)=>{const s=(0,D.yw)(this.indexSet_,o);if((0,D.vA)(s,"Missing index implementation for "+o),i===Cm){if(s.isDefinedOn(e.node)){const a=[],c=t.getIterator(Mt.Wrap);let l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),DC(a,s.getCompare())}return Cm}{const a=t.get(e.name);let c=i;return a&&(c=c.remove(new Mt(e.name,a))),c.insert(e,e.node)}});return new Qc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,D.kH)(this.indexes_,i=>{if(i===Cm)return i;{const o=t.get(e.name);return o?i.remove(new Mt(e.name,o)):i}});return new Qc(r,this.indexSet_)}}let Nv,yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Y8(this.priorityNode_),this.children_.isEmpty()&&(0,D.vA)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Nv||(Nv=new n(new Oo(vk),null,Qc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Nv}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Nv:r}}getChild(t){const r=xt(t);return null===r?this:this.getImmediateChild(r).getChild(vn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,D.vA)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Mt(t,r);let o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?Nv:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){const i=xt(t);if(null===i)return r;{(0,D.vA)(".priority"!==xt(t)||1===Iu(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(vn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Rn,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Q8(this.getPriority().val())+":"),this.forEachChild(Rn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":u8(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new Mt(t,r));return s?s.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Mt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Mt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,Mt.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,Mt.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===kv?-1:0}withIndex(t){if(t===Qa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Qa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Rn),o=r.getIterator(Rn);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(t){return t===Qa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const kv=new class F_e extends yt{constructor(){super(new Oo(vk),yt.EMPTY_NODE,Qc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return yt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Mt,{MIN:{value:new Mt(bu,yt.EMPTY_NODE)},MAX:{value:new Mt(Kc,kv)}}),K8.__EMPTY_NODE=yt.EMPTY_NODE,Tm.__childrenNodeConstructor=yt,function R_e(n){bk=n}(kv),function P_e(n){J8=n}(kv);const L_e=!0;function lr(n,e=null){if(null===n)return yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,D.vA)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Tm(n,lr(e));if(n instanceof Array||!L_e){let t=yt.EMPTY_NODE;return ci(n,(r,i)=>{if((0,D.gR)(n,r)&&"."!==r.substring(0,1)){const o=lr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(lr(e))}{const t=[];let r=!1;if(ci(n,(s,a)=>{if("."!==s.substring(0,1)){const c=lr(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Mt(s,c)))}}),0===t.length)return yt.EMPTY_NODE;const o=DC(t,x_e,s=>s.name,vk);if(r){const s=DC(t,Rn.getCompare());return new yt(o,lr(e),new Qc({".priority":s},{".priority":Rn}))}return new yt(o,lr(e),Qc.Default)}}!function M_e(n){X8=n}(lr);class Ik extends TC{constructor(e){super(),this.indexPath_=e,(0,D.vA)(!Rt(e)&&".priority"!==xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Eh(e.name,t.name):o}makePost(e,t){const r=lr(e),i=yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Mt(t,i)}maxPost(){const e=yt.EMPTY_NODE.updateChild(this.indexPath_,kv);return new Mt(Kc,e)}toString(){return Mv(this.indexPath_,0).join("/")}}const wk=new class V_e extends TC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Eh(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Mt.MIN}maxPost(){return Mt.MAX}makePost(e,t){const r=lr(e);return new Mt(t,r)}toString(){return".value"}};function e5(n){return{type:"value",snapshotNode:n}}function Am(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ov(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Fv(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Tk{constructor(e){this.index_=e}updateChild(e,t,r,i,o,s){(0,D.vA)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?e.hasChild(t)?s.trackChildChange(Ov(t,a)):(0,D.vA)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Am(t,r)):s.trackChildChange(Fv(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Rn,(i,o)=>{t.hasChild(i)||r.trackChildChange(Ov(i,o))}),t.isLeafNode()||t.forEachChild(Rn,(i,o)=>{if(e.hasChild(i)){const s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(Fv(i,o,s))}else r.trackChildChange(Am(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Lv{constructor(e){this.indexedFilter_=new Tk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Lv.getStartPost_(e),this.endPost_=Lv.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,o,s){return this.matches(new Mt(t,r))||(r=yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,s)}updateFullNode(e,t,r){t.isLeafNode()&&(t=yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(yt.EMPTY_NODE);const o=this;return t.forEachChild(Rn,(s,a)=>{o.matches(new Mt(s,a))||(i=i.updateImmediateChild(s,yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class B_e{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Lv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,o,s){return this.rangedFilter_.matches(new Mt(t,r))||(r=yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,s):this.fullLimitUpdateChild_(e,t,r,o,s)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=yt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),s++}}}else{let o;i=t.withIndex(this.index_),i=i.updatePriority(yt.EMPTY_NODE),o=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let s=0;for(;o.hasNext();){const a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let s;if(this.reverse_){const m=this.index_.getCompare();s=(_,y)=>m(y,_)}else s=this.index_.getCompare();const a=e;(0,D.vA)(a.numChildren()===this.limit_,"");const c=new Mt(t,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(a.hasChild(t)){const m=a.getImmediateChild(t);let _=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=_&&(_.name===t||a.hasChild(_.name));)_=i.getChildAfterChild(this.index_,_,this.reverse_);const y=null==_?1:s(_,c);if(h&&!r.isEmpty()&&y>=0)return o?.trackChildChange(Fv(t,r,m)),a.updateImmediateChild(t,r);{o?.trackChildChange(Ov(t,m));const T=a.updateImmediateChild(t,yt.EMPTY_NODE);return null!=_&&this.rangedFilter_.matches(_)?(o?.trackChildChange(Am(_.name,_.node)),T.updateImmediateChild(_.name,_.node)):T}}return r.isEmpty()?e:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(Ov(l.name,l.node)),o.trackChildChange(Am(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(l.name,yt.EMPTY_NODE)):e}}class SC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,D.vA)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,D.vA)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,D.vA)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,D.vA)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,D.vA)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rn}copy(){const e=new SC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ck(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ak(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function xC(n,e){const t=n.copy();return t.index_=e,t}function t5(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Rn?t="$priority":n.index_===wk?t="$value":n.index_===Qa?t="$key":((0,D.vA)(n.index_ instanceof Ik,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,D.As)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,D.As)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,D.As)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,D.As)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,D.As)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function n5(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Rn&&(e.i=n.index_.toString()),e}class RC extends B8{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Dv("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,D.vA)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const s=RC.getListenId_(e,r),a={};this.listens_[s]=a;const c=t5(e._queryParams);this.restRequest_(o+".json",c,(l,h)=>{let m=h;if(404===l&&(m=null,l=null),null===l&&this.onDataUpdate_(o,m,!1,r),(0,D.yw)(this.listens_,s)===a){let _;_=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(_,null)}})}unlisten(e,t){const r=RC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=t5(e._queryParams),r=e._path.toString(),i=new D.cY;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,D.Am)(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=(0,D.$L)(a.responseText)}catch{Hi("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&Hi("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class G_e{constructor(){this.rootNode_=yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MC(){return{value:null,children:new Map}}function Dm(n,e,t){if(Rt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=xt(e);n.children.has(r)||n.children.set(r,MC()),Dm(n.children.get(r),e=vn(e),t)}}function Dk(n,e){if(Rt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Rn,(r,i)=>{Dm(n,new an(r),i)}),Dk(n,e)}}if(n.children.size>0){const t=xt(e);return e=vn(e),n.children.has(t)&&Dk(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Sk(n,e,t){null!==n.value?t(e,n.value):function W_e(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Sk(i,new an(e.toString()+"/"+r),t)})}class K_e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ci(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Z_e{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new K_e(e);const r=1e4+2e4*Math.random();xv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;ci(e,(i,o)=>{o>0&&(0,D.gR)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),xv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ya=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ya||{});function Mk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class PC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ya.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Rt(this.path)){if(null!=this.affectedTree.value)return(0,D.vA)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new an(e));return new PC(Zt(),t,this.revert)}}return(0,D.vA)(xt(this.path)===e,"operationForChild called for unrelated child."),new PC(vn(this.path),this.affectedTree,this.revert)}}class Vv{constructor(e,t){this.source=e,this.path=t,this.type=Ya.LISTEN_COMPLETE}operationForChild(e){return Rt(this.path)?new Vv(this.source,Zt()):new Vv(this.source,vn(this.path))}}class Th{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ya.OVERWRITE}operationForChild(e){return Rt(this.path)?new Th(this.source,Zt(),this.snap.getImmediateChild(e)):new Th(this.source,vn(this.path),this.snap)}}class Sm{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ya.MERGE}operationForChild(e){if(Rt(this.path)){const t=this.children.subtree(new an(e));return t.isEmpty()?null:t.value?new Th(this.source,Zt(),t.value):new Sm(this.source,Zt(),t)}return(0,D.vA)(xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sm(this.source,vn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class wu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Rt(e))return this.isFullyInitialized()&&!this.filtered_;const t=xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class X_e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Uv(n,e,t,r,i,o){const s=r.filter(a=>a.type===t);s.sort((a,c)=>function tye(n,e,t){if(null==e.childName||null==t.childName)throw(0,D.Hk)("Should only compare child_ events.");const r=new Mt(e.childName,e.snapshotNode),i=new Mt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,c)),s.forEach(a=>{const c=function eye(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function NC(n,e){return{eventCache:n,serverCache:e}}function Bv(n,e,t,r){return NC(new wu(e,t,r),n.serverCache)}function i5(n,e,t,r){return NC(n.eventCache,new wu(e,t,r))}function kC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ch(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Pk;class Mn{constructor(e,t=(()=>(Pk||(Pk=new Oo(Uge)),Pk))()){this.value=e,this.children=t}static fromObject(e){let t=new Mn(null);return ci(e,(r,i)=>{t=t.set(new an(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Zt(),value:this.value};if(Rt(e))return null;{const r=xt(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(vn(e),t);return null!=o?{path:Jn(new an(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Rt(e))return this;{const t=xt(e),r=this.children.get(t);return null!==r?r.subtree(vn(e)):new Mn(null)}}set(e,t){if(Rt(e))return new Mn(t,this.children);{const r=xt(e),o=(this.children.get(r)||new Mn(null)).set(vn(e),t),s=this.children.insert(r,o);return new Mn(this.value,s)}}remove(e){if(Rt(e))return this.children.isEmpty()?new Mn(null):new Mn(null,this.children);{const t=xt(e),r=this.children.get(t);if(r){const i=r.remove(vn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Mn(null):new Mn(this.value,o)}return this}}get(e){if(Rt(e))return this.value;{const t=xt(e),r=this.children.get(t);return r?r.get(vn(e)):null}}setTree(e,t){if(Rt(e))return t;{const r=xt(e),o=(this.children.get(r)||new Mn(null)).setTree(vn(e),t);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Mn(this.value,s)}}fold(e){return this.fold_(Zt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Jn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Zt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Rt(e))return null;{const o=xt(e),s=this.children.get(o);return s?s.findOnPath_(vn(e),Jn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Zt(),t)}foreachOnPath_(e,t,r){if(Rt(e))return this;{this.value&&r(t,this.value);const i=xt(e),o=this.children.get(i);return o?o.foreachOnPath_(vn(e),Jn(t,i),r):new Mn(null)}}foreach(e){this.foreach_(Zt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Jn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class aa{constructor(e){this.writeTree_=e}static empty(){return new aa(new Mn(null))}}function jv(n,e,t){if(Rt(e))return new aa(new Mn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const s=ao(i,e);return o=o.updateChild(s,t),new aa(n.writeTree_.set(i,o))}{const i=new Mn(t),o=n.writeTree_.setTree(e,i);return new aa(o)}}}function Nk(n,e,t){let r=n;return ci(t,(i,o)=>{r=jv(r,Jn(e,i),o)}),r}function o5(n,e){if(Rt(e))return aa.empty();{const t=n.writeTree_.setTree(e,new Mn(null));return new aa(t)}}function kk(n,e){return null!=Ah(n,e)}function Ah(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(ao(t.path,e)):null}function s5(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Rn,(r,i)=>{e.push(new Mt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Mt(r,i.value))}),e}function Tu(n,e){if(Rt(e))return n;{const t=Ah(n,e);return new aa(null!=t?new Mn(t):n.writeTree_.subtree(e))}}function Ok(n){return n.writeTree_.isEmpty()}function xm(n,e){return a5(Zt(),n.writeTree_,e)}function a5(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,D.vA)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=a5(Jn(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Jn(n,".priority"),r)),t}}function OC(n,e){return h5(e,n)}function aye(n,e){if(n.snap)return Ps(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ps(Jn(n.path,t),e))return!0;return!1}function lye(n){return n.visible}function c5(n,e,t){let r=aa.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const s=o.path;let a;if(o.snap)Ps(t,s)?(a=ao(t,s),r=jv(r,a,o.snap)):Ps(s,t)&&(a=ao(s,t),r=jv(r,Zt(),o.snap.getChild(a)));else{if(!o.children)throw(0,D.Hk)("WriteRecord should have .snap or .children");if(Ps(t,s))a=ao(t,s),r=Nk(r,a,o.children);else if(Ps(s,t))if(a=ao(s,t),Rt(a))r=Nk(r,Zt(),o.children);else{const c=(0,D.yw)(o.children,xt(a));if(c){const l=c.getChild(vn(a));r=jv(r,Zt(),l)}}}}}return r}function l5(n,e,t,r,i){if(r||i){const o=Tu(n.visibleWrites,e);return!i&&Ok(o)?t:i||null!=t||kk(o,Zt())?xm(c5(n.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Ps(l.path,e)||Ps(e,l.path))},e),t||yt.EMPTY_NODE):null}{const o=Ah(n.visibleWrites,e);if(null!=o)return o;{const s=Tu(n.visibleWrites,e);return Ok(s)?t:null!=t||kk(s,Zt())?xm(s,t||yt.EMPTY_NODE):null}}}function FC(n,e,t,r){return l5(n.writeTree,n.treePath,e,t,r)}function Fk(n,e){return function uye(n,e,t){let r=yt.EMPTY_NODE;const i=Ah(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Rn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){const o=Tu(n.visibleWrites,e);return t.forEachChild(Rn,(s,a)=>{const c=xm(Tu(o,new an(s)),a);r=r.updateImmediateChild(s,c)}),s5(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return s5(Tu(n.visibleWrites,e)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(n.writeTree,n.treePath,e)}function u5(n,e,t,r){return function dye(n,e,t,r,i){(0,D.vA)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Jn(e,t);if(kk(n.visibleWrites,o))return null;{const s=Tu(n.visibleWrites,o);return Ok(s)?i.getChild(t):xm(s,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function LC(n,e){return function fye(n,e){return Ah(n.visibleWrites,e)}(n.writeTree,Jn(n.treePath,e))}function Lk(n,e,t){return function hye(n,e,t,r){const i=Jn(e,t),o=Ah(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?xm(Tu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function d5(n,e){return h5(Jn(n.treePath,e),n.writeTree)}function h5(n,e){return{treePath:n,writeTree:e}}class _ye{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,D.vA)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,D.vA)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,Fv(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,Ov(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,Am(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,D.Hk)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Fv(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const f5=new class yye{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Vk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new wu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ch(this.viewCache_),o=function gye(n,e,t,r,i,o){return function pye(n,e,t,r,i,o,s){let a;const c=Tu(n.visibleWrites,e),l=Ah(c,Zt());if(null!=l)a=l;else{if(null==t)return[];a=xm(c,t)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const h=[],m=s.getCompare(),_=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let y=_.getNext();for(;y&&h.length<i;)0!==m(y,r)&&h.push(y),y=_.getNext();return h}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function p5(n,e,t,r,i,o){const s=e.eventCache;if(null!=LC(r,t))return e;{let a,c;if(Rt(t))if((0,D.vA)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const l=Ch(e),m=Fk(r,l instanceof yt?l:yt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{const l=FC(r,Ch(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{const l=xt(t);if(".priority"===l){(0,D.vA)(1===Iu(t),"Can't have a priority with additional path components");const h=s.getNode();c=e.serverCache.getNode();const m=u5(r,t,h,c);a=null!=m?n.filter.updatePriority(h,m):s.getNode()}else{const h=vn(t);let m;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();const _=u5(r,t,s.getNode(),c);m=null!=_?s.getNode().getImmediateChild(l).updateChild(h,_):s.getNode().getImmediateChild(l)}else m=Lk(r,l,e.serverCache);a=null!=m?n.filter.updateChild(s.getNode(),l,m,h,i,o):s.getNode()}}return Bv(e,a,s.isFullyInitialized()||Rt(t),n.filter.filtersNodes())}}function VC(n,e,t,r,i,o,s,a){const c=e.serverCache;let l;const h=s?n.filter:n.filter.getIndexedFilter();if(Rt(t))l=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){const y=c.getNode().updateChild(t,r);l=h.updateFullNode(c.getNode(),y,null)}else{const y=xt(t);if(!c.isCompleteForPath(t)&&Iu(t)>1)return e;const E=vn(t),C=c.getNode().getImmediateChild(y).updateChild(E,r);l=".priority"===y?h.updatePriority(c.getNode(),C):h.updateChild(c.getNode(),y,C,E,f5,null)}const m=i5(e,l,c.isFullyInitialized()||Rt(t),h.filtersNodes());return p5(n,m,t,i,new Vk(i,m,o),a)}function Uk(n,e,t,r,i,o,s){const a=e.eventCache;let c,l;const h=new Vk(i,e,o);if(Rt(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Bv(e,l,!0,n.filter.filtersNodes());else{const m=xt(t);if(".priority"===m)l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Bv(e,l,a.isFullyInitialized(),a.isFiltered());else{const _=vn(t),y=a.getNode().getImmediateChild(m);let E;if(Rt(_))E=r;else{const T=h.getCompleteChild(m);E=null!=T?".priority"===gk(_)&&T.getChild(z8(_)).isEmpty()?T:T.updateChild(_,r):yt.EMPTY_NODE}c=y.equals(E)?e:Bv(e,n.filter.updateChild(a.getNode(),m,E,_,h,s),a.isFullyInitialized(),n.filter.filtersNodes())}}return c}function m5(n,e){return n.eventCache.isCompleteForChild(e)}function g5(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Bk(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l,c=e;l=Rt(t)?r:new Mn(null).setTree(t,r);const h=e.serverCache.getNode();return l.children.inorderTraversal((m,_)=>{if(h.hasChild(m)){const E=g5(0,e.serverCache.getNode().getImmediateChild(m),_);c=VC(n,c,new an(m),E,i,o,s,a)}}),l.children.inorderTraversal((m,_)=>{const y=!e.serverCache.isCompleteForChild(m)&&null===_.value;if(!h.hasChild(m)&&!y){const T=g5(0,e.serverCache.getNode().getImmediateChild(m),_);c=VC(n,c,new an(m),T,i,o,s,a)}}),c}class Dye{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Tk(r.getIndex()),o=function j_e(n){return n.loadsAllData()?new Tk(n.getIndex()):n.hasLimit()?new B_e(n):new Lv(n)}(r);this.processor_=function vye(n){return{filter:n}}(o);const s=t.serverCache,a=t.eventCache,c=i.updateFullNode(yt.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(yt.EMPTY_NODE,a.getNode(),null),h=new wu(c,s.isFullyInitialized(),i.filtersNodes()),m=new wu(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=NC(m,h),this.eventGenerator_=new X_e(this.query_)}get query(){return this.query_}}function Rye(n,e){const t=Ch(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Rt(e)&&!t.getImmediateChild(xt(e)).isEmpty())?t.getChild(e):null}function _5(n){return 0===n.eventRegistrations_.length}function y5(n,e,t){const r=[];if(t){(0,D.vA)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(t,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const s=n.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(s)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function v5(n,e,t,r){e.type===Ya.MERGE&&null!==e.source.queryId&&((0,D.vA)(Ch(n.viewCache_),"We should always have a full cache before handling merges"),(0,D.vA)(kC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function Eye(n,e,t,r,i){const o=new _ye;let s,a;if(t.type===Ya.OVERWRITE){const l=t;l.source.fromUser?s=Uk(n,e,l.path,l.snap,r,i,o):((0,D.vA)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Rt(l.path),s=VC(n,e,l.path,l.snap,r,i,a,o))}else if(t.type===Ya.MERGE){const l=t;l.source.fromUser?s=function wye(n,e,t,r,i,o,s){let a=e;return r.foreach((c,l)=>{const h=Jn(t,c);m5(e,xt(h))&&(a=Uk(n,a,h,l,i,o,s))}),r.foreach((c,l)=>{const h=Jn(t,c);m5(e,xt(h))||(a=Uk(n,a,h,l,i,o,s))}),a}(n,e,l.path,l.children,r,i,o):((0,D.vA)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Bk(n,e,l.path,l.children,r,i,a,o))}else if(t.type===Ya.ACK_USER_WRITE){const l=t;s=l.revert?function Aye(n,e,t,r,i,o){let s;if(null!=LC(r,t))return e;{const a=new Vk(r,e,i),c=e.eventCache.getNode();let l;if(Rt(t)||".priority"===xt(t)){let h;if(e.serverCache.isFullyInitialized())h=FC(r,Ch(e));else{const m=e.serverCache.getNode();(0,D.vA)(m instanceof yt,"serverChildren would be complete if leaf node"),h=Fk(r,m)}l=n.filter.updateFullNode(c,h,o)}else{const h=xt(t);let m=Lk(r,h,e.serverCache);null==m&&e.serverCache.isCompleteForChild(h)&&(m=c.getImmediateChild(h)),l=null!=m?n.filter.updateChild(c,h,m,vn(t),a,o):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(c,h,yt.EMPTY_NODE,vn(t),a,o):c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=FC(r,Ch(e)),s.isLeafNode()&&(l=n.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||null!=LC(r,Zt()),Bv(e,l,s,n.filter.filtersNodes())}}(n,e,l.path,r,i,o):function Tye(n,e,t,r,i,o,s){if(null!=LC(i,t))return e;const a=e.serverCache.isFiltered(),c=e.serverCache;if(null!=r.value){if(Rt(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return VC(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Rt(t)){let l=new Mn(null);return c.getNode().forEachChild(Qa,(h,m)=>{l=l.set(new an(h),m)}),Bk(n,e,t,l,i,o,a,s)}return e}{let l=new Mn(null);return r.foreach((h,m)=>{const _=Jn(t,h);c.isCompleteForPath(_)&&(l=l.set(h,c.getNode().getChild(_)))}),Bk(n,e,t,l,i,o,a,s)}}(n,e,l.path,l.affectedTree,r,i,o)}else{if(t.type!==Ya.LISTEN_COMPLETE)throw(0,D.Hk)("Unknown operation type: "+t.type);s=function Cye(n,e,t,r,i){const o=e.serverCache;return p5(n,i5(e,o.getNode(),o.isFullyInitialized()||Rt(t),o.isFiltered()),t,r,f5,i)}(n,e,t.path,r,o)}const c=o.getChanges();return function Iye(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=kC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(e5(kC(e)))}}(e,s,c),{viewCache:s,changes:c}}(n.processor_,i,e,t,r);return function bye(n,e){(0,D.vA)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,D.vA)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,D.vA)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,b5(n,o.changes,o.viewCache.eventCache.getNode(),null)}function b5(n,e,t,r){return function J_e(n,e,t,r){const i=[],o=[];return e.forEach(s=>{"child_changed"===s.type&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function U_e(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(s.childName,s.snapshotNode))}),Uv(n,i,"child_removed",e,r,t),Uv(n,i,"child_added",e,r,t),Uv(n,i,"child_moved",o,r,t),Uv(n,i,"child_changed",e,r,t),Uv(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let UC,jC;class E5{constructor(){this.views=new Map}}function jk(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,D.vA)(null!=o,"SyncTree gave us an op for an invalid query."),v5(o,e,t,r)}{let o=[];for(const s of n.views.values())o=o.concat(v5(s,e,t,r));return o}}function I5(n,e,t,r,i){const s=n.views.get(e._queryIdentifier);if(!s){let a=FC(t,i?r:null),c=!1;a?c=!0:r instanceof yt?(a=Fk(t,r),c=!1):(a=yt.EMPTY_NODE,c=!1);const l=NC(new wu(a,c,!1),new wu(r,i,!1));return new Dye(e,l)}return s}function w5(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cu(n,e){let t=null;for(const r of n.views.values())t=t||Rye(r,e);return t}function T5(n,e){return e._queryParams.loadsAllData()?BC(n):n.views.get(e._queryIdentifier)}function C5(n,e){return null!=T5(n,e)}function Au(n){return null!=BC(n)}function BC(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Bye=1;class A5{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=function mye(){return{visibleWrites:aa.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hk(n,e,t,r,i){return function rye(n,e,t,r,i){(0,D.vA)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=jv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Rm(n,new Th({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Du(n,e,t=!1){const r=function oye(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function sye(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,D.vA)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){const a=n.allWrites[s];a.visible&&(s>=t&&aye(a,r.path)?i=!1:Ps(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function cye(n){n.visibleWrites=c5(n.allWrites,lye,Zt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=o5(n.visibleWrites,r.path):ci(r.children,c=>{n.visibleWrites=o5(n.visibleWrites,Jn(r.path,c))}),!0))}(n.pendingWriteTree_,e)){let o=new Mn(null);return null!=r.snap?o=o.set(Zt(),!0):ci(r.children,s=>{o=o.set(new an(s),!0)}),Rm(n,new PC(r.path,o,t))}return[]}function Hv(n,e,t){return Rm(n,new Th({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function HC(n,e,t,r,i=!1){const o=e._path,s=n.syncPointTree_.get(o);let a=[];if(s&&("default"===e._queryIdentifier||C5(s,e))){const c=function Lye(n,e,t,r){const i=e._queryIdentifier,o=[];let s=[];const a=Au(n);if("default"===i)for(const[c,l]of n.views.entries())s=s.concat(y5(l,t,r)),_5(l)&&(n.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{const c=n.views.get(i);c&&(s=s.concat(y5(c,t,r)),_5(c)&&(n.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Au(n)&&o.push(new(function kye(){return(0,D.vA)(UC,"Reference.ts has not been loaded"),UC}())(e._repo,e._path)),{removed:o,events:s}}(s,e,t,r);(function Oye(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const l=c.removed;if(a=c.events,!i){const h=-1!==l.findIndex(_=>_._queryParams.loadsAllData()),m=n.syncPointTree_.findOnPath(o,(_,y)=>Au(y));if(h&&!m){const _=n.syncPointTree_.subtree(o);if(!_.isEmpty()){const y=function Wye(n){return n.fold((e,t,r)=>{if(t&&Au(t))return[BC(t)];{let i=[];return t&&(i=w5(t)),ci(r,(o,s)=>{i=i.concat(s)}),i}})}(_);for(let E=0;E<y.length;++E){const T=y[E],C=T.query,P=R5(n,T);n.listenProvider_.startListening(zv(C),$v(n,C),P.hashFn,P.onComplete)}}}!m&&l.length>0&&!r&&(h?n.listenProvider_.stopListening(zv(e),null):l.forEach(_=>{const y=n.queryToTagMap.get(zC(_));n.listenProvider_.stopListening(zv(_),y)}))}!function Kye(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=zC(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,l)}return a}function D5(n,e,t,r){const i=zk(n,r);if(null!=i){const o=qk(i),s=o.path,a=o.queryId,c=ao(s,e);return Gk(n,s,new Th(Mk(a),c,t))}return[]}function $k(n,e,t,r=!1){const i=e._path;let o=null,s=!1;n.syncPointTree_.foreachOnPath(i,(_,y)=>{const E=ao(_,i);o=o||Cu(y,E),s=s||Au(y)});let c,a=n.syncPointTree_.get(i);a?(s=s||Au(a),o=o||Cu(a,Zt())):(a=new E5,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=o?c=!0:(c=!1,o=yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((y,E)=>{const T=Cu(E,Zt());T&&(o=o.updateImmediateChild(y,T))}));const l=C5(a,e);if(!l&&!e._queryParams.loadsAllData()){const _=zC(e);(0,D.vA)(!n.queryToTagMap.has(_),"View does not exist, but we have a tag");const y=function Qye(){return Bye++}();n.queryToTagMap.set(_,y),n.tagToQueryMap.set(y,_)}let m=function Fye(n,e,t,r,i,o){const s=I5(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,s),function Mye(n,e){n.eventRegistrations_.push(e)}(s,t),function Pye(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Rn,(o,s)=>{r.push(Am(o,s))}),t.isFullyInitialized()&&r.push(e5(t.getNode())),b5(n,r,t.getNode(),e)}(s,t)}(a,e,t,OC(n.pendingWriteTree_,i),o,c);if(!l&&!s&&!r){const _=T5(a,e);m=m.concat(function Yye(n,e,t){const r=e._path,i=$v(n,e),o=R5(n,t),s=n.listenProvider_.startListening(zv(e),i,o.hashFn,o.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,D.vA)(!Au(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,h,m)=>{if(!Rt(l)&&h&&Au(h))return[BC(h).query];{let _=[];return h&&(_=_.concat(w5(h).map(y=>y.query))),ci(m,(y,E)=>{_=_.concat(E)}),_}});for(let l=0;l<c.length;++l){const h=c[l];n.listenProvider_.stopListening(zv(h),$v(n,h))}}return s}(n,e,_))}return m}function $C(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{const l=Cu(a,ao(s,e));if(l)return l});return l5(i,e,o,t,!0)}function Rm(n,e){return S5(e,n.syncPointTree_,null,OC(n.pendingWriteTree_,Zt()))}function S5(n,e,t,r){if(Rt(n.path))return x5(n,e,t,r);{const i=e.get(Zt());null==t&&null!=i&&(t=Cu(i,Zt()));let o=[];const s=xt(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){const l=t?t.getImmediateChild(s):null,h=d5(r,s);o=o.concat(S5(a,c,l,h))}return i&&(o=o.concat(jk(i,n,r,t))),o}}function x5(n,e,t,r){const i=e.get(Zt());null==t&&null!=i&&(t=Cu(i,Zt()));let o=[];return e.children.inorderTraversal((s,a)=>{const c=t?t.getImmediateChild(s):null,l=d5(r,s),h=n.operationForChild(s);h&&(o=o.concat(x5(h,a,c,l)))}),i&&(o=o.concat(jk(i,n,r,t))),o}function R5(n,e){const t=e.query,r=$v(n,t);return{hashFn:()=>(function Sye(n){return n.viewCache_.serverCache.getNode()}(e)||yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function zye(n,e,t){const r=zk(n,t);if(r){const i=qk(r),o=i.path,s=i.queryId,a=ao(o,e);return Gk(n,o,new Vv(Mk(s),a))}return[]}(n,t._path,r):function $ye(n,e){return Rm(n,new Vv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function Hge(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return HC(n,t,null,o)}}}}function $v(n,e){const t=zC(e);return n.queryToTagMap.get(t)}function zC(n){return n._path.toString()+"$"+n._queryIdentifier}function zk(n,e){return n.tagToQueryMap.get(e)}function qk(n){const e=n.indexOf("$");return(0,D.vA)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new an(n.substr(0,e))}}function Gk(n,e,t){const r=n.syncPointTree_.get(e);return(0,D.vA)(r,"Missing sync point for query tag that we're tracking"),jk(r,t,OC(n.pendingWriteTree_,e),null)}function zv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Uye(){return(0,D.vA)(jC,"Reference.ts has not been loaded"),jC}())(n._repo,n._path):n}class Wk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Wk(t)}node(){return this.node_}}class Kk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Jn(this.path_,e);return new Kk(this.syncTree_,t)}node(){return $C(this.syncTree_,this.path_)}}const Zye=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},M5=function(n,e,t){return n&&"object"==typeof n?((0,D.vA)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Xye(n[".sv"],e,t):"object"==typeof n[".sv"]?Jye(n[".sv"],e):void(0,D.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Xye=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,D.vA)(!1,"Unexpected server value: "+n)},Jye=function(n,e,t){n.hasOwnProperty("increment")||(0,D.vA)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,D.vA)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,D.vA)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},P5=function(n,e,t,r){return Yk(e,new Kk(t,n),r)},Qk=function(n,e,t){return Yk(n,new Wk(e),t)};function Yk(n,e,t){const r=n.getPriority().val(),i=M5(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const s=n,a=M5(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Tm(a,lr(i)):n}{const s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Tm(i))),s.forEachChild(Rn,(a,c)=>{const l=Yk(c,e.getImmediateChild(a),t);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}class Zk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function qC(n,e){let t=e instanceof an?e:new an(e),r=n,i=xt(t);for(;null!==i;){const o=(0,D.yw)(r.node.children,i)||{children:{},childCount:0};r=new Zk(i,r,o),t=vn(t),i=xt(t)}return r}function Dh(n){return n.node.value}function Xk(n,e){n.node.value=e,Jk(n)}function N5(n){return n.node.childCount>0}function GC(n,e){ci(n.node.children,(t,r)=>{e(new Zk(t,n,r))})}function k5(n,e,t,r){t&&!r&&e(n),GC(n,i=>{k5(i,e,!0,r)}),t&&r&&e(n)}function qv(n){return new an(null===n.parent?n.name:qv(n.parent)+"/"+n.name)}function Jk(n){null!==n.parent&&function nve(n,e,t){const r=function eve(n){return void 0===Dh(n)&&!N5(n)}(t),i=(0,D.gR)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Jk(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Jk(n))}(n.parent,n.name,n)}const rve=/[\[\].#$\/\u0000-\u001F\u007F]/,ive=/[\[\].#$\u0000-\u001F\u007F]/,eO=10485760,WC=function(n){return"string"==typeof n&&0!==n.length&&!rve.test(n)},O5=function(n){return"string"==typeof n&&0!==n.length&&!ive.test(n)},Gv=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!bC(n)||n&&"object"==typeof n&&(0,D.gR)(n,".sv")},Za=function(n,e,t,r){r&&void 0===e||Wv((0,D.dI)(n,"value"),e,t)},Wv=function(n,e,t){const r=t instanceof an?new E_e(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ih(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ih(r)+" with contents = "+e.toString());if(bC(e))throw new Error(n+"contains "+e.toString()+" "+Ih(r));if("string"==typeof e&&e.length>eO/3&&(0,D.OE)(e)>eO)throw new Error(n+"contains a string greater than "+eO+" utf8 bytes "+Ih(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(ci(e,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!WC(s)))throw new Error(n+" contains an invalid key ("+s+") "+Ih(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function I_e(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,D.OE)(e),q8(n)})(r,s),Wv(n,a,r),function w_e(n){const e=n.parts_.pop();n.byteLength_-=(0,D.OE)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Ih(r)+" in addition to actual children.")}},F5=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,D.dI)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];ci(e,(s,a)=>{const c=new an(s);if(Wv(i,a,Jn(t,c)),".priority"===gk(c)&&!Gv(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=Mv(r);for(let s=0;s<o.length;s++)if((".priority"!==o[s]||s!==o.length-1)&&!WC(o[s]))throw new Error(n+"contains an invalid key ("+o[s]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(b_e);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ps(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},tO=function(n,e,t){if(!t||void 0!==e){if(bC(e))throw new Error((0,D.dI)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gv(e))throw new Error((0,D.dI)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Kv=function(n,e,t,r){if(!(r&&void 0===t||WC(t)))throw new Error((0,D.dI)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Qv=function(n,e,t,r){if(!(r&&void 0===t||O5(t)))throw new Error((0,D.dI)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ave=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Qv(n,e,t,r)},Ns=function(n,e){if(".info"===xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},L5=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!WC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),O5(n)}(t))throw new Error((0,D.dI)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class cve{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function KC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!_k(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function V5(n,e,t){KC(n,t),U5(n,r=>_k(r,e))}function os(n,e,t){KC(n,t),U5(n,r=>Ps(r,e)||Ps(e,r))}function U5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(lve(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function lve(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();bh&&ai("event: "+t.toString()),Im(r)}}}const B5="repo_interrupt",uve=25;class dve{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cve,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MC(),this.transactionQueueTree_=new Zk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function j5(n){const t=n.infoData_.getNode(new an(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Yv(n){return Zye({timestamp:j5(n)})}function H5(n,e,t,r,i){n.dataUpdateCount++;const o=new an(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){const c=(0,D.kH)(t,l=>lr(l));s=function qye(n,e,t,r){const i=zk(n,r);if(i){const o=qk(i),s=o.path,a=o.queryId,c=ao(s,e),l=Mn.fromObject(t);return Gk(n,s,new Sm(Mk(a),c,l))}return[]}(n.serverSyncTree_,o,c,i)}else{const c=lr(t);s=D5(n.serverSyncTree_,o,c,i)}else if(r){const c=(0,D.kH)(t,l=>lr(l));s=function Hye(n,e,t){const r=Mn.fromObject(t);return Rm(n,new Sm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,c)}else{const c=lr(t);s=Hv(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Pm(n,o)),os(n.eventQueue_,a,s)}function $5(n,e){nO(n,"connected",e),!1===e&&function gve(n){Mm(n,"onDisconnectEvents");const e=Yv(n),t=MC();Sk(n.onDisconnect_,Zt(),(i,o)=>{const s=P5(i,o,n.serverSyncTree_,e);Dm(t,i,s)});let r=[];Sk(t,Zt(),(i,o)=>{r=r.concat(Hv(n.serverSyncTree_,i,o));const s=sO(n,i);Pm(n,s)}),n.onDisconnect_=MC(),os(n.eventQueue_,Zt(),r)}(n)}function nO(n,e,t){const r=new an("/.info/"+e),i=lr(t);n.infoData_.updateSnapshot(r,i);const o=Hv(n.infoSyncTree_,r,i);os(n.eventQueue_,r,o)}function QC(n){return n.nextWriteId_++}function rO(n,e,t,r,i){Mm(n,"set",{path:e.toString(),value:t,priority:r});const o=Yv(n),s=lr(t,r),a=$C(n.serverSyncTree_,e),c=Qk(s,a,o),l=QC(n),h=Hk(n.serverSyncTree_,e,c,l,!0);KC(n.eventQueue_,h),n.server_.put(e.toString(),s.val(!0),(_,y)=>{const E="ok"===_;E||Hi("set at "+e+" failed: "+_);const T=Du(n.serverSyncTree_,l,!E);os(n.eventQueue_,e,T),Su(0,i,_,y)});const m=sO(n,e);Pm(n,m),os(n.eventQueue_,m,[])}function _ve(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Dk(n.onDisconnect_,e),Su(0,t,r,i)})}function z5(n,e,t,r){const i=lr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{"ok"===o&&Dm(n.onDisconnect_,e,i),Su(0,r,o,s)})}function iO(n,e,t){let r;r=".info"===xt(e._path)?HC(n.infoSyncTree_,e,t):HC(n.serverSyncTree_,e,t),V5(n.eventQueue_,e._path,r)}function q5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(B5)}function Mm(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ai(t,...e)}function Su(n,e,t,r){e&&Im(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,e(s)}})}function oO(n,e,t){return $C(n.serverSyncTree_,e,t)||yt.EMPTY_NODE}function YC(n,e=n.transactionQueueTree_){if(e||ZC(n,e),Dh(e)){const t=W5(n,e);(0,D.vA)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function wve(n,e,t){const r=t.map(l=>l.currentWriteId),i=oO(n,e,r);let o=i;const s=i.hash();for(let l=0;l<t.length;l++){const h=t[l];(0,D.vA)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const m=ao(e,h.path);o=o.updateChild(m,h.currentOutputSnapshotRaw)}const a=o.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Mm(n,"transaction put response",{path:c.toString(),status:l});let h=[];if("ok"===l){const m=[];for(let _=0;_<t.length;_++)t[_].status=2,h=h.concat(Du(n.serverSyncTree_,t[_].currentWriteId)),t[_].onComplete&&m.push(()=>t[_].onComplete(null,!0,t[_].currentOutputSnapshotResolved)),t[_].unwatcher();ZC(n,qC(n.transactionQueueTree_,e)),YC(n,n.transactionQueueTree_),os(n.eventQueue_,e,h);for(let _=0;_<m.length;_++)Im(m[_])}else{if("datastale"===l)for(let m=0;m<t.length;m++)t[m].status=3===t[m].status?4:0;else{Hi("transaction at "+c.toString()+" failed: "+l);for(let m=0;m<t.length;m++)t[m].status=4,t[m].abortReason=l}Pm(n,e)}},s)}(n,qv(e),t)}else N5(e)&&GC(e,t=>{YC(n,t)})}function Pm(n,e){const t=G5(n,e),r=qv(t);return function Tve(n,e,t){if(0===e.length)return;const r=[];let i=[];const s=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const c=e[a],l=ao(t,c.path);let m,h=!1;if((0,D.vA)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,m=c.abortReason,i=i.concat(Du(n.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=uve)h=!0,m="maxretry",i=i.concat(Du(n.serverSyncTree_,c.currentWriteId,!0));else{const _=oO(n,c.path,s);c.currentInputSnapshot=_;const y=e[a].update(_.val());if(void 0!==y){Wv("transaction failed: Data returned ",y,c.path);let E=lr(y);"object"==typeof y&&null!=y&&(0,D.gR)(y,".priority")||(E=E.updatePriority(_.getPriority()));const C=c.currentWriteId,P=Yv(n),R=Qk(E,_,P);c.currentOutputSnapshotRaw=E,c.currentOutputSnapshotResolved=R,c.currentWriteId=QC(n),s.splice(s.indexOf(C),1),i=i.concat(Hk(n.serverSyncTree_,c.path,R,c.currentWriteId,c.applyLocally)),i=i.concat(Du(n.serverSyncTree_,C,!0))}else h=!0,m="nodata",i=i.concat(Du(n.serverSyncTree_,c.currentWriteId,!0))}os(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===m?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(m),!1,null)))}ZC(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Im(r[a]);YC(n,n.transactionQueueTree_)}(n,W5(n,t),r),r}function G5(n,e){let t,r=n.transactionQueueTree_;for(t=xt(e);null!==t&&void 0===Dh(r);)r=qC(r,t),t=xt(e=vn(e));return r}function W5(n,e){const t=[];return K5(n,e,t),t.sort((r,i)=>r.order-i.order),t}function K5(n,e,t){const r=Dh(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);GC(e,i=>{K5(n,i,t)})}function ZC(n,e){const t=Dh(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Xk(e,t.length>0?t:void 0)}GC(e,r=>{ZC(n,r)})}function sO(n,e){const t=qv(G5(n,e)),r=qC(n.transactionQueueTree_,e);return function tve(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{aO(n,i)}),aO(n,r),k5(r,i=>{aO(n,i)}),t}function aO(n,e){const t=Dh(e);if(t){const r=[];let i=[],o=-1;for(let s=0;s<t.length;s++)3===t[s].status||(1===t[s].status?((0,D.vA)(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):((0,D.vA)(0===t[s].status,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Du(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Xk(e,void 0):t.length=o+1,os(n.eventQueue_,qv(e),i);for(let s=0;s<r.length;s++)Im(r[s])}}const cO=function(n,e){const t=Dve(n),r=t.namespace;return"firebase.com"===t.domain&&Ka(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ka("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Hi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new uk(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new an(t.pathString)}},Dve=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof n){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let h=n.indexOf("/");-1===h&&(h=n.length);let m=n.indexOf("?");-1===m&&(m=n.length),e=n.substring(0,Math.min(h,m)),h<m&&(i=function Cve(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(h,m)));const _=function Ave(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Hi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,m)));l=e.indexOf(":"),l>=0?(s="https"===a||"wss"===a,c=parseInt(e.substring(l+1),10)):l=e.length;const y=e.slice(0,l);if("localhost"===y.toLowerCase())t="localhost";else if(y.split(".").length<=2)t=y;else{const E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),t=e.substring(E+1),o=r}"ns"in _&&(o=_.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Q5="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sve=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Q5.charAt(t%64),t=Math.floor(t/64);(0,D.vA)(0===t,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=Q5.charAt(e[i]);return(0,D.vA)(20===s.length,"nextPushId: Length should be 20."),s}}();class Y5{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,D.As)(this.snapshot.exportVal())}}class Z5{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class lO{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,D.vA)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class X5{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new D.cY;return _ve(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ns("OnDisconnect.remove",this._path);const e=new D.cY;return z5(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ns("OnDisconnect.set",this._path),Za("OnDisconnect.set",e,this._path,!1);const t=new D.cY;return z5(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ns("OnDisconnect.setWithPriority",this._path),Za("OnDisconnect.setWithPriority",e,this._path,!1),tO("OnDisconnect.setWithPriority",t,!1);const r=new D.cY;return function yve(n,e,t,r,i){const o=lr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{"ok"===s&&Dm(n.onDisconnect_,e,o),Su(0,i,s,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ns("OnDisconnect.update",this._path),F5("OnDisconnect.update",e,this._path,!1);const t=new D.cY;return function vve(n,e,t,r){if((0,D.Im)(t))return ai("onDisconnect().update() called with empty data.  Don't do anything."),void Su(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&ci(t,(s,a)=>{const c=lr(a);Dm(n.onDisconnect_,Jn(e,s),c)}),Su(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Fo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Rt(this._path)?null:gk(this._path)}get ref(){return new ks(this._repo,this._path)}get _queryIdentifier(){const e=n5(this._queryParams),t=ck(e);return"{}"===t?"default":t}get _queryObject(){return n5(this._queryParams)}isEqual(e){if(!((e=(0,D.Ku)(e))instanceof Fo))return!1;const t=this._repo===e._repo,r=_k(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function v_e(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function XC(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function xu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Qa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==bu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Kc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Rn){if(null!=e&&!Gv(e)||null!=t&&!Gv(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,D.vA)(n.getIndex()instanceof Ik||n.getIndex()===wk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function JC(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ks extends Fo{constructor(e,t){super(e,t,new SC,!1)}get parent(){const e=z8(this._path);return null===e?null:new ks(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Sh{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new an(e),r=xh(this.ref,e);return new Sh(this._node.getChild(t),r,Rn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Sh(i,xh(this.ref,r),Rn)))}hasChild(e){const t=new an(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function J5(n,e){return(n=(0,D.Ku)(n))._checkNotDeleted("ref"),void 0!==e?xh(n._root,e):n._root}function e6(n,e){(n=(0,D.Ku)(n))._checkNotDeleted("refFromURL");const t=cO(e,n._repo.repoInfo_.nodeAdmin);L5("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ka("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),J5(n,t.path.toString())}function xh(n,e){return null===xt((n=(0,D.Ku)(n))._path)?ave("child","path",e,!1):Qv("child","path",e,!1),new ks(n._repo,Jn(n._path,e))}function uO(n,e){n=(0,D.Ku)(n),Ns("set",n._path),Za("set",e,n._path,!1);const t=new D.cY;return rO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function Nve(n,e){F5("update",e,n._path,!1);const t=new D.cY;return function mve(n,e,t,r){Mm(n,"update",{path:e.toString(),value:t});let i=!0;const o=Yv(n),s={};if(ci(t,(a,c)=>{i=!1,s[a]=P5(Jn(e,a),lr(c),n.serverSyncTree_,o)}),i)ai("update() called with empty data.  Don't do anything."),Su(0,r,"ok",void 0);else{const a=QC(n),c=function jye(n,e,t,r){!function iye(n,e,t,r){(0,D.vA)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Nk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Mn.fromObject(t);return Rm(n,new Sm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,s,a);KC(n.eventQueue_,c),n.server_.merge(e.toString(),t,(l,h)=>{const m="ok"===l;m||Hi("update at "+e+" failed: "+l);const _=Du(n.serverSyncTree_,a,!m),y=_.length>0?Pm(n,e):e;os(n.eventQueue_,y,_),Su(0,r,l,h)}),ci(t,l=>{const h=sO(n,Jn(e,l));Pm(n,h)}),os(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function kve(n){n=(0,D.Ku)(n);const e=new lO(()=>{}),t=new Zv(e);return function pve(n,e,t){const r=function Gye(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(l,h)=>{const m=ao(l,t);r=r||Cu(h,m)});let i=n.syncPointTree_.get(t);i?r=r||Cu(i,Zt()):(i=new E5,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,s=o?new wu(r,!0,!1):null;return function xye(n){return kC(n.viewCache_)}(I5(i,e,OC(n.pendingWriteTree_,e._path),o?s.getNode():yt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const o=lr(i).withIndex(e._queryParams.getIndex());let s;if($k(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())s=Hv(n.serverSyncTree_,e._path,o);else{const a=$v(n.serverSyncTree_,e);s=D5(n.serverSyncTree_,e._path,o,a)}return os(n.eventQueue_,e._path,s),HC(n.serverSyncTree_,e,t,null,!0),o},i=>(Mm(n,"get for query "+(0,D.As)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Sh(r,new ks(n._repo,n._path),n._queryParams.getIndex()))}class Zv{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Y5("value",this,new Sh(e.snapshotNode,new ks(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Z5(this,e,t):null}matches(e){return e instanceof Zv&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class e0{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Z5(this,e,t):null}createEvent(e,t){(0,D.vA)(null!=e.childName,"Child events should have a childName.");const r=xh(new ks(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Y5(e.type,this,new Sh(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof e0&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Xv(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const c=t,l=(h,m)=>{iO(n._repo,n,a),c(h,m)};l.userCallback=t.userCallback,l.context=t.context,t=l}const s=new lO(t,o||void 0),a="value"===e?new Zv(s):new e0(e,s);return function bve(n,e,t){let r;r=".info"===xt(e._path)?$k(n.infoSyncTree_,e,t):$k(n.serverSyncTree_,e,t),V5(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>iO(n._repo,n,a)}function dO(n,e,t,r){return Xv(n,"value",e,t,r)}function t6(n,e,t,r){return Xv(n,"child_added",e,t,r)}function n6(n,e,t,r){return Xv(n,"child_changed",e,t,r)}function r6(n,e,t,r){return Xv(n,"child_moved",e,t,r)}function i6(n,e,t,r){return Xv(n,"child_removed",e,t,r)}function o6(n,e,t){let r=null;const i=t?new lO(t):null;"value"===e?r=new Zv(i):e&&(r=new e0(e,i)),iO(n._repo,n,r)}class ca{}class s6 extends ca{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Za("endAt",this._value,e._path,!0);const t=Ak(e._queryParams,this._value,this._key);if(JC(t),xu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class Fve extends ca{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){Za("endBefore",this._value,e._path,!1);const t=function q_e(n,e,t){let r;return r=Ak(n,e,n.index_===Qa||t?t:bu),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(JC(t),xu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class a6 extends ca{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Za("startAt",this._value,e._path,!0);const t=Ck(e._queryParams,this._value,this._key);if(JC(t),xu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class Uve extends ca{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){Za("startAfter",this._value,e._path,!1);const t=function z_e(n,e,t){let r;return r=Ck(n,e,n.index_===Qa||t?t:Kc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(JC(t),xu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fo(e._repo,e._path,t,e._orderByCalled)}}class jve extends ca{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function H_e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class $ve extends ca{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fo(e._repo,e._path,function $_e(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class qve extends ca{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){XC(e,"orderByChild");const t=new an(this._path);if(Rt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Ik(t),i=xC(e._queryParams,r);return xu(i),new Fo(e._repo,e._path,i,!0)}}class Wve extends ca{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){XC(e,"orderByKey");const t=xC(e._queryParams,Qa);return xu(t),new Fo(e._repo,e._path,t,!0)}}class Qve extends ca{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){XC(e,"orderByPriority");const t=xC(e._queryParams,Rn);return xu(t),new Fo(e._repo,e._path,t,!0)}}class Zve extends ca{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){XC(e,"orderByValue");const t=xC(e._queryParams,wk);return xu(t),new Fo(e._repo,e._path,t,!0)}}class Jve extends ca{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Za("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new s6(this._value,this._key)._apply(new a6(this._value,this._key)._apply(e))}}function la(n,...e){let t=(0,D.Ku)(n);for(const r of e)t=r._apply(t);return t}(function Nye(n){(0,D.vA)(!UC,"__referenceConstructor has already been defined"),UC=n})(ks),function Vye(n){(0,D.vA)(!jC,"__referenceConstructor has already been defined"),jC=n}(ks);const hO={};function fO(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||Ka("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ai("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let c,l,s=cO(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=cO(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const h=i&&c?new Rv(Rv.OWNER):new Kge(n.name,n.options,e);L5("Invalid Firebase Database URL",s),Rt(s.path)||Ka("Database URL must point to the root of a Firebase Database (not including a child path).");const m=function ibe(n,e,t,r){let i=hO[e.name];i||(i={},hO[e.name]=i);let o=i[n.toURLString()];return o&&Ka("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new dve(n,false,t,r),i[n.toURLString()]=o,o}(a,n,h,new Wge(n.name,t));return new sbe(m,n)}class sbe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function hve(n,e,t){if(n.stats_=fk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new RC(n.repoInfo_,(r,i,o,s)=>{H5(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>$5(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,D.As)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wh(n.repoInfo_,e,(r,i,o,s)=>{H5(n,r,i,o,s)},r=>{$5(n,r)},r=>{!function fve(n,e){ci(e,(t,r)=>{nO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Zge(n,e){const t=n.toString();return hk[t]||(hk[t]=e()),hk[t]}(n.repoInfo_,()=>new Z_e(n.stats_,n.server_)),n.infoData_=new G_e,n.infoSyncTree_=new A5({startListening:(r,i,o,s)=>{let a=[];const c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Hv(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),nO(n,"connected",!1),n.serverSyncTree_=new A5({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{const l=s(a,c);os(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ks(this._repo,Zt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function rbe(n,e){const t=hO[e];(!t||t[n.key]!==n)&&Ka(`Database ${e}(${n.repoInfo_}) has already been deleted.`),q5(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ka("Cannot call "+e+" on a deleted database.")}}function l6(){P8.IS_TRANSPORT_INITIALIZED&&Hi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function abe(){l6(),Eu.forceDisallow()}function cbe(){l6(),wm.forceDisallow(),Eu.forceAllow()}function dbe(n,e){h8(n,e)}const fbe={".sv":"timestamp"};class gbe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wh.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wh.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function hbe(n){ok(Ro.SDK_VERSION),(0,Ro._registerComponent)(new ia.uA("database",(e,{instanceIdentifier:t})=>fO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ro.registerVersion)(s8,"1.0.7",n),(0,Ro.registerVersion)(s8,"1.0.7","esm2017")}();const bbe=new ns.Vy("@firebase/database-compat"),d6=function(n){bbe.warn("FIREBASE WARNING: "+n)};class wbe{constructor(e){this._delegate=e}cancel(e){(0,D.od)("OnDisconnect.cancel",0,1,arguments.length),(0,D.oD)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,D.od)("OnDisconnect.remove",0,1,arguments.length),(0,D.oD)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,D.od)("OnDisconnect.set",1,2,arguments.length),(0,D.oD)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,D.od)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,D.oD)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,D.od)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,d6("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,D.oD)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Tbe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,D.od)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ru{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,D.od)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,D.od)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,D.od)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,D.od)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,D.od)("DataSnapshot.child",0,1,arguments.length),e=String(e),Qv("DataSnapshot.child","path",e,!1),new Ru(this._database,this._delegate.child(e))}hasChild(e){return(0,D.od)("DataSnapshot.hasChild",1,1,arguments.length),Qv("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,D.od)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,D.od)("DataSnapshot.forEach",1,1,arguments.length),(0,D.oD)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Ru(this._database,t)))}hasChildren(){return(0,D.od)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,D.od)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,D.od)("DataSnapshot.ref",0,0,arguments.length),new ss(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class bi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,D.od)("Query.on",2,4,arguments.length),(0,D.oD)("Query.on","callback",t,!1);const s=bi.getCancelAndContextArgs_("Query.on",r,i),a=(l,h)=>{t.call(s.context,new Ru(this.database,l),h)};a.userCallback=t,a.context=s.context;const c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return dO(this._delegate,a,c),t;case"child_added":return t6(this._delegate,a,c),t;case"child_removed":return i6(this._delegate,a,c),t;case"child_changed":return n6(this._delegate,a,c),t;case"child_moved":return r6(this._delegate,a,c),t;default:throw new Error((0,D.dI)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,D.od)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,D.dI)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,D.oD)("Query.off","callback",t,!0),(0,D.HN)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,o6(this._delegate,e,i)}else o6(this._delegate,e)}get(){return kve(this._delegate).then(e=>new Ru(this.database,e))}once(e,t,r,i){(0,D.od)("Query.once",1,4,arguments.length),(0,D.oD)("Query.once","callback",t,!0);const o=bi.getCancelAndContextArgs_("Query.once",r,i),s=new D.cY,a=(l,h)=>{const m=new Ru(this.database,l);t&&t.call(o.context,m,h),s.resolve(m)};a.userCallback=t,a.context=o.context;const c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(e){case"value":dO(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":t6(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":i6(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":n6(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":r6(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error((0,D.dI)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,D.od)("Query.limitToFirst",1,1,arguments.length),new bi(this.database,la(this._delegate,function Hve(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new jve(n)}(e)))}limitToLast(e){return(0,D.od)("Query.limitToLast",1,1,arguments.length),new bi(this.database,la(this._delegate,function zve(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new $ve(n)}(e)))}orderByChild(e){return(0,D.od)("Query.orderByChild",1,1,arguments.length),new bi(this.database,la(this._delegate,function Gve(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Qv("orderByChild","path",n,!1),new qve(n)}(e)))}orderByKey(){return(0,D.od)("Query.orderByKey",0,0,arguments.length),new bi(this.database,la(this._delegate,function Kve(){return new Wve}()))}orderByPriority(){return(0,D.od)("Query.orderByPriority",0,0,arguments.length),new bi(this.database,la(this._delegate,function Yve(){return new Qve}()))}orderByValue(){return(0,D.od)("Query.orderByValue",0,0,arguments.length),new bi(this.database,la(this._delegate,function Xve(){return new Zve}()))}startAt(e=null,t){return(0,D.od)("Query.startAt",0,2,arguments.length),new bi(this.database,la(this._delegate,function Vve(n=null,e){return Kv("startAt","key",e,!0),new a6(n,e)}(e,t)))}startAfter(e=null,t){return(0,D.od)("Query.startAfter",0,2,arguments.length),new bi(this.database,la(this._delegate,function Bve(n,e){return Kv("startAfter","key",e,!0),new Uve(n,e)}(e,t)))}endAt(e=null,t){return(0,D.od)("Query.endAt",0,2,arguments.length),new bi(this.database,la(this._delegate,function Ove(n,e){return Kv("endAt","key",e,!0),new s6(n,e)}(e,t)))}endBefore(e=null,t){return(0,D.od)("Query.endBefore",0,2,arguments.length),new bi(this.database,la(this._delegate,function Lve(n,e){return Kv("endBefore","key",e,!0),new Fve(n,e)}(e,t)))}equalTo(e,t){return(0,D.od)("Query.equalTo",1,2,arguments.length),new bi(this.database,la(this._delegate,function ebe(n,e){return Kv("equalTo","key",e,!0),new Jve(n,e)}(e,t)))}toString(){return(0,D.od)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,D.od)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,D.od)("Query.isEqual",1,1,arguments.length),!(e instanceof bi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,D.oD)(e,"cancel",i.cancel,!0),i.context=r,(0,D.HN)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,D.dI)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ss(this.database,new ks(this._delegate._repo,this._delegate._path))}}class ss extends bi{constructor(e,t){super(e,new Fo(t._repo,t._path,new SC,!1)),this.database=e,this._delegate=t}getKey(){return(0,D.od)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,D.od)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ss(this.database,xh(this._delegate,e))}getParent(){(0,D.od)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ss(this.database,e):null}getRoot(){return(0,D.od)("Reference.root",0,0,arguments.length),new ss(this.database,this._delegate.root)}set(e,t){(0,D.od)("Reference.set",1,2,arguments.length),(0,D.oD)("Reference.set","onComplete",t,!0);const r=uO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,D.od)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,d6("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ns("Reference.update",this._delegate._path),(0,D.oD)("Reference.update","onComplete",t,!0);const r=Nve(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,D.od)("Reference.setWithPriority",2,3,arguments.length),(0,D.oD)("Reference.setWithPriority","onComplete",r,!0);const i=function Pve(n,e,t){if(Ns("setWithPriority",n._path),Za("setWithPriority",e,n._path,!1),tO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new D.cY;return rO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,D.od)("Reference.remove",0,1,arguments.length),(0,D.oD)("Reference.remove","onComplete",e,!0);const t=function Rve(n){return Ns("remove",n._path),uO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,D.od)("Reference.transaction",1,3,arguments.length),(0,D.oD)("Reference.transaction","transactionUpdate",e,!1),(0,D.oD)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,D.dI)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function _be(n,e,t){var r;if(n=(0,D.Ku)(n),Ns("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,o=new D.cY,a=dO(n,()=>{});return function Ive(n,e,t,r,i,o){Mm(n,"transaction on "+e);const s={path:e,update:t,onComplete:r,status:null,order:l8(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=oO(n,e,void 0);s.currentInputSnapshot=a;const c=s.update(a.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Wv("transaction failed: Data returned ",c,s.path),s.status=0;const l=qC(n.transactionQueueTree_,e),h=Dh(l)||[];let m;h.push(s),Xk(l,h),"object"==typeof c&&null!==c&&(0,D.gR)(c,".priority")?(m=(0,D.yw)(c,".priority"),(0,D.vA)(Gv(m),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):m=($C(n.serverSyncTree_,e)||yt.EMPTY_NODE).getPriority().val();const _=Yv(n),y=lr(c,m),E=Qk(y,a,_);s.currentOutputSnapshotRaw=y,s.currentOutputSnapshotResolved=E,s.currentWriteId=QC(n);const T=Hk(n.serverSyncTree_,e,E,s.currentWriteId,s.applyLocally);os(n.eventQueue_,e,T),YC(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(c,l,h)=>{let m=null;c?o.reject(c):(m=new Sh(h,new ks(n._repo,n._path),Rn),o.resolve(new gbe(l,m)))},a,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new Tbe(o.committed,new Ru(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,D.od)("Reference.setPriority",1,2,arguments.length),(0,D.oD)("Reference.setPriority","onComplete",t,!0);const r=function Mve(n,e){n=(0,D.Ku)(n),Ns("setPriority",n._path),tO("setPriority",e,!1);const t=new D.cY;return rO(n._repo,Jn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,D.od)("Reference.push",0,2,arguments.length),(0,D.oD)("Reference.push","onComplete",t,!0);const r=function xve(n,e){n=(0,D.Ku)(n),Ns("push",n._path),Za("push",e,n._path,!0);const t=j5(n._repo),r=Sve(t),i=xh(n,r),o=xh(n,r);let s;return s=null!=e?uO(o,e).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(this._delegate,e),i=r.then(s=>new ss(this.database,s));t&&i.then(()=>t(null),s=>t(s));const o=new ss(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Ns("Reference.onDisconnect",this._delegate._path),new wbe(new X5(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Jv{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:abe,forceLongPolling:cbe}}useEmulator(e,t,r={}){!function u6(n,e,t,r={}){(n=(0,D.Ku)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ka("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ka('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Rv(Rv.OWNER);else if(r.mockUserToken){const s="string"==typeof r.mockUserToken?r.mockUserToken:(0,D.Fy)(r.mockUserToken,n.app.options.projectId);o=new Rv(s)}!function nbe(n,e,t,r){n.repoInfo_=new uk(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,D.od)("database.ref",0,1,arguments.length),e instanceof ss){const t=e6(this._delegate,e.toString());return new ss(this,t)}{const t=J5(this._delegate,e);return new ss(this,t)}}refFromURL(e){(0,D.od)("database.refFromURL",1,1,arguments.length);const r=e6(this._delegate,e);return new ss(this,r)}goOffline(){return(0,D.od)("database.goOffline",0,0,arguments.length),function lbe(n){(n=(0,D.Ku)(n))._checkNotDeleted("goOffline"),q5(n._repo)}(this._delegate)}goOnline(){return(0,D.od)("database.goOnline",0,0,arguments.length),function ube(n){(n=(0,D.Ku)(n))._checkNotDeleted("goOnline"),function Eve(n){n.persistentConnection_&&n.persistentConnection_.resume(B5)}(n._repo)}(this._delegate)}}Jv.ServerValue={TIMESTAMP:function pbe(){return fbe}(),increment:n=>function mbe(n){return{".sv":{increment:n}}}(n)};var Abe=Object.freeze({__proto__:null,initStandalone:function Cbe({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){ok(t);const a=new ia.h1("database-standalone"),c=new ia.Kq("auth-internal",a);let l;return c.setComponent(new ia.uA("auth-internal",()=>r,"PRIVATE")),i&&(l=new ia.Kq("app-check-internal",a),l.setComponent(new ia.uA("app-check-internal",()=>i,"PRIVATE"))),{instance:new Jv(fO(n,c,l,e,s),n),namespace:o}}});const Dbe=Jv.ServerValue;function eb(n,e,t="on",r=oT){return new tn(i=>{let o=null;return o=n[t](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe(Ee(i=>{const{snapshot:o,prevKey:s}=i;let a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),cM())}function h6(n){return null==n}function f6(n){return"function"==typeof n.set}function p6(n,e){return f6(e)?e:n.ref(e)}function m6(n,e){if(function xbe(n){return"string"==typeof n}(n))return e.stringCase();if(f6(n))return e.firebaseCase();if(function Rbe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function g6(n){return(h6(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function _6(n,e,t){return lT(...(e=g6(e)).map(i=>eb(n,i,"on",t)))}function y6(n,e){return function(r,i){return m6(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function kbe(n){return function(t){return t?m6(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function v6(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Lbe(n,e){const{payload:t,prevKey:r,key:i}=e,o=v6(n,i),s=function Fbe(n,e){if(h6(e))return 0;{const t=v6(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{const l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,n=[...n,l],!1})}return n;case"child_added":if(o>-1)(n[o-1]?.key||null)!==r&&(n=n.filter(c=>c.payload.key!==t.key)).splice(s,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(s,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){const a=n.splice(o,1)[0];return(n=n.slice()).splice(s,0,a),n}return n;default:return n}}function b6(n,e,t){return function Obe(n,e,t){return eb(n,"value","once",t).pipe(Kn(r=>{const i=[ze(r)];return e.forEach(o=>i.push(eb(n,o,"on",t))),lT(...i).pipe(Fp(Lbe,[]))}),PM())}(n,e=g6(e),t)}function E6(n,e){return function(){return eb(n,"value","on",e)}}!function Sbe(n){n.INTERNAL.registerComponent(new ia.uA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Jv(i,r)},"PUBLIC").setServiceProps({Reference:ss,Query:bi,Database:Jv,DataSnapshot:Ru,enableLogging:dbe,INTERNAL:Abe,ServerValue:Dbe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.7")}(Mo.A);const Bbe=new ae("angularfire2.realtimeDatabaseURL"),jbe=new ae("angularfire2.database.use-emulator");let tb=(()=>{class n{schedulers;database;constructor(t,r,i,o,s,a,c,l,h,m,_,y,E,T,C){this.schedulers=a;const P=c,R=My(t,s,r);l&&_M(R,s,h,_,y,E,m,T),this.database=cT(`${R.name}.database.${i}`,"AngularFireDatabase",R.name,()=>{const U=s.runOutsideAngular(()=>R.database(i||void 0));return P&&U.useEmulator(...P),U},[P])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>p6(this.database,t));let o=i;return r&&(o=r(i)),function Vbe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:y6(r,"update"),set:y6(r,"set"),push:i=>r.push(i),remove:kbe(r),snapshotChanges:i=>b6(n,i,t).pipe(Sr),stateChanges:i=>_6(n,i,t).pipe(Sr),auditTrail:i=>function Mbe(n,e,t){return function Nbe(n,e,t){return function Pbe(n,e){return eb(n,"value","on",e).pipe(Ee(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Nge(...n){const e=UR(n);return Fe((t,r)=>{const i=n.length,o=new Array(i);let s=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)xo(n[c]).subscribe(He(r,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Jr))&&(s=null))},Ti));t.subscribe(He(r,c=>{if(a){const l=[c,...o];r.next(e?e(...l):l)}}))})}(e),Ee(([i,o])=>{const s=i.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),function kge(n){return Fe((e,t)=>{let r=!1,i=0;e.subscribe(He(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),Ee(i=>i.actions))}(n,_6(n,e).pipe(Fp((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(Sr),valueChanges:(i,o)=>b6(n,i,t).pipe(Ee(a=>a.map(c=>o&&o.idField?{...c.payload.val(),[o.idField]:c.key}:c.payload.val())),Sr)}}(o,this)}object(t){return function Ube(n,e){return{query:n,snapshotChanges:()=>E6(n,e.schedulers.outsideAngular)().pipe(Sr),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>E6(n,e.schedulers.outsideAngular)().pipe(Sr,Ee(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>p6(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||n)(Y(xp),Y(Rp,8),Y(Bbe,8),Y(Yo),Y(it),Y(aT),Y(jbe,8),Y(eu,8),Y(dM,8),Y(hM,8),Y(fM,8),Y(pM,8),Y(mM,8),Y(gM,8),Y(sT,8))};static \u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),Hbe=(()=>{class n{constructor(){Mo.A.registerVersion("angularfire",Ap.full,"rtdb-compat")}static \u0275fac=function(r){return new(r||n)};static \u0275mod=rn({type:n});static \u0275inj=Qt({providers:[tb]})}return n})();const $be_firebase={apiKey:"AIzaSyCk2pqJq5Vm7vOhz4kH_YRIuRjkOC6K-KM",authDomain:"waldotours-42416.firebaseapp.com",databaseURL:"https://waldotours-42416-default-rtdb.europe-west1.firebasedatabase.app",projectId:"waldotours-42416",storageBucket:"waldotours-42416.appspot.com",messagingSenderId:"792793844716",appId:"1:792793844716:web:2cf7451dcf283c4a818ec9"};let zbe=(()=>{class n{constructor(t){this.db=t,this.leaderboardRef=t.list("leaderboard")}getLeaderboard(){return this.leaderboardRef.valueChanges()}addScore(t,r){this.leaderboardRef.push({name:t,score:r})}static#e=this.\u0275fac=function(r){return new(r||n)(Y(tb))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function t0(...n){const e=by(n),t=UR(n),{args:r,keys:i}=Z$(n);if(0===r.length)return un([],e);const o=new tn(function Gbe(n,e,t=Jr){return r=>{I6(e,()=>{const{length:i}=n,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)I6(e,()=>{const l=un(n[c],e);let h=!1;l.subscribe(He(r,m=>{o[c]=m,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,i?s=>J$(i,s):Jr));return t?o.pipe(X$(t)):o}function I6(n,e,t){n?kc(t,n,e):e()}function w6(n){return new tn(e=>{xo(n()).subscribe(e)})}function Mu(n,e){const t=Ye(n)?n:()=>n,r=i=>i.error(t());return new tn(e?i=>e.schedule(r,0,i):r)}function pO(){return Fe((n,e)=>{let t=null;n._refCount++;const r=He(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class T6 extends tn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,xe(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;const t=this.getSubject();e.add(this.source.subscribe(He(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return pO()(this)}}function Nm(n,e){return Ye(e)?Fi(n,e,1):Fi(n,1)}function Xa(n){return Fe((e,t)=>{let o,r=null,i=!1;r=e.subscribe(He(t,void 0,void 0,s=>{o=xo(n(s,Xa(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mO(n){return n<=0?()=>Rs:Fe((e,t)=>{let r=[];e.subscribe(He(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function n0(n){return Fe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function km(n){return Fe((e,t)=>{xo(n).subscribe(He(t,()=>t.complete(),Ti)),!t.closed&&e.subscribe(t)})}const wt="primary",nb=Symbol("RouteTitle");class Qbe{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Om(n){return new Qbe(n)}function Ybe(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=n[o];if(":"===s[0])i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ja(n,e){const t=n?gO(n):void 0,r=e?gO(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!C6(n[i],e[i]))return!1;return!0}function gO(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function C6(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function A6(n){return n.length>0?n[n.length-1]:null}function Pu(n){return function qbe(n){return!!n&&(n instanceof tn||Ye(n.lift)&&Ye(n.subscribe))}(n)?n:uy(n)?un(Promise.resolve(n)):ze(n)}const Xbe={exact:function x6(n,e,t){if(!Mh(n.segments,e.segments)||!r0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!x6(n.children[r],e.children[r],t))return!1;return!0},subset:R6},D6={exact:function Jbe(n,e){return Ja(n,e)},subset:function eEe(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>C6(n[t],e[t]))},ignored:()=>!0};function S6(n,e,t){return Xbe[t.paths](n.root,e.root,t.matrixParams)&&D6[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function R6(n,e,t){return M6(n,e,e.segments,t)}function M6(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Mh(i,t)||e.hasChildren()||!r0(i,t,r))}if(n.segments.length===t.length){if(!Mh(n.segments,t)||!r0(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!R6(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Mh(n.segments,i)&&r0(n.segments,i,r)&&n.children[wt])&&M6(n.children[wt],e,o,r)}}function r0(n,e,t){return e.every((r,i)=>D6[t](n[i].parameters,r.parameters))}class Rh{constructor(e=new pn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Om(this.queryParams),this._queryParamMap}toString(){return rEe.serialize(this)}}class pn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return s0(this)}}class rb{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Om(this.parameters),this._parameterMap}toString(){return k6(this)}}function Mh(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Fm=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>new o0,providedIn:"root"})}return n})();class o0{parse(e){const t=new pEe(e);return new Rh(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ib(e.root,!0)}`,r=function sEe(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${a0(t)}=${a0(i)}`).join("&"):`${a0(t)}=${a0(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function iEe(n){return encodeURI(n)}(e.fragment)}`:""}`}}const rEe=new o0;function s0(n){return n.segments.map(e=>k6(e)).join("/")}function ib(n,e){if(!n.hasChildren())return s0(n);if(e){const t=n.children[wt]?ib(n.children[wt],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==wt&&r.push(`${i}:${ib(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function nEe(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===wt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==wt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===wt?[ib(n.children[wt],!1)]:[`${i}:${ib(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[wt]?`${s0(n)}/${t[0]}`:`${s0(n)}/(${t.join("//")})`}}function P6(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function a0(n){return P6(n).replace(/%3B/gi,";")}function _O(n){return P6(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function c0(n){return decodeURIComponent(n)}function N6(n){return c0(n.replace(/\+/g,"%20"))}function k6(n){return`${_O(n.path)}${function oEe(n){return Object.entries(n).map(([e,t])=>`;${_O(e)}=${_O(t)}`).join("")}(n.parameters)}`}const aEe=/^[^\/()?;#]+/;function yO(n){const e=n.match(aEe);return e?e[0]:""}const cEe=/^[^\/()?;=#]+/,uEe=/^[^=?&#]+/,hEe=/^[^&#]+/;class pEe{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pn([],{}):new pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[wt]=new pn(e,t)),r}parseSegment(){const e=yO(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new rb(c0(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function lEe(n){const e=n.match(cEe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=yO(this.remaining);i&&(r=i,this.capture(r))}e[c0(t)]=c0(r)}parseQueryParam(e){const t=function dEe(n){const e=n.match(uEe);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=function fEe(n){const e=n.match(hEe);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=N6(t),o=N6(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yO(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Q(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=wt);const s=this.parseChildren();t[o]=1===Object.keys(s).length?s[wt]:new pn([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}}function O6(n){return n.segments.length>0?new pn([],{[wt]:n}):n}function F6(n){const e={};for(const[r,i]of Object.entries(n.children)){const o=F6(i);if(r===wt&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function mEe(n){if(1===n.numberOfChildren&&n.children[wt]){const e=n.children[wt];return new pn(n.segments.concat(e.segments),e.children)}return n}(new pn(n.segments,e))}function Ph(n){return n instanceof Rh}function L6(n){let e;const i=O6(function t(o){const s={};for(const c of o.children){const l=t(c);s[c.outlet]=l}const a=new pn(o.url,s);return o===n&&(e=a),a}(n.root));return e??i}function V6(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return vO(i,i,i,t,r);const o=function _Ee(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new B6(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new B6(t,e,r)}(e);if(o.toRoot())return vO(i,i,new pn([],{}),t,r);const s=function yEe(n,e,t){if(n.isAbsolute)return new u0(e,!0,0);if(!t)return new u0(e,!1,NaN);if(null===t.parent)return new u0(t,!0,0);const r=l0(n.commands[0])?0:1;return function vEe(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new u0(r,!1,i-o)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(o,i,n),a=s.processChildren?sb(s.segmentGroup,s.index,o.commands):j6(s.segmentGroup,s.index,o.commands);return vO(i,s.segmentGroup,a,t,r)}function l0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ob(n){return"object"==typeof n&&null!=n&&n.outlets}function vO(n,e,t,r,i){let s,o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`}),s=n===e?t:U6(n,e,t);const a=O6(F6(s));return new Rh(a,o,i)}function U6(n,e,t){const r={};return Object.entries(n.children).forEach(([i,o])=>{r[i]=o===e?t:U6(o,e,t)}),new pn(n.segments,r)}class B6{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&l0(r[0]))throw new Q(4003,!1);const i=r.find(ob);if(i&&i!==A6(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class u0{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function j6(n,e,t){if(n??=new pn([],{}),0===n.segments.length&&n.hasChildren())return sb(n,e,t);const r=function EEe(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const s=n.segments[i],a=t[r];if(ob(a))break;const c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!$6(c,l,s))return o;r+=2}else{if(!$6(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new pn(n.segments.slice(0,r.pathIndex),{});return o.children[wt]=new pn(n.segments.slice(r.pathIndex),n.children),sb(o,0,i)}return r.match&&0===i.length?new pn(n.segments,{}):r.match&&!n.hasChildren()?bO(n,e,t):r.match?sb(n,0,i):bO(n,e,t)}function sb(n,e,t){if(0===t.length)return new pn(n.segments,{});{const r=function bEe(n){return ob(n[0])?n[0].outlets:{[wt]:n}}(t),i={};if(Object.keys(r).some(o=>o!==wt)&&n.children[wt]&&1===n.numberOfChildren&&0===n.children[wt].segments.length){const o=sb(n.children[wt],e,t);return new pn(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=j6(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new pn(n.segments,i)}}function bO(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(ob(o)){const c=IEe(o.outlets);return new pn(r,c)}if(0===i&&l0(t[0])){r.push(new rb(n.segments[e].path,H6(t[0]))),i++;continue}const s=ob(o)?o.outlets[wt]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&l0(a)?(r.push(new rb(s,H6(a))),i+=2):(r.push(new rb(s,{})),i++)}return new pn(r,{})}function IEe(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=bO(new pn([],{}),0,r))}),e}function H6(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $6(n,e,t){return n==t.path&&Ja(e,t.parameters)}const ab="imperative";var Ut=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ut||{});class ec{constructor(e,t){this.id=e,this.url=t}}class d0 extends ec{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ut.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yc extends ec{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var as=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(as||{}),h0=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(h0||{});class Nh extends ec{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Lm extends ec{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ut.NavigationSkipped}}class EO extends ec{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class z6 extends ec{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wEe extends ec{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TEe extends ec{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CEe extends ec{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AEe extends ec{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DEe{constructor(e){this.route=e,this.type=Ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SEe{constructor(e){this.route=e,this.type=Ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class xEe{constructor(e){this.snapshot=e,this.type=Ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class REe{constructor(e){this.snapshot=e,this.type=Ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class MEe{constructor(e){this.snapshot=e,this.type=Ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PEe{constructor(e){this.snapshot=e,this.type=Ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q6{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ut.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class IO{}class f0{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function ua(n){return n.outlet||wt}function cb(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class VEe{get injector(){return cb(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lb(this.rootInjector),this.attachRef=null}}let lb=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new VEe(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)(Y(xi))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class G6{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=wO(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=wO(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=TO(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return TO(e,this._root).map(t=>t.value)}}function wO(n,e){if(n===e.value)return e;for(const t of e.children){const r=wO(n,t);if(r)return r}return null}function TO(n,e){if(n===e.value)return[e];for(const t of e.children){const r=TO(n,t);if(r.length)return r.unshift(e),r}return[]}class da{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class W6 extends G6{constructor(e,t){super(e),this.snapshot=t,CO(this,e)}toString(){return this.snapshot.toString()}}function K6(n){const e=function UEe(n){const o=new m0([],{},{},"",{},wt,n,null,{});return new Q6("",new da(o,[]))}(n),t=new z([new rb("",{})]),r=new z({}),i=new z({}),o=new z({}),s=new z(""),a=new Um(t,r,o,s,i,wt,n,e.root);return a.snapshot=e.root,new W6(new da(a,[]),e)}class Um{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ee(l=>l[nb]))??ze(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ee(e=>Om(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ee(e=>Om(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function p0(n,e,t="emptyOnly"){let r;const{routeConfig:i}=n;return r=null===e||"always"!==t&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...i?.data,...n._resolvedData}},i&&Z6(i)&&(r.resolve[nb]=i.title),r}class m0{get title(){return this.data?.[nb]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Om(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Om(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q6 extends G6{constructor(e,t){super(t),this.url=e,CO(this,t)}toString(){return Y6(this._root)}}function CO(n,e){e.value._routerState=n,e.children.forEach(t=>CO(n,t))}function Y6(n){const e=n.children.length>0?` { ${n.children.map(Y6).join(", ")} } `:"";return`${n.value}${e}`}function AO(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ja(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ja(e.params,t.params)||n.paramsSubject.next(t.params),function Zbe(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ja(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ja(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function DO(n,e){const t=Ja(n.params,e.params)&&function tEe(n,e){return Mh(n,e)&&n.every((t,r)=>Ja(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||DO(n.parent,e.parent))}function Z6(n){return"string"==typeof n.title||null===n.title}let SO=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=wt,this.activateEvents=new sr,this.deactivateEvents=new sr,this.attachEvents=new sr,this.detachEvents=new sr,this.parentContexts=ce(lb),this.location=ce(Xs),this.changeDetector=ce(vp),this.inputBinder=ce(g0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;const i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new xO(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[pi]})}return n})();class xO{__ngOutletInjector(e){return new xO(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Um?this.route:e===lb?this.childContexts:this.parent.get(e,t)}}const g0=new ae("");let X6=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=t0([r.queryParams,r.params,r.data]).pipe(Kn(([o,s,a],c)=>(a={...o,...s,...a},0===c?ze(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const s=function qoe(n){const e=It(n);if(!e)return null;const t=new G_(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();function ub(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function jEe(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ub(n,r,i);return ub(n,r)})}(n,e,t);return new da(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>ub(n,a)),s}}const r=function HEe(n){return new Um(new z(n.url),new z(n.params),new z(n.queryParams),new z(n.fragment),new z(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>ub(n,o));return new da(r,i)}}class RO{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const J6="ngNavigationCancelingError";function _0(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ph(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=e9(!1,as.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function e9(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[J6]=!0,t.cancellationCode=e,t}function t9(n){return!!n&&n[J6]}class qEe{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),AO(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vm(t);e.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vm(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Vm(e);for(const s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vm(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new PEe(o.value.snapshot))}),e.children.length&&this.forwardEvent(new REe(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(AO(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),AO(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class n9{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class y0{constructor(e,t){this.component=e,this.route=t}}function GEe(n,e,t){const r=n._root;return db(r,e?e._root:null,t,[r.value])}function Bm(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function UA(n){return null!==gl(n)}(n)?e.get(n):n:r}function db(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Vm(e);return n.children.forEach(s=>{(function KEe(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function QEe(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mh(n.url,e.url)||!Ja(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!DO(n,e)||!Ja(n.queryParams,e.queryParams);default:return!DO(n,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new n9(r)):(o.data=s.data,o._resolvedData=s._resolvedData),db(n,e,o.component?a?a.children:null:t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new y0(a.outlet.component,s))}else s&&hb(e,a,i),i.canActivateChecks.push(new n9(r)),db(n,null,o.component?a?a.children:null:t,r,i)})(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>hb(a,t.getContext(s),i)),i}function hb(n,e,t){const r=Vm(n),i=n.value;Object.entries(r).forEach(([o,s])=>{hb(s,i.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new y0(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function fb(n){return"function"==typeof n}function r9(n){return n instanceof Py||"EmptyError"===n?.name}const v0=Symbol("INITIAL_VALUE");function jm(){return Kn(n=>t0(n.map(e=>e.pipe(Qd(1),Ly(v0)))).pipe(Ee(e=>{for(const t of e)if(!0!==t){if(t===v0)return v0;if(!1===t||nIe(t))return t}return!0}),no(e=>e!==v0),Qd(1)))}function nIe(n){return Ph(n)||n instanceof RO}function i9(n){return function $u(...n){return lc(n)}(ar(e=>{if("boolean"!=typeof e)throw _0(0,e)}),Ee(e=>!0===e))}class MO{constructor(e){this.segmentGroup=e||null}}class b0 extends Error{constructor(e){super(),this.urlTree=e}}function Hm(n){return Mu(new MO(n))}class mIe{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ze(r);if(i.numberOfChildren>1||!i.children[wt])return Mu(new Q(4e3,!1));i=i.children[wt]}}applyRedirectCommands(e,t,r,i,o){if("string"!=typeof t){const a=t,{queryParams:c,fragment:l,routeConfig:h,url:m,outlet:_,params:y,data:E,title:T}=i,C=ws(o,()=>a({params:y,data:E,queryParams:c,fragment:l,routeConfig:h,url:m,outlet:_,title:T}));if(C instanceof Rh)throw new b0(C);t=C}const s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new b0(s);return s}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new Rh(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,o])=>{if("string"==typeof o&&":"===o[0]){const a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new pn(o,s)}createSegments(e,t,r,i){return t.map(o=>":"===o.path[0]?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const PO={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gIe(n,e,t,r,i){const o=NO(n,e,t);return o.matched?(r=function NEe(n,e){return n.providers&&!n._injector&&(n._injector=WI(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function hIe(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ze(i.map(s=>{const a=Bm(s,n);return Pu(function tIe(n){return n&&fb(n.canMatch)}(a)?a.canMatch(e,t):ws(n,()=>a(e,t)))})).pipe(jm(),i9()):ze(!0)}(r,e,t).pipe(Ee(s=>!0===s?o:{...PO}))):ze(o)}function NO(n,e,t){if("**"===e.path)return function _Ie(n){return{matched:!0,parameters:n.length>0?A6(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...PO}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ybe)(t,n,e);if(!i)return{...PO};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function o9(n,e,t,r){return t.length>0&&function bIe(n,e,t){return t.some(r=>E0(n,e,r)&&ua(r)!==wt)}(n,t,r)?{segmentGroup:new pn(e,vIe(r,new pn(t,n.children))),slicedSegments:[]}:0===t.length&&function EIe(n,e,t){return t.some(r=>E0(n,e,r))}(n,t,r)?{segmentGroup:new pn(n.segments,yIe(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new pn(n.segments,n.children),slicedSegments:t}}function yIe(n,e,t,r){const i={};for(const o of t)if(E0(n,e,o)&&!r[ua(o)]){const s=new pn([],{});i[ua(o)]=s}return{...r,...i}}function vIe(n,e){const t={};t[wt]=e;for(const r of n)if(""===r.path&&ua(r)!==wt){const i=new pn([],{});t[ua(r)]=i}return t}function E0(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class TIe{}class DIe{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new mIe(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){const e=o9(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ee(({children:t,rootSnapshot:r})=>{const i=new da(r,t),o=new Q6("",i),s=function gEe(n,e,t=null,r=null){return V6(L6(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){const t=new m0([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),wt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,wt,t).pipe(Ee(r=>({children:r,rootSnapshot:t})),Xa(r=>{if(r instanceof b0)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof MO?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ee(s=>s instanceof da?[s]:[]))}processChildren(e,t,r,i){const o=[];for(const s of Object.keys(r.children))"primary"===s?o.unshift(s):o.push(s);return un(o).pipe(Nm(s=>{const a=r.children[s],c=function LEe(n,e){const t=n.filter(r=>ua(r)===e);return t.push(...n.filter(r=>ua(r)!==e)),t}(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Fp((s,a)=>(s.push(...a),s)),uT(null),function Wbe(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((i,o)=>n(i,o,r)):Jr,mO(1),t?uT(e):pq(()=>new Py))}(),Fi(s=>{if(null===s)return Hm(r);const a=s9(s);return function SIe(n){n.sort((e,t)=>e.value.outlet===wt?-1:t.value.outlet===wt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),ze(a)}))}processSegment(e,t,r,i,o,s,a){return un(t).pipe(Nm(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Xa(l=>{if(l instanceof MO)return ze(null);throw l}))),Jl(c=>!!c),Xa(c=>{if(r9(c))return function wIe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,o)?ze(new TIe):Hm(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return function IIe(n,e,t,r){return!!(ua(n)===r||r!==wt&&E0(e,t,n))&&NO(e,n,t).matched}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Hm(i):Hm(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){const{matched:c,parameters:l,consumedSegments:h,positionalParamSegments:m,remainingSegments:_}=NO(t,i,o);if(!c)return Hm(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const y=new m0(o,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,a9(i),ua(i),i.component??i._loadedComponent??null,i,c9(i)),E=p0(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(E.params),y.data=Object.freeze(E.data);const T=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,m,y,e);return this.applyRedirects.lineralizeSegments(i,T).pipe(Fi(C=>this.processSegment(e,r,t,C.concat(_),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){const a=gIe(t,r,i,e);return"**"===r.path&&(t.children={}),a.pipe(Kn(c=>c.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(Kn(({routes:l})=>{const h=r._loadedInjector??e,{parameters:m,consumedSegments:_,remainingSegments:y}=c,E=new m0(_,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,a9(r),ua(r),r.component??r._loadedComponent??null,r,c9(r)),T=p0(E,s,this.paramsInheritanceStrategy);E.params=Object.freeze(T.params),E.data=Object.freeze(T.data);const{segmentGroup:C,slicedSegments:P}=o9(t,_,y,l);if(0===P.length&&C.hasChildren())return this.processChildren(h,l,C,E).pipe(Ee(U=>new da(E,U)));if(0===l.length&&0===P.length)return ze(new da(E,[]));const R=ua(r)===o;return this.processSegment(h,l,C,P,R?wt:o,!0,E).pipe(Ee(U=>new da(E,U instanceof da?[U]:[])))})):Hm(t)))}getChildConfig(e,t,r){return t.children?ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function dIe(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ze(!0):ze(i.map(s=>{const a=Bm(s,n);return Pu(function ZEe(n){return n&&fb(n.canLoad)}(a)?a.canLoad(e,t):ws(n,()=>a(e,t)))})).pipe(jm(),i9())}(e,t,r).pipe(Fi(i=>i?this.configLoader.loadChildren(e,t).pipe(ar(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function pIe(n){return Mu(e9(!1,as.GuardRejected))}())):ze({routes:[],injector:e})}}function xIe(n){const e=n.value.routeConfig;return e&&""===e.path}function s9(n){const e=[],t=new Set;for(const r of n){if(!xIe(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=s9(r.children);e.push(new da(r.value,i))}return e.filter(r=>!t.has(r))}function a9(n){return n.data||{}}function c9(n){return n.resolve||{}}function l9(n){const e=n.children.map(t=>l9(t)).flat();return[n,...e]}function kO(n){return Kn(e=>{const t=n(e);return t?un(t).pipe(Ee(()=>e)):ze(e)})}let u9=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===wt);return r}getResolvedTitleForRoute(t){return t.data[nb]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>ce(OIe),providedIn:"root"})}return n})(),OIe=(()=>{class n extends u9{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(pce))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const $m=new ae("",{providedIn:"root",factory:()=>({})});let d9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=hi({type:n,selectors:[["ng-component"]],standalone:!0,features:[ql],decls:1,vars:0,template:function(r,i){1&r&&Lr(0,"router-outlet")},dependencies:[SO],encapsulation:2})}return n})();function OO(n){const e=n.children&&n.children.map(OO),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==wt&&(t.component=d9),t}const zm=new ae("");let FO=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ce(Jj)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Pu(t.loadComponent()).pipe(Ee(h9),ar(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),n0(()=>{this.componentLoaders.delete(t)})),i=new T6(r,()=>new V).pipe(pO());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function FIe(n,e,t,r){return Pu(n.loadChildren()).pipe(Ee(h9),Fi(i=>i instanceof fU||Array.isArray(i)?ze(i):un(e.compileModuleAsync(i))),Ee(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(t).injector,s=o.get(zm,[],{optional:!0,self:!0}).flat()),{routes:s.map(OO),injector:o}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(n0(()=>{this.childrenLoaders.delete(r)})),s=new T6(o,()=>new V).pipe(pO());return this.childrenLoaders.set(r,s),s}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function h9(n){return function LIe(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let LO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>ce(VIe),providedIn:"root"})}return n})(),VIe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const f9=new ae(""),p9=new ae("");function UIe(n,e,t){const r=n.get(p9),i=n.get(Vn);return n.get(it).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o;const s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),function BIe(n){return new Promise(e=>{!function $S(n,e){!e&&If();const t=e?.injector??ce(dr);return Eo(t)?(Yi("NgAfterNextRender"),P2(n,t,!0,e?.phase??Zi.MixedReadWrite)):R2}({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:c}=r;return c&&ws(n,()=>c({transition:a,from:e,to:t})),s})}const m9=new ae("");let I0=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new V,this.transitionAbortSubject=new V,this.configLoader=ce(FO),this.environmentInjector=ce(xi),this.urlSerializer=ce(Fm),this.rootContexts=ce(lb),this.location=ce(my),this.inputBindingEnabled=null!==ce(g0,{optional:!0}),this.titleStrategy=ce(u9),this.options=ce($m,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ce(LO),this.createViewTransition=ce(f9,{optional:!0}),this.navigationErrorHandler=ce(m9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ze(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new SEe(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new DEe(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,i){return this.transitions=new z({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ab,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(no(o=>0!==o.id),Ee(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Kn(o=>{let s=!1,a=!1;return ze(o).pipe(Kn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",as.SupersededByNewNavigation),Rs;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:"string"==typeof c.extras.browserUrl?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const m="";return this.events.next(new Lm(c.id,this.urlSerializer.serialize(c.rawUrl),m,h0.IgnoredSameUrlNavigation)),c.resolve(!1),Rs}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ze(c).pipe(Kn(m=>{const _=this.transitions?.getValue();return this.events.next(new d0(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),_!==this.transitions?.getValue()?Rs:Promise.resolve(m)}),function RIe(n,e,t,r,i,o){return Fi(s=>function CIe(n,e,t,r,i,o,s="emptyOnly"){return new DIe(n,e,t,r,i,s,o).recognize()}(n,e,t,r,s.extractedUrl,i,o).pipe(Ee(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ar(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const _=new z6(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:m,extractedUrl:_,source:y,restoredState:E,extras:T}=c,C=new d0(m,this.urlSerializer.serialize(_),y,E);this.events.next(C);const P=K6(this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:P,urlAfterRedirects:_,extras:{...T,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=_,ze(o)}{const m="";return this.events.next(new Lm(c.id,this.urlSerializer.serialize(c.extractedUrl),m,h0.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Rs}}),ar(c=>{const l=new wEe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Ee(c=>(this.currentTransition=o={...c,guards:GEe(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function rIe(n,e){return Fi(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return 0===s.length&&0===o.length?ze({...t,guardsResult:!0}):function iIe(n,e,t,r){return un(n).pipe(Fi(i=>function uIe(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?ze(o.map(a=>{const c=cb(e)??i,l=Bm(a,c);return Pu(function eIe(n){return n&&fb(n.canDeactivate)}(l)?l.canDeactivate(n,e,t,r):ws(c,()=>l(n,e,t,r))).pipe(Jl())})).pipe(jm()):ze(!0)}(i.component,i.route,t,e,r)),Jl(i=>!0!==i,!0))}(s,r,i,n).pipe(Fi(a=>a&&function YEe(n){return"boolean"==typeof n}(a)?function oIe(n,e,t,r){return un(e).pipe(Nm(i=>yT(function aIe(n,e){return null!==n&&e&&e(new xEe(n)),ze(!0)}(i.route.parent,r),function sIe(n,e){return null!==n&&e&&e(new MEe(n)),ze(!0)}(i.route,r),function lIe(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>function WEe(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(s)).filter(s=>null!==s).map(s=>w6(()=>ze(s.guards.map(c=>{const l=cb(s.node)??t,h=Bm(c,l);return Pu(function JEe(n){return n&&fb(n.canActivateChild)}(h)?h.canActivateChild(r,n):ws(l,()=>h(r,n))).pipe(Jl())})).pipe(jm())));return ze(o).pipe(jm())}(n,i.path,t),function cIe(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ze(!0);const i=r.map(o=>w6(()=>{const s=cb(e)??t,a=Bm(o,s);return Pu(function XEe(n){return n&&fb(n.canActivate)}(a)?a.canActivate(e,n):ws(s,()=>a(e,n))).pipe(Jl())}));return ze(i).pipe(jm())}(n,i.route,t))),Jl(i=>!0!==i,!0))}(r,o,n,e):ze(a)),Ee(a=>({...t,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),ar(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&"boolean"!=typeof c.guardsResult)throw _0(0,c.guardsResult);const l=new TEe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),no(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",as.GuardRejected),!1)),kO(c=>{if(c.guards.canActivateChecks.length)return ze(c).pipe(ar(l=>{const h=new CEe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Kn(l=>{let h=!1;return ze(l).pipe(function MIe(n,e){return Fi(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ze(t);const o=new Set(i.map(c=>c.route)),s=new Set;for(const c of o)if(!s.has(c))for(const l of l9(c))s.add(l);let a=0;return un(s).pipe(Nm(c=>o.has(c)?function PIe(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!Z6(i)&&(o[nb]=i.title),function NIe(n,e,t,r){const i=gO(n);if(0===i.length)return ze({});const o={};return un(i).pipe(Fi(s=>function kIe(n,e,t,r){const i=cb(e)??r,o=Bm(n,i);return Pu(o.resolve?o.resolve(e,t):ws(i,()=>o(e,t)))}(n[s],e,t,r).pipe(Jl(),ar(a=>{if(a instanceof RO)throw _0(new o0,a);o[s]=a}))),mO(1),function Kbe(n){return Ee(()=>n)}(o),Xa(s=>r9(s)?Rs:Mu(s)))}(o,n,e,r).pipe(Ee(s=>(n._resolvedData=s,n.data=p0(n,n.parent,t).resolve,null)))}(c,r,n,e):(c.data=p0(c,c.parent,n).resolve,ze(void 0))),ar(()=>a++),mO(1),Fi(c=>a===s.size?ze(t):Rs))})}(this.paramsInheritanceStrategy,this.environmentInjector),ar({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",as.NoDataFromResolver)}}))}),ar(l=>{const h=new AEe(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),kO(c=>{const l=h=>{const m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(ar(_=>{h.component=_}),Ee(()=>{})));for(const _ of h.children)m.push(...l(_));return m};return t0(l(c.targetSnapshot.root)).pipe(uT(null),Qd(1))}),kO(()=>this.afterPreactivation()),Kn(()=>{const{currentSnapshot:c,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return h?un(h).pipe(Ee(()=>o)):ze(o)}),Ee(c=>{const l=function BEe(n,e,t){const r=ub(n,e._root,t?t._root:void 0);return new W6(r,e)}(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:l},this.currentNavigation.targetRouterState=l,o}),ar(()=>{this.events.next(new IO)}),((n,e,t,r)=>Ee(i=>(new qEe(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Qd(1),ar({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Yc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),km(this.transitionAbortSubject.pipe(ar(c=>{throw c}))),n0(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",as.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xa(c=>{if(a=!0,t9(c))this.events.next(new Nh(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function $Ee(n){return t9(n)&&Ph(n.url)}(c)?this.events.next(new f0(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{const l=new EO(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{const h=ws(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof RO){const{message:m,cancellationCode:_}=_0(0,h);this.events.next(new Nh(o.id,this.urlSerializer.serialize(o.extractedUrl),m,_)),this.events.next(new f0(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);const m=t.errorHandler(c);o.resolve(!!m)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Rs}))}))}cancelNavigationTransition(t,r,i){const o=new Nh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jIe(n){return n!==ab}let HIe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>ce(zIe),providedIn:"root"})}return n})();class $Ie{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let zIe=(()=>{class n extends $Ie{static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ii(n)))(i||n)}})();static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),g9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:()=>ce(qIe),providedIn:"root"})}return n})(),qIe=(()=>{class n extends g9{constructor(){super(...arguments),this.location=ce(my),this.urlSerializer=ce(Fm),this.options=ce($m,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ce(LO),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Rh,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=K6(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof d0)this.stateMemento=this.createStateMemento();else if(t instanceof Lm)this.rawUrlTree=r.initialUrl;else if(t instanceof z6){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof IO?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Nh&&(t.code===as.GuardRejected||t.code===as.NoDataFromResolver)?this.restoreHistory(r):t instanceof EO?this.restoreHistory(r,!0):t instanceof Yc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const i=t instanceof Rh?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&0===o&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(i){return(t||(t=ii(n)))(i||n)}})();static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var pb=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(pb||{});function _9(n,e){n.events.pipe(no(t=>t instanceof Yc||t instanceof Nh||t instanceof EO||t instanceof Lm),Ee(t=>t instanceof Yc||t instanceof Lm?pb.COMPLETE:t instanceof Nh&&(t.code===as.Redirect||t.code===as.SupersededByNewNavigation)?pb.REDIRECTING:pb.FAILED),no(t=>t!==pb.REDIRECTING),Qd(1)).subscribe(()=>{e()})}function GIe(n){throw n}const WIe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},KIe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let co=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=ce(Hj),this.stateManager=ce(g9),this.options=ce($m,{optional:!0})||{},this.pendingTasks=ce(Ad),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ce(I0),this.urlSerializer=ce(Fm),this.location=ce(my),this.urlHandlingStrategy=ce(LO),this._events=new V,this.errorHandler=this.options.errorHandler||GIe,this.navigated=!1,this.routeReuseStrategy=ce(HIe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ce(zm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ce(g0,{optional:!0}),this.eventsSubscription=new zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(null!==i&&null!==o)if(this.stateManager.handleRouterEvent(r,o),r instanceof Nh&&r.code!==as.Redirect&&r.code!==as.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Yc)this.navigated=!0;else if(r instanceof f0){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||jIe(i.source),...s};this.scheduleNavigation(a,ab,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function YIe(n){return!(n instanceof IO||n instanceof f0)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ab,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(OO),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let m,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...o};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}null!==h&&(h=this.removeEmptyProps(h));try{m=L6(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),m=this.currentUrlTree.root}return V6(m,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Ph(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ab,null,r)}navigate(t,r={skipLocationChange:!1}){return function QIe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new Q(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...WIe}:!1===r?{...KIe}:r,Ph(t))return S6(this.currentUrlTree,t,i);const o=this.parseUrl(t);return S6(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(null!=o&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((m,_)=>{a=m,c=_});const h=this.pendingTasks.add();return _9(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(m=>Promise.reject(m))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),w0=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new V,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Yc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Ph(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==t||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:function hV(n,e,t){return function CZ(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?dV:S_}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return null===this.routerLinkInput?null:Ph(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(co),ee(Um),function __(n){return function q7(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const o=t[i];if(rd(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(o===e)return t[i+1];i+=2}}}return null}(Yt(),n)}("tabindex"),ee(Rc),ee(hr),ee(Ql))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Wr("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&wo("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Oa],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Oa],replaceUrl:[2,"replaceUrl","replaceUrl",Oa],routerLink:"routerLink"},standalone:!0,features:[nx,pi]})}return n})();class y9{}let JIe=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(no(t=>t instanceof Yc),Nm(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=WI(o.providers,t,`Route: ${o.path}`));const s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return un(i).pipe(Mp())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ze(null);const o=i.pipe(Fi(s=>null===s?ze(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));return r.loadComponent&&!r._loadedComponent?un([o,this.loader.loadComponent(r)]).pipe(Mp()):o})}static#e=this.\u0275fac=function(r){return new(r||n)(Y(co),Y(Jj),Y(xi),Y(y9),Y(FO))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const VO=new ae("");let v9=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof d0?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Lm&&t.code===h0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof q6&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new q6(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){yS()};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();function tc(n,e){return{\u0275kind:n,\u0275providers:e}}function E9(){const n=ce(dr);return e=>{const t=n.get(ta);if(e!==t.components[0])return;const r=n.get(co),i=n.get(I9);1===n.get(UO)&&r.initialNavigation(),n.get(w9,null,Ct.Optional)?.setUpPreloading(),n.get(VO,null,Ct.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const I9=new ae("",{factory:()=>new V}),UO=new ae("",{providedIn:"root",factory:()=>1}),w9=new ae("");function rwe(n){return tc(0,[{provide:w9,useExisting:JIe},{provide:y9,useExisting:n}])}function owe(n){return tc(9,[{provide:f9,useValue:UIe},{provide:p9,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const T9=new ae("ROUTER_FORROOT_GUARD"),swe=[my,{provide:Fm,useClass:o0},co,lb,{provide:Um,useFactory:function b9(n){return n.routerState.root},deps:[co]},FO,[]];let C9=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[swe,[],{provide:zm,multi:!0,useValue:t},{provide:T9,useFactory:uwe,deps:[[co,new Es,new ed]]},{provide:$m,useValue:r||{}},r?.useHash?{provide:Ql,useClass:YH}:{provide:Ql,useClass:QH},{provide:VO,useFactory:()=>{const n=ce(fae),e=ce(it),t=ce($m),r=ce(I0),i=ce(Fm);return t.scrollOffset&&n.setOffset(t.scrollOffset),new v9(i,r,n,e,t)}},r?.preloadingStrategy?rwe(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?dwe(r):[],r?.bindToComponentInputs?tc(8,[X6,{provide:g0,useExisting:X6}]).\u0275providers:[],r?.enableViewTransitions?owe().\u0275providers:[],[{provide:A9,useFactory:E9},{provide:mw,multi:!0,useExisting:A9}]]}}static forChild(t){return{ngModule:n,providers:[{provide:zm,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(Y(T9,8))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({})}return n})();function uwe(n){return"guarded"}function dwe(n){return["disabled"===n.initialNavigation?tc(3,[{provide:Kx,multi:!0,useFactory:()=>{const e=ce(co);return()=>{e.setUpLocationChangeListener()}}},{provide:UO,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?tc(2,[{provide:UO,useValue:0},{provide:Kx,multi:!0,deps:[dr],useFactory:e=>{const t=e.get(Koe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(co),o=e.get(I9);_9(i,()=>{r(!0)}),e.get(I0).afterPreactivation=()=>(r(!0),o.closed?ze(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const A9=new ae(""),fwe=()=>["/leaderboard"],pwe=()=>["/login"],mwe=()=>["/user"],gwe=()=>["/player/trophies"];let BO,_we=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=hi({type:n,selectors:[["app-header"]],decls:21,vars:8,consts:[[1,"header-bottom"],[1,"header"],[1,"redinside"],[1,"logo"],["src","/ToursEstCharlie/assets/logo.png"],[1,"nav"],[3,"routerLink"]],template:function(r,i){1&r&&(tt(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3),Lr(4,"img",4),tt(5,"h1"),Wn(6,"Tours Est Charlie"),st()(),tt(7,"nav",5)(8,"ul")(9,"li")(10,"a",6),Wn(11,"Home"),st()(),tt(12,"li")(13,"a",6),Wn(14,"Login"),st()(),tt(15,"li")(16,"a",6),Wn(17,"User"),st()(),tt(18,"li")(19,"a",6),Wn(20,"Trouvailles"),st()()()()()()()),2&r&&(Dt(10),Ln("routerLink",oy(4,fwe)),Dt(3),Ln("routerLink",oy(5,pwe)),Dt(3),Ln("routerLink",oy(6,mwe)),Dt(3),Ln("routerLink",oy(7,gwe)))},dependencies:[w0],styles:[".redinside[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem;background-color:#f03b34;color:#fff;border-color:#282526!important;border-width:thick;border:solid}.redinside[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center}.redinside[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:80px;margin-right:20px}.redinside[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.redinside[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex}.redinside[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-left:1rem}.redinside[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-weight:700}.redinside[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.header[_ngcontent-%COMP%]{background-color:#fff;outline-color:#282526!important;outline-width:thick;outline:dotted;outline-offset:-5px;padding:10px;outline-width:10px}.header-bottom[_ngcontent-%COMP%]{background-color:#282526;padding-bottom:5px}"]})}return n})(),D9=(()=>{class n{constructor(t,r){this.leaderboardService=t,this.router=r,this.newScoreName="",this.newScoreValue=0}ngOnInit(){var t=this;return(0,ne.A)(function*(){t.leaderboard$=t.leaderboardService.getLeaderboard()})()}addScore(){this.newScoreName&&this.newScoreValue&&(this.leaderboardService.addScore(this.newScoreName,this.newScoreValue),this.newScoreName="",this.newScoreValue=0)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(zbe),ee(co))};static#t=this.\u0275cmp=hi({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"header"]],template:function(r,i){1&r&&Lr(0,"app-header",0)(1,"router-outlet")},dependencies:[SO,_we],styles:[".header[_ngcontent-%COMP%]{border-color:#282526;border-width:thick}"]})}return n})(),vwe=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r}doGoogleLogin(){var t=this;return new Promise((r,i)=>{const o=new Mo.A.auth.GoogleAuthProvider;o.addScope("profile"),o.addScope("email"),this.afAuth.signInWithPopup(o).then(function(){var s=(0,ne.A)(function*(a){const c=a.user;if(c){const l={key:c.uid,name:c.displayName||"",image:c.photoURL||"",provider:c.providerData[0]?.providerId||""};(yield function ywe(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const o=new Nr({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Py)}});n.subscribe(o)})}(t.checkIfUserExists(c.uid)))||(yield t.db.object(`users/${c.uid}`).set(l)),r(a)}else i("No user data found")});return function(a){return s.apply(this,arguments)}}(),s=>{console.error("Google Login Error:",s),i(s)})})}checkIfUserExists(t){return this.db.object(`/users/${t}`).valueChanges().pipe(Ee(r=>!!r))}doLogout(){var t=this;return new Promise(function(){var r=(0,ne.A)(function*(i,o){(yield t.afAuth.currentUser)?t.afAuth.signOut().then(()=>i(),s=>{console.error("Logout Error:",s),o(s)}):o("No user currently signed in")});return function(i,o){return r.apply(this,arguments)}}())}static#e=this.\u0275fac=function(r){return new(r||n)(Y(eu),Y(tb))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();try{BO=typeof Intl<"u"&&Intl.v8BreakIterator}catch{BO=!1}let qm,nc=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?g$(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!BO)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Yo))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const S9=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function x9(){if(qm)return qm;if("object"!=typeof document||!document)return qm=new Set(S9),qm;let n=document.createElement("input");return qm=new Set(S9.filter(e=>(n.setAttribute("type",e),n.type===e))),qm}let mb,jO;function Gm(n){return function bwe(){if(null==mb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>mb=!0}))}finally{mb=mb||!1}return mb}()?n:!!n.capture}function Oh(n){return n.composedPath?n.composedPath()[0]:n.target}function R9(n){return no((e,t)=>n<=t)}function C0(n){return null!=n&&"false"!=`${n}`}function M9(n){return Array.isArray(n)?n:[n]}function Fh(n){return n instanceof hr?n.nativeElement:n}const P9=new Set;let Lh,zwe=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Gwe}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function qwe(n,e){if(!P9.has(n))try{Lh||(Lh=document.createElement("style"),e&&Lh.setAttribute("nonce",e),Lh.setAttribute("type","text/css"),document.head.appendChild(Lh)),Lh.sheet&&(Lh.sheet.insertRule(`@media ${n} {body{ }}`,0),P9.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(Y(nc),Y($D,8))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gwe(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Wwe=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new V}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return N9(M9(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=t0(N9(M9(t)).map(s=>this._registerQuery(s).observable));return o=yT(o.pipe(Qd(1)),o.pipe(R9(1),yM(0))),o.pipe(Ee(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new tn(s=>{const a=c=>this._zone.run(()=>s.next(c));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(Ly(r),Ee(({matches:s})=>({query:t,matches:s})),km(this._destroySubject)),mql:r};return this._queries.set(t,o),o}static#e=this.\u0275fac=function(r){return new(r||n)(Y(zwe),Y(it))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N9(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function L9(n){return 0===n.buttons||0===n.detail}function V9(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const rTe=new ae("cdk-input-modality-detector-options"),iTe={ignoreKeys:[18,17,224,91,16]},Wm=Gm({passive:!0,capture:!0});let oTe=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new z(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Oh(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(L9(s)?"keyboard":"mouse"),this._mostRecentTarget=Oh(s))},this._onTouchstart=s=>{V9(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Oh(s))},this._options={...iTe,...o},this.modalityDetected=this._modality.pipe(R9(1)),this.modalityChanged=this.modalityDetected.pipe(PM()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Wm),i.addEventListener("mousedown",this._onMousedown,Wm),i.addEventListener("touchstart",this._onTouchstart,Wm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Wm),document.removeEventListener("mousedown",this._onMousedown,Wm),document.removeEventListener("touchstart",this._onTouchstart,Wm))}static#e=this.\u0275fac=function(r){return new(r||n)(Y(nc),Y(it),Y(Vn),Y(rTe,8))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var A0=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(A0||{});const aTe=new ae("cdk-focus-monitor-default-options"),D0=Gm({passive:!0,capture:!0});let cTe=(()=>{class n{constructor(t,r,i,o,s){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new V,this._rootNodeFocusAndBlurListener=a=>{for(let l=Oh(a);l;l=l.parentElement)"focus"===a.type?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||A0.IMMEDIATE}monitor(t,r=!1){const i=Fh(t);if(!this._platform.isBrowser||1!==i.nodeType)return ze();const o=function Iwe(n){if(function Ewe(){if(null==jO){const n=typeof document<"u"?document.head:null;jO=!(!n||!n.createShadowRoot&&!n.attachShadow)}return jO}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),s=this._elementInfo.get(i);if(s)return r&&(s.checkChildren=!0),s.subject;const a={checkChildren:r,subject:new V,rootNode:o};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Fh(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=Fh(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,r,c)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===A0.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===A0.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=Oh(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,D0),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,D0)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(km(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,D0),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,D0),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let s=0;s<o.length;s++)if(o[s].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(Y(it),Y(nc),Y(oTe),Y(Vn,8),Y(aTe,8))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vh=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Vh||{});const B9="cdk-high-contrast-black-on-white",j9="cdk-high-contrast-white-on-black",HO="cdk-high-contrast-active";let lTe=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=ce(Wwe).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Vh.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Vh.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Vh.BLACK_ON_WHITE}return Vh.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(HO,B9,j9),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===Vh.BLACK_ON_WHITE?t.add(HO,B9):r===Vh.WHITE_ON_BLACK&&t.add(HO,j9)}}static#e=this.\u0275fac=function(r){return new(r||n)(Y(nc),Y(Vn))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const uTe=new ae("cdk-dir-doc",{providedIn:"root",factory:function dTe(){return ce(Vn)}}),hTe=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let pTe=(()=>{class n{constructor(t){this.value="ltr",this.change=new sr,t&&(this.value=function fTe(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?hTe.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(Y(uTe,8))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),H9=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({})}return n})();const gTe=new ae("mat-sanity-checks",{providedIn:"root",factory:function mTe(){return!0}});let Lo=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function wwe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(Y(lTe),Y(gTe,8),Y(Vn))};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[H9,H9]})}return n})();class q9{constructor(e,t,r,i,o){this._defaultMatcher=e,this.ngControl=t,this._parentFormGroup=r,this._parentForm=i,this._stateChanges=o,this.errorState=!1}updateErrorState(){const e=this.errorState,t=this._parentFormGroup||this._parentForm,r=this.matcher||this._defaultMatcher,i=this.ngControl?this.ngControl.control:null,o=r?.isErrorState(i,t)??!1;o!==e&&(this.errorState=o,this._stateChanges.next())}}let ITe=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Os=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Os||{});class wTe{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=Os.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const G9=Gm({passive:!0,capture:!0});class TTe{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Oh(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(o=>o.handleEvent(e))})}}addHandler(e,t,r,i){const o=this._events.get(t);if(o){const s=o.get(r);s?s.add(i):o.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,G9)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const o=i.get(t);o&&(o.delete(r),0===o.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,G9)))}}const W9={enterDuration:225,exitDuration:150},K9=Gm({passive:!0,capture:!0}),Q9=["mousedown","touchstart"],Y9=["mouseup","mouseleave","touchend","touchcancel"];class S0{static#e=this._eventManager=new TTe;constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Fh(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...W9,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const s=r.radius||function ATe(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,c=t-i.top,l=o.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-s+"px",h.style.top=c-s+"px",h.style.height=2*s+"px",h.style.width=2*s+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(h);const m=window.getComputedStyle(h),y=m.transitionDuration,E="none"===m.transitionProperty||"0s"===y||"0s, 0s"===y||0===i.width&&0===i.height,T=new wTe(this,h,r,E);h.style.transform="scale3d(1, 1, 1)",T.state=Os.FADING_IN,r.persistent||(this._mostRecentTransientRipple=T);let C=null;return!E&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const P=()=>{C&&(C.fallbackTimer=null),clearTimeout(U),this._finishRippleTransition(T)},R=()=>this._destroyRipple(T),U=setTimeout(R,l+100);h.addEventListener("transitionend",P),h.addEventListener("transitioncancel",R),C={onTransitionEnd:P,onTransitionCancel:R,fallbackTimer:U}}),this._activeRipples.set(T,C),(E||!l)&&this._finishRippleTransition(T),T}fadeOutRipple(e){if(e.state===Os.FADING_OUT||e.state===Os.HIDDEN)return;const t=e.element,r={...W9,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Os.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Fh(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,Q9.forEach(r=>{S0._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Y9.forEach(t=>{this._triggerElement.addEventListener(t,this,K9)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Os.FADING_IN?this._startFadeOutTransition(e):e.state===Os.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Os.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Os.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=L9(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!V9(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Os.VISIBLE||e.config.terminateOnPointerUp&&e.state===Os.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(Q9.forEach(t=>S0._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(Y9.forEach(t=>e.removeEventListener(t,this,K9)),this._pointerUpEventsRegistered=!1))}}const Z9=new ae("mat-ripple-global-options");let DTe=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,o,s){this._elementRef=t,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new S0(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr),ee(it),ee(nc),ee(Z9,8),ee(Uf,8))};static#t=this.\u0275dir=Ne({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,i){2&r&&ki("mat-ripple-unbounded",i.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),STe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,Lo]})}return n})();const X9={capture:!0},J9=["focus","mousedown","mouseenter","touchstart"],$O="mat-ripple-loader-uninitialized",zO="mat-ripple-loader-class-name",eK="mat-ripple-loader-centered",x0="mat-ripple-loader-disabled";let xTe=(()=>{class n{constructor(){this._document=ce(Vn,{optional:!0}),this._animationMode=ce(Uf,{optional:!0}),this._globalRippleOptions=ce(Z9,{optional:!0}),this._platform=ce(nc),this._ngZone=ce(it),this._hosts=new Map,this._onInteraction=t=>{const r=Oh(t);if(r instanceof HTMLElement){const i=r.closest(`[${$O}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}},this._ngZone.runOutsideAngular(()=>{for(const t of J9)this._document?.addEventListener(t,this._onInteraction,X9)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of J9)this._document?.removeEventListener(r,this._onInteraction,X9)}configureRipple(t,r){t.setAttribute($O,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(zO))&&t.setAttribute(zO,r.className||""),r.centered&&t.setAttribute(eK,""),r.disabled&&t.setAttribute(x0,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){const i=this._hosts.get(t);i?i.disabled=r:r?t.setAttribute(x0,""):t.removeAttribute(x0)}_createRipple(t){if(!this._document)return;const r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();const i=this._document.createElement("span");i.classList.add("mat-ripple",t.getAttribute(zO)),t.append(i);const o=new DTe(new hr(i),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=t,o.centered=t.hasAttribute(eK),o.disabled=t.hasAttribute(x0),this.attachRipple(t,o),o}attachRipple(t,r){t.removeAttribute($O),this._hosts.set(t,r)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const RTe=["*"],OTe=new ae("MAT_CARD_CONFIG");let R0=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static#e=this.\u0275fac=function(r){return new(r||n)(ee(OTe,8))};static#t=this.\u0275cmp=hi({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,i){2&r&&ki("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[ql],ngContentSelectors:RTe,decls:1,vars:0,template:function(r,i){1&r&&(Ud(),Dr(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color);border-color:var(--mdc-elevated-card-container-color);border-radius:var(--mdc-elevated-card-container-shape);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color);border-radius:var(--mdc-outlined-card-container-shape);border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),tK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}return n})(),nK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0})}return n})(),HTe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,Vw,Lo]})}return n})(),rK=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.fb=i,this.errorMessage=""}tryGoogleLogin(){var t=this;return(0,ne.A)(function*(){try{yield t.authService.doGoogleLogin(),t.router.navigate(["/user"])}catch(r){console.error(r)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(vwe),ee(co),ee(aq))};static#t=this.\u0275cmp=hi({type:n,selectors:[["page-login"]],decls:8,vars:0,consts:[[1,"container","titletop","stripe-border"],[1,"header","title"],[1,"container","titletop","stripe-border","main-card"],[1,"leaderboard-card","col-md-4"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"container","col-md-8"]],template:function(r,i){1&r&&(tt(0,"mat-card",0)(1,"h1",1),Wn(2,"Login"),st()(),tt(3,"div",2)(4,"mat-card",3)(5,"button",4),Wr("click",function(){return i.tryGoogleLogin()}),Wn(6,"Login with Google"),st()(),Lr(7,"mat-card",5),st())},dependencies:[R0],styles:["header[_ngcontent-%COMP%]{background:#333;color:#fff;padding:1rem}h1.header[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;margin:0 auto;max-width:1200px;padding:0}mat-card[_ngcontent-%COMP%]{padding:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:1rem}.title[_ngcontent-%COMP%]{margin:10px!important}.titletop[_ngcontent-%COMP%]{margin-top:20px}.leaderboard-card[_ngcontent-%COMP%]{width:-webkit-fill-available}.user-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:10px}.lineOfLeaderboard[_ngcontent-%COMP%]{display:flex;padding:5px;border:dotted;border-radius:50px;border-color:#282526!important;justify-content:space-between;align-items:center;flex-direction:row;flex-wrap:nowrap}.col-md-4[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%]{padding:1rem}.col-md-4[_ngcontent-%COMP%]{flex:1 1 33.33%}.col-md-8[_ngcontent-%COMP%]{flex:1 1 66.67%}.main-card[_ngcontent-%COMP%]{min-height:70vh}"]})}return n})();class $Te{constructor(e={}){this.key=e.key,this.name=e.name||"",this.image=e.image||"",this.provider=e.provider||"",this.trophies=e.trophies}}let M0=(()=>{class n{constructor(t,r){this.afAuth=t,this.db=r}getCurrentUser(){var t=this;return(0,ne.A)(function*(){try{const r=yield t.afAuth.currentUser;if(r)return new $Te({name:r.displayName||"",image:r.photoURL||"",provider:r.providerData[0]?.providerId||""});throw new Error("No user logged in")}catch(r){throw new Error(`Failed to get current user: ${r.message}`)}})()}updateCurrentUser(t){var r=this;return(0,ne.A)(function*(){try{const i=yield r.afAuth.currentUser;if(i)return yield i.updateProfile({displayName:t.name,photoURL:i.photoURL}),yield r.db.object(`users/${i.uid}/name`).set(t.name),"Profile updated";throw new Error("No user logged in")}catch(i){throw new Error(`Failed to update profile: ${i.message}`)}})()}logout(){var t=this;return(0,ne.A)(function*(){try{yield t.afAuth.signOut()}catch(r){throw new Error(`Failed to log out: ${r.message}`)}})()}checkIfUserExists(t){return this.db.object(`/users/${t}`).valueChanges().pipe(Ee(r=>!!r))}static#e=this.\u0275fac=function(r){return new(r||n)(Y(eu),Y(tb))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P0=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.userService=r,this.router=i}canActivate(){return new Promise(t=>{this.afAuth.authState.subscribe(r=>{r?t(!0):(this.router.navigate(["/login"]),t(!1))},r=>{console.error("Check login error:",r),this.router.navigate(["/login"]),t(!1)})})}static#e=this.\u0275fac=function(r){return new(r||n)(Y(eu),Y(M0),Y(co))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),iK=(()=>{class n{constructor(t,r){this.userService=t,this.router=r}resolve(t){var r=this;return(0,ne.A)(function*(){try{const i=yield r.userService.getCurrentUser();return"password"===(i.provider||"")&&(i.image="https://via.placeholder.com/400x300"),i}catch(i){throw console.error("Error resolving user:",i),r.router.navigate(["/login"]),i}})()}static#e=this.\u0275fac=function(r){return new(r||n)(Y(M0),Y(co))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const oK=Gm({passive:!0});let zTe=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Rs;const r=Fh(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new V,s="cdk-text-field-autofilled",a=c=>{"cdk-text-field-autofill-start"!==c.animationName||r.classList.contains(s)?"cdk-text-field-autofill-end"===c.animationName&&r.classList.contains(s)&&(r.classList.remove(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1}))):(r.classList.add(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,oK),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",a,oK)}}),o}stopMonitoring(t){const r=Fh(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}static#e=this.\u0275fac=function(r){return new(r||n)(Y(nc),Y(it))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qTe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({})}return n})();class GTe{constructor(e){this._box=e,this._destroyed=new V,this._resizeSubject=new V,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new tn(t=>{const r=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),r.unsubscribe(),this._elementObservables.delete(e)}}).pipe(no(t=>t.some(r=>r.target===e)),uM({bufferSize:1,refCount:!0}),km(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let WTe=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=ce(it)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,r){const i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new GTe(i)),this._observers.get(i).observe(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var at=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(at||{});const Zc="*";function sK(n,e){return{type:at.Trigger,name:n,definitions:e,options:{}}}function N0(n,e=null){return{type:at.Animate,styles:e,timings:n}}function Xc(n){return{type:at.Style,styles:n,offset:null}}function k0(n,e,t){return{type:at.State,name:n,styles:e,options:t}}function O0(n,e,t=null){return{type:at.Transition,expr:n,animation:e,options:t}}class yb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class aK{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}let JTe=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),eCe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({providers:[JTe]})}return n})();const tCe=["notch"],nCe=["matFormFieldNotchedOutline",""],rCe=["*"],iCe=["textField"],oCe=["iconPrefixContainer"],sCe=["textPrefixContainer"],aCe=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],cCe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function lCe(n,e){1&n&&Lr(0,"span",19)}function uCe(n,e){if(1&n&&(tt(0,"label",18),Dr(1,1),Tr(2,lCe,1,0,"span",19),st()),2&n){const t=Ao(2);Ln("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),wo("for",t._control.disableAutomaticLabeling?null:t._control.id),Dt(2),To(!t.hideRequiredMarker&&t._control.required?2:-1)}}function dCe(n,e){1&n&&Tr(0,uCe,3,5,"label",18),2&n&&To(Ao()._hasFloatingLabel()?0:-1)}function hCe(n,e){1&n&&Lr(0,"div",5)}function fCe(n,e){}function pCe(n,e){1&n&&Tr(0,fCe,0,0,"ng-template",11),2&n&&(Ao(2),Ln("ngTemplateOutlet",Mx(1)))}function mCe(n,e){if(1&n&&(tt(0,"div",7),Tr(1,pCe,1,1,null,11),st()),2&n){const t=Ao();Ln("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),Dt(),To(t._forceDisplayInfixLabel()?-1:1)}}function gCe(n,e){1&n&&(tt(0,"div",8,2),Dr(2,2),st())}function _Ce(n,e){1&n&&(tt(0,"div",9,3),Dr(2,3),st())}function yCe(n,e){}function vCe(n,e){1&n&&Tr(0,yCe,0,0,"ng-template",11),2&n&&(Ao(),Ln("ngTemplateOutlet",Mx(1)))}function bCe(n,e){1&n&&(tt(0,"div",12),Dr(1,4),st())}function ECe(n,e){1&n&&(tt(0,"div",13),Dr(1,5),st())}function ICe(n,e){1&n&&Lr(0,"div",14)}function wCe(n,e){1&n&&(tt(0,"div",16),Dr(1,6),st()),2&n&&Ln("@transitionMessages",Ao()._subscriptAnimationState)}function TCe(n,e){if(1&n&&(tt(0,"mat-hint",20),Wn(1),st()),2&n){const t=Ao(2);Ln("id",t._hintLabelId),Dt(),gp(t.hintLabel)}}function CCe(n,e){if(1&n&&(tt(0,"div",17),Tr(1,TCe,2,2,"mat-hint",20),Dr(2,7),Lr(3,"div",21),Dr(4,8),st()),2&n){const t=Ao();Ln("@transitionMessages",t._subscriptAnimationState),Dt(),To(t.hintLabel?1:-1)}}let GO=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,selectors:[["mat-label"]],standalone:!0})}return n})();const ACe=new ae("MatError");let DCe=0,cK=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+DCe++}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,i){2&r&&(ow("id",i.id),wo("align",null),ki("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"},standalone:!0})}return n})();const SCe=new ae("MatPrefix"),xCe=new ae("MatSuffix"),lK=new ae("FloatingLabelParent");let uK=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=ce(WTe),this._ngZone=ce(it),this._parent=ce(lK),this._resizeSubscription=new zt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function RCe(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const r=t.scrollWidth;return t.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr))};static#t=this.\u0275dir=Ne({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,i){2&r&&ki("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}return n})();const dK="mdc-line-ripple--active",F0="mdc-line-ripple--deactivating";let hK=(()=>{class n{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=i=>{const o=this._elementRef.nativeElement.classList,s=o.contains(F0);"opacity"===i.propertyName&&s&&o.remove(dK,F0)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(F0),t.add(dK)}deactivate(){this._elementRef.nativeElement.classList.add(F0)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr),ee(it))};static#t=this.\u0275dir=Ne({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}return n})(),fK=(()=>{class n{constructor(t,r){this._elementRef=t,this._ngZone=r,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr),ee(it))};static#t=this.\u0275cmp=hi({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,i){if(1&r&&zl(tCe,5),2&r){let o;Do(o=So())&&(i._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,i){2&r&&ki("mdc-notched-outline--notched",i.open)},inputs:{open:[0,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[ql],attrs:nCe,ngContentSelectors:rCe,decls:5,vars:0,consts:[["notch",""],[1,"mat-mdc-notch-piece","mdc-notched-outline__leading"],[1,"mat-mdc-notch-piece","mdc-notched-outline__notch"],[1,"mat-mdc-notch-piece","mdc-notched-outline__trailing"]],template:function(r,i){1&r&&(Ud(),Lr(0,"div",1),tt(1,"div",2,0),Dr(3),st(),Lr(4,"div",3))},encapsulation:2,changeDetection:0})}return n})();const MCe={transitionMessages:sK("transitionMessages",[k0("enter",Xc({opacity:1,transform:"translateY(0%)"})),O0("void => enter",[Xc({opacity:0,transform:"translateY(-5px)"}),N0("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let pK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=Ne({type:n})}return n})();const mK=new ae("MatFormField"),PCe=new ae("MAT_FORM_FIELD_DEFAULT_OPTIONS");let gK=0,OCe=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=C0(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdate=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,i,o,s,a,c,l){this._elementRef=t,this._changeDetectorRef=r,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=c,this._labelChild=lee(GO),this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+gK++,this._hintLabelId="mat-mdc-hint-"+gK++,this._subscriptAnimationState="",this._destroyed=new V,this._isFocused=null,this._needsOutlineLabelOffsetUpdate=!1,this._injector=ce(dr),this.getLabelId=$d(()=>this._hasFloatingLabel()?this._labelId:null),this._hasFloatingLabel=$d(()=>!!this._labelChild()),a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(km(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),lT(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0),function M2(n,e){!e&&If();const t=e?.injector??ce(dr);return Eo(t)?(Yi("NgAfterRender"),P2(n,t,!1,e?.phase??Zi.MixedReadWrite)):R2}(()=>{this._needsOutlineLabelOffsetUpdate&&(this._needsOutlineLabelOffsetUpdate=!1,this._updateOutlineLabelOffset())},{injector:this._injector}),this._dir.change.pipe(km(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdate=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_shouldLabelFloat(){return!!this._hasFloatingLabel()&&(this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdate=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,o=r?.getBoundingClientRect().width??0,s=i?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+s}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr),ee(vp),ee(it),ee(pTe),ee(nc),ee(PCe,8),ee(Uf,8),ee(Vn))};static#t=this.\u0275cmp=hi({type:n,selectors:[["mat-form-field"]],contentQueries:function(r,i,o){if(1&r&&(QB(o,i._labelChild,GO,5),Bd(o,pK,5),Bd(o,SCe,5),Bd(o,xCe,5),Bd(o,ACe,5),Bd(o,cK,5)),2&r){let s;(function YB(n=1){ZE(TD()+n)})(),Do(s=So())&&(i._formFieldControl=s.first),Do(s=So())&&(i._prefixChildren=s),Do(s=So())&&(i._suffixChildren=s),Do(s=So())&&(i._errorChildren=s),Do(s=So())&&(i._hintChildren=s)}},viewQuery:function(r,i){if(1&r&&(zl(iCe,5),zl(oCe,5),zl(sCe,5),zl(uK,5),zl(fK,5),zl(hK,5)),2&r){let o;Do(o=So())&&(i._textField=o.first),Do(o=So())&&(i._iconPrefixContainer=o.first),Do(o=So())&&(i._textPrefixContainer=o.first),Do(o=So())&&(i._floatingLabel=o.first),Do(o=So())&&(i._notchedOutline=o.first),Do(o=So())&&(i._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,i){2&r&&ki("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Dn([{provide:mK,useExisting:n},{provide:lK,useExisting:n}]),ql],ngContentSelectors:cCe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,i){if(1&r){const o=iw();Ud(aCe),Tr(0,dCe,1,1,"ng-template",null,0,Aj),tt(2,"div",4,1),Wr("click",function(a){return Fl(o),Ed(i._control.onContainerClick(a))}),Tr(4,hCe,1,0,"div",5),tt(5,"div",6),Tr(6,mCe,2,2,"div",7)(7,gCe,3,0,"div",8)(8,_Ce,3,0,"div",9),tt(9,"div",10),Tr(10,vCe,1,1,null,11),Dr(11),st(),Tr(12,bCe,2,0,"div",12)(13,ECe,2,0,"div",13),st(),Tr(14,ICe,1,0,"div",14),st(),tt(15,"div",15),Tr(16,wCe,2,1,"div",16)(17,CCe,5,2,"div",17),st()}if(2&r){let o;Dt(2),ki("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),Dt(2),To(i._hasOutline()||i._control.disabled?-1:4),Dt(2),To(i._hasOutline()?6:-1),Dt(),To(i._hasIconPrefix?7:-1),Dt(),To(i._hasTextPrefix?8:-1),Dt(2),To(!i._hasOutline()||i._forceDisplayInfixLabel()?10:-1),Dt(2),To(i._hasTextSuffix?12:-1),Dt(),To(i._hasIconSuffix?13:-1),Dt(),To(i._hasOutline()?-1:14),Dt(),ki("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),Dt(),To("error"===(o=i._getDisplayedMessages())?16:"hint"===o?17:-1)}},dependencies:[uK,fK,h$,hK,cK],styles:['.mdc-text-field{display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color;border-top-left-radius:4px;border-top-right-radius:4px;border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field__input{width:100%;min-width:0;border:none;border-radius:0;background:none;padding:0;-moz-appearance:none;-webkit-appearance:none;height:28px}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}.mdc-text-field__input::placeholder{opacity:0}.mdc-text-field__input::-moz-placeholder{opacity:0}.mdc-text-field__input::-webkit-input-placeholder{opacity:0}.mdc-text-field__input:-ms-input-placeholder{opacity:0}.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{opacity:1}.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}.mdc-text-field--outlined .mdc-text-field__input,.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color);caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color);caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-moz-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::-webkit-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--disabled .cdk-high-contrast-active .mdc-text-field__input{background-color:Window}.mdc-text-field--filled{height:56px;border-bottom-right-radius:0;border-bottom-left-radius:0;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape)}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--outlined{height:56px;overflow:visible;padding-left:16px;padding-right:16px}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape));padding-left:max(16px,var(--mdc-outlined-text-field-container-shape) + 4px)}[dir=rtl] .mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape) + 4px);padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-floating-label{position:absolute;left:0;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label{right:0;left:auto;transform-origin:right top;text-align:right}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:auto}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label{left:auto;right:4px}.mdc-text-field--filled .mdc-floating-label{left:16px;right:auto}[dir=rtl] .mdc-text-field--filled .mdc-floating-label{left:auto;right:16px}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.cdk-high-contrast-active .mdc-text-field--disabled .mdc-floating-label{z-index:1}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-floating-label{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mdc-floating-label{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--disabled):hover .mdc-floating-label{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}.mdc-floating-label--float-above{cursor:auto;transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1);font-size:.75rem}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline{text-align:right}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mat-mdc-notch-piece{box-sizing:border-box;height:100%;pointer-events:none;border-top:1px solid;border-bottom:1px solid}.mdc-text-field--focused .mat-mdc-notch-piece{border-width:2px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-outline-color);border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-notched-outline .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--invalid.mdc-text-field--focused .mat-mdc-notch-piece{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mat-mdc-notch-piece{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;width:12px;border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-notched-outline__leading{border-left:none;border-right:1px solid;border-bottom-left-radius:0;border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape)}.mdc-notched-outline__trailing{flex-grow:1;border-left:none;border-right:1px solid;border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-notched-outline__trailing{border-left:1px solid;border-right:none;border-top-right-radius:0;border-bottom-right-radius:0;border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 24px)}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1;border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--invalid:not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-text-field--disabled{pointer-events:none}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-moz-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::-webkit-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-moz-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-moz-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input::-webkit-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input::-webkit-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mat-mdc-form-field:not(.mat-form-field-no-animations).mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[MCe.transitionMessages]},changeDetection:0})}return n})(),vK=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,Vw,eCe,Lo]})}return n})();const FCe=new ae("MAT_INPUT_VALUE_ACCESSOR"),LCe=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let VCe=0,UCe=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=C0(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(iz.required)??!1}set required(t){this._required=C0(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&x9().has(this._type)&&(this._elementRef.nativeElement.type=this._type),this._ensureWheelDefaultBehavior()}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(t){this._errorStateTracker.matcher=t}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=C0(t)}get errorState(){return this._errorStateTracker.errorState}set errorState(t){this._errorStateTracker.errorState=t}constructor(t,r,i,o,s,a,c,l,h,m){this._elementRef=t,this._platform=r,this.ngControl=i,this._autofillMonitor=l,this._ngZone=h,this._formField=m,this._uid="mat-input-"+VCe++,this._webkitBlinkWheelListenerAttached=!1,this.focused=!1,this.stateChanges=new V,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(E=>x9().has(E)),this._iOSKeyupListener=E=>{const T=E.target;!T.value&&0===T.selectionStart&&0===T.selectionEnd&&(T.setSelectionRange(1,1),T.setSelectionRange(0,0))},this._webkitBlinkWheelListener=()=>{};const _=this._elementRef.nativeElement,y=_.nodeName.toLowerCase();this._inputValueAccessor=c||_,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&h.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new q9(a,i,s,o,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===y,this._isTextarea="textarea"===y,this._isInFormField=!!m,this._isNativeSelect&&(this.controlType=_.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener),this._webkitBlinkWheelListenerAttached&&this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){LCe.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}_ensureWheelDefaultBehavior(){!this._webkitBlinkWheelListenerAttached&&"number"===this._type&&(this._platform.BLINK||this._platform.WEBKIT)&&(this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("wheel",this._webkitBlinkWheelListener)}),this._webkitBlinkWheelListenerAttached=!0),this._webkitBlinkWheelListenerAttached&&"number"!==this._type&&(this._elementRef.nativeElement.removeEventListener("wheel",this._webkitBlinkWheelListener),this._webkitBlinkWheelListenerAttached=!0)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr),ee(nc),ee(Oc,10),ee(nT,8),ee(xy,8),ee(ITe),ee(FCe,10),ee(zTe),ee(it),ee(mK,8))};static#t=this.\u0275dir=Ne({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,i){1&r&&Wr("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&r&&(ow("id",i.id)("disabled",i.disabled)("required",i.required),wo("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),ki("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Dn([{provide:pK,useExisting:n}]),pi]})}return n})(),BCe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,vK,vK,qTe,Lo]})}return n})();const jCe=["mat-button",""],HCe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],$Ce=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],zCe=new ae("MAT_BUTTON_CONFIG"),qCe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let GCe=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,i,o){this._elementRef=t,this._platform=r,this._ngZone=i,this._animationMode=o,this._focusMonitor=ce(cTe),this._rippleLoader=ce(xTe),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const s=ce(zCe,{optional:!0}),a=t.nativeElement,c=a.classList;this.disabledInteractive=s?.disabledInteractive??!1,this.color=s?.color??null,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(const{attribute:l,mdcClasses:h}of qCe)a.hasAttribute(l)&&c.add(...h)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){yS()};static#t=this.\u0275dir=Ne({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",Oa],disabled:[2,"disabled","disabled",Oa],ariaDisabled:[2,"aria-disabled","ariaDisabled",Oa],disabledInteractive:[2,"disabledInteractive","disabledInteractive",Oa]},features:[nx]})}return n})(),WCe=(()=>{class n extends GCe{constructor(t,r,i,o){super(t,r,i,o)}static#e=this.\u0275fac=function(r){return new(r||n)(ee(hr),ee(nc),ee(it),ee(Uf,8))};static#t=this.\u0275cmp=hi({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,i){2&r&&(wo("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled()),tB(i.color?"mat-"+i.color:""),ki("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[sn,ql],attrs:jCe,ngContentSelectors:$Ce,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,i){1&r&&(Ud(HCe),Lr(0,"span",0),Dr(1),tt(2,"span",1),Dr(3,1),st(),Dr(4,2),Lr(5,"span",2)(6,"span",3)),2&r&&ki("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:['.mat-mdc-button-base{text-decoration:none}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-text-button-horizontal-padding, 8px);height:var(--mdc-text-button-container-height);font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);text-transform:var(--mdc-text-button-label-text-transform);font-weight:var(--mdc-text-button-label-text-weight)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-filled-button-horizontal-padding, 16px);height:var(--mdc-filled-button-container-height);font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);text-transform:var(--mdc-filled-button-label-text-transform);font-weight:var(--mdc-filled-button-label-text-weight)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color);background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow);height:var(--mdc-protected-button-container-height);font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);text-transform:var(--mdc-protected-button-label-text-transform);font-weight:var(--mdc-protected-button-label-text-weight)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color);background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 var(--mat-outlined-button-horizontal-padding, 15px);height:var(--mdc-outlined-button-container-height);font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);text-transform:var(--mdc-outlined-button-label-text-transform);font-weight:var(--mdc-outlined-button-label-text-weight);border-radius:var(--mdc-outlined-button-container-shape);border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color);border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button .mdc-button__ripple{border-width:var(--mdc-outlined-button-outline-width);border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),QCe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,STe,Lo]})}return n})(),WO=(()=>{class n{constructor(t){this.db=t}addTrophy(t){return this.db.list("trophies").push(t)}unlockTrophy(t,r){return this.db.object(`users/${t}/trophies/${r}`).set(!0)}getAllUsers(){return this.db.list("users").snapshotChanges().pipe(Ee(t=>t.map(r=>{const i=r.payload.val();return{key:r.payload.key,...i}})))}generateLeaderboard(){return this.getAllUsers().pipe(Ee(t=>t.map(r=>{const i=r.trophies?Object.keys(r.trophies).length:0;return{name:r.name,image:r.image,trophyCount:i}}).sort((r,i)=>i.trophyCount-r.trophyCount)))}getUserTrophies(t){return this.db.list(`users/${t}/trophies`).snapshotChanges().pipe(Ee(r=>r.map(i=>i.payload.key||"")))}getAllTrophies(){return this.db.list("trophies").snapshotChanges().pipe(Ee(t=>t.map(r=>{const i=r.payload.val();return{key:r.payload.key||"",name:i?.name||"Unknown",description:i?.description||""}})))}static#e=this.\u0275fac=function(r){return new(r||n)(Y(tb))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YCe(n,e){if(1&n){const t=iw();tt(0,"li"),Wn(1),tt(2,"button",1),Wr("click",function(){const i=Fl(t).$implicit;return Ed(Ao().unlockTrophy(i.key))}),Wn(3,"Unlock"),st()()}if(2&n){const t=e.$implicit;Dt(),jd(" ",t.key," - ")}}function ZCe(n,e){if(1&n&&(tt(0,"li"),Wn(1),st()),2&n){const t=e.$implicit;Dt(),jd(" ",t," ")}}let bK=(()=>{class n{constructor(t,r){this.trophyService=t,this.afAuth=r,this.trophies$=[],this.trophiesObtained=[]}ngOnInit(){this.initAllTrophies(),this.initUserTrophies()}initUserTrophies(){this.afAuth.authState.pipe(ar(t=>{if(!t)throw new Error("User not logged in!")}),Kn(t=>this.trophyService.getUserTrophies(t.uid)),Xa(t=>(console.error(t),Mu(()=>new Error("Failed to fetch user trophies"))))).subscribe(t=>this.trophiesObtained=t)}initAllTrophies(){this.afAuth.authState.pipe(ar(t=>{if(!t)throw new Error("User not logged in!")}),Kn(()=>this.trophyService.getAllTrophies()),Xa(t=>(console.error(t),Mu(()=>new Error("Failed to fetch all trophies"))))).subscribe(t=>this.trophies$=t)}unlockTrophy(t){this.afAuth.authState.pipe(ar(r=>{if(!r)throw new Error("No user logged in!")}),Kn(r=>this.trophyService.unlockTrophy(r.uid,t)),Xa(r=>(console.error(r),Mu(()=>new Error("Failed to unlock trophy"))))).subscribe()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(WO),ee(eu))};static#t=this.\u0275cmp=hi({type:n,selectors:[["app-user-trophies"]],decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],[3,"click"]],template:function(r,i){1&r&&(tt(0,"ul"),Tr(1,YCe,4,1,"li",0),st(),tt(2,"ul"),Tr(3,ZCe,2,1,"li",0),st()),2&r&&(Dt(),Ln("ngForOf",i.trophies$),Dt(2),Ln("ngForOf",i.trophiesObtained))},dependencies:[ER]})}return n})();function XCe(n,e){if(1&n&&Lr(0,"img",10),2&n){const t=Ao();Ln("src",null==t.user?null:t.user.image,S_)}}function JCe(n,e){1&n&&Lr(0,"img",11)}function e0e(n,e){if(1&n&&(tt(0,"div")(1,"h4"),Wn(2),st(),tt(3,"p"),Wn(4,"This is an example of Social Authentication using Firebase in an Angular app."),st()()),2&n){const t=Ao();Dt(2),gp(t.user.name)}}function t0e(n,e){if(1&n){const t=iw();tt(0,"div")(1,"form",12),Wr("ngSubmit",function(){Fl(t);const i=Ao();return Ed(i.save(i.profileForm.value))}),tt(2,"mat-form-field",13)(3,"mat-label"),Wn(4,"Your name"),st(),Lr(5,"input",14),st(),tt(6,"button",15),Wn(7,"Save"),st()()()}if(2&n){const t=Ao();Dt(),Ln("formGroup",t.profileForm)}}let n0e=(()=>{class n{constructor(t,r,i){this.fb=t,this.userService=r,this.router=i}ngOnInit(){var t=this;return(0,ne.A)(function*(){try{t.user=yield t.userService.getCurrentUser(),t.profileForm=t.fb.group({name:[t.user.name,iz.required]})}catch(r){console.error("Error fetching user:",r)}})()}save(t){var r=this;return(0,ne.A)(function*(){try{yield r.userService.updateCurrentUser({name:t.name}),alert("Username updated successfully")}catch(i){alert("Error updating username: "+i.message)}})()}logout(){var t=this;return(0,ne.A)(function*(){try{yield t.userService.logout(),t.router.navigate(["/login"])}catch(r){console.error("Error logging out:",r)}})()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(aq),ee(M0),ee(co))};static#t=this.\u0275cmp=hi({type:n,selectors:[["app-user"]],decls:17,vars:4,consts:[[1,"container","titletop","stripe-border"],[1,"header","title"],[1,"container"],[1,"col-md-4"],[1,"stripe-border"],["mat-card-image","","alt","User image",3,"src",4,"ngIf"],["mat-card-image","","src","https://via.placeholder.com/400x300","alt","User image",4,"ngIf"],[4,"ngIf"],["mat-button","",3,"click"],[1,"col-md-8"],["mat-card-image","","alt","User image",3,"src"],["mat-card-image","","src","https://via.placeholder.com/400x300","alt","User image"],[3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","name","required",""],["mat-raised-button","","color","primary","type","submit"]],template:function(r,i){1&r&&(tt(0,"mat-card",0)(1,"h1",1),Wn(2,"Logged User Page"),st()(),tt(3,"div",2)(4,"div",3)(5,"mat-card",4),Tr(6,XCe,1,1,"img",5)(7,JCe,1,0,"img",6),tt(8,"mat-card-content"),Tr(9,e0e,5,1,"div",7)(10,t0e,8,1,"div",7),tt(11,"div",2)(12,"button",8),Wr("click",function(){return i.logout()}),Wn(13,"Logout"),st()()()()(),tt(14,"div",9)(15,"mat-card",4),Lr(16,"app-user-trophies"),st()()()),2&r&&(Dt(6),Ln("ngIf",null==i.user?null:i.user.image),Dt(),Ln("ngIf",!(null!=i.user&&i.user.image)),Dt(2),Ln("ngIf",i.user),Dt(),Ln("ngIf",i.user))},dependencies:[l$,jz,Ey,$R,Dz,rT,xy,iM,UCe,OCe,GO,WCe,R0,tK,nK,bK],styles:["header[_ngcontent-%COMP%]{background:#333;color:#fff;padding:1rem}h1.header[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;margin:0 auto;max-width:1200px;padding:0}.col-md-4[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%]{padding:1rem}.col-md-4[_ngcontent-%COMP%]{flex:1 1 33.33%}.col-md-8[_ngcontent-%COMP%]{flex:1 1 66.67%}mat-card[_ngcontent-%COMP%]{padding:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:1rem}.title[_ngcontent-%COMP%]{margin:10px!important}.titletop[_ngcontent-%COMP%]{margin-top:20px}"]})}return n})();function r0e(n,e){if(1&n&&(tt(0,"li",6),Lr(1,"img",7),tt(2,"strong"),Wn(3),st(),Wn(4),st()),2&n){const t=e.$implicit;Dt(),lw("alt",t.name),Ln("src",t.image,S_),Dt(2),gp(t.name),Dt(),jd(" - ",t.trophyCount," trophies ")}}function i0e(n,e){if(1&n&&(tt(0,"li",6),Lr(1,"img",7),tt(2,"strong"),Wn(3),st(),Wn(4),st()),2&n){const t=e.$implicit;Dt(),lw("alt",t.name),Ln("src",t.image,S_),Dt(2),gp(t.name),Dt(),jd(" - ",t.trophyCount," trophies ")}}let EK=(()=>{class n{constructor(t){this.trophyService=t}ngOnInit(){this.leaderboard$=this.trophyService.generateLeaderboard()}static#e=this.\u0275fac=function(r){return new(r||n)(ee(WO))};static#t=this.\u0275cmp=hi({type:n,selectors:[["app-leaderboard"]],decls:12,vars:6,consts:[[1,"container","titletop","stripe-border"],[1,"header","title"],[1,"container","titletop","stripe-border","main-card"],[1,"leaderboard-card","col-md-4"],["class","lineOfLeaderboard",4,"ngFor","ngForOf"],[1,"container","col-md-8"],[1,"lineOfLeaderboard"],[1,"user-image",3,"src","alt"]],template:function(r,i){1&r&&(tt(0,"mat-card",0)(1,"h1",1),Wn(2,"Leaderboard"),st()(),tt(3,"div",2)(4,"mat-card",3)(5,"ul"),Tr(6,r0e,5,4,"li",4),Vx(7,"async"),st()(),tt(8,"mat-card",5)(9,"ul"),Tr(10,i0e,5,4,"li",4),Vx(11,"async"),st()()()),2&r&&(Dt(6),Ln("ngForOf",Ux(7,2,i.leaderboard$)),Dt(4),Ln("ngForOf",Ux(11,4,i.leaderboard$)))},dependencies:[ER,R0,f$],styles:["header[_ngcontent-%COMP%]{background:#333;color:#fff;padding:1rem}h1.header[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;margin:0 auto;max-width:1200px;padding:0}mat-card[_ngcontent-%COMP%]{padding:20px}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-top:1rem}.title[_ngcontent-%COMP%]{margin:10px!important}.titletop[_ngcontent-%COMP%]{margin-top:20px}.leaderboard-card[_ngcontent-%COMP%]{width:-webkit-fill-available}.user-image[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:10px}.lineOfLeaderboard[_ngcontent-%COMP%]{display:flex;padding:5px;border:dotted;border-radius:50px;border-color:#282526!important;justify-content:space-between;align-items:center;flex-direction:row;flex-wrap:nowrap}.col-md-4[_ngcontent-%COMP%], .col-md-8[_ngcontent-%COMP%]{padding:1rem}.col-md-4[_ngcontent-%COMP%]{flex:1 1 33.33%}.col-md-8[_ngcontent-%COMP%]{flex:1 1 66.67%}.main-card[_ngcontent-%COMP%]{min-height:70vh}"]})}return n})();const o0e=[{path:"",component:EK},{path:"login",component:rK},{path:"user",component:n0e,resolve:{data:iK}},{path:"admin/trophies",component:(()=>{class n{constructor(t){this.trophyService=t,this.trophyName=""}addTrophy(){this.trophyName.trim()&&this.trophyService.addTrophy({key:"",name:this.trophyName,description:""}).then(()=>{this.trophyName=""}).catch(r=>{console.error("Error adding trophy:",r)})}static#e=this.\u0275fac=function(r){return new(r||n)(ee(WO))};static#t=this.\u0275cmp=hi({type:n,selectors:[["app-trophy"]],decls:4,vars:1,consts:[["placeholder","Trophy Name",3,"ngModelChange","ngModel"],[3,"click"]],template:function(r,i){1&r&&(tt(0,"div")(1,"input",0),Nx("ngModelChange",function(s){return function mj(n,e){const t=Z2(n);return t&&n.set(e),t}(i.trophyName,s)||(i.trophyName=s),s}),st(),tt(2,"button",1),Wr("click",function(){return i.addTrophy()}),Wn(3,"Add Trophy"),st()()),2&r&&(Dt(),Px("ngModel",i.trophyName))},dependencies:[Ey,$R,eM]})}return n})(),canActivate:[P0]},{path:"player/trophies",component:bK,canActivate:[P0]},{path:"leaderboard",component:EK},{path:"**",redirectTo:""}];let s0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({providers:[{provide:Ql,useClass:YH}],imports:[C9.forRoot(o0e,{useHash:!0}),C9]})}return n})(),d0e=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,Lo]})}return n})();function IK(n){return new Q(3e3,!1)}function Nu(n){switch(n.length){case 0:return new yb;case 1:return n[0];default:return new aK(n)}}function wK(n,e,t=new Map,r=new Map){const i=[],o=[];let s=-1,a=null;if(e.forEach(c=>{const l=c.get("offset"),h=l==s,m=h&&a||new Map;c.forEach((_,y)=>{let E=y,T=_;if("offset"!==y)switch(E=n.normalizePropertyName(E,i),T){case"!":T=t.get(y);break;case Zc:T=r.get(y);break;default:T=n.normalizeStyleValue(y,E,T,i)}m.set(E,T)}),h||o.push(m),a=m,s=l}),i.length)throw function k0e(n){return new Q(3502,!1)}();return o}function KO(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&QO(t,"start",n)));break;case"done":n.onDone(()=>r(t&&QO(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&QO(t,"destroy",n)))}}function QO(n,e,t){const o=YO(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),s=n._data;return null!=s&&(o._data=s),o}function YO(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function cs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function TK(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const G0e=typeof document>"u"?null:document.documentElement;function ZO(n){const e=n.parentNode||n.host||null;return e===G0e?null:e}let Uh=null,CK=!1;function AK(n,e){for(;e;){if(e===n)return!0;e=ZO(e)}return!1}function DK(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let XO=(()=>{class n{validateStyleProperty(t){return function K0e(n){Uh||(Uh=function Q0e(){return typeof document<"u"?document.body:null}()||{},CK=!!Uh.style&&"WebkitAppearance"in Uh.style);let e=!0;return Uh.style&&!function W0e(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Uh.style,!e&&CK&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Uh.style)),e}(t)}containsElement(t,r){return AK(t,r)}getParentElement(t){return ZO(t)}query(t,r,i){return DK(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new yb(i,o)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})();class JO{static#e=this.NOOP=new XO}class e1{}const Z0e=1e3,t1="ng-enter",L0="ng-leave",V0="ng-trigger",U0=".ng-trigger",xK="ng-animating",n1=".ng-animating";function Jc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:r1(parseFloat(e[1]),e[2])}function r1(n,e){return"s"===e?n*Z0e:n}function B0(n,e,t){return n.hasOwnProperty("duration")?n:function J0e(n,e,t){let i,o=0,s="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(IK()),{duration:0,delay:0,easing:""};i=r1(parseFloat(a[1]),a[2]);const c=a[3];null!=c&&(o=r1(parseFloat(c),a[4]));const l=a[5];l&&(s=l)}else i=n;if(!t){let a=!1,c=e.length;i<0&&(e.push(function h0e(){return new Q(3100,!1)}()),a=!0),o<0&&(e.push(function f0e(){return new Q(3101,!1)}()),a=!0),a&&e.splice(c,0,IK())}return{duration:i,delay:o,easing:s}}(n,e,t)}function rc(n,e,t){e.forEach((r,i)=>{const o=s1(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function Bh(n,e){e.forEach((t,r)=>{const i=s1(r);n.style[i]=""})}function vb(n){return Array.isArray(n)?1==n.length?n[0]:function KTe(n,e=null){return{type:at.Sequence,steps:n,options:e}}(n):n}const o1=new RegExp("{{\\s*(.+?)\\s*}}","g");function MK(n){let e=[];if("string"==typeof n){let t;for(;t=o1.exec(n);)e.push(t[1]);o1.lastIndex=0}return e}function bb(n,e,t){const r=`${n}`,i=r.replace(o1,(o,s)=>{let a=e[s];return null==a&&(t.push(function m0e(n){return new Q(3003,!1)}()),a=""),a.toString()});return i==r?n:i}const nAe=/-+([a-z0-9])/g;function s1(n){return n.replace(nAe,(...e)=>e[1].toUpperCase())}function ls(n,e,t){switch(e.type){case at.Trigger:return n.visitTrigger(e,t);case at.State:return n.visitState(e,t);case at.Transition:return n.visitTransition(e,t);case at.Sequence:return n.visitSequence(e,t);case at.Group:return n.visitGroup(e,t);case at.Animate:return n.visitAnimate(e,t);case at.Keyframes:return n.visitKeyframes(e,t);case at.Style:return n.visitStyle(e,t);case at.Reference:return n.visitReference(e,t);case at.AnimateChild:return n.visitAnimateChild(e,t);case at.AnimateRef:return n.visitAnimateRef(e,t);case at.Query:return n.visitQuery(e,t);case at.Stagger:return n.visitStagger(e,t);default:throw function g0e(n){return new Q(3004,!1)}()}}function a1(n,e){return window.getComputedStyle(n)[e]}const oAe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class PK extends e1{normalizePropertyName(e,t){return s1(e)}normalizeStyleValue(e,t,r,i){let o="";const s=r.toString().trim();if(oAe.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function _0e(n,e){return new Q(3005,!1)}())}return s+o}}const j0="*";const H0=new Set(["true","1"]),$0=new Set(["false","0"]);function NK(n,e){const t=H0.has(n)||$0.has(n),r=H0.has(e)||$0.has(e);return(i,o)=>{let s=n==j0||n==i,a=e==j0||e==o;return!s&&t&&"boolean"==typeof i&&(s=i?H0.has(n):$0.has(n)),!a&&r&&"boolean"==typeof o&&(a=o?H0.has(e):$0.has(e)),s&&a}}const lAe=new RegExp("s*:selfs*,?","g");function c1(n,e,t,r){return new uAe(n).build(e,t,r)}class uAe{constructor(e){this._driver=e}build(e,t,r){const i=new fAe(t);return this._resetContextStyleTimingState(i),ls(this,vb(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],s=[];return"@"==e.name.charAt(0)&&t.errors.push(function y0e(){return new Q(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==at.State){const c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,o.push(this.visitState(c,t))}),c.name=l}else if(a.type==at.Transition){const c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(function v0e(){return new Q(3007,!1)}())}),{type:at.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{MK(c).forEach(l=>{s.hasOwnProperty(l)||o.add(l)})})}),o.size&&t.errors.push(function b0e(n,e){return new Q(3008,!1)}(0,o.values()))}return{type:at.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ls(this,vb(e.animation),t),i=function sAe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function aAe(n,e,t){if(":"==n[0]){const c=function cAe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function R0e(n){return new Q(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function x0e(n){return new Q(3015,!1)}()),e;const i=r[1],o=r[2],s=r[3];e.push(NK(i,s)),"<"==o[0]&&(i!=j0||s!=j0)&&e.push(NK(s,i))}(r,t,e)):t.push(n),t}(e.expr,t.errors);return{type:at.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:jh(e.options)}}visitSequence(e,t){return{type:at.Sequence,steps:e.steps.map(r=>ls(this,r,t)),options:jh(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(s=>{t.currentTime=r;const a=ls(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:at.Group,steps:o,options:jh(e.options)}}visitAnimate(e,t){const r=function mAe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return l1(B0(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=l1(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=B0(t,e);return l1(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Xc({});if(o.type==at.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;const l={};r.easing&&(l.easing=r.easing),s=Xc(l)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:at.Animate,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===Zc?r.push(a):t.errors.push(new Q(3002,!1)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o))for(let c of a.values())if(c.toString().indexOf("{{")>=0){o=!0;break}}),{type:at.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,c)=>{const l=t.collectedStyles.get(t.currentQuerySelector),h=l.get(c);let m=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(t.errors.push(function I0e(n,e,t,r,i){return new Q(3010,!1)}()),m=!1),o=h.startTime),m&&l.set(c,{startTime:o,endTime:i}),t.options&&function tAe(n,e,t){const r=e.params||{},i=MK(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function p0e(n){return new Q(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:at.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function w0e(){return new Q(3011,!1)}()),r;let o=0;const s=[];let a=!1,c=!1,l=0;const h=e.steps.map(P=>{const R=this._makeStyleAst(P,t);let U=null!=R.offset?R.offset:function pAe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(R.styles),J=0;return null!=U&&(o++,J=R.offset=U),c=c||J<0||J>1,a=a||J<l,l=J,s.push(J),R});c&&t.errors.push(function T0e(){return new Q(3012,!1)}()),a&&t.errors.push(function C0e(){return new Q(3200,!1)}());const m=e.steps.length;let _=0;o>0&&o<m?t.errors.push(function A0e(){return new Q(3202,!1)}()):0==o&&(_=1/(m-1));const y=m-1,E=t.currentTime,T=t.currentAnimateTimings,C=T.duration;return h.forEach((P,R)=>{const U=_>0?R==y?1:_*R:s[R],J=U*C;t.currentTime=E+T.delay+J,T.duration=J,this._validateStyleAst(P,t),P.offset=U,r.styles.push(P)}),r}visitReference(e,t){return{type:at.Reference,animation:ls(this,vb(e.animation),t),options:jh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:at.AnimateChild,options:jh(e.options)}}visitAnimateRef(e,t){return{type:at.AnimateRef,animation:this.visitReference(e.animation,t),options:jh(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,s]=function dAe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(lAe,"")),n=n.replace(/@\*/g,U0).replace(/@\w+/g,t=>U0+"-"+t.slice(1)).replace(/:animating/g,n1),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,cs(t.collectedStyles,t.currentQuerySelector,new Map);const a=ls(this,vb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:at.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:jh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function D0e(){return new Q(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:B0(e.timings,t.errors,!0);return{type:at.Stagger,animation:ls(this,vb(e.animation),t),timings:r,options:null}}}class fAe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function jh(n){return n?(n={...n}).params&&(n.params=function hAe(n){return n?{...n}:null}(n.params)):n={},n}function l1(n,e,t){return{duration:n,delay:e,easing:t}}function u1(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}class z0{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const yAe=new RegExp(":enter","g"),bAe=new RegExp(":leave","g");function d1(n,e,t,r,i,o=new Map,s=new Map,a,c,l=[]){return(new EAe).buildKeyframes(n,e,t,r,i,o,s,a,c,l)}class EAe{buildKeyframes(e,t,r,i,o,s,a,c,l,h=[]){l=l||new z0;const m=new h1(e,t,l,i,o,h,[]);m.options=c;const _=c.delay?Jc(c.delay):0;m.currentTimeline.delayNextStep(_),m.currentTimeline.setStyles([s],null,m.errors,c),ls(this,r,m);const y=m.timelines.filter(E=>E.containsAnimation());if(y.length&&a.size){let E;for(let T=y.length-1;T>=0;T--){const C=y[T];if(C.element===t){E=C;break}}E&&!E.allowOnlyTimelineStyles()&&E.setStyles([a],null,m.errors,c)}return y.length?y.map(E=>E.buildKeyframes()):[u1(t,[],[],[],0,_,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const o=i?.delay;if(o){const s="number"==typeof o?o:Jc(bb(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const s=null!=r.duration?Jc(r.duration):null,a=null!=r.delay?Jc(r.delay):null;return 0!==s&&e.forEach(c=>{const l=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,l.duration+l.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),ls(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){i.previousNode.type==at.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=q0);const s=Jc(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>ls(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?Jc(e.options.delay):0;e.steps.forEach(s=>{const a=t.createSubContext(e.options);o&&a.delayNextStep(o),ls(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return B0(t.params?bb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;o.type==at.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{a.forwardTime((c.offset||0)*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Jc(i.delay):0;o&&(t.previousNode.type===at.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=q0);let s=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,h)=>{t.currentQueryIndex=h;const m=t.createSubContext(e.options,l);o&&m.delayNextStep(o),l===t.element&&(c=m.currentTimeline),ls(this,e.animation,m),m.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,m.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1);let c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime}const h=t.currentTimeline;c&&h.delayNextStep(c);const m=h.currentTime;ls(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-m+(i.startTime-r.currentTimeline.startTime)}}const q0={};class h1{constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=q0,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new G0(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Jc(r.duration)),null!=r.delay&&(i.delay=Jc(r.delay));const o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=bb(o[a],s,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new h1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=q0,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new IAe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(yAe,"."+this._enterClassName)).replace(bAe,"."+this._leaveClassName);let l=this._driver.query(this.element,e,1!=r);0!==r&&(l=r<0?l.slice(l.length+r,l.length):l.slice(0,r)),a.push(...l)}return!o&&0==a.length&&s.push(function S0e(n){return new Q(3014,!1)}()),a}}class G0{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new G0(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Zc),this._currentKeyframe.set(t,Zc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},s=function wAe(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r??=e.keys();for(let o of r)t.set(o,Zc)}else for(let[o,s]of i)t.set(o,s)}),t}(e,this._globalTimelineStyles);for(let[a,c]of s){const l=bb(c,o,r);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Zc),this._updateStyle(a,l)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,c)=>{const l=new Map([...this._backFill,...a]);l.forEach((h,m)=>{"!"===h?e.add(m):h===Zc&&t.add(m)}),r||l.set("offset",c/this.duration),i.push(l)});const o=[...e.values()],s=[...t.values()];if(r){const a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return u1(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}}class IAe extends G0{constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);const l=new Map(e[0]);l.set("offset",FK(a)),o.push(l);const h=e.length-1;for(let m=1;m<=h;m++){let _=new Map(e[m]);const y=_.get("offset");_.set("offset",FK((t+y*r)/s)),o.push(_)}r=s,t=0,i="",e=o}return u1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function FK(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}function LK(n,e,t,r,i,o,s,a,c,l,h,m,_){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:h,totalTime:m,errors:_}}const f1={};class VK{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function TAe(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,l,h){const m=[],_=this.ast.options&&this.ast.options.params||f1,E=this.buildStyles(r,a&&a.params||f1,m),T=c&&c.params||f1,C=this.buildStyles(i,T,m),P=new Set,R=new Map,U=new Map,J="void"===i,ve={params:UK(T,_),delay:this.ast.options?.delay},Te=h?[]:d1(e,t,this.ast.animation,o,s,E,C,ve,l,m);let O=0;return Te.forEach(S=>{O=Math.max(S.duration+S.delay,O)}),m.length?LK(t,this._triggerName,r,i,J,E,C,[],[],R,U,O,m):(Te.forEach(S=>{const k=S.element,B=cs(R,k,new Set);S.preStyleProps.forEach(W=>B.add(W));const H=cs(U,k,new Set);S.postStyleProps.forEach(W=>H.add(W)),k!==t&&P.add(k)}),LK(t,this._triggerName,r,i,J,E,C,Te,[...P.values()],R,U,O))}}function UK(n,e){const t={...e};return Object.entries(n).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class CAe{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=UK(e,this.defaultParams);return this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((s,a)=>{s&&(s=bb(s,i,t));const c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}}class DAe{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new CAe(i.style,i.options&&i.options.params||{},r))}),BK(this.states,"true","1"),BK(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new VK(e,i,this.states))}),this.fallbackTransition=function SAe(n,e,t){return new VK(n,{type:at.Transition,animation:{type:at.Sequence,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function BK(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const xAe=new z0;class RAe{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=c1(this._driver,t,r,[]);if(r.length)throw function O0e(n){return new Q(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=wK(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let s;const a=new Map;if(o?(s=d1(this._driver,t,o,t1,L0,new Map,new Map,r,xAe,i),s.forEach(h=>{const m=cs(a,h.element,new Map);h.postStyleProps.forEach(_=>m.set(_,null))})):(i.push(function F0e(){return new Q(3300,!1)}()),s=[]),i.length)throw function L0e(n){return new Q(3504,!1)}();a.forEach((h,m)=>{h.forEach((_,y)=>{h.set(y,this._driver.computeStyle(m,y,Zc))})});const l=Nu(s.map(h=>{const m=a.get(h.element);return this._buildPlayer(h,new Map,m)}));return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function V0e(n){return new Q(3301,!1)}();return t}listen(e,t,r,i){const o=YO(t,"","","");return KO(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const jK="ng-animate-queued",p1="ng-animate-disabled",OAe=[],HK={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},FAe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ha="__ng_removed";class m1{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function BAe(n){return n??null}(r?e.value:e),r){const{value:o,...s}=e;this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Eb="void",g1=new m1(Eb);class LAe{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Fs(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function U0e(n,e){return new Q(3302,!1)}();if(null==r||0==r.length)throw function B0e(n){return new Q(3303,!1)}();if(!function jAe(n){return"start"==n||"done"==n}(r))throw function j0e(n,e){return new Q(3400,!1)}();const o=cs(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);const a=cs(this._engine.statesByElement,e,new Map);return a.has(t)||(Fs(e,V0),Fs(e,V0+"-"+t),a.set(t,g1)),()=>{this._engine.afterFlush(()=>{const c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function H0e(n){return new Q(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),s=new _1(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Fs(e,V0),Fs(e,V0+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t);const l=new m1(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=g1),l.value!==Eb&&c.value===l.value){if(!function zAe(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(c.params,l.params)){const T=[],C=o.matchStyles(c.value,c.params,T),P=o.matchStyles(l.value,l.params,T);T.length?this._engine.reportError(T):this._engine.afterFlush(()=>{Bh(e,C),rc(e,P)})}return}const _=cs(this._engine.playersByElement,e,[]);_.forEach(T=>{T.namespaceId==this.id&&T.triggerName==t&&T.queued&&T.destroy()});let y=o.matchTransition(c.value,l.value,e,l.params),E=!1;if(!y){if(!i)return;y=o.fallbackTransition,E=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:l,player:s,isFallbackTransition:E}),E||(Fs(e,jK),s.onStart(()=>{Km(e,jK)})),s.onDone(()=>{let T=this.players.indexOf(s);T>=0&&this.players.splice(T,1);const C=this._engine.playersByElement.get(e);if(C){let P=C.indexOf(s);P>=0&&C.splice(P,1)}}),this.players.push(s),_.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,U0,!0);r.forEach(i=>{if(i[ha])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),s=new Map;if(o){const a=[];if(o.forEach((c,l)=>{if(s.set(l,c.value),this._triggers.has(l)){const h=this.trigger(e,l,Eb,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Nu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const s=o.name;if(i.has(s))return;i.add(s);const c=this._triggers.get(s).fallbackTransition,l=r.get(s)||g1,h=new m1(Eb),m=new _1(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:l,toState:h,player:m,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[ha];(!o||o===HK)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Fs(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){const c=YO(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,KO(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,s=i.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class VAe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new LAe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){const c=i.get(a);if(c){const l=r.indexOf(c);r.splice(l+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(W0(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!W0(t))return;const o=t[ha];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){const s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Fs(e,p1)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Km(e,p1))}removeNode(e,t,r){if(W0(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[ha]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return W0(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,U0,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,n1,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Nu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ha];if(t&&t.setForRemoval){if(e[ha]=HK,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(p1)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Fs(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Nu(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function $0e(n){return new Q(3402,!1)}()}_flushAnimations(e,t){const r=new z0,i=[],o=new Map,s=[],a=new Map,c=new Map,l=new Map,h=new Set;this.disabledNodes.forEach(je=>{h.add(je);const Ke=this.driver.query(je,".ng-animate-queued",!0);for(let Ze=0;Ze<Ke.length;Ze++)h.add(Ke[Ze])});const m=this.bodyNode,_=Array.from(this.statesByElement.keys()),y=qK(_,this.collectedEnterElements),E=new Map;let T=0;y.forEach((je,Ke)=>{const Ze=t1+T++;E.set(Ke,Ze),je.forEach(Nt=>Fs(Nt,Ze))});const C=[],P=new Set,R=new Set;for(let je=0;je<this.collectedLeaveElements.length;je++){const Ke=this.collectedLeaveElements[je],Ze=Ke[ha];Ze&&Ze.setForRemoval&&(C.push(Ke),P.add(Ke),Ze.hasAnimation?this.driver.query(Ke,".ng-star-inserted",!0).forEach(Nt=>P.add(Nt)):R.add(Ke))}const U=new Map,J=qK(_,Array.from(P));J.forEach((je,Ke)=>{const Ze=L0+T++;U.set(Ke,Ze),je.forEach(Nt=>Fs(Nt,Ze))}),e.push(()=>{y.forEach((je,Ke)=>{const Ze=E.get(Ke);je.forEach(Nt=>Km(Nt,Ze))}),J.forEach((je,Ke)=>{const Ze=U.get(Ke);je.forEach(Nt=>Km(Nt,Ze))}),C.forEach(je=>{this.processLeaveNode(je)})});const ve=[],Te=[];for(let je=this._namespaceList.length-1;je>=0;je--)this._namespaceList[je].drainQueuedTransitions(t).forEach(Ze=>{const Nt=Ze.player,Mr=Ze.element;if(ve.push(Nt),this.collectedEnterElements.length){const gr=Mr[ha];if(gr&&gr.setForMove){if(gr.previousTriggersValues&&gr.previousTriggersValues.has(Ze.triggerName)){const tl=gr.previousTriggersValues.get(Ze.triggerName),Vo=this.statesByElement.get(Ze.element);if(Vo&&Vo.has(Ze.triggerName)){const nl=Vo.get(Ze.triggerName);nl.value=tl,Vo.set(Ze.triggerName,nl)}}return void Nt.destroy()}}const Vs=!m||!this.driver.containsElement(m,Mr),mr=U.get(Mr),Hn=E.get(Mr),$n=this._buildInstruction(Ze,r,Hn,mr,Vs);if($n.errors&&$n.errors.length)return void Te.push($n);if(Vs)return Nt.onStart(()=>Bh(Mr,$n.fromStyles)),Nt.onDestroy(()=>rc(Mr,$n.toStyles)),void i.push(Nt);if(Ze.isFallbackTransition)return Nt.onStart(()=>Bh(Mr,$n.fromStyles)),Nt.onDestroy(()=>rc(Mr,$n.toStyles)),void i.push(Nt);const Lu=[];$n.timelines.forEach(gr=>{gr.stretchStartingKeyframe=!0,this.disabledNodes.has(gr.element)||Lu.push(gr)}),$n.timelines=Lu,r.append(Mr,$n.timelines),s.push({instruction:$n,player:Nt,element:Mr}),$n.queriedElements.forEach(gr=>cs(a,gr,[]).push(Nt)),$n.preStyleProps.forEach((gr,tl)=>{if(gr.size){let Vo=c.get(tl);Vo||c.set(tl,Vo=new Set),gr.forEach((nl,Vu)=>Vo.add(Vu))}}),$n.postStyleProps.forEach((gr,tl)=>{let Vo=l.get(tl);Vo||l.set(tl,Vo=new Set),gr.forEach((nl,Vu)=>Vo.add(Vu))})});if(Te.length){const je=[];Te.forEach(Ke=>{je.push(function z0e(n,e){return new Q(3505,!1)}())}),ve.forEach(Ke=>Ke.destroy()),this.reportError(je)}const O=new Map,S=new Map;s.forEach(je=>{const Ke=je.element;r.has(Ke)&&(S.set(Ke,Ke),this._beforeAnimationBuild(je.player.namespaceId,je.instruction,O))}),i.forEach(je=>{const Ke=je.element;this._getPreviousPlayers(Ke,!1,je.namespaceId,je.triggerName,null).forEach(Nt=>{cs(O,Ke,[]).push(Nt),Nt.destroy()})});const k=C.filter(je=>WK(je,c,l)),B=new Map;zK(B,this.driver,R,l,Zc).forEach(je=>{WK(je,c,l)&&k.push(je)});const W=new Map;y.forEach((je,Ke)=>{zK(W,this.driver,new Set(je),c,"!")}),k.forEach(je=>{const Ke=B.get(je),Ze=W.get(je);B.set(je,new Map([...Ke?.entries()??[],...Ze?.entries()??[]]))});const L=[],Ls=[],Fu={};s.forEach(je=>{const{element:Ke,player:Ze,instruction:Nt}=je;if(r.has(Ke)){if(h.has(Ke))return Ze.onDestroy(()=>rc(Ke,Nt.toStyles)),Ze.disabled=!0,Ze.overrideTotalTime(Nt.totalTime),void i.push(Ze);let Mr=Fu;if(S.size>1){let mr=Ke;const Hn=[];for(;mr=mr.parentNode;){const $n=S.get(mr);if($n){Mr=$n;break}Hn.push(mr)}Hn.forEach($n=>S.set($n,Mr))}const Vs=this._buildAnimation(Ze.namespaceId,Nt,O,o,W,B);if(Ze.setRealPlayer(Vs),Mr===Fu)L.push(Ze);else{const mr=this.playersByElement.get(Mr);mr&&mr.length&&(Ze.parentPlayer=Nu(mr)),i.push(Ze)}}else Bh(Ke,Nt.fromStyles),Ze.onDestroy(()=>rc(Ke,Nt.toStyles)),Ls.push(Ze),h.has(Ke)&&i.push(Ze)}),Ls.forEach(je=>{const Ke=o.get(je.element);if(Ke&&Ke.length){const Ze=Nu(Ke);je.setRealPlayer(Ze)}}),i.forEach(je=>{je.parentPlayer?je.syncPlayerEvents(je.parentPlayer):je.destroy()});for(let je=0;je<C.length;je++){const Ke=C[je],Ze=Ke[ha];if(Km(Ke,L0),Ze&&Ze.hasAnimation)continue;let Nt=[];if(a.size){let Vs=a.get(Ke);Vs&&Vs.length&&Nt.push(...Vs);let mr=this.driver.query(Ke,n1,!0);for(let Hn=0;Hn<mr.length;Hn++){let $n=a.get(mr[Hn]);$n&&$n.length&&Nt.push(...$n)}}const Mr=Nt.filter(Vs=>!Vs.destroyed);Mr.length?HAe(this,Ke,Mr):this.processLeaveNode(Ke)}return C.length=0,L.forEach(je=>{this.players.push(je),je.onDone(()=>{je.destroy();const Ke=this.players.indexOf(je);this.players.splice(Ke,1)}),je.play()}),L}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(s=a)}else{const a=this.playersByElement.get(e);if(a){const c=!o||o==Eb;a.forEach(l=>{l.queued||!c&&l.triggerName!=i||s.push(l)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){const o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const l=c.element,h=l!==o,m=cs(r,l,[]);this._getPreviousPlayers(l,h,s,a,t.toState).forEach(y=>{const E=y.getRealPlayer();E.beforeDestroy&&E.beforeDestroy(),y.destroy(),m.push(y)})}Bh(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){const a=t.triggerName,c=t.element,l=[],h=new Set,m=new Set,_=t.timelines.map(E=>{const T=E.element;h.add(T);const C=T[ha];if(C&&C.removedBeforeQueried)return new yb(E.duration,E.delay);const P=T!==c,R=function $Ae(n){const e=[];return GK(n,e),e}((r.get(T)||OAe).map(O=>O.getRealPlayer())).filter(O=>!!O.element&&O.element===T),U=o.get(T),J=s.get(T),ve=wK(this._normalizer,E.keyframes,U,J),Te=this._buildPlayer(E,ve,R);if(E.subTimeline&&i&&m.add(T),P){const O=new _1(e,a,T);O.setRealPlayer(Te),l.push(O)}return Te});l.forEach(E=>{cs(this.playersByQueriedElement,E.element,[]).push(E),E.onDone(()=>function UAe(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,E.element,E))}),h.forEach(E=>Fs(E,xK));const y=Nu(_);return y.onDestroy(()=>{h.forEach(E=>Km(E,xK)),rc(c,t.toStyles)}),m.forEach(E=>{cs(i,E,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new yb(e.duration,e.delay)}}class _1{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new yb,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>KO(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){cs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function W0(n){return n&&1===n.nodeType}function $K(n,e){const t=n.style.display;return n.style.display=e??"none",t}function zK(n,e,t,r,i){const o=[];t.forEach(c=>o.push($K(c)));const s=[];r.forEach((c,l)=>{const h=new Map;c.forEach(m=>{const _=e.computeStyle(l,m,i);h.set(m,_),(!_||0==_.length)&&(l[ha]=FAe,s.push(l))}),n.set(l,h)});let a=0;return t.forEach(c=>$K(c,o[a++])),s}function qK(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),o=new Map;function s(a){if(!a)return 1;let c=o.get(a);if(c)return c;const l=a.parentNode;return c=t.has(l)?l:i.has(l)?1:s(l),o.set(a,c),c}return e.forEach(a=>{const c=s(a);1!==c&&t.get(c).push(a)}),t}function Fs(n,e){n.classList?.add(e)}function Km(n,e){n.classList?.remove(e)}function HAe(n,e,t){Nu(t).onDone(()=>n.processLeaveNode(e))}function GK(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof aK?GK(r.players,e):e.push(r)}}function WK(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class Ib{constructor(e,t,r){this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new VAe(e.body,t,r),this._timelineEngine=new RAe(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const s=e+"-"+i;let a=this._triggerCache[s];if(!a){const c=[],h=c1(this._driver,o,c,[]);if(c.length)throw function N0e(n,e){return new Q(3404,!1)}();a=function AAe(n,e,t){return new DAe(n,e,t)}(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,s]=TK(r);this._timelineEngine.command(o,t,s,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[s,a]=TK(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}class wb{static#e=this.initialStylesByElement=new WeakMap;constructor(e,t,r){this._element=e,this._startStyles=t,this._endStyles=r,this._state=0;let i=wb.initialStylesByElement.get(e);i||wb.initialStylesByElement.set(e,i=new Map),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&rc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(rc(this._element,this._initialStyles),this._endStyles&&(rc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(wb.initialStylesByElement.delete(this._element),this._startStyles&&(Bh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bh(this._element,this._endStyles),this._endStyles=null),rc(this._element,this._initialStyles),this._state=3)}}function y1(n){let e=null;return n.forEach((t,r)=>{(function GAe(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class KK{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:a1(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class QK{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return AK(e,t)}getParentElement(e){return ZO(e)}query(e,t,r){return DK(e,t,r)}computeStyle(e,t,r){return a1(e,t)}animate(e,t,r,i,o,s=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(c.easing=o);const l=new Map,h=s.filter(y=>y instanceof KK);(function rAe(n,e){return 0===n||0===e})(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((E,T)=>l.set(T,E))});let m=function eAe(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}(t).map(y=>new Map(y));m=function iAe(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,a1(n,a)))}}return e}(e,m,l);const _=function qAe(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=y1(e[0]),e.length>1&&(r=y1(e[e.length-1]))):e instanceof Map&&(t=y1(e)),t||r?new wb(n,t,r):null}(e,m);return new KK(e,m,c,_)}}const YK="@.disabled";class ZK{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==YK?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class WAe extends ZK{constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==YK?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function KAe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),s="";return"@"!=o.charAt(0)&&([o,s]=function QAe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}class YAe{constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(i,o)=>{const s=o?.parentNode(i);s&&o.removeChild(s,i)}}createRenderer(e,t){const i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){const l=this._rendererCache;let h=l.get(i);return h||(h=new ZK("",i,this.engine,()=>l.delete(i)),l.set(i,h)),h}const o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);const a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(o,s,e,l.name,l)};return t.data.animation.forEach(a),new WAe(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}const XK=[{provide:e1,useFactory:function XAe(){return new PK}},{provide:Ib,useClass:(()=>{class n extends Ib{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(r){return new(r||n)(Y(Vn),Y(JO),Y(e1))};static#t=this.\u0275prov=Ie({token:n,factory:n.\u0275fac})}return n})()},{provide:BI,useFactory:function JAe(n,e,t){return new YAe(n,e,t)},deps:[kR,Ib,it]}],v1=[{provide:JO,useFactory:()=>new QK},{provide:Uf,useValue:"BrowserAnimations"},...XK],JK=[{provide:JO,useClass:XO},{provide:Uf,useValue:"NoopAnimations"},...XK];let eDe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?JK:v1}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({providers:v1,imports:[L$]})}return n})(),VDe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n});static#n=this.\u0275inj=Qt({imports:[Lo,Lo]})}return n})(),UDe=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=rn({type:n,bootstrap:[D9]});static#n=this.\u0275inj=Qt({providers:[P0,M0,iK],imports:[L$,Lle,s0e,rue.initializeApp($be_firebase),Pge,due,ehe,Hbe,Fle,Vw,d0e,eDe,BCe,QCe,HTe,VDe]})}return n})();hce().bootstrapModule(UDe).catch(n=>console.error(n))},76:(Us,jr,ft)=>{ft.d(jr,{$L:()=>Xe,$g:()=>ol,A4:()=>ye,Am:()=>al,As:()=>At,Bd:()=>me,Cv:()=>tr,FA:()=>Me,Fy:()=>Ii,HN:()=>Nr,Hk:()=>Pe,I9:()=>Ti,Im:()=>oc,K3:()=>Ue,KA:()=>Hr,Ku:()=>uc,Ll:()=>gn,OE:()=>Xr,T9:()=>mn,Uj:()=>Wt,XA:()=>Bt,ZQ:()=>et,bD:()=>Bs,cY:()=>jt,dI:()=>ms,eX:()=>ue,g:()=>fe,gR:()=>vr,gz:()=>Ci,hp:()=>Hu,jZ:()=>qn,kH:()=>sl,kj:()=>_s,lT:()=>li,lV:()=>wi,nr:()=>K,oD:()=>cl,od:()=>ps,p7:()=>En,qc:()=>Nn,sr:()=>er,tD:()=>Uo,u:()=>pe,vA:()=>Ve,yw:()=>zt,zW:()=>te,zw:()=>Be});const x={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ve=function(F,N){if(!F)throw Pe(N)},Pe=function(F){return new Error("Firebase Database ("+x.SDK_VERSION+") INTERNAL ASSERT FAILED: "+F)},ie=function(F){const N=[];let V=0;for(let le=0;le<F.length;le++){let z=F.charCodeAt(le);z<128?N[V++]=z:z<2048?(N[V++]=z>>6|192,N[V++]=63&z|128):55296==(64512&z)&&le+1<F.length&&56320==(64512&F.charCodeAt(le+1))?(z=65536+((1023&z)<<10)+(1023&F.charCodeAt(++le)),N[V++]=z>>18|240,N[V++]=z>>12&63|128,N[V++]=z>>6&63|128,N[V++]=63&z|128):(N[V++]=z>>12|224,N[V++]=z>>6&63|128,N[V++]=63&z|128)}return N},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(F,N){if(!Array.isArray(F))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=N?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let z=0;z<F.length;z+=3){const xe=F[z],Fe=z+1<F.length,He=Fe?F[z+1]:0,Di=z+2<F.length,Ee=Di?F[z+2]:0;let ei=(15&He)<<2|Ee>>6,ys=63&Ee;Di||(ys=64,Fe||(ei=64)),le.push(V[xe>>2],V[(3&xe)<<4|He>>4],V[ei],V[ys])}return le.join("")},encodeString(F,N){return this.HAS_NATIVE_SUPPORT&&!N?btoa(F):this.encodeByteArray(ie(F),N)},decodeString(F,N){return this.HAS_NATIVE_SUPPORT&&!N?atob(F):function(F){const N=[];let V=0,le=0;for(;V<F.length;){const z=F[V++];if(z<128)N[le++]=String.fromCharCode(z);else if(z>191&&z<224){const xe=F[V++];N[le++]=String.fromCharCode((31&z)<<6|63&xe)}else if(z>239&&z<365){const Di=((7&z)<<18|(63&F[V++])<<12|(63&F[V++])<<6|63&F[V++])-65536;N[le++]=String.fromCharCode(55296+(Di>>10)),N[le++]=String.fromCharCode(56320+(1023&Di))}else{const xe=F[V++],Fe=F[V++];N[le++]=String.fromCharCode((15&z)<<12|(63&xe)<<6|63&Fe)}}return N.join("")}(this.decodeStringToByteArray(F,N))},decodeStringToByteArray(F,N){this.init_();const V=N?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let z=0;z<F.length;){const xe=V[F.charAt(z++)],He=z<F.length?V[F.charAt(z)]:0;++z;const Ee=z<F.length?V[F.charAt(z)]:64;++z;const mt=z<F.length?V[F.charAt(z)]:64;if(++z,null==xe||null==He||null==Ee||null==mt)throw new Pn;le.push(xe<<2|He>>4),64!==Ee&&(le.push(He<<4&240|Ee>>2),64!==mt&&le.push(Ee<<6&192|mt))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let F=0;F<this.ENCODED_VALS.length;F++)this.byteToCharMap_[F]=this.ENCODED_VALS.charAt(F),this.charToByteMap_[this.byteToCharMap_[F]]=F,this.byteToCharMapWebSafe_[F]=this.ENCODED_VALS_WEBSAFE.charAt(F),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[F]]=F,F>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(F)]=F,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(F)]=F)}}};class Pn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Hr=function(F){const N=ie(F);return Ue.encodeByteArray(N,!0)},Wt=function(F){return Hr(F).replace(/\./g,"")},pe=function(F){try{return Ue.decodeString(F,!0)}catch(N){console.error("base64Decode failed: ",N)}return null};function ye(F){return Be(void 0,F)}function Be(F,N){if(!(N instanceof Object))return N;switch(N.constructor){case Date:return new Date(N.getTime());case Object:void 0===F&&(F={});break;case Array:F=[];break;default:return N}for(const V in N)!N.hasOwnProperty(V)||!bt(V)||(F[V]=Be(F[V],N[V]));return F}function bt(F){return"__proto__"!==F}const Et=()=>{try{return function Lt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const F=process.env.__FIREBASE_DEFAULTS__;return F?JSON.parse(F):void 0})()||(()=>{if(typeof document>"u")return;let F;try{F=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const N=F&&pe(F[1]);return N&&JSON.parse(N)})()}catch(F){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${F}`)}},mn=()=>{var F;return null===(F=Et())||void 0===F?void 0:F.config},Bt=F=>{var N;return null===(N=Et())||void 0===N?void 0:N[`_${F}`]};class jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((N,V)=>{this.resolve=N,this.reject=V})}wrapCallback(N){return(V,le)=>{V?this.reject(V):this.resolve(le),"function"==typeof N&&(this.promise.catch(()=>{}),1===N.length?N(V):N(V,le))}}}function Ii(F,N){if(F.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=N||"demo-project",z=F.iat||0,xe=F.sub||F.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:z,exp:z+3600,auth_time:z,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},F);return[Wt(JSON.stringify({alg:"none",type:"JWT"})),Wt(JSON.stringify(Fe)),""].join(".")}function et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function gn(){var F;const N=null===(F=Et())||void 0===F?void 0:F.forceEnvironment;if("node"===N)return!0;if("browser"===N)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function me(){return typeof window<"u"||En()}function En(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function er(){const F="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof F&&void 0!==F.id}function wi(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function li(){const F=et();return F.indexOf("MSIE ")>=0||F.indexOf("Trident/")>=0}function ol(){return!0===x.NODE_CLIENT||!0===x.NODE_ADMIN}function K(){return!gn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function te(){try{return"object"==typeof indexedDB}catch{return!1}}function ue(){return new Promise((F,N)=>{try{let V=!0;const le="validate-browser-context-for-indexeddb-analytics-module",z=self.indexedDB.open(le);z.onsuccess=()=>{z.result.close(),V||self.indexedDB.deleteDatabase(le),F(!0)},z.onupgradeneeded=()=>{V=!1},z.onerror=()=>{var xe;N((null===(xe=z.error)||void 0===xe?void 0:xe.message)||"")}}catch(V){N(V)}})}class fe extends Error{constructor(N,V,le){super(V),this.code=N,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Me.prototype.create)}}class Me{constructor(N,V,le){this.service=N,this.serviceName=V,this.errors=le}create(N,...V){const le=V[0]||{},z=`${this.service}/${N}`,xe=this.errors[N],Fe=xe?function Pt(F,N){return F.replace(Gn,(V,le)=>{const z=N[le];return null!=z?String(z):`<${le}?>`})}(xe,le):"Error";return new fe(z,`${this.serviceName}: ${Fe} (${z}).`,le)}}const Gn=/\{\$([^}]+)}/g;function Xe(F){return JSON.parse(F)}function At(F){return JSON.stringify(F)}const cn=function(F){let N={},V={},le={},z="";try{const xe=F.split(".");N=Xe(pe(xe[0])||""),V=Xe(pe(xe[1])||""),z=xe[2],le=V.d||{},delete V.d}catch{}return{header:N,claims:V,data:le,signature:z}},tr=function(F){const V=cn(F).claims;return!!V&&"object"==typeof V&&V.hasOwnProperty("iat")},Nn=function(F){const N=cn(F).claims;return"object"==typeof N&&!0===N.admin};function vr(F,N){return Object.prototype.hasOwnProperty.call(F,N)}function zt(F,N){if(Object.prototype.hasOwnProperty.call(F,N))return F[N]}function oc(F){for(const N in F)if(Object.prototype.hasOwnProperty.call(F,N))return!1;return!0}function sl(F,N,V){const le={};for(const z in F)Object.prototype.hasOwnProperty.call(F,z)&&(le[z]=N.call(V,F[z],z,F));return le}function Bs(F,N){if(F===N)return!0;const V=Object.keys(F),le=Object.keys(N);for(const z of V){if(!le.includes(z))return!1;const xe=F[z],Fe=N[z];if(Gi(xe)&&Gi(Fe)){if(!Bs(xe,Fe))return!1}else if(xe!==Fe)return!1}for(const z of le)if(!V.includes(z))return!1;return!0}function Gi(F){return null!==F&&"object"==typeof F}function al(F){const N=[];for(const[V,le]of Object.entries(F))Array.isArray(le)?le.forEach(z=>{N.push(encodeURIComponent(V)+"="+encodeURIComponent(z))}):N.push(encodeURIComponent(V)+"="+encodeURIComponent(le));return N.length?"&"+N.join("&"):""}function Ti(F){const N={};return F.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[z,xe]=le.split("=");N[decodeURIComponent(z)]=decodeURIComponent(xe)}}),N}function Hu(F){const N=F.indexOf("?");if(!N)return"";const V=F.indexOf("#",N);return F.substring(N,V>0?V:void 0)}class Ci{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let N=1;N<this.blockSize;++N)this.pad_[N]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(N,V){V||(V=0);const le=this.W_;if("string"==typeof N)for(let mt=0;mt<16;mt++)le[mt]=N.charCodeAt(V)<<24|N.charCodeAt(V+1)<<16|N.charCodeAt(V+2)<<8|N.charCodeAt(V+3),V+=4;else for(let mt=0;mt<16;mt++)le[mt]=N[V]<<24|N[V+1]<<16|N[V+2]<<8|N[V+3],V+=4;for(let mt=16;mt<80;mt++){const ei=le[mt-3]^le[mt-8]^le[mt-14]^le[mt-16];le[mt]=4294967295&(ei<<1|ei>>>31)}let Ee,br,z=this.chain_[0],xe=this.chain_[1],Fe=this.chain_[2],He=this.chain_[3],Di=this.chain_[4];for(let mt=0;mt<80;mt++){mt<40?mt<20?(Ee=He^xe&(Fe^He),br=1518500249):(Ee=xe^Fe^He,br=1859775393):mt<60?(Ee=xe&Fe|He&(xe|Fe),br=2400959708):(Ee=xe^Fe^He,br=3395469782);const ei=(z<<5|z>>>27)+Ee+Di+br+le[mt]&4294967295;Di=He,He=Fe,Fe=4294967295&(xe<<30|xe>>>2),xe=z,z=ei}this.chain_[0]=this.chain_[0]+z&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+He&4294967295,this.chain_[4]=this.chain_[4]+Di&4294967295}update(N,V){if(null==N)return;void 0===V&&(V=N.length);const le=V-this.blockSize;let z=0;const xe=this.buf_;let Fe=this.inbuf_;for(;z<V;){if(0===Fe)for(;z<=le;)this.compress_(N,z),z+=this.blockSize;if("string"==typeof N){for(;z<V;)if(xe[Fe]=N.charCodeAt(z),++Fe,++z,Fe===this.blockSize){this.compress_(xe),Fe=0;break}}else for(;z<V;)if(xe[Fe]=N[z],++Fe,++z,Fe===this.blockSize){this.compress_(xe),Fe=0;break}}this.inbuf_=Fe,this.total_+=V}digest(){const N=[];let V=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let z=this.blockSize-1;z>=56;z--)this.buf_[z]=255&V,V/=256;this.compress_(this.buf_);let le=0;for(let z=0;z<5;z++)for(let xe=24;xe>=0;xe-=8)N[le]=this.chain_[z]>>xe&255,++le;return N}}function Uo(F,N){const V=new Ai(F,N);return V.subscribe.bind(V)}class Ai{constructor(N,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{N(this)}).catch(le=>{this.error(le)})}next(N){this.forEachObserver(V=>{V.next(N)})}error(N){this.forEachObserver(V=>{V.error(N)}),this.close(N)}complete(){this.forEachObserver(N=>{N.complete()}),this.close()}subscribe(N,V,le){let z;if(void 0===N&&void 0===V&&void 0===le)throw new Error("Missing Observer.");z=function sc(F,N){if("object"!=typeof F||null===F)return!1;for(const V of N)if(V in F&&"function"==typeof F[V])return!0;return!1}(N,["next","error","complete"])?N:{next:N,error:V,complete:le},void 0===z.next&&(z.next=fs),void 0===z.error&&(z.error=fs),void 0===z.complete&&(z.complete=fs);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?z.error(this.finalError):z.complete()}catch{}}),this.observers.push(z),xe}unsubscribeOne(N){void 0===this.observers||void 0===this.observers[N]||(delete this.observers[N],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(N){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,N)}sendOne(N,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[N])try{V(this.observers[N])}catch(le){typeof console<"u"&&console.error&&console.error(le)}})}close(N){this.finalized||(this.finalized=!0,void 0!==N&&(this.finalError=N),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fs(){}const ps=function(F,N,V,le){let z;if(le<N?z="at least "+N:le>V&&(z=0===V?"none":"no more than "+V),z)throw new Error(F+" failed: Was called with "+le+(1===le?" argument.":" arguments.")+" Expects "+z+".")};function ms(F,N){return`${F} failed: ${N} argument `}function cl(F,N,V,le){if((!le||V)&&"function"!=typeof V)throw new Error(ms(F,N)+"must be a valid function.")}function Nr(F,N,V,le){if((!le||V)&&("object"!=typeof V||null===V))throw new Error(ms(F,N)+"must be a valid context object.")}const _s=function(F){const N=[];let V=0;for(let le=0;le<F.length;le++){let z=F.charCodeAt(le);if(z>=55296&&z<=56319){const xe=z-55296;le++,Ve(le<F.length,"Surrogate pair missing trail surrogate."),z=65536+(xe<<10)+(F.charCodeAt(le)-56320)}z<128?N[V++]=z:z<2048?(N[V++]=z>>6|192,N[V++]=63&z|128):z<65536?(N[V++]=z>>12|224,N[V++]=z>>6&63|128,N[V++]=63&z|128):(N[V++]=z>>18|240,N[V++]=z>>12&63|128,N[V++]=z>>6&63|128,N[V++]=63&z|128)}return N},Xr=function(F){let N=0;for(let V=0;V<F.length;V++){const le=F.charCodeAt(V);le<128?N++:le<2048?N+=2:le>=55296&&le<=56319?(N+=4,V++):N+=3}return N};function uc(F){return F&&F._delegate?F._delegate:F}},345:(Us,jr,ft)=>{ft.d(jr,{A:()=>Pr});var x=ft(76),Ve=ft(362),Pe=ft(852),ie=ft(41);class $t{constructor(pt,Et){this._delegate=pt,this.firebase=Et,(0,Pe._addComponent)(pt,new Ve.uA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Pe.deleteApp)(this._delegate)))}_getService(pt,Et=Pe._DEFAULT_ENTRY_NAME){var yr;this._delegate.checkDestroyed();const $r=this._delegate.container.getProvider(pt);return!$r.isInitialized()&&"EXPLICIT"===(null===(yr=$r.getComponent())||void 0===yr?void 0:yr.instantiationMode)&&$r.initialize(),$r.getImmediate({identifier:Et})}_removeServiceInstance(pt,Et=Pe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(Et)}_addComponent(pt){(0,Pe._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,Pe._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pn=new x.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),pe=function Wt(){const Kt=function Hr(Kt){const pt={},Et={__esModule:!0,initializeApp:function mn(et,qn={}){const gn=Pe.initializeApp(et,qn);if((0,x.gR)(pt,gn.name))return pt[gn.name];const me=new Kt(gn,Et);return pt[gn.name]=me,me},app:$r,registerVersion:Pe.registerVersion,setLogLevel:Pe.setLogLevel,onLog:Pe.onLog,apps:null,SDK_VERSION:Pe.SDK_VERSION,INTERNAL:{registerComponent:function jt(et){const qn=et.name,gn=qn.replace("-compat","");if(Pe._registerComponent(et)&&"PUBLIC"===et.type){const me=(En=$r())=>{if("function"!=typeof En[gn])throw Pn.create("invalid-app-argument",{appName:qn});return En[gn]()};void 0!==et.serviceProps&&(0,x.zw)(me,et.serviceProps),Et[gn]=me,Kt.prototype[gn]=function(...En){return this._getService.bind(this,qn).apply(this,et.multipleInstances?En:[])}}return"PUBLIC"===et.type?Et[gn]:null},removeApp:function yr(et){delete pt[et]},useAsService:function Ii(et,qn){return"serverAuth"===qn?null:qn},modularAPIs:Pe}};function $r(et){if(!(0,x.gR)(pt,et=et||Pe._DEFAULT_ENTRY_NAME))throw Pn.create("no-app",{appName:et});return pt[et]}return Et.default=Et,Object.defineProperty(Et,"apps",{get:function Bt(){return Object.keys(pt).map(et=>pt[et])}}),$r.App=Kt,Et}($t);return Kt.INTERNAL=Object.assign(Object.assign({},Kt.INTERNAL),{createFirebaseNamespace:Wt,extendNamespace:function pt(Et){(0,x.zw)(Kt,Et)},createSubscribe:x.tD,ErrorFactory:x.FA,deepExtend:x.zw}),Kt}(),ye=new ie.Vy("@firebase/app-compat");if((0,x.Bd)()&&void 0!==window.firebase){ye.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Kt=window.firebase.SDK_VERSION;Kt&&Kt.indexOf("LITE")>=0&&ye.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pr=pe;!function Lt(Kt){(0,Pe.registerVersion)("@firebase/app-compat","0.2.38",Kt)}()},852:(Us,jr,ft)=>{ft.r(jr),ft.d(jr,{FirebaseError:()=>ie.g,SDK_VERSION:()=>Bo,_DEFAULT_ENTRY_NAME:()=>Ti,_addComponent:()=>Zr,_addOrOverwriteComponent:()=>sc,_apps:()=>Ci,_clearComponents:()=>Nr,_components:()=>Ai,_getProvider:()=>ps,_isFirebaseApp:()=>gs,_isFirebaseServerApp:()=>cl,_registerComponent:()=>fs,_removeServiceInstance:()=>ms,_serverApps:()=>Uo,deleteApp:()=>pa,getApp:()=>lc,getApps:()=>tn,initializeApp:()=>Jr,initializeServerApp:()=>$u,onLog:()=>N,registerVersion:()=>F,setLogLevel:()=>V});var x=ft(467),Ve=ft(362),Pe=ft(41),ie=ft(76);const $t=(X,$)=>$.some(he=>X instanceof he);let Ue,Pn;const pe=new WeakMap,ye=new WeakMap,Be=new WeakMap,bt=new WeakMap,Lt=new WeakMap;let pt={get(X,$,he){if(X instanceof IDBTransaction){if("done"===$)return ye.get(X);if("objectStoreNames"===$)return X.objectStoreNames||Be.get(X);if("store"===$)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return mn(X[$])},set:(X,$,he)=>(X[$]=he,!0),has:(X,$)=>X instanceof IDBTransaction&&("done"===$||"store"===$)||$ in X};function $r(X){return"function"==typeof X?function yr(X){return X!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Wt(){return Pn||(Pn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(X)?function(...$){return X.apply(Bt(this),$),mn(pe.get(this))}:function(...$){return mn(X.apply(Bt(this),$))}:function($,...he){const Re=X.call(Bt(this),$,...he);return Be.set(Re,$.sort?$.sort():[$]),mn(Re)}}(X):(X instanceof IDBTransaction&&function Kt(X){if(ye.has(X))return;const $=new Promise((he,Re)=>{const ct=()=>{X.removeEventListener("complete",dt),X.removeEventListener("error",Tt),X.removeEventListener("abort",Tt)},dt=()=>{he(),ct()},Tt=()=>{Re(X.error||new DOMException("AbortError","AbortError")),ct()};X.addEventListener("complete",dt),X.addEventListener("error",Tt),X.addEventListener("abort",Tt)});ye.set(X,$)}(X),$t(X,function Hr(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(X,pt):X)}function mn(X){if(X instanceof IDBRequest)return function Pr(X){const $=new Promise((he,Re)=>{const ct=()=>{X.removeEventListener("success",dt),X.removeEventListener("error",Tt)},dt=()=>{he(mn(X.result)),ct()},Tt=()=>{Re(X.error),ct()};X.addEventListener("success",dt),X.addEventListener("error",Tt)});return $.then(he=>{he instanceof IDBCursor&&pe.set(he,X)}).catch(()=>{}),Lt.set($,X),$}(X);if(bt.has(X))return bt.get(X);const $=$r(X);return $!==X&&(bt.set(X,$),Lt.set($,X)),$}const Bt=X=>Lt.get(X),et=["get","getKey","getAll","getAllKeys","count"],qn=["put","add","delete","clear"],gn=new Map;function me(X,$){if(!(X instanceof IDBDatabase)||$ in X||"string"!=typeof $)return;if(gn.get($))return gn.get($);const he=$.replace(/FromIndex$/,""),Re=$!==he,ct=qn.includes(he);if(!(he in(Re?IDBIndex:IDBObjectStore).prototype)||!ct&&!et.includes(he))return;const dt=function(){var Tt=(0,x.A)(function*(kn,...lt){const ho=this.transaction(kn,ct?"readwrite":"readonly");let fc=ho.store;return Re&&(fc=fc.index(lt.shift())),(yield Promise.all([fc[he](...lt),ct&&ho.done]))[0]});return function(lt){return Tt.apply(this,arguments)}}();return gn.set($,dt),dt}!function Et(X){pt=X(pt)}(X=>({...X,get:($,he,Re)=>me($,he)||X.get($,he,Re),has:($,he)=>!!me($,he)||X.has($,he)}));class En{constructor($){this.container=$}getPlatformInfoString(){return this.container.getProviders().map(he=>{if(function er(X){const $=X.getComponent();return"VERSION"===$?.type}(he)){const Re=he.getImmediate();return`${Re.library}/${Re.version}`}return null}).filter(he=>he).join(" ")}}const wi="@firebase/app",ds="0.10.8",li=new Pe.Vy("@firebase/app"),Ti="[DEFAULT]",Hu={[wi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Ci=new Map,Uo=new Map,Ai=new Map;function Zr(X,$){try{X.container.addComponent($)}catch(he){li.debug(`Component ${$.name} failed to register with FirebaseApp ${X.name}`,he)}}function sc(X,$){X.container.addOrOverwriteComponent($)}function fs(X){const $=X.name;if(Ai.has($))return li.debug(`There were multiple attempts to register component ${$}.`),!1;Ai.set($,X);for(const he of Ci.values())Zr(he,X);for(const he of Uo.values())Zr(he,X);return!0}function ps(X,$){const he=X.container.getProvider("heartbeat").getImmediate({optional:!0});return he&&he.triggerHeartbeat(),X.container.getProvider($)}function ms(X,$,he=Ti){ps(X,$).clearInstance(he)}function gs(X){return void 0!==X.options}function cl(X){return void 0!==X.settings}function Nr(){Ai.clear()}const Xr=new ie.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ac{constructor($,he,Re){this._isDeleted=!1,this._options=Object.assign({},$),this._config=Object.assign({},he),this._name=he.name,this._automaticDataCollectionEnabled=he.automaticDataCollectionEnabled,this._container=Re,this.container.addComponent(new Ve.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($){this.checkDestroyed(),this._automaticDataCollectionEnabled=$}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($){this._isDeleted=$}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}class cc extends ac{constructor($,he,Re,ct){const dt=void 0!==he.automaticDataCollectionEnabled&&he.automaticDataCollectionEnabled,Tt={name:Re,automaticDataCollectionEnabled:dt};super(void 0!==$.apiKey?$:$.options,Tt,ct),this._serverConfig=Object.assign({automaticDataCollectionEnabled:dt},he),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,he.releaseOnDeref=void 0,F(wi,ds,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount($){this.isDeleted||(this._refCount++,void 0!==$&&null!==this._finalizationRegistry&&this._finalizationRegistry.register($,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){pa(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Xr.create("server-app-deleted")}}const Bo="10.12.5";function Jr(X,$={}){let he=X;"object"!=typeof $&&($={name:$});const Re=Object.assign({name:Ti,automaticDataCollectionEnabled:!1},$),ct=Re.name;if("string"!=typeof ct||!ct)throw Xr.create("bad-app-name",{appName:String(ct)});if(he||(he=(0,ie.T9)()),!he)throw Xr.create("no-options");const dt=Ci.get(ct);if(dt){if((0,ie.bD)(he,dt.options)&&(0,ie.bD)(Re,dt.config))return dt;throw Xr.create("duplicate-app",{appName:ct})}const Tt=new Ve.h1(ct);for(const lt of Ai.values())Tt.addComponent(lt);const kn=new ac(he,Re,Tt);return Ci.set(ct,kn),kn}function $u(X,$){if((0,ie.Bd)()&&!(0,ie.p7)())throw Xr.create("invalid-server-app-environment");let he;void 0===$.automaticDataCollectionEnabled&&($.automaticDataCollectionEnabled=!1),he=gs(X)?X.options:X;const Re=Object.assign(Object.assign({},$),he);if(void 0!==Re.releaseOnDeref&&delete Re.releaseOnDeref,void 0!==$.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Xr.create("finalization-registry-not-supported",{});const dt=""+(ho=JSON.stringify(Re),[...ho].reduce((fc,eg)=>Math.imul(31,fc)+eg.charCodeAt(0)|0,0)),Tt=Uo.get(dt);var ho;if(Tt)return Tt.incRefCount($.releaseOnDeref),Tt;const kn=new Ve.h1(dt);for(const ho of Ai.values())kn.addComponent(ho);const lt=new cc(he,$,dt,kn);return Uo.set(dt,lt),lt}function lc(X=Ti){const $=Ci.get(X);if(!$&&X===Ti&&(0,ie.T9)())return Jr();if(!$)throw Xr.create("no-app",{appName:X});return $}function tn(){return Array.from(Ci.values())}function pa(X){return uc.apply(this,arguments)}function uc(){return(uc=(0,x.A)(function*(X){let $=!1;const he=X.name;Ci.has(he)?($=!0,Ci.delete(he)):Uo.has(he)&&X.decRefCount()<=0&&(Uo.delete(he),$=!0),$&&(yield Promise.all(X.container.getProviders().map(Re=>Re.delete())),X.isDeleted=!0)})).apply(this,arguments)}function F(X,$,he){var Re;let ct=null!==(Re=Hu[X])&&void 0!==Re?Re:X;he&&(ct+=`-${he}`);const dt=ct.match(/\s|\//),Tt=$.match(/\s|\//);if(dt||Tt){const kn=[`Unable to register library "${ct}" with version "${$}":`];return dt&&kn.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),dt&&Tt&&kn.push("and"),Tt&&kn.push(`version name "${$}" contains illegal characters (whitespace or "/")`),void li.warn(kn.join(" "))}fs(new Ve.uA(`${ct}-version`,()=>({library:ct,version:$}),"VERSION"))}function N(X,$){if(null!==X&&"function"!=typeof X)throw Xr.create("invalid-log-argument");(0,Pe.Ey)(X,$)}function V(X){(0,Pe.He)(X)}const le="firebase-heartbeat-database",z=1,xe="firebase-heartbeat-store";let Fe=null;function He(){return Fe||(Fe=function jt(X,$,{blocked:he,upgrade:Re,blocking:ct,terminated:dt}={}){const Tt=indexedDB.open(X,$),kn=mn(Tt);return Re&&Tt.addEventListener("upgradeneeded",lt=>{Re(mn(Tt.result),lt.oldVersion,lt.newVersion,mn(Tt.transaction),lt)}),he&&Tt.addEventListener("blocked",lt=>he(lt.oldVersion,lt.newVersion,lt)),kn.then(lt=>{dt&&lt.addEventListener("close",()=>dt()),ct&&lt.addEventListener("versionchange",ho=>ct(ho.oldVersion,ho.newVersion,ho))}).catch(()=>{}),kn}(le,z,{upgrade:(X,$)=>{if(0===$)try{X.createObjectStore(xe)}catch(he){console.warn(he)}}}).catch(X=>{throw Xr.create("idb-open",{originalErrorMessage:X.message})})),Fe}function Ee(){return(Ee=(0,x.A)(function*(X){try{const he=(yield He()).transaction(xe),Re=yield he.objectStore(xe).get(ei(X));return yield he.done,Re}catch($){if($ instanceof ie.g)li.warn($.message);else{const he=Xr.create("idb-get",{originalErrorMessage:$?.message});li.warn(he.message)}}})).apply(this,arguments)}function br(X,$){return mt.apply(this,arguments)}function mt(){return(mt=(0,x.A)(function*(X,$){try{const Re=(yield He()).transaction(xe,"readwrite");yield Re.objectStore(xe).put($,ei(X)),yield Re.done}catch(he){if(he instanceof ie.g)li.warn(he.message);else{const Re=Xr.create("idb-set",{originalErrorMessage:he?.message});li.warn(Re.message)}}})).apply(this,arguments)}function ei(X){return`${X.name}!${X.options.appId}`}class ll{constructor($){this.container=$,this._heartbeatsCache=null;const he=this.container.getProvider("app").getImmediate();this._storage=new Jm(he),this._heartbeatsCachePromise=this._storage.read().then(Re=>(this._heartbeatsCache=Re,Re))}triggerHeartbeat(){var $=this;return(0,x.A)(function*(){var he,Re;const dt=$.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=zu();if((null!=(null===(he=$._heartbeatsCache)||void 0===he?void 0:he.heartbeats)||($._heartbeatsCache=yield $._heartbeatsCachePromise,null!=(null===(Re=$._heartbeatsCache)||void 0===Re?void 0:Re.heartbeats)))&&$._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!$._heartbeatsCache.heartbeats.some(kn=>kn.date===Tt))return $._heartbeatsCache.heartbeats.push({date:Tt,agent:dt}),$._heartbeatsCache.heartbeats=$._heartbeatsCache.heartbeats.filter(kn=>{const lt=new Date(kn.date).valueOf();return Date.now()-lt<=2592e6}),$._storage.overwrite($._heartbeatsCache)})()}getHeartbeatsHeader(){var $=this;return(0,x.A)(function*(){var he;if(null===$._heartbeatsCache&&(yield $._heartbeatsCachePromise),null==(null===(he=$._heartbeatsCache)||void 0===he?void 0:he.heartbeats)||0===$._heartbeatsCache.heartbeats.length)return"";const Re=zu(),{heartbeatsToSend:ct,unsentEntries:dt}=function dc(X,$=1024){const he=[];let Re=X.slice();for(const ct of X){const dt=he.find(Tt=>Tt.agent===ct.agent);if(dt){if(dt.dates.push(ct.date),Ge(he)>$){dt.dates.pop();break}}else if(he.push({agent:ct.agent,dates:[ct.date]}),Ge(he)>$){he.pop();break}Re=Re.slice(1)}return{heartbeatsToSend:he,unsentEntries:Re}}($._heartbeatsCache.heartbeats),Tt=(0,ie.Uj)(JSON.stringify({version:2,heartbeats:ct}));return $._heartbeatsCache.lastSentHeartbeatDate=Re,dt.length>0?($._heartbeatsCache.heartbeats=dt,yield $._storage.overwrite($._heartbeatsCache)):($._heartbeatsCache.heartbeats=[],$._storage.overwrite($._heartbeatsCache)),Tt})()}}function zu(){return(new Date).toISOString().substring(0,10)}class Jm{constructor($){this.app=$,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,x.A)(function*(){return!!(0,ie.zW)()&&(0,ie.eX)().then(()=>!0).catch(()=>!1)})()}read(){var $=this;return(0,x.A)(function*(){if(yield $._canUseIndexedDBPromise){const Re=yield function Di(X){return Ee.apply(this,arguments)}($.app);return Re?.heartbeats?Re:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite($){var he=this;return(0,x.A)(function*(){var Re;if(yield he._canUseIndexedDBPromise){const dt=yield he.read();return br(he.app,{lastSentHeartbeatDate:null!==(Re=$.lastSentHeartbeatDate)&&void 0!==Re?Re:dt.lastSentHeartbeatDate,heartbeats:$.heartbeats})}})()}add($){var he=this;return(0,x.A)(function*(){var Re;if(yield he._canUseIndexedDBPromise){const dt=yield he.read();return br(he.app,{lastSentHeartbeatDate:null!==(Re=$.lastSentHeartbeatDate)&&void 0!==Re?Re:dt.lastSentHeartbeatDate,heartbeats:[...dt.heartbeats,...$.heartbeats]})}})()}}function Ge(X){return(0,ie.Uj)(JSON.stringify({version:2,heartbeats:X})).length}!function hc(X){fs(new Ve.uA("platform-logger",$=>new En($),"PRIVATE")),fs(new Ve.uA("heartbeat",$=>new ll($),"PRIVATE")),F(wi,ds,X),F(wi,ds,"esm2017"),F("fire-js","")}("")},362:(Us,jr,ft)=>{ft.d(jr,{Kq:()=>$t,h1:()=>Hr,uA:()=>Pe});var x=ft(467),Ve=ft(76);class Pe{constructor(pe,ye,Be){this.name=pe,this.instanceFactory=ye,this.type=Be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(pe){return this.instantiationMode=pe,this}setMultipleInstances(pe){return this.multipleInstances=pe,this}setServiceProps(pe){return this.serviceProps=pe,this}setInstanceCreatedCallback(pe){return this.onInstanceCreated=pe,this}}const ie="[DEFAULT]";class $t{constructor(pe,ye){this.name=pe,this.container=ye,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(pe){const ye=this.normalizeInstanceIdentifier(pe);if(!this.instancesDeferred.has(ye)){const Be=new Ve.cY;if(this.instancesDeferred.set(ye,Be),this.isInitialized(ye)||this.shouldAutoInitialize())try{const bt=this.getOrInitializeService({instanceIdentifier:ye});bt&&Be.resolve(bt)}catch{}}return this.instancesDeferred.get(ye).promise}getImmediate(pe){var ye;const Be=this.normalizeInstanceIdentifier(pe?.identifier),bt=null!==(ye=pe?.optional)&&void 0!==ye&&ye;if(!this.isInitialized(Be)&&!this.shouldAutoInitialize()){if(bt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Be})}catch(Lt){if(bt)return null;throw Lt}}getComponent(){return this.component}setComponent(pe){if(pe.name!==this.name)throw Error(`Mismatching Component ${pe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=pe,this.shouldAutoInitialize()){if(function Pn(Wt){return"EAGER"===Wt.instantiationMode}(pe))try{this.getOrInitializeService({instanceIdentifier:ie})}catch{}for(const[ye,Be]of this.instancesDeferred.entries()){const bt=this.normalizeInstanceIdentifier(ye);try{const Lt=this.getOrInitializeService({instanceIdentifier:bt});Be.resolve(Lt)}catch{}}}}clearInstance(pe=ie){this.instancesDeferred.delete(pe),this.instancesOptions.delete(pe),this.instances.delete(pe)}delete(){var pe=this;return(0,x.A)(function*(){const ye=Array.from(pe.instances.values());yield Promise.all([...ye.filter(Be=>"INTERNAL"in Be).map(Be=>Be.INTERNAL.delete()),...ye.filter(Be=>"_delete"in Be).map(Be=>Be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(pe=ie){return this.instances.has(pe)}getOptions(pe=ie){return this.instancesOptions.get(pe)||{}}initialize(pe={}){const{options:ye={}}=pe,Be=this.normalizeInstanceIdentifier(pe.instanceIdentifier);if(this.isInitialized(Be))throw Error(`${this.name}(${Be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const bt=this.getOrInitializeService({instanceIdentifier:Be,options:ye});for(const[Lt,Pr]of this.instancesDeferred.entries())Be===this.normalizeInstanceIdentifier(Lt)&&Pr.resolve(bt);return bt}onInit(pe,ye){var Be;const bt=this.normalizeInstanceIdentifier(ye),Lt=null!==(Be=this.onInitCallbacks.get(bt))&&void 0!==Be?Be:new Set;Lt.add(pe),this.onInitCallbacks.set(bt,Lt);const Pr=this.instances.get(bt);return Pr&&pe(Pr,bt),()=>{Lt.delete(pe)}}invokeOnInitCallbacks(pe,ye){const Be=this.onInitCallbacks.get(ye);if(Be)for(const bt of Be)try{bt(pe,ye)}catch{}}getOrInitializeService({instanceIdentifier:pe,options:ye={}}){let Be=this.instances.get(pe);if(!Be&&this.component&&(Be=this.component.instanceFactory(this.container,{instanceIdentifier:(Wt=pe,Wt===ie?void 0:Wt),options:ye}),this.instances.set(pe,Be),this.instancesOptions.set(pe,ye),this.invokeOnInitCallbacks(Be,pe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,pe,Be)}catch{}var Wt;return Be||null}normalizeInstanceIdentifier(pe=ie){return this.component?this.component.multipleInstances?pe:ie:pe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Hr{constructor(pe){this.name=pe,this.providers=new Map}addComponent(pe){const ye=this.getProvider(pe.name);if(ye.isComponentSet())throw new Error(`Component ${pe.name} has already been registered with ${this.name}`);ye.setComponent(pe)}addOrOverwriteComponent(pe){this.getProvider(pe.name).isComponentSet()&&this.providers.delete(pe.name),this.addComponent(pe)}getProvider(pe){if(this.providers.has(pe))return this.providers.get(pe);const ye=new $t(pe,this);return this.providers.set(pe,ye),ye}getProviders(){return Array.from(this.providers.values())}}},41:(Us,jr,ft)=>{ft.d(jr,{$b:()=>Ve,Ey:()=>Wt,He:()=>Hr,Vy:()=>Pn});const x=[];var Ve=function(pe){return pe[pe.DEBUG=0]="DEBUG",pe[pe.VERBOSE=1]="VERBOSE",pe[pe.INFO=2]="INFO",pe[pe.WARN=3]="WARN",pe[pe.ERROR=4]="ERROR",pe[pe.SILENT=5]="SILENT",pe}(Ve||{});const Pe={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},ie=Ve.INFO,$t={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},Ue=(pe,ye,...Be)=>{if(ye<pe.logLevel)return;const bt=(new Date).toISOString(),Lt=$t[ye];if(!Lt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ye})`);console[Lt](`[${bt}]  ${pe.name}:`,...Be)};class Pn{constructor(ye){this.name=ye,this._logLevel=ie,this._logHandler=Ue,this._userLogHandler=null,x.push(this)}get logLevel(){return this._logLevel}set logLevel(ye){if(!(ye in Ve))throw new TypeError(`Invalid value "${ye}" assigned to \`logLevel\``);this._logLevel=ye}setLogLevel(ye){this._logLevel="string"==typeof ye?Pe[ye]:ye}get logHandler(){return this._logHandler}set logHandler(ye){if("function"!=typeof ye)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ye}get userLogHandler(){return this._userLogHandler}set userLogHandler(ye){this._userLogHandler=ye}debug(...ye){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...ye),this._logHandler(this,Ve.DEBUG,...ye)}log(...ye){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...ye),this._logHandler(this,Ve.VERBOSE,...ye)}info(...ye){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...ye),this._logHandler(this,Ve.INFO,...ye)}warn(...ye){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...ye),this._logHandler(this,Ve.WARN,...ye)}error(...ye){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...ye),this._logHandler(this,Ve.ERROR,...ye)}}function Hr(pe){x.forEach(ye=>{ye.setLogLevel(pe)})}function Wt(pe,ye){for(const Be of x){let bt=null;ye&&ye.level&&(bt=Pe[ye.level]),Be.userLogHandler=null===pe?null:(Lt,Pr,...Kt)=>{const pt=Kt.map(Et=>{if(null==Et)return null;if("string"==typeof Et)return Et;if("number"==typeof Et||"boolean"==typeof Et)return Et.toString();if(Et instanceof Error)return Et.message;try{return JSON.stringify(Et)}catch{return null}}).filter(Et=>Et).join(" ");Pr>=(bt??Lt.logLevel)&&pe({level:Ve[Pr].toLowerCase(),message:pt,args:Kt,type:Lt.name})}}}},254:(Us,jr,ft)=>{ft.r(jr);var x=ft(467),Ve=ft(345),Pe=ft(852),ie=ft(76),$t=ft(41),Ue=ft(635),Pn=ft(362);const Wt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Pr=function bt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Kt=function Lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new ie.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yr=new $t.Vy("@firebase/auth");function mn(p,...u){yr.logLevel<=$t.$b.ERROR&&yr.error(`Auth (${Pe.SDK_VERSION}): ${p}`,...u)}function Bt(p,...u){throw gn(p,...u)}function jt(p,...u){return gn(p,...u)}function Ii(p,u,d){const g=Object.assign(Object.assign({},Kt()),{[u]:d});return new ie.FA("auth","Firebase",g).create(u,{appName:p.name})}function et(p){return Ii(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qn(p,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Bt(p,"argument-error"),Ii(p,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gn(p,...u){if("string"!=typeof p){const d=u[0],g=[...u.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(d,...g)}return pt.create(p,...u)}function me(p,u,...d){if(!p)throw gn(u,...d)}function En(p){const u="INTERNAL ASSERTION FAILED: "+p;throw mn(u),new Error(u)}function er(p,u){p||En(u)}function wi(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function ds(){return"http:"===li()||"https:"===li()}function li(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class K{constructor(u,d){this.shortDelay=u,this.longDelay=d,er(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,ie.jZ)()||(0,ie.lV)()}get(){return function ic(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ds()||(0,ie.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function te(p,u){er(p.emulator,"Emulator should always be set here");const{url:d}=p.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class ue{static initialize(u,d,g){this.fetchImpl=u,d&&(this.headersImpl=d),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void En("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void En("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void En("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const de={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},we=new K(3e4,6e4);function fe(p,u){return p.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:p.tenantId}):u}function Me(p,u,d,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,x.A)(function*(p,u,d,g,b={}){return Gn(p,b,(0,x.A)(function*(){let w={},M={};g&&("GET"===u?M=g:w={body:JSON.stringify(g)});const j=(0,ie.Am)(Object.assign({key:p.config.apiKey},M)).slice(1),se=yield p._getAdditionalHeaders();return se["Content-Type"]="application/json",p.languageCode&&(se["X-Firebase-Locale"]=p.languageCode),ue.fetch()(hs(p,p.config.apiHost,d,j),Object.assign({method:u,headers:se,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function Gn(p,u,d){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,x.A)(function*(p,u,d){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},de),u);try{const b=new tr(p),w=yield Promise.race([d(),b.promise]);b.clearNetworkTimeout();const M=yield w.json();if("needConfirmation"in M)throw Nn(p,"account-exists-with-different-credential",M);if(w.ok&&!("errorMessage"in M))return M;{const j=w.ok?M.errorMessage:M.error.message,[se,Ce]=j.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===se)throw Nn(p,"credential-already-in-use",M);if("EMAIL_EXISTS"===se)throw Nn(p,"email-already-in-use",M);if("USER_DISABLED"===se)throw Nn(p,"user-disabled",M);const ke=g[se]||se.toLowerCase().replace(/[_\s]+/g,"-");if(Ce)throw Ii(p,ke,Ce);Bt(p,ke)}}catch(b){if(b instanceof ie.g)throw b;Bt(p,"network-request-failed",{message:String(b)})}})).apply(this,arguments)}function At(p,u,d,g){return cn.apply(this,arguments)}function cn(){return(cn=(0,x.A)(function*(p,u,d,g,b={}){const w=yield Me(p,u,d,g,b);return"mfaPendingCredential"in w&&Bt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function hs(p,u,d,g){const b=`${u}${d}?${g}`;return p.config.emulator?te(p.config,b):`${p.config.apiScheme}://${b}`}function Ye(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tr{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,g)=>{this.timer=setTimeout(()=>g(jt(this.auth,"network-request-failed")),we.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nn(p,u,d){const g={appName:p.name};d.email&&(g.email=d.email),d.phoneNumber&&(g.phoneNumber=d.phoneNumber);const b=jt(p,u,g);return b.customData._tokenResponse=d,b}function vr(p){return void 0!==p&&void 0!==p.getResponse}function zt(p){return void 0!==p&&void 0!==p.enterprise}class oc{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return Ye(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function Bs(){return(Bs=(0,x.A)(function*(p){return(yield Me(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Gi(p,u){return js.apply(this,arguments)}function js(){return(js=(0,x.A)(function*(p,u){return Me(p,"GET","/v2/recaptchaConfig",fe(p,u))})).apply(this,arguments)}function Ti(){return(Ti=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function Ci(){return(Ci=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Uo(p,u){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Zr(p){if(p)try{const u=new Date(Number(p));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function ps(){return(ps=(0,x.A)(function*(p,u=!1){const d=(0,ie.Ku)(p),g=yield d.getIdToken(u),b=gs(g);me(b&&b.exp&&b.auth_time&&b.iat,d.auth,"internal-error");const w="object"==typeof b.firebase?b.firebase:void 0,M=w?.sign_in_provider;return{claims:b,token:g,authTime:Zr(ms(b.auth_time)),issuedAtTime:Zr(ms(b.iat)),expirationTime:Zr(ms(b.exp)),signInProvider:M||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function ms(p){return 1e3*Number(p)}function gs(p){const[u,d,g]=p.split(".");if(void 0===u||void 0===d||void 0===g)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const b=(0,ie.u)(d);return b?JSON.parse(b):(mn("Failed to decode base64 JWT payload"),null)}catch(b){return mn("Caught error parsing JWT payload as JSON",b?.toString()),null}}function cl(p){const u=gs(p);return me(u,"internal-error"),me(typeof u.exp<"u","internal-error"),me(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}function Nr(p,u){return _s.apply(this,arguments)}function _s(){return(_s=(0,x.A)(function*(p,u,d=!1){if(d)return u;try{return yield u}catch(g){throw g instanceof ie.g&&function Xr({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class ac{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const b=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,b)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const g=this.getInterval(u);this.timerId=setTimeout((0,x.A)(function*(){yield d.iteration()}),g)}iteration(){var u=this;return(0,x.A)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class cc{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zr(this.lastLoginAt),this.creationTime=Zr(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bo(p){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,x.A)(function*(p){var u;const d=p.auth,g=yield p.getIdToken(),b=yield Nr(p,Uo(d,{idToken:g}));me(b?.users.length,d,"internal-error");const w=b.users[0];p._notifyReloadListener(w);const M=null!==(u=w.providerUserInfo)&&void 0!==u&&u.length?pa(w.providerUserInfo):[],j=function tn(p,u){return[...p.filter(g=>!u.some(b=>b.providerId===g.providerId)),...u]}(p.providerData,M),ke=!!p.isAnonymous&&!(p.email&&w.passwordHash||j?.length),Oe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:j,metadata:new cc(w.createdAt,w.lastLoginAt),isAnonymous:ke};Object.assign(p,Oe)})).apply(this,arguments)}function lc(){return(lc=(0,x.A)(function*(p){const u=(0,ie.Ku)(p);yield Bo(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function pa(p){return p.map(u=>{var{providerId:d}=u,g=(0,Ue.Tt)(u,["providerId"]);return{providerId:d,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function F(){return(F=(0,x.A)(function*(p,u){const d=yield Gn(p,{},(0,x.A)(function*(){const g=(0,ie.Am)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:b,apiKey:w}=p.config,M=hs(p,b,"/v1/token",`key=${w}`),j=yield p._getAdditionalHeaders();return j["Content-Type"]="application/x-www-form-urlencoded",ue.fetch()(M,{method:"POST",headers:j,body:g})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function V(){return(V=(0,x.A)(function*(p,u){return Me(p,"POST","/v2/accounts:revokeToken",fe(p,u))})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){me(u.idToken,"internal-error"),me(typeof u.idToken<"u","internal-error"),me(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):cl(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}updateFromIdToken(u){me(0!==u.length,"internal-error");const d=cl(u);this.updateTokensAndExpiration(u,null,d)}getToken(u,d=!1){var g=this;return(0,x.A)(function*(){return d||!g.accessToken||g.isExpired?(me(g.refreshToken,u,"user-token-expired"),g.refreshToken?(yield g.refresh(u,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var g=this;return(0,x.A)(function*(){const{accessToken:b,refreshToken:w,expiresIn:M}=yield function uc(p,u){return F.apply(this,arguments)}(u,d);g.updateTokensAndExpiration(b,w,Number(M))})()}updateTokensAndExpiration(u,d,g){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(u,d){const{refreshToken:g,accessToken:b,expirationTime:w}=d,M=new le;return g&&(me("string"==typeof g,"internal-error",{appName:u}),M.refreshToken=g),b&&(me("string"==typeof b,"internal-error",{appName:u}),M.accessToken=b),w&&(me("number"==typeof w,"internal-error",{appName:u}),M.expirationTime=w),M}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return En("not implemented")}}function z(p,u){me("string"==typeof p||typeof p>"u","internal-error",{appName:u})}class xe{constructor(u){var{uid:d,auth:g,stsTokenManager:b}=u,w=(0,Ue.Tt)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ac(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=g,this.stsTokenManager=b,this.accessToken=b.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new cc(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,x.A)(function*(){const g=yield Nr(d,d.stsTokenManager.getToken(d.auth,u));return me(g,d.auth,"internal-error"),d.accessToken!==g&&(d.accessToken=g,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),g})()}getIdTokenResult(u){return function fs(p){return ps.apply(this,arguments)}(this,u)}reload(){return function $u(p){return lc.apply(this,arguments)}(this)}_assign(u){this!==u&&(me(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new xe(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var g=this;return(0,x.A)(function*(){let b=!1;u.idToken&&u.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(u),b=!0),d&&(yield Bo(g)),yield g.auth._persistUserIfCurrent(g),b&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var u=this;return(0,x.A)(function*(){if((0,Pe._isFirebaseServerApp)(u.auth.app))return Promise.reject(et(u.auth));const d=yield u.getIdToken();return yield Nr(u,function al(p,u){return Ti.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var g,b,w,M,j,se,Ce,ke;const Oe=null!==(g=d.displayName)&&void 0!==g?g:void 0,Fn=null!==(b=d.email)&&void 0!==b?b:void 0,Ko=null!==(w=d.phoneNumber)&&void 0!==w?w:void 0,oe=null!==(M=d.photoURL)&&void 0!==M?M:void 0,_t=null!==(j=d.tenantId)&&void 0!==j?j:void 0,Fl=null!==(se=d._redirectEventId)&&void 0!==se?se:void 0,Ed=null!==(Ce=d.createdAt)&&void 0!==Ce?Ce:void 0,Yt=null!==(ke=d.lastLoginAt)&&void 0!==ke?ke:void 0,{uid:Mf,emailVerified:Ll,isAnonymous:vo,providerData:Id,stsTokenManager:Pf}=d;me(Mf&&Pf,u,"internal-error");const QE=le.fromJSON(this.name,Pf);me("string"==typeof Mf,u,"internal-error"),z(Oe,u.name),z(Fn,u.name),me("boolean"==typeof Ll,u,"internal-error"),me("boolean"==typeof vo,u,"internal-error"),z(Ko,u.name),z(oe,u.name),z(_t,u.name),z(Fl,u.name),z(Ed,u.name),z(Yt,u.name);const YE=new xe({uid:Mf,auth:u,email:Fn,emailVerified:Ll,displayName:Oe,isAnonymous:vo,photoURL:oe,phoneNumber:Ko,tenantId:_t,stsTokenManager:QE,createdAt:Ed,lastLoginAt:Yt});return Id&&Array.isArray(Id)&&(YE.providerData=Id.map(FF=>Object.assign({},FF))),Fl&&(YE._redirectEventId=Fl),YE}static _fromIdTokenResponse(u,d,g=!1){return(0,x.A)(function*(){const b=new le;b.updateFromServerResponse(d);const w=new xe({uid:d.localId,auth:u,stsTokenManager:b,isAnonymous:g});return yield Bo(w),w})()}static _fromGetAccountInfoResponse(u,d,g){return(0,x.A)(function*(){const b=d.users[0];me(void 0!==b.localId,"internal-error");const w=void 0!==b.providerUserInfo?pa(b.providerUserInfo):[],M=!(b.email&&b.passwordHash||w?.length),j=new le;j.updateFromIdToken(g);const se=new xe({uid:b.localId,auth:u,stsTokenManager:j,isAnonymous:M}),Ce={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:w,metadata:new cc(b.createdAt,b.lastLoginAt),isAnonymous:!(b.email&&b.passwordHash||w?.length)};return Object.assign(se,Ce),se})()}}const Fe=new Map;function He(p){er(p instanceof Function,"Expected a class definition");let u=Fe.get(p);return u?(er(u instanceof p,"Instance stored in cache mismatched with class"),u):(u=new p,Fe.set(p,u),u)}const Ee=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,x.A)(function*(){return!0})()}_set(d,g){var b=this;return(0,x.A)(function*(){b.storage[d]=g})()}_get(d){var g=this;return(0,x.A)(function*(){const b=g.storage[d];return void 0===b?null:b})()}_remove(d){var g=this;return(0,x.A)(function*(){delete g.storage[d]})()}_addListener(d,g){}_removeListener(d,g){}}return p.type="NONE",p})();function br(p,u,d){return`firebase:${p}:${u}:${d}`}class mt{constructor(u,d,g){this.persistence=u,this.auth=d,this.userKey=g;const{config:b,name:w}=this.auth;this.fullUserKey=br(this.userKey,b.apiKey,w),this.fullPersistenceKey=br("persistence",b.apiKey,w),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,x.A)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?xe._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,x.A)(function*(){if(d.persistence===u)return;const g=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,g?d.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,g="authUser"){return(0,x.A)(function*(){if(!d.length)return new mt(He(Ee),u,g);const b=(yield Promise.all(d.map(function(){var Ce=(0,x.A)(function*(ke){if(yield ke._isAvailable())return ke});return function(ke){return Ce.apply(this,arguments)}}()))).filter(Ce=>Ce);let w=b[0]||He(Ee);const M=br(g,u.config.apiKey,u.name);let j=null;for(const Ce of d)try{const ke=yield Ce._get(M);if(ke){const Oe=xe._fromJSON(u,ke);Ce!==w&&(j=Oe),w=Ce;break}}catch{}const se=b.filter(Ce=>Ce._shouldAllowMigration);return w._shouldAllowMigration&&se.length?(w=se[0],j&&(yield w._set(M,j.toJSON())),yield Promise.all(d.map(function(){var Ce=(0,x.A)(function*(ke){if(ke!==w)try{yield ke._remove(M)}catch{}});return function(ke){return Ce.apply(this,arguments)}}())),new mt(w,u,g)):new mt(w,u,g)})()}}function ei(p){const u=p.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(zu(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(ys(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(Jm(u))return"Blackberry";if(Ge(u))return"Webos";if(ma(u))return"Safari";if((u.includes("chrome/")||ll(u))&&!u.includes("edge/"))return"Chrome";if(dc(u))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function ys(p=(0,ie.ZQ)()){return/firefox\//i.test(p)}function ma(p=(0,ie.ZQ)()){const u=p.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function ll(p=(0,ie.ZQ)()){return/crios\//i.test(p)}function zu(p=(0,ie.ZQ)()){return/iemobile/i.test(p)}function dc(p=(0,ie.ZQ)()){return/android/i.test(p)}function Jm(p=(0,ie.ZQ)()){return/blackberry/i.test(p)}function Ge(p=(0,ie.ZQ)()){return/webos/i.test(p)}function hc(p=(0,ie.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function Re(p=(0,ie.ZQ)()){return hc(p)||dc(p)||Ge(p)||Jm(p)||/windows phone/i.test(p)||zu(p)}function dt(p,u=[]){let d;switch(p){case"Browser":d=ei((0,ie.ZQ)());break;case"Worker":d=`${ei((0,ie.ZQ)())}-${p}`;break;default:d=p}const g=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${Pe.SDK_VERSION}/${g}`}class Tt{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const g=w=>new Promise((M,j)=>{try{M(u(w))}catch(se){j(se)}});g.onAbort=d,this.queue.push(g);const b=this.queue.length-1;return()=>{this.queue[b]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,x.A)(function*(){if(d.auth.currentUser===u)return;const g=[];try{for(const b of d.queue)yield b(u),b.onAbort&&g.push(b.onAbort)}catch(b){g.reverse();for(const w of g)try{w()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:b?.message})}})()}}function lt(){return(lt=(0,x.A)(function*(p,u={}){return Me(p,"GET","/v2/passwordPolicy",fe(p,u))})).apply(this,arguments)}class fc{constructor(u){var d,g,b,w;const M=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=M.minPasswordLength)&&void 0!==d?d:6,M.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=M.maxPasswordLength),void 0!==M.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=M.containsLowercaseCharacter),void 0!==M.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=M.containsUppercaseCharacter),void 0!==M.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=M.containsNumericCharacter),void 0!==M.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=M.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(b=null===(g=u.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==b?b:"",this.forceUpgradeOnSignin=null!==(w=u.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,g,b,w,M,j;const se={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,se),this.validatePasswordCharacterOptions(u,se),se.isValid&&(se.isValid=null===(d=se.meetsMinPasswordLength)||void 0===d||d),se.isValid&&(se.isValid=null===(g=se.meetsMaxPasswordLength)||void 0===g||g),se.isValid&&(se.isValid=null===(b=se.containsLowercaseLetter)||void 0===b||b),se.isValid&&(se.isValid=null===(w=se.containsUppercaseLetter)||void 0===w||w),se.isValid&&(se.isValid=null===(M=se.containsNumericCharacter)||void 0===M||M),se.isValid&&(se.isValid=null===(j=se.containsNonAlphanumericCharacter)||void 0===j||j),se}validatePasswordLengthOptions(u,d){const g=this.customStrengthOptions.minPasswordLength,b=this.customStrengthOptions.maxPasswordLength;g&&(d.meetsMinPasswordLength=u.length>=g),b&&(d.meetsMaxPasswordLength=u.length<=b)}validatePasswordCharacterOptions(u,d){let g;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let b=0;b<u.length;b++)g=u.charAt(b),this.updatePasswordCharacterOptionsStatuses(d,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(u,d,g,b,w){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=b)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=w))}}class eg{constructor(u,d,g,b){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=g,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jb(this),this.idTokenSubscription=new jb(this),this.beforeStateQueue=new Tt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(u,d){var g=this;return d&&(this._popupRedirectResolver=He(d)),this._initializationPromise=this.queue((0,x.A)(function*(){var b,w;if(!g._deleted&&(g.persistenceManager=yield mt.create(g,u),!g._deleted)){if(null!==(b=g._popupRedirectResolver)&&void 0!==b&&b._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(d),g.lastNotifiedUid=(null===(w=g.currentUser)||void 0===w?void 0:w.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,x.A)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUserFromIdToken(u){var d=this;return(0,x.A)(function*(){try{const g=yield Uo(d,{idToken:u}),b=yield xe._fromGetAccountInfoResponse(d,g,u);yield d.directlySetCurrentUser(b)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield d.directlySetCurrentUser(null)}})()}initializeCurrentUser(u){var d=this;return(0,x.A)(function*(){var g;if((0,Pe._isFirebaseServerApp)(d.app)){const j=d.app.settings.authIdToken;return j?new Promise(se=>{setTimeout(()=>d.initializeCurrentUserFromIdToken(j).then(se,se))}):d.directlySetCurrentUser(null)}const b=yield d.assertedPersistence.getCurrentUser();let w=b,M=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const j=null===(g=d.redirectUser)||void 0===g?void 0:g._redirectEventId,se=w?._redirectEventId,Ce=yield d.tryRedirectSignIn(u);(!j||j===se)&&Ce?.user&&(w=Ce.user,M=!0)}if(!w)return d.directlySetCurrentUser(null);if(!w._redirectEventId){if(M)try{yield d.beforeStateQueue.runMiddleware(w)}catch(j){w=b,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(j))}return w?d.reloadAndSetCurrentUserOrClear(w):d.directlySetCurrentUser(null)}return me(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===w._redirectEventId?d.directlySetCurrentUser(w):d.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(u){var d=this;return(0,x.A)(function*(){let g=null;try{g=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,x.A)(function*(){try{yield Bo(u)}catch(g){if("auth/network-request-failed"!==g?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function ol(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var u=this;return(0,x.A)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,x.A)(function*(){if((0,Pe._isFirebaseServerApp)(d.app))return Promise.reject(et(d));const g=u?(0,ie.Ku)(u):null;return g&&me(g.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(g&&g._clone(d))})()}_updateCurrentUser(u,d=!1){var g=this;return(0,x.A)(function*(){if(!g._deleted)return u&&me(g.tenantId===u.tenantId,g,"tenant-id-mismatch"),d||(yield g.beforeStateQueue.runMiddleware(u)),g.queue((0,x.A)(function*(){yield g.directlySetCurrentUser(u),g.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,x.A)(function*(){return(0,Pe._isFirebaseServerApp)(u.app)?Promise.reject(et(u)):(yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0))})()}setPersistence(u){var d=this;return(0,Pe._isFirebaseServerApp)(this.app)?Promise.reject(et(this)):this.queue((0,x.A)(function*(){yield d.assertedPersistence.setPersistence(He(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,x.A)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const g=d._getPasswordPolicyInternal();return g.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,x.A)(function*(){const d=yield function kn(p){return lt.apply(this,arguments)}(u),g=new fc(d);null===u.tenantId?u._projectPasswordPolicy=g:u._tenantPasswordPolicies[u.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new ie.FA("auth","Firebase",u())}onAuthStateChanged(u,d,g){return this.registerStateListener(this.authStateSubscription,u,d,g)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,g){return this.registerStateListener(this.idTokenSubscription,u,d,g)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const g=this.onAuthStateChanged(()=>{g(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,x.A)(function*(){if(d.currentUser){const g=yield d.currentUser.getIdToken(),b={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:g};null!=d.tenantId&&(b.tenantId=d.tenantId),yield function N(p,u){return V.apply(this,arguments)}(d,b)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var g=this;return(0,x.A)(function*(){const b=yield g.getOrInitRedirectPersistenceManager(d);return null===u?b.removeCurrentUser():b.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,x.A)(function*(){if(!d.redirectPersistenceManager){const g=u&&He(u)||d._popupRedirectResolver;me(g,d,"argument-error"),d.redirectPersistenceManager=yield mt.create(d,[He(g._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,x.A)(function*(){var g,b;return d._isInitialized&&(yield d.queue((0,x.A)(function*(){}))),(null===(g=d._currentUser)||void 0===g?void 0:g._redirectEventId)===u?d._currentUser:(null===(b=d.redirectUser)||void 0===b?void 0:b._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,x.A)(function*(){if(u===d.currentUser)return d.queue((0,x.A)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,g,b){if(this._deleted)return()=>{};const w="function"==typeof d?d:d.next.bind(d);let M=!1;const j=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(j,this,"internal-error"),j.then(()=>{M||w(this.currentUser)}),"function"==typeof d){const se=u.addObserver(d,g,b);return()=>{M=!0,se()}}{const se=u.addObserver(d);return()=>{M=!0,se()}}}directlySetCurrentUser(u){var d=this;return(0,x.A)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=dt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,x.A)(function*(){var d;const g={"X-Client-Version":u.clientVersion};u.app.options.appId&&(g["X-Firebase-gmpid"]=u.app.options.appId);const b=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();b&&(g["X-Firebase-Client"]=b);const w=yield u._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var u=this;return(0,x.A)(function*(){var d;const g=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return g?.error&&function $r(p,...u){yr.logLevel<=$t.$b.WARN&&yr.warn(`Auth (${Pe.SDK_VERSION}): ${p}`,...u)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function In(p){return(0,ie.Ku)(p)}class jb{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,ie.tD)(d=>this.observer=d)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pc={loadJS:()=>(0,x.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ng(p){return pc.loadJS(p)}function _A(p){return`__${p}${Math.floor(1e6*Math.random())}`}class bA{constructor(u){this.type="recaptcha-enterprise",this.auth=In(u)}verify(u="verify",d=!1){var g=this;return(0,x.A)(function*(){function w(){return w=(0,x.A)(function*(j){if(!d){if(null==j.tenantId&&null!=j._agentRecaptchaConfig)return j._agentRecaptchaConfig.siteKey;if(null!=j.tenantId&&void 0!==j._tenantRecaptchaConfigs[j.tenantId])return j._tenantRecaptchaConfigs[j.tenantId].siteKey}return new Promise(function(){var se=(0,x.A)(function*(Ce,ke){Gi(j,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Oe=>{if(void 0!==Oe.recaptchaKey){const Fn=new oc(Oe);return null==j.tenantId?j._agentRecaptchaConfig=Fn:j._tenantRecaptchaConfigs[j.tenantId]=Fn,Ce(Fn.siteKey)}ke(new Error("recaptcha Enterprise site key undefined"))}).catch(Oe=>{ke(Oe)})});return function(Ce,ke){return se.apply(this,arguments)}}())}),w.apply(this,arguments)}function M(j,se,Ce){const ke=window.grecaptcha;zt(ke)?ke.enterprise.ready(()=>{ke.enterprise.execute(j,{action:u}).then(Oe=>{se(Oe)}).catch(()=>{se("NO_RECAPTCHA")})}):Ce(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((j,se)=>{(function b(j){return w.apply(this,arguments)})(g.auth).then(Ce=>{if(!d&&zt(window.grecaptcha))M(Ce,j,se);else{if(typeof window>"u")return void se(new Error("RecaptchaVerifier is only supported in browser"));let ke=function gA(){return pc.recaptchaEnterpriseScript}();0!==ke.length&&(ke+=Ce),ng(ke).then(()=>{M(Ce,j,se)}).catch(Oe=>{se(Oe)})}}).catch(Ce=>{se(Ce)})})})()}}function EA(p,u,d){return rg.apply(this,arguments)}function rg(){return(rg=(0,x.A)(function*(p,u,d,g=!1){const b=new bA(p);let w;try{w=yield b.verify(d)}catch{w=yield b.verify(d,!0)}const M=Object.assign({},u);return Object.assign(M,g?{captchaResp:w}:{captchaResponse:w}),Object.assign(M,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(M,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),M})).apply(this,arguments)}function qu(p,u,d,g){return ig.apply(this,arguments)}function ig(){return ig=(0,x.A)(function*(p,u,d,g){var b;if(null!==(b=p._getRecaptchaConfig())&&void 0!==b&&b.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield EA(p,u,d,"getOobCode"===d);return g(p,w)}return g(p,u).catch(function(){var w=(0,x.A)(function*(M){if("auth/missing-recaptcha-token"===M.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const j=yield EA(p,u,d,"getOobCode"===d);return g(p,j)}return Promise.reject(M)});return function(M){return w.apply(this,arguments)}}())}),ig.apply(this,arguments)}function Hb(p){const u=p.indexOf(":");return u<0?"":p.substr(0,u+1)}function $b(p){if(!p)return null;const u=Number(p);return isNaN(u)?null:u}class mc{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return En("not implemented")}_getIdTokenResponse(u){return En("not implemented")}_linkToIdToken(u,d){return En("not implemented")}_getReauthenticationResolver(u){return En("not implemented")}}function sg(p,u){return ag.apply(this,arguments)}function ag(){return(ag=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:resetPassword",fe(p,u))})).apply(this,arguments)}function cg(){return(cg=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function DA(p,u){return lg.apply(this,arguments)}function lg(){return(lg=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function ug(){return(ug=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:update",fe(p,u))})).apply(this,arguments)}function rF(p,u){return dg.apply(this,arguments)}function dg(){return(dg=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithPassword",fe(p,u))})).apply(this,arguments)}function jo(p,u){return Kh.apply(this,arguments)}function Kh(){return(Kh=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:sendOobCode",fe(p,u))})).apply(this,arguments)}function Yh(){return(Yh=(0,x.A)(function*(p,u){return jo(p,u)})).apply(this,arguments)}function qb(p,u){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,x.A)(function*(p,u){return jo(p,u)})).apply(this,arguments)}function Gb(p,u){return hg.apply(this,arguments)}function hg(){return(hg=(0,x.A)(function*(p,u){return jo(p,u)})).apply(this,arguments)}function fg(){return(fg=(0,x.A)(function*(p,u){return jo(p,u)})).apply(this,arguments)}function Jh(){return(Jh=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithEmailLink",fe(p,u))})).apply(this,arguments)}function Wb(){return(Wb=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithEmailLink",fe(p,u))})).apply(this,arguments)}class ga extends mc{constructor(u,d,g,b=null){super("password",g),this._email=u,this._password=d,this._tenantId=b}static _fromEmailAndPassword(u,d){return new ga(u,d,"password")}static _fromEmailAndCode(u,d,g=null){return new ga(u,d,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,x.A)(function*(){switch(d.signInMethod){case"password":return qu(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",rF);case"emailLink":return function Xh(p,u){return Jh.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Bt(u,"internal-error")}})()}_linkToIdToken(u,d){var g=this;return(0,x.A)(function*(){switch(g.signInMethod){case"password":return qu(u,{idToken:d,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DA);case"emailLink":return function pg(p,u){return Wb.apply(this,arguments)}(u,{idToken:d,email:g._email,oobCode:g._password});default:Bt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function Hs(p,u){return mg.apply(this,arguments)}function mg(){return(mg=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithIdp",fe(p,u))})).apply(this,arguments)}class $s extends mc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new $s(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Bt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:b}=d,w=(0,Ue.Tt)(d,["providerId","signInMethod"]);if(!g||!b)return null;const M=new $s(g,b);return M.idToken=w.idToken||void 0,M.accessToken=w.accessToken||void 0,M.secret=w.secret,M.nonce=w.nonce,M.pendingToken=w.pendingToken||null,M}_getIdTokenResponse(u){return Hs(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,Hs(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Hs(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,ie.Am)(d)}return u}}function ef(){return(ef=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:sendVerificationCode",fe(p,u))})).apply(this,arguments)}function gg(){return(gg=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithPhoneNumber",fe(p,u))})).apply(this,arguments)}function Gu(){return(Gu=(0,x.A)(function*(p,u){const d=yield At(p,"POST","/v1/accounts:signInWithPhoneNumber",fe(p,u));if(d.temporaryProof)throw Nn(p,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const RA={USER_NOT_FOUND:"user-not-found"};function _g(){return(_g=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithPhoneNumber",fe(p,Object.assign(Object.assign({},u),{operation:"REAUTH"})),RA)})).apply(this,arguments)}class gc extends mc{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new gc({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new gc({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function xA(p,u){return gg.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function oF(p,u){return Gu.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function MA(p,u){return _g.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:g,verificationCode:b}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:g,code:b}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:g,phoneNumber:b,temporaryProof:w}=u;return g||d||b||w?new gc({verificationId:d,verificationCode:g,phoneNumber:b,temporaryProof:w}):null}}class tf{constructor(u){var d,g,b,w,M,j;const se=(0,ie.I9)((0,ie.hp)(u)),Ce=null!==(d=se.apiKey)&&void 0!==d?d:null,ke=null!==(g=se.oobCode)&&void 0!==g?g:null,Oe=function yg(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(b=se.mode)&&void 0!==b?b:null);me(Ce&&ke&&Oe,"argument-error"),this.apiKey=Ce,this.operation=Oe,this.code=ke,this.continueUrl=null!==(w=se.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(M=se.languageCode)&&void 0!==M?M:null,this.tenantId=null!==(j=se.tenantId)&&void 0!==j?j:null}static parseLink(u){const d=function PA(p){const u=(0,ie.I9)((0,ie.hp)(p)).link,d=u?(0,ie.I9)((0,ie.hp)(u)).deep_link_id:null,g=(0,ie.I9)((0,ie.hp)(p)).deep_link_id;return(g?(0,ie.I9)((0,ie.hp)(g)).link:null)||g||d||u||p}(u);try{return new tf(d)}catch{return null}}}let Qb=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(d,g){return ga._fromEmailAndPassword(d,g)}static credentialWithLink(d,g){const b=tf.parseLink(g);return me(b,"argument-error"),ga._fromEmailAndCode(d,b.code,b.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class vs{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class ul extends vs{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Wu extends ul{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return me("providerId"in d&&"signInMethod"in d,"argument-error"),$s._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return me(u.idToken||u.accessToken,"argument-error"),$s._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Wu.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Wu.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:g,oauthTokenSecret:b,pendingToken:w,nonce:M,providerId:j}=u;if(!g&&!b&&!d&&!w||!j)return null;try{return new Wu(j)._credential({idToken:d,accessToken:g,nonce:M,pendingToken:w})}catch{return null}}}let Yb=(()=>{class p extends ul{constructor(){super("facebook.com")}static credential(d){return $s._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),NA=(()=>{class p extends ul{constructor(){super("google.com"),this.addScope("profile")}static credential(d,g){return $s._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:b}=d;if(!g&&!b)return null;try{return p.credential(g,b)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),Zb=(()=>{class p extends ul{constructor(){super("github.com")}static credential(d){return $s._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return p.credential(d.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class dl extends mc{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return Hs(u,this.buildRequest())}_linkToIdToken(u,d){const g=this.buildRequest();return g.idToken=d,Hs(u,g)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,Hs(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:g,signInMethod:b,pendingToken:w}=d;return g&&b&&w&&g===b?new dl(g,w):null}static _create(u,d){return new dl(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class nf extends vs{constructor(u){me(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return nf.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return nf.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=dl.fromJSON(u);return me(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:g}=u;if(!d||!g)return null;try{return dl._create(g,d)}catch{return null}}}let Xb=(()=>{class p extends ul{constructor(){super("twitter.com")}static credential(d,g){return $s._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:g})}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:g,oauthTokenSecret:b}=d;if(!g||!b)return null;try{return p.credential(g,b)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function _a(p,u){return Jb.apply(this,arguments)}function Jb(){return(Jb=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signUp",fe(p,u))})).apply(this,arguments)}class Ho{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,g,b=!1){return(0,x.A)(function*(){const w=yield xe._fromIdTokenResponse(u,g,b),M=vg(g);return new Ho({user:w,providerId:M,_tokenResponse:g,operationType:d})})()}static _forOperation(u,d,g){return(0,x.A)(function*(){yield u._updateTokensIfNecessary(g,!0);const b=vg(g);return new Ho({user:u,providerId:b,_tokenResponse:g,operationType:d})})()}}function vg(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Eg(){return(Eg=(0,x.A)(function*(p){var u;if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const d=In(p);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new Ho({user:d.currentUser,providerId:null,operationType:"signIn"});const g=yield _a(d,{returnSecureToken:!0}),b=yield Ho._fromIdTokenResponse(d,"signIn",g,!0);return yield d._updateCurrentUser(b.user),b})).apply(this,arguments)}class rf extends ie.g{constructor(u,d,g,b){var w;super(d.code,d.message),this.operationType=g,this.user=b,Object.setPrototypeOf(this,rf.prototype),this.customData={appName:u.name,tenantId:null!==(w=u.tenantId)&&void 0!==w?w:void 0,_serverResponse:d.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(u,d,g,b){return new rf(u,d,g,b)}}function eE(p,u,d,g){return("reauthenticate"===u?d._getReauthenticationResolver(p):d._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?rf._fromErrorAndOperation(p,w,u,g):w})}function Ig(p){return new Set(p.map(({providerId:u})=>u).filter(u=>!!u))}function tE(){return tE=(0,x.A)(function*(p,u){const d=(0,ie.Ku)(p);yield wg(!0,d,u);const{providerUserInfo:g}=yield function Hu(p,u){return Ci.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),b=Ig(g||[]);return d.providerData=d.providerData.filter(w=>b.has(w.providerId)),b.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),tE.apply(this,arguments)}function nE(p,u){return rE.apply(this,arguments)}function rE(){return(rE=(0,x.A)(function*(p,u,d=!1){const g=yield Nr(p,u._linkToIdToken(p.auth,yield p.getIdToken()),d);return Ho._forOperation(p,"link",g)})).apply(this,arguments)}function wg(p,u,d){return iE.apply(this,arguments)}function iE(){return(iE=(0,x.A)(function*(p,u,d){yield Bo(u);const b=!1===p?"provider-already-linked":"no-such-provider";me(Ig(u.providerData).has(d)===p,u.auth,b)})).apply(this,arguments)}function OA(p,u){return oE.apply(this,arguments)}function oE(){return(oE=(0,x.A)(function*(p,u,d=!1){const{auth:g}=p;if((0,Pe._isFirebaseServerApp)(g.app))return Promise.reject(et(g));const b="reauthenticate";try{const w=yield Nr(p,eE(g,b,u,p),d);me(w.idToken,g,"internal-error");const M=gs(w.idToken);me(M,g,"internal-error");const{sub:j}=M;return me(p.uid===j,g,"user-mismatch"),Ho._forOperation(p,b,w)}catch(w){throw"auth/user-not-found"===w?.code&&Bt(g,"user-mismatch"),w}})).apply(this,arguments)}function Tg(p,u){return Q.apply(this,arguments)}function Q(){return(Q=(0,x.A)(function*(p,u,d=!1){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const g="signIn",b=yield eE(p,g,u),w=yield Ho._fromIdTokenResponse(p,g,b);return d||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function zs(p,u){return hl.apply(this,arguments)}function hl(){return(hl=(0,x.A)(function*(p,u){return Tg(In(p),u)})).apply(this,arguments)}function Cg(p,u){return sE.apply(this,arguments)}function sE(){return(sE=(0,x.A)(function*(p,u){const d=(0,ie.Ku)(p);return yield wg(!1,d,u.providerId),nE(d,u)})).apply(this,arguments)}function FA(p,u){return sf.apply(this,arguments)}function sf(){return(sf=(0,x.A)(function*(p,u){return OA((0,ie.Ku)(p),u)})).apply(this,arguments)}function ya(){return(ya=(0,x.A)(function*(p,u){return At(p,"POST","/v1/accounts:signInWithCustomToken",fe(p,u))})).apply(this,arguments)}function va(){return va=(0,x.A)(function*(p,u){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const d=In(p),g=yield function qs(p,u){return ya.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),b=yield Ho._fromIdTokenResponse(d,"signIn",g);return yield d._updateCurrentUser(b.user),b}),va.apply(this,arguments)}class pl{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?Ku._fromServerResponse(u,d):"totpInfo"in d?ba._fromServerResponse(u,d):Bt(u,"internal-error")}}class Ku extends pl{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new Ku(d)}}class ba extends pl{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new ba(d)}}function Ag(p,u,d){var g;me((null===(g=d.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),me(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(me(d.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(me(d.android.packageName.length>0,p,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function ln(p){return aE.apply(this,arguments)}function aE(){return(aE=(0,x.A)(function*(p){const u=In(p);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function qt(){return(qt=(0,x.A)(function*(p,u,d){const g=In(p),b={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&Ag(g,b,d),yield qu(g,b,"getOobCode",qb)})).apply(this,arguments)}function nr(){return nr=(0,x.A)(function*(p,u,d){yield sg((0,ie.Ku)(p),{oobCode:u,newPassword:d}).catch(function(){var g=(0,x.A)(function*(b){throw"auth/password-does-not-meet-requirements"===b.code&&ln(p),b});return function(b){return g.apply(this,arguments)}}())}),nr.apply(this,arguments)}function cE(){return cE=(0,x.A)(function*(p,u){yield function nF(p,u){return ug.apply(this,arguments)}((0,ie.Ku)(p),{oobCode:u})}),cE.apply(this,arguments)}function lE(p,u){return nn.apply(this,arguments)}function nn(){return(nn=(0,x.A)(function*(p,u){const d=(0,ie.Ku)(p),g=yield sg(d,{oobCode:u}),b=g.requestType;switch(me(b,d,"internal-error"),b){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":me(g.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":me(g.mfaInfo,d,"internal-error");default:me(g.email,d,"internal-error")}let w=null;return g.mfaInfo&&(w=pl._fromServerResponse(In(d),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:b}})).apply(this,arguments)}function ml(){return(ml=(0,x.A)(function*(p,u){const{data:d}=yield lE((0,ie.Ku)(p),u);return d.email})).apply(this,arguments)}function uE(){return(uE=(0,x.A)(function*(p,u,d){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const g=In(p),M=yield qu(g,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_a).catch(se=>{throw"auth/password-does-not-meet-requirements"===se.code&&ln(p),se}),j=yield Ho._fromIdTokenResponse(g,"signIn",M);return yield g._updateCurrentUser(j.user),j})).apply(this,arguments)}function bs(){return(bs=(0,x.A)(function*(p,u,d){const g=In(p),b={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function w(M,j){me(j.handleCodeInApp,g,"argument-error"),j&&Ag(g,M,j)})(b,d),yield qu(g,b,"getOobCode",Gb)})).apply(this,arguments)}function dE(){return(dE=(0,x.A)(function*(p,u,d){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const g=(0,ie.Ku)(p),b=Qb.credentialWithLink(u,d||wi());return me(b._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),zs(g,b)})).apply(this,arguments)}function Sg(){return(Sg=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:createAuthUri",fe(p,u))})).apply(this,arguments)}function xg(){return xg=(0,x.A)(function*(p,u){const g={identifier:u,continueUri:ds()?wi():"http://localhost"},{signinMethods:b}=yield function fF(p,u){return Sg.apply(this,arguments)}((0,ie.Ku)(p),g);return b||[]}),xg.apply(this,arguments)}function ui(){return ui=(0,x.A)(function*(p,u){const d=(0,ie.Ku)(p),b={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};u&&Ag(d.auth,b,u);const{email:w}=yield function Qh(p,u){return Yh.apply(this,arguments)}(d.auth,b);w!==p.email&&(yield p.reload())}),ui.apply(this,arguments)}function hE(){return hE=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:u};d&&Ag(g.auth,w,d);const{email:M}=yield function SA(p,u){return fg.apply(this,arguments)}(g.auth,w);M!==p.email&&(yield p.reload())}),hE.apply(this,arguments)}function fE(){return(fE=(0,x.A)(function*(p,u){return Me(p,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function pE(){return pE=(0,x.A)(function*(p,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const g=(0,ie.Ku)(p),w={idToken:yield g.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},M=yield Nr(g,function gF(p,u){return fE.apply(this,arguments)}(g.auth,w));g.displayName=M.displayName||null,g.photoURL=M.photoUrl||null;const j=g.providerData.find(({providerId:se})=>"password"===se);j&&(j.displayName=g.displayName,j.photoURL=g.photoURL),yield g._updateTokensIfNecessary(M)}),pE.apply(this,arguments)}function Qt(p,u,d){return gl.apply(this,arguments)}function gl(){return gl=(0,x.A)(function*(p,u,d){const{auth:g}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};u&&(w.email=u),d&&(w.password=d);const M=yield Nr(p,function AA(p,u){return cg.apply(this,arguments)}(g,w));yield p._updateTokensIfNecessary(M,!0)}),gl.apply(this,arguments)}class _c{constructor(u,d,g={}){this.isNewUser=u,this.providerId=d,this.profile=g}}class mE extends _c{constructor(u,d,g,b){super(u,d,g),this.username=b}}class af extends _c{constructor(u,d){super(u,"facebook.com",d)}}class cf extends mE{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class Rg extends _c{constructor(u,d){super(u,"google.com",d)}}class gE extends mE{constructor(u,d,g){super(u,"twitter.com",d,g)}}function BA(p){const{user:u,_tokenResponse:d}=p;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function UA(p){var u,d;if(!p)return null;const{providerId:g}=p,b=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const M=null===(d=null===(u=gs(p.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(M)return new _c(w,"anonymous"!==M&&"custom"!==M?M:null)}if(!g)return null;switch(g){case"facebook.com":return new af(w,b);case"github.com":return new cf(w,b);case"google.com":return new Rg(w,b);case"twitter.com":return new gE(w,b,p.screenName||null);case"custom":case"anonymous":return new _c(w,null);default:return new _c(w,g,b)}}(d)}class Gs{constructor(u,d,g){this.type=u,this.credential=d,this.user=g}static _fromIdtoken(u,d){return new Gs("enroll",u,d)}static _fromMfaPendingCredential(u){return new Gs("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,g;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Gs._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(g=u.multiFactorSession)&&void 0!==g&&g.idToken)return Gs._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Qu{constructor(u,d,g){this.session=u,this.hints=d,this.signInResolver=g}static _fromError(u,d){const g=In(u),b=d.customData._serverResponse,w=(b.mfaInfo||[]).map(j=>pl._fromServerResponse(g,j));me(b.mfaPendingCredential,g,"internal-error");const M=Gs._fromMfaPendingCredential(b.mfaPendingCredential);return new Qu(M,w,function(){var j=(0,x.A)(function*(se){const Ce=yield se._process(g,M);delete b.mfaInfo,delete b.mfaPendingCredential;const ke=Object.assign(Object.assign({},b),{idToken:Ce.idToken,refreshToken:Ce.refreshToken});switch(d.operationType){case"signIn":const Oe=yield Ho._fromIdTokenResponse(g,d.operationType,ke);return yield g._updateCurrentUser(Oe.user),Oe;case"reauthenticate":return me(d.user,g,"internal-error"),Ho._forOperation(d.user,d.operationType,ke);default:Bt(g,"internal-error")}});return function(se){return j.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,x.A)(function*(){return d.signInResolver(u)})()}}class IE{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(g=>pl._fromServerResponse(u.auth,g)))})}static _fromUser(u){return new IE(u)}getSession(){var u=this;return(0,x.A)(function*(){return Gs._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var g=this;return(0,x.A)(function*(){const b=u,w=yield g.getSession(),M=yield Nr(g.user,b._process(g.user.auth,w,d));return yield g.user._updateTokensIfNecessary(M),g.user.reload()})()}unenroll(u){var d=this;return(0,x.A)(function*(){const g="string"==typeof u?u:u.uid,b=yield d.user.getIdToken();try{const w=yield Nr(d.user,function Gt(p,u){return Me(p,"POST","/v2/accounts/mfaEnrollment:withdraw",fe(p,u))}(d.user.auth,{idToken:b,mfaEnrollmentId:g}));d.enrolledFactors=d.enrolledFactors.filter(({uid:M})=>M!==g),yield d.user._updateTokensIfNecessary(w),yield d.user.reload()}catch(w){throw w}})()}}const Pg=new WeakMap,Ng="__sak";class wE{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(Ng,"1"),this.storage.removeItem(Ng),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const zr=(()=>{class p extends wE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,g)=>this.onStorageEvent(d,g),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function kg(){const p=(0,ie.ZQ)();return ma(p)||hc(p)}()&&function ct(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Re(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const g of Object.keys(this.listeners)){const b=this.storage.getItem(g),w=this.localCache[g];b!==w&&d(g,w,b)}}onStorageEvent(d,g=!1){if(!d.key)return void this.forAllChangedKeys((j,se,Ce)=>{this.notifyListeners(j,Ce)});const b=d.key;if(g?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const j=this.storage.getItem(b);if(d.newValue!==j)null!==d.newValue?this.storage.setItem(b,d.newValue):this.storage.removeItem(b);else if(this.localCache[b]===d.newValue&&!g)return}const w=()=>{const j=this.storage.getItem(b);!g&&this.localCache[b]===j||this.notifyListeners(b,j)},M=this.storage.getItem(b);!function he(){return(0,ie.lT)()&&10===document.documentMode}()||M===d.newValue||d.newValue===d.oldValue?w():setTimeout(w,10)}notifyListeners(d,g){this.localCache[d]=g;const b=this.listeners[d];if(b)for(const w of Array.from(b))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,g,b)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:g,newValue:b}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,g){var b=()=>super._set,w=this;return(0,x.A)(function*(){yield b().call(w,d,g),w.localCache[d]=JSON.stringify(g)})()}_get(d){var g=()=>super._get,b=this;return(0,x.A)(function*(){const w=yield g().call(b,d);return b.localCache[d]=JSON.stringify(w),w})()}_remove(d){var g=()=>super._remove,b=this;return(0,x.A)(function*(){yield g().call(b,d),delete b.localCache[d]})()}}return p.type="LOCAL",p})(),vc=(()=>{class p extends wE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,g){}_removeListener(d,g){}}return p.type="SESSION",p})();let Zu=(()=>{class p{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const g=this.receivers.find(w=>w.isListeningto(d));if(g)return g;const b=new p(d);return this.receivers.push(b),b}isListeningto(d){return this.eventTarget===d}handleEvent(d){var g=this;return(0,x.A)(function*(){const b=d,{eventId:w,eventType:M,data:j}=b.data,se=g.handlersMap[M];if(!se?.size)return;b.ports[0].postMessage({status:"ack",eventId:w,eventType:M});const Ce=Array.from(se).map(function(){var Oe=(0,x.A)(function*(Fn){return Fn(b.origin,j)});return function(Fn){return Oe.apply(this,arguments)}}()),ke=yield function vF(p){return Promise.all(p.map(function(){var u=(0,x.A)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(g){return{fulfilled:!1,reason:g}}});return function(d){return u.apply(this,arguments)}}()))}(Ce);b.ports[0].postMessage({status:"done",eventId:w,eventType:M,response:ke})})()}_subscribe(d,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(g)}_unsubscribe(d,g){this.handlersMap[d]&&g&&this.handlersMap[d].delete(g),(!g||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function bc(p="",u=10){let d="";for(let g=0;g<u;g++)d+=Math.floor(10*Math.random());return p+d}class uf{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,g=50){var b=this;return(0,x.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let M,j;return new Promise((se,Ce)=>{const ke=bc("",20);w.port1.start();const Oe=setTimeout(()=>{Ce(new Error("unsupported_event"))},g);j={messageChannel:w,onMessage(Fn){const Ko=Fn;if(Ko.data.eventId===ke)switch(Ko.data.status){case"ack":clearTimeout(Oe),M=setTimeout(()=>{Ce(new Error("timeout"))},3e3);break;case"done":clearTimeout(M),se(Ko.data.response);break;default:clearTimeout(Oe),clearTimeout(M),Ce(new Error("invalid_response"))}}},b.handlers.add(j),w.port1.addEventListener("message",j.onMessage),b.target.postMessage({eventType:u,eventId:ke,data:d},[w.port2])}).finally(()=>{j&&b.removeMessageHandler(j)})})()}}function ur(){return window}function Fg(){return typeof ur().WorkerGlobalScope<"u"&&"function"==typeof ur().importScripts}function Ea(){return(Ea=(0,x.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const CE="firebaseLocalStorageDb",Xu="firebaseLocalStorage",ce="fbase_key";class wa{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function _l(p,u){return p.transaction([Xu],u?"readwrite":"readonly").objectStore(Xu)}function Lg(){const p=indexedDB.open(CE,1);return new Promise((u,d)=>{p.addEventListener("error",()=>{d(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(Xu,{keyPath:ce})}catch(b){d(b)}}),p.addEventListener("success",(0,x.A)(function*(){const g=p.result;g.objectStoreNames.contains(Xu)?u(g):(g.close(),yield function Ju(){const p=indexedDB.deleteDatabase(CE);return new wa(p).toPromise()}(),u(yield Lg()))}))})}function AE(p,u,d){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,x.A)(function*(p,u,d){const g=_l(p,!0).put({[ce]:u,value:d});return new wa(g).toPromise()})).apply(this,arguments)}function Es(){return(Es=(0,x.A)(function*(p,u){const d=_l(p,!1).get(u),g=yield new wa(d).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function DE(p,u){const d=_l(p,!0).delete(u);return new wa(d).toPromise()}const vl=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,x.A)(function*(){return d.db||(d.db=yield Lg()),d.db})()}_withRetries(d){var g=this;return(0,x.A)(function*(){let b=0;for(;;)try{const w=yield g._openDb();return yield d(w)}catch(w){if(b++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,x.A)(function*(){return Fg()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,x.A)(function*(){d.receiver=Zu._getInstance(function Ia(){return Fg()?self:null}()),d.receiver._subscribe("keyChanged",function(){var g=(0,x.A)(function*(b,w){return{keyProcessed:(yield d._poll()).includes(w.key)}});return function(b,w){return g.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var g=(0,x.A)(function*(b,w){return["keyChanged"]});return function(b,w){return g.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,x.A)(function*(){var g,b;if(d.activeServiceWorker=yield function TE(){return Ea.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new uf(d.activeServiceWorker);const w=yield d.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(b=w[0])&&void 0!==b&&b.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var g=this;return(0,x.A)(function*(){if(g.sender&&g.activeServiceWorker&&function WA(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:d},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,x.A)(function*(){try{if(!indexedDB)return!1;const d=yield Lg();return yield AE(d,Ng,"1"),yield DE(d,Ng),!0}catch{}return!1})()}_withPendingWrite(d){var g=this;return(0,x.A)(function*(){g.pendingWrites++;try{yield d()}finally{g.pendingWrites--}})()}_set(d,g){var b=this;return(0,x.A)(function*(){return b._withPendingWrite((0,x.A)(function*(){return yield b._withRetries(w=>AE(w,d,g)),b.localCache[d]=g,b.notifyServiceWorker(d)}))})()}_get(d){var g=this;return(0,x.A)(function*(){const b=yield g._withRetries(w=>function KA(p,u){return Es.apply(this,arguments)}(w,d));return g.localCache[d]=b,b})()}_remove(d){var g=this;return(0,x.A)(function*(){return g._withPendingWrite((0,x.A)(function*(){return yield g._withRetries(b=>DE(b,d)),delete g.localCache[d],g.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,x.A)(function*(){const g=yield d._withRetries(M=>{const j=_l(M,!1).getAll();return new wa(j).toPromise()});if(!g)return[];if(0!==d.pendingWrites)return[];const b=[],w=new Set;if(0!==g.length)for(const{fbase_key:M,value:j}of g)w.add(M),JSON.stringify(d.localCache[M])!==JSON.stringify(j)&&(d.notifyListeners(M,j),b.push(M));for(const M of Object.keys(d.localCache))d.localCache[M]&&!w.has(M)&&(d.notifyListeners(M,null),b.push(M));return b})()}notifyListeners(d,g){this.localCache[d]=g;const b=this.listeners[d];if(b)for(const w of Array.from(b))w(g)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,x.A)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(g)}_removeListener(d,g){this.listeners[d]&&(this.listeners[d].delete(g),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),El=1e12;class bF{constructor(u){this.auth=u,this.counter=El,this._widgets=new Map}render(u,d){const g=this.counter;return this._widgets.set(g,new xE(u,this.auth.name,d||{})),this.counter++,g}reset(u){var d;const g=u||El;null===(d=this._widgets.get(g))||void 0===d||d.delete(),this._widgets.delete(g)}getResponse(u){var d;return(null===(d=this._widgets.get(u||El))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,x.A)(function*(){var g;return null===(g=d._widgets.get(u||El))||void 0===g||g.execute(),""})()}}class xE{constructor(u,d,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const b="string"==typeof u?document.getElementById(u):u;me(b,"argument-error",{appName:d}),this.container=b,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function EF(p){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const di=_A("rcb"),Ug=new K(3e4,6e4);class Il{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=ur().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return me(function IF(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&vr(ur().grecaptcha)?Promise.resolve(ur().grecaptcha):new Promise((g,b)=>{const w=ur().setTimeout(()=>{b(jt(u,"network-request-failed"))},Ug.get());ur()[di]=()=>{ur().clearTimeout(w),delete ur()[di];const j=ur().grecaptcha;if(!j||!vr(j))return void b(jt(u,"internal-error"));const se=j.render;j.render=(Ce,ke)=>{const Oe=se(Ce,ke);return this.counter++,Oe},this.hostLanguage=d,g(j)},ng(`${function mA(){return pc.recaptchaV2Script}()}?${(0,ie.Am)({onload:di,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(w),b(jt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=ur().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class RE{load(u){return(0,x.A)(function*(){return new bF(u)})()}clearedOneInstance(){}}const $o="recaptcha",Vt={theme:"light",type:"image"};class zo{constructor(u,d,g=Object.assign({},Vt)){this.parameters=g,this.type=$o,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=In(u),this.isInvisible="invisible"===this.parameters.size,me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const b="string"==typeof d?document.getElementById(d):d;me(b,this.auth,"argument-error"),this.container=b,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new RE:new Il,this.validateStartingState()}verify(){var u=this;return(0,x.A)(function*(){u.assertNotDestroyed();const d=yield u.render(),g=u.getAssertedRecaptcha();return g.getResponse(d)||new Promise(w=>{const M=j=>{j&&(u.tokenChangeListeners.delete(M),w(j))};u.tokenChangeListeners.add(M),u.isInvisible&&g.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){me(!this.parameters.sitekey,this.auth,"argument-error"),me(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),me(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(g=>g(d)),"function"==typeof u)u(d);else if("string"==typeof u){const g=ur()[u];"function"==typeof g&&g(d)}}}assertNotDestroyed(){me(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,x.A)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const g=document.createElement("div");d.appendChild(g),d=g}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,x.A)(function*(){me(ds()&&!Fg(),u.auth,"internal-error"),yield function ME(){let p=null;return new Promise(u=>{"complete"!==document.readyState?(p=()=>u(),window.addEventListener("load",p)):u()}).catch(u=>{throw p&&window.removeEventListener("load",p),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function sl(p){return Bs.apply(this,arguments)}(u.auth);me(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return me(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class td{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=gc._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function wl(){return(wl=(0,x.A)(function*(p,u,d){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const g=In(p),b=yield rd(g,u,(0,ie.Ku)(d));return new td(b,w=>zs(g,w))})).apply(this,arguments)}function Is(){return(Is=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p);yield wg(!1,g,"phone");const b=yield rd(g.auth,u,(0,ie.Ku)(d));return new td(b,w=>Cg(g,w))})).apply(this,arguments)}function nd(){return(nd=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p);if((0,Pe._isFirebaseServerApp)(g.auth.app))return Promise.reject(et(g.auth));const b=yield rd(g.auth,u,(0,ie.Ku)(d));return new td(b,w=>FA(g,w))})).apply(this,arguments)}function rd(p,u,d){return pf.apply(this,arguments)}function pf(){return pf=(0,x.A)(function*(p,u,d){var g;const b=yield d.verify();try{let w;if(me("string"==typeof b,p,"argument-error"),me(d.type===$o,p,"argument-error"),w="string"==typeof u?{phoneNumber:u}:u,"session"in w){const M=w.session;if("phoneNumber"in w)return me("enroll"===M.type,p,"internal-error"),(yield function Ws(p,u){return Me(p,"POST","/v2/accounts/mfaEnrollment:start",fe(p,u))}(p,{idToken:M.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:b}})).phoneSessionInfo.sessionInfo;{me("signin"===M.type,p,"internal-error");const j=(null===(g=w.multiFactorHint)||void 0===g?void 0:g.uid)||w.multiFactorUid;return me(j,p,"missing-multi-factor-info"),(yield function Si(p,u){return Me(p,"POST","/v2/accounts/mfaSignIn:start",fe(p,u))}(p,{mfaPendingCredential:M.credential,mfaEnrollmentId:j,phoneSignInInfo:{recaptchaToken:b}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:M}=yield function Kb(p,u){return ef.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:b});return M}}finally{d._reset()}}),pf.apply(this,arguments)}function mf(){return(mf=(0,x.A)(function*(p,u){const d=(0,ie.Ku)(p);if((0,Pe._isFirebaseServerApp)(d.auth.app))return Promise.reject(et(d.auth));yield nE(d,u)})).apply(this,arguments)}let Tl=(()=>{class p{constructor(d){this.providerId=p.PROVIDER_ID,this.auth=In(d)}verifyPhoneNumber(d,g){return rd(this.auth,d,(0,ie.Ku)(g))}static credential(d,g){return gc._fromVerification(d,g)}static credentialFromResult(d){return p.credentialFromTaggedObject(d)}static credentialFromError(d){return p.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:g,temporaryProof:b}=d;return g&&b?gc._fromTokenResponse(g,b):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function Ec(p,u){return u?He(u):(me(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class od extends mc{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return Hs(u,this._buildIdpRequest())}_linkToIdToken(u,d){return Hs(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return Hs(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function ZA(p){return Tg(p.auth,new od(p),p.bypassAuthState)}function XA(p){const{auth:u,user:d}=p;return me(d,u,"internal-error"),OA(d,new od(p),p.bypassAuthState)}function Go(p){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,x.A)(function*(p){const{auth:u,user:d}=p;return me(d,u,"internal-error"),nE(d,new od(p),p.bypassAuthState)})).apply(this,arguments)}class jg{constructor(u,d,g,b,w=!1){this.auth=u,this.resolver=g,this.user=b,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,x.A)(function*(g,b){u.pendingPromise={resolve:g,reject:b};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(w){u.reject(w)}});return function(g,b){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,x.A)(function*(){const{urlResponse:g,sessionId:b,postBody:w,tenantId:M,error:j,type:se}=u;if(j)return void d.reject(j);const Ce={auth:d.auth,requestUri:g,sessionId:b,tenantId:M||void 0,postBody:w||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(se)(Ce))}catch(ke){d.reject(ke)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return ZA;case"linkViaPopup":case"linkViaRedirect":return Go;case"reauthViaPopup":case"reauthViaRedirect":return XA;default:Bt(this.auth,"internal-error")}}resolve(u){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const JA=new K(2e3,1e4);function Hg(){return(Hg=(0,x.A)(function*(p,u,d){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(jt(p,"operation-not-supported-in-this-environment"));const g=In(p);qn(p,u,vs);const b=Ec(g,d);return new zg(g,"signInViaPopup",u,b).executeNotNull()})).apply(this,arguments)}function gf(){return(gf=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p);if((0,Pe._isFirebaseServerApp)(g.auth.app))return Promise.reject(jt(g.auth,"operation-not-supported-in-this-environment"));qn(g.auth,u,vs);const b=Ec(g.auth,d);return new zg(g.auth,"reauthViaPopup",u,b,g).executeNotNull()})).apply(this,arguments)}function $g(){return($g=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p);qn(g.auth,u,vs);const b=Ec(g.auth,d);return new zg(g.auth,"linkViaPopup",u,b,g).executeNotNull()})).apply(this,arguments)}let zg=(()=>{class p extends jg{constructor(d,g,b,w,M){super(d,g,w,M),this.provider=b,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var d=this;return(0,x.A)(function*(){const g=yield d.execute();return me(g,d.auth,"internal-error"),g})()}onExecution(){var d=this;return(0,x.A)(function*(){er(1===d.filter.length,"Popup operations only handle one event");const g=bc();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],g),d.authWindow.associatedEvent=g,d.resolver._originValidation(d.auth).catch(b=>{d.reject(b)}),d.resolver._isIframeWebStorageSupported(d.auth,b=>{b||d.reject(jt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const d=()=>{var g,b;this.pollId=null!==(b=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==b&&b.closed?window.setTimeout(()=>{this.pollId=null,this.reject(jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,JA.get())};d()}}return p.currentPopupAction=null,p})();const hi="pendingRedirect",sd=new Map;class rD extends jg{constructor(u,d,g=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,g),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,x.A)(function*(){let g=sd.get(d.auth._key());if(!g){try{const w=(yield function rn(p,u){return _f.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;g=()=>Promise.resolve(w)}catch(b){g=()=>Promise.reject(b)}sd.set(d.auth._key(),g)}return d.bypassAuthState||sd.set(d.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,g=this;return(0,x.A)(function*(){if("signInViaRedirect"===u.type)return d().call(g,u);if("unknown"!==u.type){if(u.eventId){const b=yield g.auth._redirectUserForId(u.eventId);if(b)return g.user=b,d().call(g,u);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,x.A)(function*(){})()}cleanUp(){}}function _f(){return(_f=(0,x.A)(function*(p,u){const d=Ks(u),g=kr(p);if(!(yield g._isAvailable()))return!1;const b="true"===(yield g._get(d));return yield g._remove(d),b})).apply(this,arguments)}function Ne(p,u){return ti.apply(this,arguments)}function ti(){return(ti=(0,x.A)(function*(p,u){return kr(p)._set(Ks(u),"true")})).apply(this,arguments)}function rr(p,u){sd.set(p._key(),u)}function kr(p){return He(p._redirectPersistence)}function Ks(p){return br(hi,p.config.apiKey,p.name)}function ni(p,u,d){return function PE(p,u,d){return yf.apply(this,arguments)}(p,u,d)}function yf(){return(yf=(0,x.A)(function*(p,u,d){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const g=In(p);qn(p,u,vs),yield g._initializationPromise;const b=Ec(g,d);return yield Ne(b,g),b._openRedirect(g,u,"signInViaRedirect")})).apply(this,arguments)}function vf(p,u,d){return function iD(p,u,d){return qg.apply(this,arguments)}(p,u,d)}function qg(){return(qg=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p);if(qn(g.auth,u,vs),(0,Pe._isFirebaseServerApp)(g.auth.app))return Promise.reject(et(g.auth));yield g.auth._initializationPromise;const b=Ec(g.auth,d);yield Ne(b,g.auth);const w=yield kE(g);return b._openRedirect(g.auth,u,"reauthViaRedirect",w)})).apply(this,arguments)}function bf(p,u,d){return function oD(p,u,d){return ad.apply(this,arguments)}(p,u,d)}function ad(){return(ad=(0,x.A)(function*(p,u,d){const g=(0,ie.Ku)(p);qn(g.auth,u,vs),yield g.auth._initializationPromise;const b=Ec(g.auth,d);yield wg(!1,g,u.providerId),yield Ne(b,g.auth);const w=yield kE(g);return b._openRedirect(g.auth,u,"linkViaRedirect",w)})).apply(this,arguments)}function Cl(){return(Cl=(0,x.A)(function*(p,u){return yield In(p)._initializationPromise,Gg(p,u,!1)})).apply(this,arguments)}function Gg(p,u){return cd.apply(this,arguments)}function cd(){return(cd=(0,x.A)(function*(p,u,d=!1){if((0,Pe._isFirebaseServerApp)(p.app))return Promise.reject(et(p));const g=In(p),b=Ec(g,u),M=yield new rD(g,b,d).execute();return M&&!d&&(delete M.user._redirectEventId,yield g._persistUserIfCurrent(M.user),yield g._setRedirectUser(null,u)),M})).apply(this,arguments)}function kE(p){return ld.apply(this,arguments)}function ld(){return(ld=(0,x.A)(function*(p){const u=bc(`${p.uid}:::`);return p._redirectEventId=u,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),u})).apply(this,arguments)}class Wg{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(u,g)&&(d=!0,this.sendToConsumer(u,g),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function Kg(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FE(p);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var g;if(u.error&&!FE(u)){const b=(null===(g=u.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";d.onError(jt(this.auth,b))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const g=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&g}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ta(u))}saveEventToCache(u){this.cachedEventUids.add(Ta(u)),this.lastProcessedEventTime=Date.now()}}function Ta(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(u=>u).join("-")}function FE({type:p,error:u}){return"unknown"===p&&"auth/no-auth-event"===u?.code}function ud(p){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,x.A)(function*(p,u={}){return Me(p,"GET","/v1/projects",u)})).apply(this,arguments)}const Yg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ef=/^https?/;function Ca(){return(Ca=(0,x.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:u}=yield ud(p);for(const d of u)try{if(Zg(d))return}catch{}Bt(p,"unauthorized-domain")})).apply(this,arguments)}function Zg(p){const u=wi(),{protocol:d,hostname:g}=new URL(u);if(p.startsWith("chrome-extension://")){const M=new URL(p);return""===M.hostname&&""===g?"chrome-extension:"===d&&p.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&M.hostname===g}if(!Ef.test(d))return!1;if(Yg.test(p))return g===p;const b=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+b+"|"+b+")$","i").test(g)}const sD=new K(3e4,6e4);function LE(){const p=ur().___jsl;if(p?.H)for(const u of Object.keys(p.H))if(p.H[u].r=p.H[u].r||[],p.H[u].L=p.H[u].L||[],p.H[u].r=[...p.H[u].L],p.CP)for(let d=0;d<p.CP.length;d++)p.CP[d]=null}let Qs=null;const cD=new K(5e3,15e3),lD="__/auth/iframe",Xg="emulator/auth/iframe",ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function If(p){const u=p.config;me(u.authDomain,p,"auth-domain-config-required");const d=u.emulator?te(u,Xg):`https://${p.config.authDomain}/${lD}`,g={apiKey:u.apiKey,appName:p.name,v:Pe.SDK_VERSION},b=UE.get(p.config.apiHost);b&&(g.eid=b);const w=p._getFrameworks();return w.length&&(g.fw=w.join(",")),`${d}?${(0,ie.Am)(g).slice(1)}`}function Jg(){return Jg=(0,x.A)(function*(p){const u=yield function aD(p){return Qs=Qs||function VE(p){return new Promise((u,d)=>{var g,b,w;function M(){LE(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{LE(),d(jt(p,"network-request-failed"))},timeout:sD.get()})}if(null!==(b=null===(g=ur().gapi)||void 0===g?void 0:g.iframes)&&void 0!==b&&b.Iframe)u(gapi.iframes.getContext());else{if(null===(w=ur().gapi)||void 0===w||!w.load){const j=_A("iframefcb");return ur()[j]=()=>{gapi.load?M():d(jt(p,"network-request-failed"))},ng(`${function eF(){return pc.gapiScript}()}?onload=${j}`).catch(se=>d(se))}M()}}).catch(u=>{throw Qs=null,u})}(p),Qs}(p),d=ur().gapi;return me(d,p,"internal-error"),u.open({where:document.body,url:If(p),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},g=>new Promise(function(){var b=(0,x.A)(function*(w,M){yield g.restyle({setHideOnLeave:!1});const j=jt(p,"network-request-failed"),se=ur().setTimeout(()=>{M(j)},cD.get());function Ce(){ur().clearTimeout(se),w(g)}g.ping(Ce).then(Ce,()=>{M(j)})});return function(w,M){return b.apply(this,arguments)}}()))}),Jg.apply(this,arguments)}const uD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class jE{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const pD="__/auth/handler",mD="emulator/auth/handler",gD=encodeURIComponent("fac");function hd(p,u,d,g,b,w){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,x.A)(function*(p,u,d,g,b,w){me(p.config.authDomain,p,"auth-domain-config-required"),me(p.config.apiKey,p,"invalid-api-key");const M={apiKey:p.config.apiKey,appName:p.name,authType:d,redirectUrl:g,v:Pe.SDK_VERSION,eventId:b};if(u instanceof vs){u.setDefaultLanguage(p.languageCode),M.providerId=u.providerId||"",(0,ie.Im)(u.getCustomParameters())||(M.customParameters=JSON.stringify(u.getCustomParameters()));for(const[ke,Oe]of Object.entries(w||{}))M[ke]=Oe}if(u instanceof ul){const ke=u.getScopes().filter(Oe=>""!==Oe);ke.length>0&&(M.scopes=ke.join(","))}p.tenantId&&(M.tid=p.tenantId);const j=M;for(const ke of Object.keys(j))void 0===j[ke]&&delete j[ke];const se=yield p._getAppCheckToken(),Ce=se?`#${gD}=${encodeURIComponent(se)}`:"";return`${function wn({config:p}){return p.emulator?te(p,mD):`https://${p.authDomain}/${pD}`}(p)}?${(0,ie.Am)(j).slice(1)}${Ce}`})).apply(this,arguments)}const be="webStorageSupport",ir=class Qe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vc,this._completeRedirectFn=Gg,this._overrideRedirectResult=rr}_openPopup(u,d,g,b){var w=this;return(0,x.A)(function*(){var M;er(null===(M=w.eventManagers[u._key()])||void 0===M?void 0:M.manager,"_initialize() not called before _openPopup()");const j=yield hd(u,d,g,wi(),b);return function hD(p,u,d,g=500,b=600){const w=Math.max((window.screen.availHeight-b)/2,0).toString(),M=Math.max((window.screen.availWidth-g)/2,0).toString();let j="";const se=Object.assign(Object.assign({},uD),{width:g.toString(),height:b.toString(),top:w,left:M}),Ce=(0,ie.ZQ)().toLowerCase();d&&(j=ll(Ce)?"_blank":d),ys(Ce)&&(u=u||"http://localhost",se.scrollbars="yes");const ke=Object.entries(se).reduce((Fn,[Ko,oe])=>`${Fn}${Ko}=${oe},`,"");if(function $(p=(0,ie.ZQ)()){var u;return hc(p)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(Ce)&&"_self"!==j)return function fD(p,u){const d=document.createElement("a");d.href=p,d.target=u;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(g)}(u||"",j),new jE(null);const Oe=window.open(u||"",j,ke);me(Oe,p,"popup-blocked");try{Oe.focus()}catch{}return new jE(Oe)}(u,j,bc())})()}_openRedirect(u,d,g,b){var w=this;return(0,x.A)(function*(){return yield w._originValidation(u),function GA(p){ur().location.href=p}(yield hd(u,d,g,wi(),b)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:b,promise:w}=this.eventManagers[d];return b?Promise.resolve(b):(er(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(u);return this.eventManagers[d]={promise:g},g.catch(()=>{delete this.eventManagers[d]}),g}initAndGetManager(u){var d=this;return(0,x.A)(function*(){const g=yield function Al(p){return Jg.apply(this,arguments)}(u),b=new Wg(u);return g.register("authEvent",w=>(me(w?.authEvent,u,"invalid-auth-event"),{status:b.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:b},d.iframes[u._key()]=g,b})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(be,{type:be},b=>{var w;const M=null===(w=b?.[0])||void 0===w?void 0:w[be];void 0!==M&&d(!!M),Bt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function xi(p){return Ca.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Re()||ma()||hc()}};class fo{constructor(u){this.factorId=u}_process(u,d,g){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,g);case"signin":return this._finalizeSignIn(u,d.credential);default:return En("unexpected MultiFactorSessionType")}}}class Ir extends fo{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Ir(u)}_finalizeEnroll(u,d,g){return function Yu(p,u){return Me(p,"POST","/v2/accounts/mfaEnrollment:finalize",fe(p,u))}(u,{idToken:d,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function bl(p,u){return Me(p,"POST","/v2/accounts/mfaSignIn:finalize",fe(p,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fi=(()=>{class p{constructor(){}static assertion(d){return Ir._fromCredential(d)}}return p.FACTOR_ID="phone",p})();var rt="@firebase/auth";class HE{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,x.A)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(g=>{u(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Cs(){return window}(0,ie.XA)("authIdTokenMaxAge"),function tg(p){pc=p}({loadJS:p=>new Promise((u,d)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=u,g.onerror=b=>{const w=jt("internal-error");w.customData=b,d(w)},g.type="text/javascript",g.charset="UTF-8",function Aa(){var p,u;return null!==(u=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==u?u:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Tn(p){(0,Pe._registerComponent)(new Pn.uA("auth",(u,{options:d})=>{const g=u.getProvider("app").getImmediate(),b=u.getProvider("heartbeat"),w=u.getProvider("app-check-internal"),{apiKey:M,authDomain:j}=g.options;me(M&&!M.includes(":"),"invalid-api-key",{appName:g.name});const se={apiKey:M,authDomain:j,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dt(p)},Ce=new eg(g,b,w,se);return function wA(p,u){const d=u?.persistence||[],g=(Array.isArray(d)?d:[d]).map(He);u?.errorMap&&p._updateErrorMap(u.errorMap),p._initializeWithPersistence(g,u?.popupRedirectResolver)}(Ce,d),Ce},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,g)=>{u.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new Pn.uA("auth-internal",u=>{const d=In(u.getProvider("auth").getImmediate());return new HE(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(rt,"1.7.6",function xl(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Pe.registerVersion)(rt,"1.7.6","esm2017")}("Browser");function pd(){return pd=(0,x.A)(function*(p,u,d){var g;const{BuildInfo:b}=Cs();er(u.sessionId,"AuthEvent did not contain a session ID");const w=yield function Or(p){return Fr.apply(this,arguments)}(u.sessionId),M={};return hc()?M.ibi=b.packageName:dc()?M.apn=b.packageName:Bt(p,"operation-not-supported-in-this-environment"),b.displayName&&(M.appDisplayName=b.displayName),M.sessionId=w,hd(p,d,u.type,void 0,null!==(g=u.eventId)&&void 0!==g?g:void 0,M)}),pd.apply(this,arguments)}function mo(){return(mo=(0,x.A)(function*(p){const{BuildInfo:u}=Cs(),d={};hc()?d.iosBundleId=u.packageName:dc()?d.androidPackageName=u.packageName:Bt(p,"operation-not-supported-in-this-environment"),yield ud(p,d)})).apply(this,arguments)}function On(){return(On=(0,x.A)(function*(p,u,d){const{cordova:g}=Cs();let b=()=>{};try{yield new Promise((w,M)=>{let j=null;function se(){var Oe;w();const Fn=null===(Oe=g.plugins.browsertab)||void 0===Oe?void 0:Oe.close;"function"==typeof Fn&&Fn(),"function"==typeof d?.close&&d.close()}function Ce(){j||(j=window.setTimeout(()=>{M(jt(p,"redirect-cancelled-by-user"))},2e3))}function ke(){"visible"===document?.visibilityState&&Ce()}u.addPassiveListener(se),document.addEventListener("resume",Ce,!1),dc()&&document.addEventListener("visibilitychange",ke,!1),b=()=>{u.removePassiveListener(se),document.removeEventListener("resume",Ce,!1),document.removeEventListener("visibilitychange",ke,!1),j&&window.clearTimeout(j)}})}finally{b()}})).apply(this,arguments)}function Fr(){return(Fr=(0,x.A)(function*(p){const u=function e_(p){if(er(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const u=new ArrayBuffer(p.length),d=new Uint8Array(u);for(let g=0;g<p.length;g++)d[g]=p.charCodeAt(g);return d}(p),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(b=>b.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Cf extends Wg{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInitialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInitialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,x.A)(function*(){yield u.initPromise})()}}function $E(p){return t_.apply(this,arguments)}function t_(){return(t_=(0,x.A)(function*(p){const u=yield r_()._get(_d(p));return u&&(yield r_()._remove(_d(p))),u})).apply(this,arguments)}function zE(){const p=[];for(let d=0;d<20;d++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function r_(){return He(zr)}function _d(p){return br("authEvent",p.config.apiKey,p.name)}function i_(p){if(!p?.includes("?"))return{};const[u,...d]=p.split("?");return(0,ie.I9)(d.join("?"))}const DF=class AF{constructor(){this._redirectPersistence=vc,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Gg,this._overrideRedirectResult=rr}_initialize(u){var d=this;return(0,x.A)(function*(){const g=u._key();let b=d.eventManagers.get(g);return b||(b=new Cf(u),d.eventManagers.set(g,b),d.attachCallbackListeners(u,b)),b})()}_openPopup(u){Bt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,g,b){var w=this;return(0,x.A)(function*(){!function Tf(p){var u,d,g,b,w,M,j,se,Ce,ke;const Oe=Cs();me("function"==typeof(null===(u=Oe?.universalLinks)||void 0===u?void 0:u.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),me(typeof(null===(d=Oe?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),me("function"==typeof(null===(w=null===(b=null===(g=Oe?.cordova)||void 0===g?void 0:g.plugins)||void 0===b?void 0:b.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(se=null===(j=null===(M=Oe?.cordova)||void 0===M?void 0:M.plugins)||void 0===j?void 0:j.browsertab)||void 0===se?void 0:se.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),me("function"==typeof(null===(ke=null===(Ce=Oe?.cordova)||void 0===Ce?void 0:Ce.InAppBrowser)||void 0===ke?void 0:ke.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const M=yield w._initialize(u);yield M.initialized(),M.resetRedirect(),function It(){sd.clear()}(),yield w._originValidation(u);const j=function Wo(p,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:zE(),postBody:null,tenantId:p.tenantId,error:jt(p,"no-auth-event")}}(u,g,b);yield function gd(p,u){return r_()._set(_d(p),u)}(u,j);const se=yield function $e(p,u,d){return pd.apply(this,arguments)}(u,j,d),Ce=yield function wf(p){const{cordova:u}=Cs();return new Promise(d=>{u.plugins.browsertab.isAvailable(g=>{let b=null;g?u.plugins.browsertab.openUrl(p):b=u.InAppBrowser.open(p,function X(p=(0,ie.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),d(b)})})}(se);return function Pl(p,u,d){return On.apply(this,arguments)}(u,M,Ce)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function md(p){return mo.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:g,handleOpenURL:b,BuildInfo:w}=Cs(),M=setTimeout((0,x.A)(function*(){yield $E(u),d.onEvent(yD())}),500),j=function(){var ke=(0,x.A)(function*(Oe){clearTimeout(M);const Fn=yield $E(u);let Ko=null;Fn&&Oe?.url&&(Ko=function n_(p,u){var d,g;const b=function TF(p){const u=i_(p),d=u.link?decodeURIComponent(u.link):void 0,g=i_(d).link,b=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return i_(b).link||b||g||d||p}(u);if(b.includes("/__/auth/callback")){const w=i_(b),M=w.firebaseError?function wF(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,j=null===(g=null===(d=M?.code)||void 0===d?void 0:d.split("auth/"))||void 0===g?void 0:g[1],se=j?jt(j):null;return se?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:se,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:b,postBody:null}}return null}(Fn,Oe.url)),d.onEvent(Ko||yD())});return function(Fn){return ke.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,j);const se=b,Ce=`${w.packageName.toLowerCase()}://`;Cs().handleOpenURL=function(){var ke=(0,x.A)(function*(Oe){if(Oe.toLowerCase().startsWith(Ce)&&j({url:Oe}),"function"==typeof se)try{se(Oe)}catch(Fn){console.error(Fn)}});return function(Oe){return ke.apply(this,arguments)}}()}};function yD(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:jt("no-auth-event")}}function Af(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function o_(p=(0,ie.ZQ)()){return!("file:"!==Af()&&"ionic:"!==Af()&&"capacitor:"!==Af()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function GE(){try{const p=self.localStorage,u=bc();if(p)return p.setItem(u,"1"),p.removeItem(u),!function OF(p=(0,ie.ZQ)()){return function NF(){return(0,ie.lT)()&&11===document?.documentMode}()||function kF(p=(0,ie.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,ie.zW)()}catch{return Df()&&(0,ie.zW)()}return!1}function Df(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function pi(){return(function qE(){return"http:"===Af()||"https:"===Af()}()||(0,ie.sr)()||o_())&&!function PF(){return(0,ie.lV)()||(0,ie.Ll)()}()&&GE()&&!Df()}function s_(){return o_()&&typeof document<"u"}function a_(){return(a_=(0,x.A)(function*(){return!!s_()&&new Promise(p=>{const u=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),p(!0)})})})).apply(this,arguments)}const Ri={LOCAL:"local",NONE:"none",SESSION:"session"},yd=me,Sf="persistence";function go(p){return xf.apply(this,arguments)}function xf(){return(xf=(0,x.A)(function*(p){yield p._initializationPromise;const u=kt(),d=br(Sf,p.config.apiKey,p.name);u&&u.setItem(d,p._getPersistence())})).apply(this,arguments)}function kt(){var p;try{return(null===(p=function WE(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const c_=me;class _o{constructor(){this.browserResolver=He(ir),this.cordovaResolver=He(DF),this.underlyingResolver=null,this._redirectPersistence=vc,this._completeRedirectFn=Gg,this._overrideRedirectResult=rr}_initialize(u){var d=this;return(0,x.A)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,g,b){var w=this;return(0,x.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(u,d,g,b)})()}_openRedirect(u,d,g,b){var w=this;return(0,x.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(u,d,g,b)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return s_()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return c_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,x.A)(function*(){if(u.underlyingResolver)return;const d=yield function vD(){return a_.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function ri(p){return p.unwrap()}function vd(p){return Mi(p)}function Mi(p){const{_tokenResponse:u}=p instanceof ie.g?p.customData:p;if(!u)return null;if(!(p instanceof ie.g)&&"temporaryProof"in u&&"phoneNumber"in u)return Tl.credentialFromResult(p);const d=u.providerId;if(!d||d===Wt.PASSWORD)return null;let g;switch(d){case Wt.GOOGLE:g=NA;break;case Wt.FACEBOOK:g=Yb;break;case Wt.GITHUB:g=Zb;break;case Wt.TWITTER:g=Xb;break;default:const{oauthIdToken:b,oauthAccessToken:w,oauthTokenSecret:M,pendingToken:j,nonce:se}=u;return w||M||b||j?j?d.startsWith("saml.")?dl._create(d,j):$s._fromParams({providerId:d,signInMethod:d,pendingToken:j,idToken:b,accessToken:w}):new Wu(d).credential({idToken:b,accessToken:w,rawNonce:se}):null}return p instanceof ie.g?g.credentialFromError(p):g.credentialFromResult(p)}function Pi(p,u){return u.catch(d=>{throw d instanceof ie.g&&function Tc(p,u){var d;const g=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new yo(p,function EE(p,u){var d;const g=(0,ie.Ku)(p),b=u;return me(u.customData.operationType,g,"argument-error"),me(null===(d=b.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,g,"argument-error"),Qu._fromError(g,b)}(p,u));else if(g){const b=Mi(u),w=u;b&&(w.credential=b,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(p,d),d}).then(d=>{const b=d.user;return{operationType:d.operationType,credential:vd(d),additionalUserInfo:BA(d),user:As.getOrCreate(b)}})}function bd(p,u){return l_.apply(this,arguments)}function l_(){return(l_=(0,x.A)(function*(p,u){const d=yield u;return{verificationId:d.verificationId,confirm:g=>Pi(p,d.confirm(g))}})).apply(this,arguments)}class yo{constructor(u,d){this.resolver=d,this.auth=function ED(p){return p.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return Pi(ri(this.auth),this.resolver.resolveSignIn(u))}}class As{constructor(u){this._delegate=u,this.multiFactor=function $A(p){const u=(0,ie.Ku)(p);return Pg.has(u)||Pg.set(u,IE._fromUser(u)),Pg.get(u)}(u)}static getOrCreate(u){return As.USER_MAP.has(u)||As.USER_MAP.set(u,new As(u)),As.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,x.A)(function*(){return Pi(d.auth,Cg(d._delegate,u))})()}linkWithPhoneNumber(u,d){var g=this;return(0,x.A)(function*(){return bd(g.auth,function qo(p,u,d){return Is.apply(this,arguments)}(g._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,x.A)(function*(){return Pi(d.auth,function nD(p,u,d){return $g.apply(this,arguments)}(d._delegate,u,_o))})()}linkWithRedirect(u){var d=this;return(0,x.A)(function*(){return yield go(In(d.auth)),bf(d._delegate,u,_o)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,x.A)(function*(){return Pi(d.auth,FA(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return bd(this.auth,function YA(p,u,d){return nd.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return Pi(this.auth,function tD(p,u,d){return gf.apply(this,arguments)}(this._delegate,u,_o))}reauthenticateWithRedirect(u){var d=this;return(0,x.A)(function*(){return yield go(In(d.auth)),vf(d._delegate,u,_o)})()}sendEmailVerification(u){return function mF(p,u){return ui.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,x.A)(function*(){return yield function cF(p,u){return tE.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function Ie(p,u){const d=(0,ie.Ku)(p);return(0,Pe._isFirebaseServerApp)(d.auth.app)?Promise.reject(et(d.auth)):Qt(d,u,null)}(this._delegate,u)}updatePassword(u){return function yF(p,u){return Qt((0,ie.Ku)(p),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function id(p,u){return mf.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function _F(p,u){return pE.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function Je(p,u,d){return hE.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}As.USER_MAP=new WeakMap;const Nl=me;let u_=(()=>{class p{constructor(d,g){if(this.app=d,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:b}=d.options;Nl(b,"invalid-api-key",{appName:d.name}),Nl(b,"invalid-api-key",{appName:d.name});const w=typeof window<"u"?_o:void 0;this._delegate=g.initialize({options:{persistence:d_(b,d.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(Pr),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?As.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,g){!function TA(p,u,d){const g=In(p);me(g._canInitEmulator,g,"emulator-config-failed"),me(/^https?:\/\//.test(u),g,"invalid-emulator-scheme");const b=!!d?.disableWarnings,w=Hb(u),{host:M,port:j}=function CA(p){const u=Hb(p),d=/(\/\/)?([^?#/]+)/.exec(p.substr(u.length));if(!d)return{host:"",port:null};const g=d[2].split("@").pop()||"",b=/^(\[[^\]]+\])(:|$)/.exec(g);if(b){const w=b[1];return{host:w,port:$b(g.substr(w.length+1))}}{const[w,M]=g.split(":");return{host:w,port:$b(M)}}}(u);g.config.emulator={url:`${w}//${M}${null===j?"":`:${j}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:M,port:j,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:b})}),b||function zb(){function p(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,d,g)}applyActionCode(d){return function Dg(p,u){return cE.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return lE(this._delegate,d)}confirmPasswordReset(d,g){return function LA(p,u,d){return nr.apply(this,arguments)}(this._delegate,d,g)}createUserWithEmailAndPassword(d,g){var b=this;return(0,x.A)(function*(){return Pi(b._delegate,function Wi(p,u,d){return uE.apply(this,arguments)}(b._delegate,d,g))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function pF(p,u){return xg.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function dF(p,u){const d=tf.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,x.A)(function*(){Nl(pi(),d._delegate,"operation-not-supported-in-this-environment");const g=yield function NE(p,u){return Cl.apply(this,arguments)}(d._delegate,_o);return g?Pi(d._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function SF(p,u){In(p)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,g,b){const{next:w,error:M,complete:j}=kl(d,g,b);return this._delegate.onAuthStateChanged(w,M,j)}onIdTokenChanged(d,g,b){const{next:w,error:M,complete:j}=kl(d,g,b);return this._delegate.onIdTokenChanged(w,M,j)}sendSignInLinkToEmail(d,g){return function uF(p,u,d){return bs.apply(this,arguments)}(this._delegate,d,g)}sendPasswordResetEmail(d,g){return function lF(p,u,d){return qt.apply(this,arguments)}(this._delegate,d,g||void 0)}setPersistence(d){var g=this;return(0,x.A)(function*(){let b;switch(function bD(p,u){yd(Object.values(Ri).includes(u),p,"invalid-persistence-type"),(0,ie.lV)()?yd(u!==Ri.SESSION,p,"unsupported-persistence-type"):(0,ie.Ll)()?yd(u===Ri.NONE,p,"unsupported-persistence-type"):Df()?yd(u===Ri.NONE||u===Ri.LOCAL&&(0,ie.zW)(),p,"unsupported-persistence-type"):yd(u===Ri.NONE||GE(),p,"unsupported-persistence-type")}(g._delegate,d),d){case Ri.SESSION:b=vc;break;case Ri.LOCAL:b=(yield He(vl)._isAvailable())?vl:zr;break;case Ri.NONE:b=Ee;break;default:return Bt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(b)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return Pi(this._delegate,function bg(p){return Eg.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return Pi(this._delegate,zs(this._delegate,d))}signInWithCustomToken(d){return Pi(this._delegate,function fl(p,u){return va.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,g){return Pi(this._delegate,function VA(p,u,d){return(0,Pe._isFirebaseServerApp)(p.app)?Promise.reject(et(p)):zs((0,ie.Ku)(p),Qb.credential(u,d)).catch(function(){var g=(0,x.A)(function*(b){throw"auth/password-does-not-meet-requirements"===b.code&&ln(p),b});return function(b){return g.apply(this,arguments)}}())}(this._delegate,d,g))}signInWithEmailLink(d,g){return Pi(this._delegate,function hF(p,u,d){return dE.apply(this,arguments)}(this._delegate,d,g))}signInWithPhoneNumber(d,g){return bd(this._delegate,function ff(p,u,d){return wl.apply(this,arguments)}(this._delegate,d,g))}signInWithPopup(d){var g=this;return(0,x.A)(function*(){return Nl(pi(),g._delegate,"operation-not-supported-in-this-environment"),Pi(g._delegate,function eD(p,u,d){return Hg.apply(this,arguments)}(g._delegate,d,_o))})()}signInWithRedirect(d){var g=this;return(0,x.A)(function*(){return Nl(pi(),g._delegate,"operation-not-supported-in-this-environment"),yield go(g._delegate),ni(g._delegate,d,_o)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function nt(p,u){return ml.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=Ri,p})();function kl(p,u,d){let g=p;"function"!=typeof p&&({next:g,error:u,complete:d}=p);const b=g;return{next:M=>b(M&&As.getOrCreate(M)),error:u,complete:d}}function d_(p,u){const d=function KE(p,u){const d=kt();if(!d)return[];const g=br(Sf,p,u);switch(d.getItem(g)){case Ri.NONE:return[Ee];case Ri.LOCAL:return[vl,vc];case Ri.SESSION:return[vc];default:return[]}}(p,u);if(typeof self<"u"&&!d.includes(vl)&&d.push(vl),typeof window<"u")for(const g of[zr,vc])d.includes(g)||d.push(g);return d.includes(Ee)||d.push(Ee),d}class Ol{constructor(){this.providerId="phone",this._delegate=new Tl(ri(Ve.A.auth()))}static credential(u,d){return Tl.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}Ol.PHONE_SIGN_IN_METHOD=Tl.PHONE_SIGN_IN_METHOD,Ol.PROVIDER_ID=Tl.PROVIDER_ID;const Rf=me;class h_{constructor(u,d,g=Ve.A.app()){var b;Rf(null===(b=g.options)||void 0===b?void 0:b.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new zo(g.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ot(p){p.INTERNAL.registerComponent(new Pn.uA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),g=u.getProvider("auth");return new u_(d,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Qb,FacebookAuthProvider:Yb,GithubAuthProvider:Zb,GoogleAuthProvider:NA,OAuthProvider:Wu,SAMLAuthProvider:nf,PhoneAuthProvider:Ol,PhoneMultiFactorGenerator:fi,RecaptchaVerifier:h_,TwitterAuthProvider:Xb,Auth:u_,AuthCredential:mc,Error:ie.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.11")}(Ve.A)},467:(Us,jr,ft)=>{function x(Pe,ie,$t,Ue,Pn,Hr,Wt){try{var pe=Pe[Hr](Wt),ye=pe.value}catch(Be){return void $t(Be)}pe.done?ie(ye):Promise.resolve(ye).then(Ue,Pn)}function Ve(Pe){return function(){var ie=this,$t=arguments;return new Promise(function(Ue,Pn){var Hr=Pe.apply(ie,$t);function Wt(ye){x(Hr,Ue,Pn,Wt,pe,"next",ye)}function pe(ye){x(Hr,Ue,Pn,Wt,pe,"throw",ye)}Wt(void 0)})}}ft.d(jr,{A:()=>Ve})},635:(Us,jr,ft)=>{function ie(K,te){var ue={};for(var de in K)Object.prototype.hasOwnProperty.call(K,de)&&te.indexOf(de)<0&&(ue[de]=K[de]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var we=0;for(de=Object.getOwnPropertySymbols(K);we<de.length;we++)te.indexOf(de[we])<0&&Object.prototype.propertyIsEnumerable.call(K,de[we])&&(ue[de[we]]=K[de[we]])}return ue}function Be(K,te,ue,de){return new(ue||(ue=Promise))(function(fe,Me){function Pt(At){try{Xe(de.next(At))}catch(cn){Me(cn)}}function Gn(At){try{Xe(de.throw(At))}catch(cn){Me(cn)}}function Xe(At){At.done?fe(At.value):function we(fe){return fe instanceof ue?fe:new ue(function(Me){Me(fe)})}(At.value).then(Pt,Gn)}Xe((de=de.apply(K,te||[])).next())})}function mn(K){return this instanceof mn?(this.v=K,this):new mn(K)}function Bt(K,te,ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,de=ue.apply(K,te||[]),fe=[];return we={},Pt("next"),Pt("throw"),Pt("return",function Me(Ye){return function(tr){return Promise.resolve(tr).then(Ye,cn)}}),we[Symbol.asyncIterator]=function(){return this},we;function Pt(Ye,tr){de[Ye]&&(we[Ye]=function(Nn){return new Promise(function(vr,zt){fe.push([Ye,Nn,vr,zt])>1||Gn(Ye,Nn)})},tr&&(we[Ye]=tr(we[Ye])))}function Gn(Ye,tr){try{!function Xe(Ye){Ye.value instanceof mn?Promise.resolve(Ye.value.v).then(At,cn):hs(fe[0][2],Ye)}(de[Ye](tr))}catch(Nn){hs(fe[0][3],Nn)}}function At(Ye){Gn("next",Ye)}function cn(Ye){Gn("throw",Ye)}function hs(Ye,tr){Ye(tr),fe.shift(),fe.length&&Gn(fe[0][0],fe[0][1])}}function Ii(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,te=K[Symbol.asyncIterator];return te?te.call(K):(K=function Kt(K){var te="function"==typeof Symbol&&Symbol.iterator,ue=te&&K[te],de=0;if(ue)return ue.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&de>=K.length&&(K=void 0),{value:K&&K[de++],done:!K}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ue={},de("next"),de("throw"),de("return"),ue[Symbol.asyncIterator]=function(){return this},ue);function de(fe){ue[fe]=K[fe]&&function(Me){return new Promise(function(Pt,Gn){!function we(fe,Me,Pt,Gn){Promise.resolve(Gn).then(function(Xe){fe({value:Xe,done:Pt})},Me)}(Pt,Gn,(Me=K[fe](Me)).done,Me.value)})}}}ft.d(jr,{AQ:()=>Bt,N3:()=>mn,Tt:()=>ie,sH:()=>Be,xN:()=>Ii}),"function"==typeof SuppressedError&&SuppressedError}},Us=>{Us(Us.s=553)}]);